;===========================================================
;var使用说明
;var(1)   空闲
;var(2)   禁锢の力量启动条件
;var(3)   空闲
;var(4)   ?
;var(5)   空闲
;var(6)   空闲
;var(7)   juggle
;var(8)   开场以及胜利随机动作
;var(9)   防止214手可以无脑当身压制
;var(10)  是否参与某系统游戏包的开关
;var(11)  气功拳等技能的闪光控制（可能会无用）
;var(12)  招式方向指令
;var(13)  招式指令
;var(14)  空闲？暂不明了
;var(15)  214手衍生技能缓冲
;var(17)  进入roundstate = 2 后经过的时间 用于反bt系统
;var(25)  记录敌人的时常战场停留的helper（600time记录一次）
;var(28)  记录敌人是否是开局即不自重（暂无实现）
;var(30)  空中动作击中
;var(35)  记录敌人开局战场停留的helper（当时常helper低于开局helper 会刷新开局helper）
;var(37)  背景渐变参数
;var(38)  反bt触发条件2
;var(39)  魔龙斩空咬ai控制 以及3级能量控制
;var(41)  ai下轻脚控制 可以省略 |替换为攻击方式控制
;var(42)  部分技能的声音套餐控制
;var(47)  记录敌人正面移动动作编号
;var(48)  记录敌人背面移动动作编号
;var(49)  识别对手是否是瞬间无敌移动
;var(50)  霸体识别开关
;var(54)  三局两胜最终局判断
;var(55)  AI攻击方式变换英子(每time%200=0随机一次回合数越靠后随机区间值越大)
;var(56)  ai判断敌人是否是无敌移动技能
;var(57)  AI难度提升英子(记录AI LEVEL数据仅能用于新版)
;var(58)  反bt等级 var(58)越高对方bt级别越高
;var(59)  AI开关
;轩辕诗
;---------------------------------------------------------------------------
;fvar(29)  空闲
;fvar(39)  据对方防御力微调攻击力
;---------------------------------------------------------------------------
;anim 782 2705无用
;---------------------------------------------------------------------------

[StateDef 852]
type = S
movetype = U
physics = S
ctrl = 0

[State Land]
type = selfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52
ctrl = 0

[State 810, 2]
type = DestroySelf
trigger1 = time >= 0

[State Land]
type = ChangeState
trigger1 = time >= 0
value = 0
ctrl = 1

[StateDef 850]
type = S
movetype = U
physics = S
anim = 130
velset = 0,0
juggle = 1+var(7) 
ctrl = 0

;AI青龙
[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = power >= 1000
triggerall = p2bodydist y = [-110,-55]
trigger1 = p2life > 350
trigger2 = life < p2life
value = ifelse(power>2000,ifelse(random<500,3410,3250),ifelse(random<500,3400,3200))

;AI凤凰
[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = p2bodydist y = [-210,-55]
trigger1 = p2life > 350
trigger2 = life < p2life
value = ifelse(power>2000,ifelse(random<500,4250,3030),ifelse(random<500,4200,3020))

[State Land]
type = ChangeState
trigger1 = time >= 60
value = 0
ctrl = 1

[StateDef 834]
type = A
movetype = A
physics = N
anim = 1005
velset = 0,0
juggle = 1+var(7) 
ctrl = 0

[state 830]
type = nothitby
trigger1 = 1
value = sac
time = 1

[State 5010, 4] ;Freeze anim
type = ChangeAnim
Trigger1 = p2name = "Evil Ken" || p4name = "Evil Ken"
trigger1 = p2stateno != [3960,4000]
value = 1067

[State 1650, 1]
type = ReversalDef
trigger1 = animelem = 1
reversal.attr = SCA,NA,SA ,AP,NP,SP,HP,HA; SCA,NA,SA
numhits = 0
pausetime = 10,20
sparkno = S733
p2stateno = 9021
hitsound = 6,0

[State 205, 3]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype = light
damage = 999,999
priority = 7, Hit
guardflag = MA
pausetime = 15,15
sparkno = S735
p2stateno = 4617
guard.sparkno = S733
sparkxy = -10,-70
hitsound = S210,0
guardsound = S150,0
ground.type = high
ground.slidetime = 0
ground.hittime = 6
ground.velocity = -3.5
air.velocity = -3.5,-6
guard.velocity = -5.5
getpower = 30,10
givepower = 10
yaccel = .5 

[State 810, 2]
type = DestroySelf
trigger1 = anim = 1005
trigger1 = time >= 2
trigger2 = anim = 1067
trigger2 = time >= 60
trigger3 = movehit

[StateDef 835]
type = A
movetype = A
physics = N
anim = 1005
velset = 0,0
juggle = 1+var(7) 
ctrl = 0

[state 830]
type = nothitby
trigger1 = 1
value = sac
time = 1

[State 5010, 4] ;Freeze anim
type = ChangeAnim
Trigger1 = p2name = "Evil Ken" || p4name = "Evil Ken"
trigger1 = p2stateno != [3960,4000]
value = 1067

[state 9500,1]
type = ReversalDef
trigger1 = timemod = 10,0
attr = S,NA
reversal.attr = SA, NA, SA, HA, SP, HP, NP
pausetime = 0,0
sparkxy = 35,-80
sparkno = -1
sprpriority = 2
p2stateno = 831

[State 810, 2]
type = DestroySelf
trigger1 = anim = 1005
trigger1 = time >= 2
trigger2 = anim = 1067
trigger2 = time >= 60
trigger3 = movehit

[StateDef 845]
type = A
movetype = A
physics = N
anim = 1005
velset = 0,0
juggle = 1+var(7) 
ctrl = 0

[state 830]
type = nothitby
trigger1 = 1
value = sac
time = 10

[State 205, 3]
type = HitDef
trigger1 = root,fvar(10)=0
trigger1 = time = 0
attr = S, NA
animtype = light
damage = 50
priority = 7, Hit
guardflag = MA
pausetime = 13,15
sparkno = S736
guard.sparkno = S733
sparkxy = -10,-70
hitsound = S4040,1
guardsound = S150,0
ground.type = high
ground.slidetime = 0
ground.hittime = 6
ground.velocity = -3.5
air.velocity = -1,-9
guard.velocity = -5.5
id = 845
kill = 0
fall = 1
fall.recover = 0
getpower = 30,10
givepower = 10
palfx.time = 85
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .5 

[State 205, 3]
type = HitDef
trigger1 = root,fvar(10)!=0
trigger1 = time = 0
attr = S, NA
animtype = light
damage = 50
priority = 7, Hit
guardflag = MA
pausetime = 13,15
sparkno = S736
guard.sparkno = S733
sparkxy = -10,-70
hitsound = S3000,1
guardsound = S150,0
ground.type = high
ground.slidetime = 0
ground.hittime = 6
ground.velocity = -3.5
air.velocity = -1,-9
guard.velocity = -5.5
id = 845
kill = 0
fall = 1
fall.recover = 0
getpower = 30,10
givepower = 10
palfx.time = 85
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .5 

[state pause]
type = pause
trigger1 = root,fvar(10)=1
time = 1

[State 810, 2]
type = DestroySelf
trigger1 = anim = 1005
trigger1 = time >= 2
trigger2 = anim = 1067
trigger2 = time >= 60
trigger3 = movehit

[StateDef 830]
type = A
movetype = A
physics = N
anim = 830
poweradd = -500
velset = 0,0
juggle = 1+var(7) 
ctrl = 0

[state velset]
type = velset
trigger1 = time = 0
y = -5

[State Gravity]
type = VelAdd
trigger1 = vel Y != 0
y = .3

[State 821, 5]
type = Width
trigger1 = animelemtime(2) = 0
player = 15,0
edge = 15

[State 821, 5]
type = Width
trigger1 = animelemtime(2) = 1
player = 30,0
edge = 30

[state 830]
type = nothitby
trigger1 = 1
value = sac
time = 10
ignorehitpause = 1

[State 4810, PalFX]
type = PalFX
trigger1 = Time = 0
time = 5
add = 255,255,255
ignorehitpause = 1

[state 9500,1]
type = ReversalDef
trigger1 = timemod = 10,0
attr = S,NA
reversal.attr = SA, NA, SA, HA, SP, HP, NP
pausetime = 0,0
sparkxy = 35,-80
sparkno = -1
sprpriority = 2
p2stateno = 831

[State -2, 1] 
type = Helper
trigger1 = time =2
helpertype	= player
stateno = 163
id = 163
pos = -20,-80
postype = p1
ownpal = 1
supermovetime = 99
pausemovetime = 99
keyctrl = 1
ownpal = 1
size.ground.back = 0
size.ground.front = 0
size.air.back = 0
size.air.front = 0

[State -2, 1] 
type = Helper
trigger1 = time =2
helpertype	= player
stateno = 163
id = 163
pos = -20,10
postype = p1
ownpal = 1
supermovetime = 99
pausemovetime = 99
keyctrl = 1
ownpal = 1
size.ground.back = 0
size.ground.front = 0
size.air.back = 0
size.air.front = 0

[State 3784]
type = Explod
trigger1 = animelem = 1
ignorehitpause = 1 
anim = 741
pos = 76,-80
postype = p1
sprpriority = 3
supermovetime = 99
pausemovetime = 99
ownpal = 1

[State 821, 5]
type = playsnd
trigger1 = time = 0
value = 167,0

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 2995,ifelse(random<500,50,58)
channel = 0

[State Land]
type = selfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52
ctrl = 0

[Statedef 831]
movetype= H
physics = N
ctrl = 0

[State 810, 2]
type = HitBy
trigger1 = Time >= 0
value = SCA, AA, AT, AP, SP, HP, NP, NA
time = 10

[State 810, 2]
type = statetypeset
triggerall = Time = 0
trigger1 = vel Y != 0
trigger2 = pos y < 0
statetype = a

[State 810, 2]
type = veladd
trigger1 = statetype = a
trigger1 = vel Y = 0
y = -2

[State 810, 2]
type = veladd
trigger1 = vel Y != 0
y = .2

[State 810, 2]
type = statetypeset
trigger1 = vel Y = 0
statetype = s
physics = s

[State 810, 2]
type = posset
trigger1 = statetype = s
trigger1 = pos y > 0
y = 0

[State 810, 2]
type = DestroySelf
trigger1 = Time >= 0

[State 820, 2]
type = EnvColor 
Trigger1 = Time = 0
time = 1
Value = 250,250,250

[State 810, 2]
type = changeanim
trigger1 = statetype != A
trigger1 = pos y = 0
trigger1 = animtime = 0
trigger1 = time < 12
value = 0

[State 821, 5]
type = SelfState
triggerall = statetype != A
trigger1 = (animtime = 0)||(time >= 120)
trigger2 = anim = 0
trigger2 = time >= 5
value = 0
ctrl = 1

[State 821, 5]
type = SelfState
trigger1 = statetype = A
trigger1 = vel y > 0
trigger1 = pos y >= 0
trigger2 = pos Y > 20
value = 52

;--开局即挨打判断--------------------------------------------------
[Statedef 820]
type    = A
movetype= I
anim = 3008
physics = N
velset = 0,0
ctrl = 0

[state bindtoroot]
type = bindtoroot
trigger1 = 1
pos = 5,-30
time = 1

[State 810, 2]
type = varadd
trigger1 = roundstate = 2
var(1) = 1

[State 810, 2]
type = DestroySelf
trigger1 = var(1) = 60

[State 280, ARMOR]
type = Hitby
trigger1 = 1
time = 1
value = SCA, AA, AP, AT

[State 280, ARMOR]
type = HitOverride
trigger1 = ishelper
trigger1 = 1
time = 10000
attr = SCA, AA, AP, AT
stateno = 821

[State 821, 5]
type = SelfState
trigger1 = !ishelper
trigger1 = time = 0
value = 5050

[Statedef 821]
type    = A
movetype= H
anim = 3008
physics = N
velset = 0,0
ctrl = 0

[state bindtoroot]
type = bindtoroot
trigger1 = 1
pos = 5,-30
time = 1

[state DefenceMulSet]
type = ParentVarAdd
trigger1 = time = 0
persistent = 0
var(28) = gethitvar(damage)

[State 280, ARMOR]
type = Hitby
trigger1 = 1
time = 1
value = SCA, AA, AP, AT

[State 280, ARMOR]
type = HitOverride
trigger1 = 1
time = 10000
attr = SCA, AA, AP, AT
stateno = 821

[State 810, 2]
type = varadd
trigger1 = roundstate = 2
var(1) = 1

[State 810, 2]
type = DestroySelf
trigger1 = var(1) = 60

[State 821, 5]
type = SelfState
trigger1 = ishelper
trigger1 = time >= 1
value = 820

[State 821, 5]
type = SelfState
trigger1 = !ishelper
trigger1 = time = 0
value = 5050

;---------------------------------------------------
;站立格挡 blocking 
[Statedef 160]
type    = S
movetype= I
physics = S
facep2 = 1
sprpriority = 3
anim = 160
velset = 0,0
ctrl = 0

[State 821, 5]
type = Width
trigger1 = time = 0
player = 15,0
edge = 15

[State 821, 5]
type = playsnd
trigger1 = time = 0
value = 220,20

[State 4810, PalFX]
type = PalFX
trigger1 = Time = 0
time = 1
add = 255,255,255
ignorehitpause = 1

[State 3784]
type = Explod
trigger1 = animelem = 1
ignorehitpause = 1 
anim = 740
pos = 27,-61
postype = p1
sprpriority = 5
supermovetime = 99
pausemovetime = 99
ownpal = 1

[State 810, 2]
type = notHitBy
trigger1 = 1
value = SCA
time = 10

[State 821, 5]
type = pause
trigger1 = time = 0
time = 23
movetime = 5

[state changestate]
type = changestate
trigger1 = var(59)!=0
trigger1 = animtime = 0
trigger1 = random<700
trigger1 = p2bodydist x = [-30,35]
value = ifelse(random<500,225,425)

[state changestate]
type = changestate
trigger1 = var(59)!=0
trigger1 = animtime = 0
trigger1 = random<500
trigger1 = p2bodydist x = [-35,75]
value = 410

[State 821, 5]
type = SelfState
trigger1 = animtime = 0
value = 0
ctrl = 1

;蹲下格挡
[Statedef 161]
type    = C
movetype= I
physics = C
facep2 = 1
sprpriority = 3
anim = 161
velset = 0,0
ctrl = 0

[State 821, 5]
type = Width
trigger1 = time = 0
player = 15,0
edge = 15

[State 821, 5]
type = playsnd
trigger1 = time = 0
value = 220,20

[State 4810, PalFX]
type = PalFX
trigger1 = Time = 0
time = 1
add = 255,255,255
ignorehitpause = 1

[State 3784]
type = Explod
trigger1 = animelem = 1
ignorehitpause = 1 
anim = 740
pos = 13,-42
postype = p1
sprpriority = 5
supermovetime = 99
pausemovetime = 99
ownpal = 1

[State 810, 2]
type = notHitBy
trigger1 = 1
value = SCA
time = 10

[State 821, 5]
type = pause
trigger1 = time = 0
time = 23
movetime = 3

[state changestate]
type = changestate
trigger1 = var(59)!=0
trigger1 = animtime = 0
trigger1 = random<700
trigger1 = p2bodydist x = [-30,35]
value = ifelse(random<500,225,425)

[state changestate]
type = changestate
trigger1 = var(59)!=0
trigger1 = animtime = 0
trigger1 = random<500
trigger1 = p2bodydist x = [35,75]
value = 410

[State 821, 5]
type = SelfState
trigger1 = animtime = 0
value = 11
ctrl = 1

;反向格挡
[Statedef 162]
type    = C
movetype= I
physics = C
facep2 = 1
poweradd = -500
sprpriority = 3
anim = 162
velset = 0,0
ctrl = 0

[State 4810, PalFX]
type = PalFX
trigger1 = Time = 1
time = 5
add = 255,255,255
ignorehitpause = 1

[State 821, 5]
type = Width
trigger1 = time = 0
player = 15,0
edge = 15


[State 821, 5]
type = playsnd
trigger1 = time = 0
value = 220,20

[State 3784]
type = Explod
trigger1 = animelem = 2
ignorehitpause = 1 
anim = 740
pos = 13,-62
postype = p1
sprpriority = 5
supermovetime = 99
pausemovetime = 99
ownpal = 1

[State 810, 2]
type = notHitBy
trigger1 = 1
value = SCA
time = 10

[State 821, 5]
type = pause
trigger1 = time = 0
time = 23
movetime = 8

[state changestate]
type = changestate
trigger1 = var(59)!=0
trigger1 = animtime = 0
trigger1 = random<700
trigger1 = p2bodydist x = [-30,35]
value = ifelse(random<500,225,425)

[state changestate]
type = changestate
trigger1 = var(59)!=0
trigger1 = animtime = 0
trigger1 = random<500
trigger1 = p2bodydist x = [35,75]
value = 410

[State 821, 5]
type = SelfState
trigger1 = animtime = 0
value = 11
ctrl = 1

;防御中滑动
[Statedef 165]
type    = S
movetype= I
facep2 = 1
physics = S
powadd = -500
velset = 0,0
ctrl = 0

[State 821, 5]
type = changeanim
trigger1 = time = 1
value = 165

[State 810, 2]
type = velset
trigger1 = time = [0,15]
x = 6

[State 210, 1]
type = PlaySnd
trigger1 = Time = 2
value = 200,ifelse(random<500,7,8)

[State 210, 1]
type = PlaySnd
trigger1 = Time = 2
value = 2000,9

[State 4810, PalFX]
type = PalFX
trigger1 = Time = 1
time = 5
add = 100,100,180
mul = 256,256,256
sinadd = -80,-80,-80,10
invertall = 0
ignorehitpause = 1

[State 810, 2]
type = notHitBy
trigger1 = 1
value = SCA
time = 10

[State 821, 5]
type = pause
trigger1 = time = 0
time = 3

[State 821, 5]
type = pause
trigger1 = time = 1
time = 10
movetime = 10

[State 821, 5]
type = SelfState
triggerall = anim = 165
trigger1 = animtime = 0
value = 0
ctrl = 1

;防御推开（站立）
[StateDef 167]
type = S
movetype = A
physics = S
anim = 750
facep2 = 1
velset = 0,0
ctrl = 0

[State 821, 5]
type = Width
trigger1 = animelemtime(2) = 0
player = 15,0
edge = 15

[State 821, 5]
type = Width
trigger1 = animelemtime(2) = 1
player = 30,0
edge = 30

[State 821, 5]
type = velset
trigger1 = time = 3
x = 5

[State 821, 5]
type = velset
triggerall = enemynear,BackEdgeBodyDist <= 3
trigger1 = time = 6
x = -15

[State -2, 1] 
type = Helper
trigger1 = time =2
helpertype	= player
stateno = 163
id = 163
pos = -20,-60
postype = p1
ownpal = 1
supermovetime = 99
pausemovetime = 99
keyctrl = 1
ownpal = 1
size.ground.back = 0
size.ground.front = 0
size.air.back = 0
size.air.front = 0

[State 3784]
type = Explod
trigger1 = animelem = 1
ignorehitpause = 1 
anim = 741
pos = 76,-60
postype = p1
sprpriority = 3
supermovetime = 99
pausemovetime = 99
ownpal = 1

[State 810, 2]
type = notHitBy
trigger1 = 1
value = SCA
time = 10

[State 821, 5]
type = playsnd
trigger1 = time = 0
value = 167,0

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 2995,ifelse(random<500,50,58)
channel = 0

[State 821, 5]
type = pause
trigger1 = time = 8
time = 13
movetime = 2

[State Land]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;防御推开（蹲下）
[StateDef 168]
type = C
movetype = A
physics = C
anim = 751
facep2 = 1
velset = 0,0
ctrl = 0

[State 821, 5]
type = Width
trigger1 = animelemtime(2) = 0
player = 15,0
edge = 15

[State 821, 5]
type = Width
trigger1 = animelemtime(2) = 1
player = 30,0
edge = 30

[State 821, 5]
type = velset
trigger1 = time = 3
x = 5

[State 821, 5]
type = velset
triggerall = enemynear,BackEdgeBodyDist <= 3
trigger1 = time = 6
x = -15

[State -2, 1] 
type = Helper
trigger1 = time =2
helpertype	= player
stateno = 163
id = 163
pos = -20,-60
postype = p1
ownpal = 1
supermovetime = 99
pausemovetime = 99
keyctrl = 1
ownpal = 1
size.ground.back = 0
size.ground.front = 0
size.air.back = 0
size.air.front = 0

[State 3784]
type = Explod
trigger1 = animelem = 1
ignorehitpause = 1 
anim = 741
pos = 76,-45
postype = p1
sprpriority = 3
supermovetime = 99
pausemovetime = 99
ownpal = 1

[State 810, 2]
type = notHitBy
trigger1 = 1
value = SCA
time = 10

[State 821, 5]
type = playsnd
trigger1 = time = 0
value = 167,0

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 2995,ifelse(random<500,50,58)
channel = 0

[State 821, 5]
type = pause
trigger1 = time = 8
time = 13
movetime = 3

[State Land]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1

;防御推开（空中）
[StateDef 169]
type = A
movetype = A
physics = n
anim = 752
facep2 = 1
velset = 0,0
ctrl = 0

[State 821, 5]
type = Width
trigger1 = animelemtime(2) = 0
player = 15,0
edge = 15

[State 821, 5]
type = Width
trigger1 = animelemtime(2) = 1
player = 30,0
edge = 30

[State 821, 5]
type = Statetypeset
trigger1 = animelemtime(2) = 3
physics = A

[State 821, 5]
type = velset
trigger1 = time = 0
y = -1.5

[State 821, 5]
type = velset
trigger1 = time = 3
x = 2.5

[State 821, 5]
type = velset
triggerall = enemynear,BackEdgeBodyDist <= 3
trigger1 = time = 6
x = -15

[State -2, 1] 
type = Helper
trigger1 = time =2
helpertype	= player
stateno = 163
id = 163
pos = -20,-80
postype = p1
ownpal = 1
supermovetime = 99
pausemovetime = 99
keyctrl = 1
ownpal = 1
size.ground.back = 0
size.ground.front = 0
size.air.back = 0
size.air.front = 0

[State -2, 1] 
type = Helper
trigger1 = time =2
helpertype	= player
stateno = 163
id = 163
pos = -20,10
postype = p1
ownpal = 1
supermovetime = 99
pausemovetime = 99
keyctrl = 1
ownpal = 1
size.ground.back = 0
size.ground.front = 0
size.air.back = 0
size.air.front = 0

[State 3784]
type = Explod
trigger1 = animelem = 1
ignorehitpause = 1 
anim = 741
pos = 76,-80
postype = p1
sprpriority = 3
supermovetime = 99
pausemovetime = 99
ownpal = 1


[State 810, 2]
type = notHitBy
trigger1 = 1
value = SCA
time = 10

[State 821, 5]
type = playsnd
trigger1 = time = 0
value = 167,0

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 2995,ifelse(random<500,50,58)
channel = 0

[State 821, 5]
type = pause
trigger1 = time = 8
time = 13
movetime = 13

;AI通用----------

[State 100, 5]
type = ChangeState
triggerall = animelemtime(4) >= 6
triggerall = (var(55) = [0,4])||(var(55) = [20,24])||(var(55) = [40,45])||(var(55) = [60,65])||(var(55) = [80,85])||(var(55) = [100,106])
trigger1 = var(39) = 0
trigger1 = p2statetype != A
trigger1 = random<700
trigger1 = vel y > 0
trigger1 = p2bodydist x = [-10,90]
trigger1 = p2bodydist y = [-10,100]
value = ifelse(vel x>0,611,ifelse(vel x=0,610,639))

[State 100, 5]
type = ChangeState
triggerall = animelemtime(4) >= 6
triggerall = (var(55) = [0,4])||(var(55) = [20,24])||(var(55) = [40,45])||(var(55) = [60,65])||(var(55) = [80,85])||(var(55) = [100,106])
trigger1 = var(39) = 0
trigger1 = p2bodydist x = [-10,90]
trigger1 = random<700
trigger1 = p2statetype = A
value = ifelse(vel x>0,611,ifelse(vel x=0,610,639))

[State 100, 5]
type = ChangeState
triggerall = animelemtime(4) >= 6
triggerall = (var(55) = [5,7])||(var(55) = [25,28])||(var(55) = [45,48])||(var(55) = [66,69])||(var(55) = [86,89])||(var(55) = [107,110])
trigger1 = var(39) = 0
trigger1 = p2bodydist x = [-10,90]
trigger1 = p2statetype = A
value = 615

[State 100, 5]
type = ChangeState
triggerall = animelemtime(4) >= 6
triggerall = (var(55) = [5,7])||(var(55) = [25,28])||(var(55) = [45,48])||(var(55) = [66,69])||(var(55) = [86,89])||(var(55) = [107,110])
trigger1 = var(39) = 0
trigger1 = p2bodydist x = [-10,90]
trigger1 = p2statetype != A
trigger1 = vel y > 0
value = 615

[State Land]
type = ctrlset
trigger1 = animelemtime(4) = 6
value = 1

;推开体
[StateDef 163]
type = S
movetype = A
physics = N
anim = 3008
velset = 20,0
ctrl = 0

[State 821, 5]
type = Width
trigger1 = 1
player = 30,30

[state statetypeset]
type = statetypeset
trigger1 = time = 7
physics = S

[State 810, 2]
type = notHitBy
trigger1 = 1
value = SCA
time = 10

[State 810, 2]
type = DestroySelf
trigger1 = root,stateno != 830
trigger1 = Time >= 13
trigger2 = root,stateno = 830
trigger2 = time >=5
;---------------------------------------------------

; Stand
[Statedef 0]
type = S
physics = S
sprpriority = 0

[state 20]
type = ctrlset 
trigger1 = anim = [180,189]
value = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = fvar(14)
trigger1 = Anim != 5
trigger1 = P2Dist X <0
value = 5

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State -2, def]
type = ctrlSet
triggerall = fvar(14) = 1
trigger1 = time = 0
value = 0

[State 0, Turn]
type = Turn
trigger1 = fvar(14)
trigger1 = P2Dist X <0
trigger1 = Anim != ifelse(fvar(10)=1,1,0)
trigger1 = Anim = 5 && AnimElem = 1


[State 0, CtrlSet]
type = CtrlSet
trigger1 = ctrl = 0
trigger1 = roundstate = 3
value = 1

[State 0, VarSet]
type = VarSet
triggerall = fvar(14)
triggerall = !fvar(1)
trigger1 = time = 0
fv = 1
value = 1

[State 0, 1]
type = ChangeAnim
triggerall = Anim != [180,189]
trigger1 = Anim != ifelse(fvar(10)=1,1,0) && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = ifelse(fvar(10)=1,1,0)

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < 2
trigger2 = Time = 4
x = 0

[State 0, 4] ;Are you dead?
type = ChangeState
triggerall = anim = 1
triggerall = alive
trigger1 = time > 300
trigger1 = animtime = 0
trigger1 = random>700
value = 2

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050

; Stand
[Statedef 2]
type = S
physics = S
anim = 2
sprpriority = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = alive
trigger1 = animtime = 0
value = 0


[Statedef 20]
type    = S
physics = S
sprpriority = 0

[state 20]
type = ctrlset 
trigger1 = anim = [180,189]
value = 0

[State -2, def]
type = ctrlSet
triggerall = fvar(14) = 1
trigger1 = time = 0
value = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = fvar(14)
trigger1 = Anim != 5
trigger1 = P2Dist X <0
value = 5

[State 0, ChangeState]
type = ChangeState
trigger1 = fvar(14)
trigger1 = P2MoveType = A
trigger1 = partner,command = "holdback"
trigger1 = inguarddist
value = 120
ctrl = 1

[State 0, Turn]
type = Turn
trigger1 = fvar(14)
trigger1 = P2Dist X <0
trigger1 = Anim != 0
trigger1 = Anim = 5 && AnimElem = 1

[State 0, CtrlSet]
type = CtrlSet
trigger1 = ctrl = 0
trigger1 = roundstate = 3
value = 1

[State 0, VarSet]
type = VarSet
triggerall = fvar(14)
triggerall = !fvar(1)
trigger1 = time = 0
fv = 1
value = 1

[State 20, 1]
type = VelSet
trigger1 = fvar(14)
trigger1 = partner, command = "holdfwd"
trigger2 = command = "holdfwd"
trigger2 = !fvar(14)
x = const(velocity.walk.fwd.x)

[State 20, 2]
type = VelSet
trigger1 = fvar(14)
trigger1 = partner, command = "holdback"
trigger2 = command = "holdback"
trigger2 = !fvar(14)
x = const(velocity.walk.back.x)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
triggerall = Anim != [180,189]
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

[State 40, 6]
type = ChangeState
triggerall = anim = 20
trigger1 = var(59) != 0 && roundstate = 2  
value = ifelse((random<500 && p2bodydist x<140),28,27)
ctrl = 0

[State 40, 6]
type = ChangeState
triggerall = anim = 29
trigger1 = var(59) != 0 && roundstate = 2  
value = ifelse(random<500,29,25)
ctrl = 0

; Stand to Crouch
[Statedef 10]
type    = C
physics = C
anim = ifelse((anim != [180,189]),10,180)

[state 20]
type = ctrlset 
trigger1 = anim = [180,189]
value = 0

[State 10, 1]
type = VelMul
trigger1 = Time = 0
x = .75

[State 10, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;挑逗
[statedef 195]
type = S
anim = 195
velset = 0,0
ctrl = 0

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 4
value = 2995,60
channel = 0

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 5
value = 999,2
channel = 1

[State 399, EnvShake]
type = EnvShake
trigger1 = animelem = 5
ignorehitpause = 1
persistent = 0
time = 15
freq = 80
ampl = -1
phase = 1

[State 3784]
type = Explod
trigger1 = animelem = 5
ignorehitpause = 1 
anim = 395
pos = -25,-2
postype = p1
sprpriority = -3
bindtime = 33
ownpal = 1

[state 195]
type = ctrlset
trigger1 = animelem = 6
value = 1

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;------------------------------------------------
;胜利winner
;------------------------------------------------
[statedef 180]
type = S
velset = 0,0
ctrl = 0

[State 101, 1]
type = varrandom
trigger1 = Time = 0
v        = 8
range   = 4

[state changestate]
type = changestate
trigger1 = anim = 4612
value = 188
ctrl = 1

[State 101, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = anim != [181,189]
value    = 180

[state changestate]
type = changestate
trigger1 = anim != [181,189]
value = 181+var(8)
ctrl = 1

[State 181, 0]
type = AssertSpecial
trigger1 = time = [0,230]
flag = roundnotover

[state changestate]
type = changestate
trigger1 = anim != [181,189]
trigger1 = time =0
value = 182
ctrl = 1

;------------------------------
;胜利1 winner1
;------------------------------------------------
[statedef 181]
type = S
anim = ifelse(random<600,181,188)
velset = 0,0
ctrl = 0
keyctrl = -1

[State 191, 1]
type = ctrlset
trigger1 = ifelse(var(59) = 0,!MatchOver,1)
trigger1 = time = 80
value = 1

[State 191, 1]
type = ctrlset
triggerall = NumPartner = 0
trigger1 = ifelse(var(59) = 0,!MatchOver,1)
trigger1 = time > 80
value = 0

[State 201, 1] 
type = PlaySnd
triggerall = anim = 181
trigger1 = animelem = 4
value = 180,0

[State 201, 1] 
type = PlaySnd
triggerall = anim = 181
trigger1 = animelem = 12
value = 180,1

[State 201, 1] 
type = PlaySnd
triggerall = anim = 181
trigger1 = animelem = 21
value = 180,2

[State 201, 1] 
type = PlaySnd
triggerall = anim = 188
trigger1 = animelem = 12
value = 180,5

[State 201, 1] 
type = PlaySnd
triggerall = anim = 188
trigger1 = animelem = 16
value = 180,6

[State 201, 1] 
type = PlaySnd
triggerall = anim = 188
trigger1 = animelem = 23
value = 180,7

[State 201, 1] 
type = PlaySnd
triggerall = anim = 188
trigger1 = animelem = 32
value = 180,8

[State 181, 0]
type = AssertSpecial
trigger1 = time = [0,330]
flag = roundnotover

[State 180, 1]
type = ChangeState
triggerall = var(59) = 0 
triggerall = fvar(21) != 1
trigger1 = MatchOver
trigger1 = time >= 190
value = 189

;----------------------------------------------
;胜利2 winner2
;------------------------------------------------
[statedef 182]
type = S
anim = ifelse(random<400,182,187)
velset = 0,0
ctrl = 0
keyctrl = -1

[State 191, 1]
type = ctrlset
trigger1 = ifelse(var(59) = 0,!MatchOver,1)
trigger1 = time = 120
value = 1

[State 191, 1]
type = ctrlset
triggerall = NumPartner = 0
trigger1 = ifelse(var(59) = 0,!MatchOver,1)
trigger1 = time > 120
value = 0

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = ifelse(fvar(10)=0,6050,6051)
pos = 6,-123
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = anim = 187
trigger1 = AnimElem = 12
anim = ifelse(fvar(10)=1,3365,3609)
pos = 0,0
postype = p1
sprpriority = -2
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = anim = 187
trigger1 = AnimElem = 12
anim = ifelse(fvar(10)=0,7655,7656)
pos = -10,-75
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1
ownpal = 1

[State 201, 1] 
type = PlaySnd
trigger1 = animelem = 3
value = 3000,20

[State 201, 1] 
type = PlaySnd
triggerall = anim = 182
trigger1 = animelem = 13
value = 2995,60

[State 201, 1] 
type = PlaySnd
triggerall = anim = 187
trigger1 = animelem = 12
value = 2995,60

[State 201, 1] 
type = PlaySnd
triggerall = anim = 187
trigger1 = animelem = 12
value = 3305,1

[State 399, EnvShake]
type = EnvShake
triggerall = anim = 182
trigger1 = animelem = 14
ignorehitpause = 1
persistent = 0
time = 20
freq = 100
ampl = -3
phase = 1

[State 3784]
type = Explod
triggerall = anim = 182
trigger1 = animelem = 14
ignorehitpause = 1 
anim = 395
pos = -25,-2
postype = p1
sprpriority = -3
bindtime = 33
ownpal = 1

[STate -2]
type = PlaySNd
triggerall = anim = 182
trigger1 = animelem = 14
value = 999,2
channel = 1

[State 181, 0]
type = AssertSpecial
trigger1 = time = [0,230]
flag = roundnotover

[State 180, 1]
type = ChangeState
triggerall = var(59) = 0 
triggerall = fvar(21) != 1
trigger1 = MatchOver
trigger1 = time >= 190
value = 189

;------------------------------------------
;胜利3 winner3
;------------------------------------------------
[statedef 183]
type = S
anim = 183
velset = 0,0
ctrl = 0
keyctrl = -1

[State 191, 1]
type = ctrlset
trigger1 = ifelse(var(59) = 0,!MatchOver,1)
trigger1 = time = 120
value = 1

[State 191, 1]
type = ctrlset
triggerall = NumPartner = 0
trigger1 = ifelse(var(59) = 0,!MatchOver,1)
trigger1 = time > 120
value = 0

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = ifelse(fvar(10)=0,6050,6051)
pos = 6,-123
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
ownpal = 1

[State 201, 1] 
type = PlaySnd
trigger1 = animelem = 2
value = 180,0

[State 201, 1] 
type = PlaySnd
trigger1 = animelem = 10
value = 180,1

[State 201, 1] 
type = PlaySnd
trigger1 = animelem = 22
value = 180,10

[State 201, 1] 
type = PlaySnd
trigger1 = animelem = 3
value = 3000,20

[State 181, 0]
type = AssertSpecial
trigger1 = time = [0,230]
flag = roundnotover

[State 180, 1]
type = ChangeState
triggerall = var(59) = 0
triggerall = fvar(21) != 1
trigger1 = MatchOver
trigger1 = time >= 190
value = 189

;----------------------------------------------------
;胜利4 winner4
;------------------------------------------------
[statedef 184]
type = S
anim = 184
velset = 0,0
ctrl = 0
keyctrl = -1

[State 191, 1]
type = ctrlset
trigger1 = ifelse(var(59) = 0,!MatchOver,1)
trigger1 = time = 160
value = 1

[State 191, 1]
type = ctrlset
triggerall = NumPartner = 0
trigger1 = ifelse(var(59) = 0,!MatchOver,1)
trigger1 = time > 160
value = 0

[State 201, 1] 
type = PlaySnd
trigger1 = animelem = 3
value = 180,3

[State 201, 1] 
type = PlaySnd
trigger1 = animelem = 25
value = 180,4

[State 181, 0]
type = AssertSpecial
trigger1 = time = [0,230]
flag = roundnotover

[State 180, 1]
type = ChangeState
triggerall = var(59) = 0 
triggerall = fvar(21) != 1
trigger1 = MatchOver
trigger1 = time >= 190
value = 189

;------------------------------------------------
;胜利5 winner5
;------------------------------------------------
[statedef 185]
type = S
anim = 186
velset = 0,0
ctrl = 0
keyctrl = -1

[State 191, 1]
type = ctrlset
trigger1 = ifelse(var(59) = 0,!MatchOver,1)
trigger1 = time = 160
value = 1

[State 191, 1]
type = ctrlset
triggerall = NumPartner = 0
trigger1 = ifelse(var(59) = 0,!MatchOver,1)
trigger1 = time > 160
value = 0

[State 201, 1] 
type = PlaySnd
trigger1 = animelem = 13
value = 2000,1
volume = 70

[State 181, 0]
type = AssertSpecial
trigger1 = time = [0,250]
flag = roundnotover

[State 180, 1]
type = ChangeState
triggerall = var(59) = 0 
triggerall = fvar(21) != 1
trigger1 = MatchOver
trigger1 = time >= 190
value = 189

;------------------------------------------------
;胜利6 winner6噬魂之炎
;------------------------------------------------
[statedef 188]
type = S
velset = 0,0
ctrl = 0
keyctrl = -1

[State 191, 1]
type = ctrlset
trigger1 = ifelse(var(59) = 0,!MatchOver,1)
trigger1 = time = 160
value = 1

[State 191, 1]
type = ctrlset
triggerall = NumPartner = 0
trigger1 = ifelse(var(59) = 0,!MatchOver,1)
trigger1 = time > 160
value = 0

;-------------------------------------------------------
;显示胜利头像及字样
;-------------------------------------------
[Statedef 189]
type = S
ctrl = 0
velset = 0,0
sprpriority = -1

[STate 2998]
type = PlaySNd
trigger1 = time = 0
value = 9000,0

[State 191, 1]
type = ctrlset
trigger1 = time = 90
value = 1

[State 191, 1]
type = varset
trigger1 = time = 0
fvar(21) = 1

[State 191, 1]
type = ctrlset
trigger1 = NumEnemy = 0
trigger1 = time >= 91
value = 0

[State 189 , 0]
type = Explod
trigger1 = time = 0
anim = 10000
pos = 0,0
sprpriority = 6
postype = left
removetime = -1

[state 189, nofg]
type = assertspecial
trigger1 = 1
flag = NoFG

[state 189, nofg]
type = assertspecial
trigger1 = 1
flag = nomusic

[State 189, blackandwhite]
type = BGPalFX
trigger1 = time = 0
color = 0
time = 500

[State 181, 0]
type = AssertSpecial
trigger1 = time = [0,230]
flag = roundnotover

[State 240 , 0]
type = Explod
trigger1 = time = 0
anim = 10002
pos = 0,0
sprpriority = 7
postype = left
removetime = -1

[State 240 , 0]
type = Explod
triggerall = time = 0
trigger1 = palno = 1
trigger2 = palno = 4
trigger3 = palno = 5
trigger4 = palno = 12
anim = 8500
pos = 140,36
sprpriority = 6
postype = left
removetime = -1

[State 240 , 0]
type = Explod
triggerall = time = 0
trigger1 = palno = 2
trigger2 = palno = 3
anim = 8501
pos = 140,36
sprpriority = 6
postype = left
removetime = -1

[State 240 , 0]
type = Explod
triggerall = time = 0
trigger1 = palno = 6
anim = 8502
pos = 140,36
sprpriority = 6
postype = left
removetime = -1

[State 240 , 0]
type = Explod
triggerall = time = 0
trigger1 = palno = 7
trigger2 = palno = 10
trigger3 = palno = 11
anim = 8503
pos = 140,36
sprpriority = 6
postype = left
removetime = -1

[State 240 , 0]
type = Explod
triggerall = time = 0
trigger1 = palno = 8
trigger2 = palno = 9
anim = 8503
pos = 140,36
sprpriority = 6
postype = left
removetime = -1

[State 240 , 0]
type = Explod
trigger1 = time = 0
anim = ifelse(random > 500,9001,9002)
pos = 60,186
sprpriority = 8
postype = left
removetime = -1

[State 184, 0]
type = PlaySnd
trigger1 = time = 0
value = F180,0

[State 184, 1]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1
;-------------------------------------------------------------------------
;亮相
;-------------------------------------------------------------------------
[Statedef 190]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 101, 1]
type = varrandom
trigger1 = Time = 0
v        = 8
range   = 4

[state 190]
type = changestate
trigger1 = var(8)<=3
trigger1 = time = 0
value = 191+var(8)

[state 190]
type = changestate
trigger1 = var(8)>=4
trigger1 = time = 0
value = 192+var(8)


[Statedef 191]
type = S
ctrl = 0
anim = 191
velset = 0,0

[STate 2998]
type = PlaySNd
triggerall = anim = 191
trigger1 = Animelem = 13
value = 190,2

[STate 2998]
type = PlaySNd
triggerall = anim = 191
trigger1 = Animelem = 27
value = 190,3

[STate 2998]
type = PlaySNd
triggerall = anim = 191
trigger1 = Animelem = 30
value = 999,2

[State 399, EnvShake]
type = EnvShake
triggerall = anim = 191
trigger1 = Animelem = 30
ignorehitpause = 1
persistent = 0
time = 20
freq = 100
ampl = -3
phase = 1

[State 3784]
type = Explod
triggerall = anim = 191
trigger1 = Animelem = 30
ignorehitpause = 1 
anim = 395
pos = -25,-2
postype = p1
sprpriority = -3
bindtime = 33
ownpal = 1

[state 190]
type = changeanim
trigger1 = animtime = 0
value = ifelse(fvar(10)=1,1,0)

[State 199]
type = AssertSpecial
trigger1 = Time = [0,230]
flag = Intro

[Statedef 192]
type = S
ctrl = 0
anim = 192
velset = 0,0

[STate 2998]
type = changestate
trigger1 = fvar(10)!=0
value = 191

[state 779,playsnd]
type = playsnd
triggerall = anim = 192
trigger1 = Animelem = 5
trigger2 = Animelem = 7
trigger3 = Animelem = 9
trigger4 = Animelem = 11
trigger5 = Animelem = 13
trigger6 = Animelem = 14
trigger7 = Animelem = 16
trigger8 = Animelem = 18
trigger9 = Animelem = 19
trigger10 = Animelem = 21
trigger11 = Animelem = 23
trigger12 = Animelem = 25
trigger13 = Animelem = 27
value = 779,0

[State 190]
type = Explod
triggerall = anim = 192
trigger1 = Animelem = 6
trigger2 = Animelem = 13
trigger3 = Animelem = 20
anim = 779
pos = -36,9
supermove = 1
sprpriority = 2
bindtime = 1
palfx.time = 38
palfx.add = 184,28,0
palfx.mul = 248,168,104
palfx.sinadd= 138,118,14,16 
ownpal = 0

[State 190]
type = Explod
triggerall = anim = 192
trigger1 = Animelem = 8
trigger2 = Animelem = 15
trigger3 = Animelem = 22
anim = 779
pos = -36,-9
supermove = 1
sprpriority = -2
bindtime = 1
palfx.time = 38
palfx.add = 184,28,0
palfx.mul = 248,168,104
palfx.sinadd= 138,118,14,16 
ownpal = 0

[State 190]
type = Explod
triggerall = anim = 192
trigger1 = Animelem = 10
trigger2 = Animelem = 17
trigger3 = Animelem = 24
anim = 779
pos = 45,9
supermove = 1
sprpriority = 2
bindtime = 1
palfx.time = 38
palfx.add = 184,28,0
palfx.mul = 248,168,104
palfx.sinadd= 138,118,14,16 
ownpal = 0

[State 190]
type = Explod
triggerall = anim = 192
trigger1 = Animelem = 12
trigger2 = Animelem = 19
trigger3 = Animelem = 26
trigger4 = Animelem = 28
anim = 779
pos = 45,-9
supermove = 1
sprpriority = -2
bindtime = 1
palfx.time = 38
palfx.add = 184,28,0
palfx.mul = 248,168,104
palfx.sinadd= 138,118,14,16 
ownpal = 0

[STate 2998]
type = PlaySNd
triggerall = anim = 192
trigger1 = Animelem = 6
value = 2995,100

[STate 2998]
type = PlaySNd
triggerall = anim = 192
trigger1 = animelem = 30
value = 2995,60

[STate 2998]
type = PlaySNd
triggerall = anim = 192
trigger1 = Animelem = 31
value = 999,2

[State 399, EnvShake]
type = EnvShake
triggerall = anim = 192
trigger1 = Animelem = 31
ignorehitpause = 1
persistent = 0
time = 20
freq = 100
ampl = -3
phase = 1

[State 3784]
type = Explod
triggerall = anim = 192
trigger1 = Animelem = 31
ignorehitpause = 1 
anim = 395
pos = -25,-2
postype = p1
sprpriority = -3
bindtime = 33
ownpal = 1

[STate 2998]
type = changeanim
trigger1 = anim != ifelse(fvar(10)=1,1,0)
trigger1 = Animtime = 0
value = ifelse(fvar(10)=1,1,0)

[State 199]
type = AssertSpecial
trigger1 = Time = [0,400]
flag = Intro

[statedef 193]
type = s
ctrl = 0
velset = 0,0
anim = ifelse((palno = [7,12]),193,196)

[STate 193]
type = PlaySNd
trigger1 = anim = 196
trigger1 = Animelem = 2
value = 190,0
channel = 0

[STate 193]
type = PlaySNd
trigger1 = anim = 196
trigger1 = Animelem = 10
value = 190,1
channel = 0

[STate 193]
type = PlaySNd
trigger1 = anim = 193
trigger1 = Animelem = 26
trigger2 = anim = 196
trigger2 = Animelem = 33
value = 2995,60
channel = 0

[STate 193]
type = PlaySNd
triggerall = anim = 193
trigger1 = Animelem = 8
trigger2 = Animelem = 14
value = 193,0

[STate 193]
type = PlaySNd
trigger1 = anim = 193
trigger1 = Animelem = 27
trigger2 = anim = 196
trigger2 = Animelem = 34
value = 999,2

[State 399, EnvShake]
type = EnvShake
trigger1 = anim = 193
trigger1 = animelem = 27
trigger2 = anim = 196
trigger2 = animelem = 34
ignorehitpause = 1
persistent = 0
time = 30
freq = 100
ampl = -3
phase = 1

[State 3784]
type = Explod
trigger1 = anim = 193
trigger1 = animelem = 25
trigger2 = anim = 196
trigger2 = animelem = 34
ignorehitpause = 1 
anim = 395
pos = -25,-2
postype = p1
sprpriority = -3
bindtime = 33
ownpal = 1

[STate 2998]
type = changeanim
trigger1 = anim != ifelse(fvar(10)=1,1,0)
trigger1 = Animtime = 0
value = ifelse(fvar(10)=1,1,0)

[State 199]
type = AssertSpecial
trigger1 = Time = [0,400]
flag = Intro

[statedef 194]
type = s
ctrl = 0
velset = 0,0
anim = 194

[STate 2998]
type = changestate
trigger1 = fvar(10)!=0
value = 196

[STate 2998]
type = PlaySNd
triggerall = anim = 194
trigger1 = Animelemtime(1) = 10
value = 190,4
channel = 0

[STate 2998]
type = PlaySNd
triggerall = anim = 194
trigger1 = Animelem = 20
value = 190,5
channel = 0

[STate 2998]
type = PlaySNd
triggerall = anim = 194
trigger1 = Animelem = 31
value = 190,6
channel = 0

[STate 2998]
type = PlaySNd
triggerall = anim = 194
trigger1 = Animelem = 21
value = 1000,1

[State 3305, 2]
type = palfx
trigger1 = time = [118,163] 
time = 1
add = 184,28,0
mul = 248,168,104
sinadd= 138,118,14,16 
color = 0 
invertall = 1

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 42
value = 2995,60
channel = 0

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 43
value = 999,2

[State 399, EnvShake]
type = EnvShake
trigger1 = animelem = 43
ignorehitpause = 1
persistent = 0
time = 30
freq = 100
ampl = -3
phase = 1

[State 3784]
type = Explod
trigger1 = Animelem = 43
ignorehitpause = 1 
anim = 395
pos = -25,-2
postype = p1
sprpriority = -3
bindtime = 33
ownpal = 1

[State 3205]
type = helper
trigger1 =(NumHelper(750) = 0) && (AnimElem = 35)
ID = 751
pos = 0,0
stateno = 751
ownpal = 1

[STate 2998]
type = changeanim
trigger1 = anim != ifelse(fvar(10)=1,1,0)
trigger1 = Animtime = 0
value = ifelse(fvar(10)=1,1,0)

[State 199]
type = AssertSpecial
trigger1 = Time = [0,400]
flag = Intro

[statedef 196]
type = s
ctrl = 0
velset = 0,0
anim = ifelse(random<=500,190,198)

[STate 2998]
type = PlaySNd
triggerall = anim = 198
trigger1 = Animelem = 10
value = 190,7
channel = 0

[STate 2998]
type = PlaySNd
triggerall = anim = 198
trigger1 = Animelem = 21
value = 190,8
channel = 0

[STate 2998]
type = PlaySNd
trigger1 = anim = 190
trigger1 = Animelem = 7
trigger2 = anim = 198
trigger2 = animelem = 21
value = 600,5

[STate 2998]
type = PlaySNd
trigger1 = anim = 190
trigger1 = Animelemtime(1) = 25
value = 190,10

[STate 2998]
type = PlaySNd
trigger1 = anim = 190
trigger1 = Animelem = 7
value = 190,3

[State 3305, 2]
type = explod
trigger1 = anim = 190
trigger1 = Animelem = 6
sprpriority = 3
anim = 706
pos = -80

[State 3305, 2]
type = explod
trigger1 = anim = 190
trigger1 = Animelem = 10
trigger2 = anim = 198
trigger2 = animelem = 24
sprpriority = -3
id = 199
pos = 20,-20
anim = 199
vel = -1.5,-4
accel = 0,.25
removetime = 50

[State 3305, 2]
type = explod
trigger1 = anim = 190
trigger1 = Animelem = 4
sprpriority = -3
id = 6105
pos = 0,0
anim = 6105

[STate 2998]
type = changeanim
trigger1 = anim != ifelse(fvar(10)=1,1,0)
trigger1 = Animtime = 0
value = ifelse(fvar(10)=1,1,0)

[State 199]
type = AssertSpecial
trigger1 = Time = [0,400]
flag = Intro
;---------------------------------------------------------------------------
; Jump Start
[Statedef 40]
type    = S
physics = S
ctrl = 0

[State 40, 6]
type = ChangeState
triggerall = var(59) != 0 && roundstate = 2  
triggerall = fvar(10) = 0
triggerall = (var(55) = [10,11])||(var(55) = [20,22])||(var(55) = [40,43])||(var(55) = [60,64])||(var(55) = [80,86])||(var(55) = [100,110])
trigger1 = Time = 0
value = 25
ctrl = 0

[State 40, 6]
type = ChangeState
triggerall = var(59) != 0 && roundstate = 2  
triggerall = fvar(10) != 0
triggerall = (var(55) = [10,11])||(var(55) = [20,22])||(var(55) = [44,43])||(var(55) = [6,64])||(var(55) = [80,86])||(var(55) = [102,110])
trigger1 = Time = 0
value = 25
ctrl = 0

[State 40, 6]
type = ChangeState
triggerall = var(59) != 0 && roundstate = 2  
trigger1 = Time = 0
value = 0
ctrl = 1

[State 40, changeanim]
type = changeanim
trigger1 = Time = 0
value = ifelse((anim != [180,189]),40,180)

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 1]
type = VarSet
trigger1 = Time = 0
fvar(8) = 0

[State 40, 2]
type = VarSet
trigger1 = fvar(14)
trigger1 = partner, command = "holdfwd"
trigger2 = !fvar(14)
trigger2 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = fvar(14)
trigger1 = partner, command = "holdback"
trigger2 = !fvar(14)
trigger2 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, AI]
type = VarSet
triggerall = var(59) = 1
trigger1 = time = 0
trigger1 = p2bodydist x > 0
fvar(8) = 4

[State 40, 5]
type = VarSet
triggerall = fvar(8) != [4,7]
trigger1 = !fvar(14)
trigger1 = Command = "holdfwd"
trigger2 = fvar(14)
trigger2 = partner, Command = "holdfwd"
fvar(8) = 1

[State 40, 5]
type = VarSet
triggerall = fvar(8) != [4,7]
trigger1 = !fvar(14)
trigger1 = Command != "holdfwd"
trigger1 = Command != "holdback"
trigger2 = fvar(14)
trigger2 = partner, Command != "holdfwd"
trigger2 = partner,Command != "holdback"
fvar(8) = 2

[State 40, 6]
type = VarSet
triggerall = fvar(8) != [4,7]
trigger1 = !fvar(14)
trigger1 = Command = "holdback"
trigger2 = fvar(14)
trigger2 = partner,Command = "holdback"
fvar(8) = 2

[State 40, 7]
type = VarSet
triggerall = Time =0
trigger1 = !fvar(14)
trigger1 = Command = "longjump"
trigger1 = Command = "holdfwd"
trigger2 = fvar(14)
trigger2 = partner, Command = "longjump"
trigger2 = partner, Command = "holdfwd"
trigger3 = PrevStateNo = 100 ;RUN_FWD
fvar(8) = 4

[State 40, 8]
type = VarSet
triggerall = Time = 0
trigger1 = !fvar(14)
trigger1 = Command = "holdback"
trigger1 = Command = "longjump"
trigger2 = fvar(14)
trigger2 = partner, Command = "holdback"
trigger2 = partner, Command = "longjump"
fvar(8) = 5

[State 40, 8]
type = VarSet
triggerall = Time = 0
trigger1 = !fvar(14)
trigger1 = Command != "holdfwd"
trigger1 = Command != "holdback"
trigger1 = Command = "longjump"
trigger2 = fvar(14)
trigger2 = partner,Command != "holdfwd"
trigger2 = partner, Command != "holdback"
trigger2 = partner, Command = "longjump"
fvar(8) = 6

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = fvar(8) = 4
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = fvar(8) = 5
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.back.x)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = fvar(8) = 6
trigger1 = sysvar(1) = 1
y = const(velocity.runjump.y)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Jump Up
[Statedef 50]
type    = A
physics = A

[State 40, 10]
type = VarSet
triggerall = Time = 0
trigger1 = !fvar(14)
trigger1 = Command != "holdup"
trigger2 = fvar(14)
trigger2 = partner,Command != "holdup"
fvar(8) = 7

[State 40, 5]
type = VelSet
triggerall = Time = 0
trigger1 = fvar(8) = 7
y = -6

[State 50, CTRL LIMITTER] ;Can't attack after recovery
type = ctrlset
trigger1 = Time = 0
trigger1 = prevstateno = 5040
trigger1 = prevstateno = 5210
value = 0

[State 50, PLAYSND] 
type = PlaySnd
triggerall = fvar(8) = [1,3]
trigger1 = Time = 0
value = 1,3
volume = 60

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
triggerall = fvar(8) = [1,3]
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

[State 75, 2] ; Play sound when jumping (Shadow)
type = PlaySnd
trigger1 = fvar(8) = [4,6]
triggerall = Time = 0
trigger1 = fvar(14) = 1
trigger1 = partner,Command = "holdup"
trigger2 = fvar(14) = 0
trigger2 = Command = "holdup"
value = 1,4
volume = 10

[State 75, 3] ; Shadows
type = Afterimage
triggerall = Time = 0
trigger1 = fvar(8) = [4,6]
time = 24
PalBright = 0, 0, 0
PalContrast =  128,128,128
PalAdd = 0, 0, 0
PalMul = 1,1,1
Length = 10
timegap = 2
FrameGap = 4
trans = add1 

[State 75, 10]
type = ChangeAnim
triggerall = fvar(8)=[4,6]
triggerall = Time = 0
triggerall = Vel X = 0
trigger1 = fvar(14) = 1
trigger1 = partner,Command = "holdup"
trigger2 = fvar(14) = 0
trigger2 = Command = "holdup"
value = 41

[State 75, 11] ;Short
type = ChangeAnim
trigger1 = (fvar(8)=7)
trigger1 = Time = 0
trigger1 = Vel X = 0
value = 41

[State 75, 12]
type = ChangeAnim
triggerall = fvar(8)=[4,6]
triggerall = Time = 0
triggerall = Vel X > 0
trigger1 = fvar(14) = 1
trigger1 = partner,Command = "holdup"
trigger2 = fvar(14) = 0
trigger2 = Command = "holdup"
value = 42

[State 201, 13] ;Short
type = ChangeAnim
triggerall = (fvar(8)=7)
trigger1 = Time = 0
trigger1 = Vel X > 0
value = ifelse(SelfAnimExist(2042),2042,42)

[State 201, 14]
type = ChangeAnim
triggerall = fvar(8)=[4,6]
triggerall = Time = 0
triggerall = Vel X < 0
trigger1 = fvar(14) = 1
trigger1 = partner,Command = "holdup"
trigger2 = fvar(14) = 0
trigger2 = Command = "holdup"
value = 43

[State 201, 15] ;Short
type = ChangeAnim
triggerall = (fvar(8)=7)
trigger1 = Time = 0
trigger1 = Vel X < 0
value = ifelse(SelfAnimExist(2043),2043,43)


;---------------------------------------
;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
ctrl = 0
facep2 = 1
anim = 47

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = !fvar(14)
trigger1 = Time = 1
value = 1

[State 0, VarSet]
type = VarSet
triggerall = fvar(14)
triggerall = !fvar(1)
trigger1 = Time = 1
fv = 1
value = 1

[State 52, 4]
type = ChangeState
triggerall = var(59) = 1
trigger1 = p2movetype != A
trigger1 = p2bodydist X <= 65
trigger1 = AnimTime = 0
value = 410

[state 52]
type = changestate
triggerall = var(59) = 1
triggerall = P2movetype = A
trigger1 = random <= 750
trigger1 = animtime=0
trigger1 = p2bodydist X <= 50
value = 1000


[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------

;---------------------------------------------------------------------------
;-------------------------------------------------------------------


; RUN_FWD
[Statedef 100]
type = S
physics = S
sprpriority = 0

[State 0, CtrlSet]
type = CtrlSet
triggerall = !fvar(14)
trigger1 = ctrl = 0
trigger1 = roundstate = 3
value = 1

[State -2, def]
type = ctrlSet
triggerall = fvar(14) = 0
trigger1 = ctrl = 0
value = 1

[State 0, VarSet]
type = VarSet
triggerall = fvar(14)
trigger1 = fvar(1) = 0
fv = 1
value = 1

[State 100, 1]
type = VelSet
trigger1 = time > 3
trigger2 = time > 3
trigger2 = var(59) = 1
;trigger2 = p2life != 0
;trigger2 = p2bodydist x >= 75
x = const(velocity.run.fwd.x)

; Play sound when running
[State 100, 2]
type = PlaySnd
triggerall = Anim = 100
trigger1 = AnimElemtime(3) = 0
trigger2 = AnimElemtime(6) = 0
value = 100,0
volume = 80

[State 100, 4]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 100 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 100

[State 100,3]
type = ChangeState
triggerall = var(59) = 0
trigger1 = !fvar(14) 
trigger1 = Command != "holdfwd" && Time >= 10
trigger2 = fvar(14) 
trigger2 = partner,Command != "holdfwd" && Time >= 10
value = 101
ctrl = 1

[State 100, 4]
type = ChangeState
triggerall = var(59) = 0
trigger1 = command = "holdup"
trigger1 = !fvar(14) 
trigger2 = fvar(14)
trigger2 = partner,command = "holdup"
value = 40

[State 100, 4]
type = ChangeState
triggerall = var(59) = 0
trigger1 = command != "holdfwd"
trigger1 = !fvar(14) 
trigger2 = fvar(14)
trigger2 = partner,command != "holdfwd"
value = 101

[State 100, 5]
type = ChangeState
triggerall = var(59) = 1
trigger1 = P2BodyDist x <= 40
trigger1 = P2MoveType = A
value = 1003

[State 100, 4]
type = ChangeState
triggerall = time >= 12
trigger1 = var(59) = 1
trigger1 = InGuardDist
trigger1 = ifelse((P2MoveType = H),(p2stateno = [5100,5150]),1)
value = 101
ctrl = 1

[State 100, 6]
type = AssertSpecial
trigger1 = 1
flag = NoWalk
;------------------------------------
; Run end to Stand
[Statedef 101]
type = S
physics = S
ctrl = ifelse(fvar(14),0,1)

[State 101, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = anim != 101
value    = 101

[State 101, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------
; Run end to Stand
[Statedef 105]
type = a
physics = N
velset = 0,0
ctrl = ifelse(fvar(14),0,1)

[State 101, 1]
type = ChangeAnim
trigger1 = Time = 0
value    = 105

[State 101, 1]
type = velset
trigger1 = Time = 0
y = -4
x = -4

[State 101, 1]
type = velset
trigger1 = animelem = 4
x = 0

[State 101, 1]
type = posset
trigger1 = pos y > 0
trigger2 = animelem = 4
y = 0

[State 101, 1]
type = posadd
trigger1 = animelem = 5
x = -10

[State 101, 1]
type = posadd
trigger1 = animelem = 4
trigger2 = animelem = 7
x = -26

[State 101, 1]
type = veladd
trigger1 = animelemtime(1)  >= 0
trigger1 = animelemtime(4) <0
y = .40

[State 101, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;回避
[Statedef 112]
type = S
movetype = I
physics = N
anim = 112
poweradd = 20
facep2 = 1
velset = 0,0
ctrl = 0

[State 116]
type = HitBy
trigger1 = time >= 0
value = SCA, NT, ST, HT
time = 1

[State 116]
type = notHitBy
triggerall = time >= 0
trigger1 = (enemy,numhelper > 0) && (EnemyNear,statetype != L)
trigger2 = (enemy,numproj > 0) && (EnemyNear,statetype != L)
trigger3 = p2bodydist x > 5
trigger4 = var(55) >=20
value = sac
time = 1

[State 1300,AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 15
length = 5
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = 1,1,1
timegap = 2
trans = add1

[State 210, 1]
type = null;PlaySnd
trigger1 = Time = 5
trigger1 = Random < 750
value = 112,0
channel = 0

[State 210, 1]
type = PlaySnd
trigger1 = Time = 5
trigger1 = Random < 750
value = 188,0
channel = 0

[State 116]
type = SprPriority
trigger1 = Time = 8
value = -1

[State 116]
type = PlayerPush
trigger1 = Time < 24
value = 0

[State 112]
type = PlayerPush
trigger1 = Time >= 24
value = 1

;AI青龙
[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = p2bodydist X = [-30,30]
triggerall = animtime =0
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
triggerall = random<360
triggerall = p2statetype != A
trigger1 = p2stateno = [0,160]
trigger2 = P2movetype = A
value = ifelse(random<500 && numenemy=1,960,930)

[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 11)||(var(55) = [20,21])||(var(55) = [40,42])||(var(55) = [60,64])||(var(55) = [80,87])||(var(55) = [100,110])
trigger1 = animtime =0
trigger1 = p2stateno = [0,160]
trigger1 = p2bodydist X = [-5,5]
value = ifelse(random<500,370,380)

[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = p2stateno = [0,152] 
triggerall = animtime =0
triggerall = (var(55) = 11)||(var(55) = [20,21])||(var(55) = [40,42])||(var(55) = [60,64])||(var(55) = [80,87])||(var(55) = [100,110])
trigger1 = (enemy,numhelper > var(35)) && (EnemyNear,statetype != L) 
trigger2 = (enemy,numproj > 0) && (EnemyNear,statetype != L)
value = ifelse(random <300,117,116)

[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = p2stateno = [5000,5300]
triggerall =  (var(55) = 11)||(var(55) = [20,21])||(var(55) = [40,42])||(var(55) = [60,64])||(var(55) = [80,87])||(var(55) = [100,110])
triggerall = animtime =0
trigger1 = (enemy,numhelper > var(35)) && (EnemyNear,statetype != L) 
trigger2 = (enemy,numproj > 0) && (EnemyNear,statetype != L)
value = ifelse(random <300,117,116)

[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 41)||(var(55) = [60,61])||(var(55) = [80,82])||(var(55) = [100,110])
triggerall = P2movetype = A
triggerall = power >= 1000
trigger1 = animtime =0 
trigger1 = p2bodydist X = [55,120]
value = ifelse(power<3000,3000,3010)

[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 41)||(var(55) = [60,61])||(var(55) = [80,82])||(var(55) = [100,110])
triggerall = P2movetype = A
triggerall = power >= 2000
trigger1 = animtime =0 
trigger1 = p2bodydist X = [-45,54]
value = ifelse(power<3000,ifelse(fvar(10)=0,4150,3650),3010)

[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall =  (var(55) = 21)||(var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,84])||(var(55) = [100,110])
triggerall = P2movetype = A
trigger1 = random <= 750
trigger1 = animtime =0 
trigger1 = p2bodydist X =[-35,50]
value = 1000  

;AI凤凰
[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall =  (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
triggerall = p2bodydist X = [-30,30]
triggerall = animtime =0
triggerall = random<360
triggerall = p2statetype != A
trigger1 = p2stateno = [0,160]
trigger2 = P2movetype = A
value = ifelse(random<500 && numenemy=1,960,980)

[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 11)||(var(55) = [20,21])||(var(55) = [40,42])||(var(55) = [60,64])||(var(55) = [80,87])||(var(55) = [100,110])
trigger1 = animtime =0
trigger1 = p2stateno = [0,160]
trigger1 = p2bodydist X = [-5,5]
value = ifelse(random<500,370,380)

[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = p2stateno = [0,152] 
triggerall = (var(55) = 11)||(var(55) = [20,21])||(var(55) = [40,42])||(var(55) = [60,64])||(var(55) = [80,87])||(var(55) = [100,110])
triggerall = animtime =0
trigger1 = (enemy,numhelper > var(35)) && (EnemyNear,statetype != L) 
trigger2 = (enemy,numproj > 0) && (EnemyNear,statetype != L)
value = ifelse(random <300,117,116)

[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = p2stateno = [5000,5300]
triggerall =  (var(55) = 11)||(var(55) = [20,21])||(var(55) = [40,42])||(var(55) = [60,64])||(var(55) = [80,87])||(var(55) = [100,110])
triggerall = animtime =0
trigger1 = (enemy,numhelper > var(35)) && (EnemyNear,statetype != L) 
trigger2 = (enemy,numproj > 0) && (EnemyNear,statetype != L)
value = ifelse(random <300,117,116)

[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 41)||(var(55) = [60,61])||(var(55) = [80,82])||(var(55) = [100,110])
triggerall = P2movetype = A
triggerall = power >= 1000
trigger1 = animtime =0 
trigger1 = p2bodydist X = [55,120]
value = 4200

[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 41)||(var(55) = [60,61])||(var(55) = [80,82])||(var(55) = [100,110])
triggerall = P2movetype = A
triggerall = power >= 2000
trigger1 = animtime =0 
trigger1 = p2bodydist X = [-45,54]
value = 4250

[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 21)||(var(55) = [40,41])||(var(55) = [60,63])||(var(55) = [80,83])||(var(55) = [100,110])
triggerall = P2movetype = A
trigger1 = random <= 750
trigger1 = animtime =0 
trigger1 = p2bodydist X =[-35,50]
value = 1080

[State 112]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;前回避
[Statedef 116]
type = S
movetype = I
physics = N
anim = 116
poweradd = 20
facep2 = 1
velset = 0,0
ctrl = 0

[State 116, 70]
type = Explod
trigger1 = animelem = 2
ownpal = 1
postype = P1
facing = -1
pos = -20, 0
anim = 706
sprpriority = 7 ;-5
ignorehitpause = 1

[State 210, 1]
type = PlaySnd
trigger1 = Time = 3
trigger1 = Random < 750
volume = -10
value = 112,0
channel = 0

[State 210, 1]
type = PlaySnd
trigger1 = animelem = 5
volume = -10
value = 40,0

[State 116]
type = HitBy
triggerall = var(55) = [0,99]
trigger1 = animelemtime(1)>=0
trigger1 = animelemtime(8)<5
value = SCA, NT, ST, HT
time = 1

[State 116]
type = notHitBy
triggerall = var(55) = [0,99]
triggerall = animelemtime(1)>=0
triggerall = animelemtime(8)<5
trigger1 = p2bodydist x > 5
trigger2 = (enemy,numhelper > 0) && (EnemyNear,statetype != L)
trigger3 = (enemy,numproj > 0) && (EnemyNear,statetype != L)
value = sac
time = 1

[State 116]
type = notHitBy
trigger1 = var(55) = [100,110]
value = sac
time = 1

[State 116]
type = AfterImage
trigger1 = Time = 9
time = 15
PalBright = 0, 0, 0
PalContrast =  250,250,250
PalAdd = 0, 0, 0
PalMul = 1,1,1
Length = 6
FrameGap = 2

[State 116]
type = SprPriority
trigger1 = Time = 8
value = -1

[state 116]
type = velset
trigger1 = AnimElem = 2
x=5

[state 116]
type = posadd
trigger1 = AnimElem = 2
x=20

[State 116]
type = Velset
trigger1 = AnimElem = 4
x = 2.8

[State 116]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 116]
type = PlayerPush
trigger1 = animelemtime(1)>=0
trigger1 = animelemtime(8)<3
value = 0

[State 116]
type = PlayerPush
trigger1 = animelemtime(8)=[3,5]
value = 1

;手控青龙
[state 116]
type = changestate
triggerall = var(59) != 1
triggerall = fvar(10) = 0
triggerall = (var(13) = [101,115])
trigger1 = animelemtime(8) =[4,5]
value = 1000
ctrl = 0

[state 116]
type = changestate
triggerall = var(59) != 1
triggerall = fvar(10) = 0
triggerall = (var(13) = [121,135])
trigger1 = animelemtime(8) =[4,5]
value = 1003
ctrl = 0

;手控凤凰
[state 116]
type = changestate
triggerall = var(59) != 1
triggerall = fvar(10) = 1
triggerall = (var(13) = [101,115])
trigger1 = animelemtime(8) =[4,5]
value = 1080
ctrl = 0

[state 116]
type = changestate
triggerall = var(59) != 1
triggerall = fvar(10) = 1
triggerall = (var(13) = [121,135])
trigger1 = animelemtime(8) =[4,5]
value = 1090
ctrl = 0

;手控通用后回避
[state 116]
type = changestate
triggerall = var(59) != 1
triggerall = command ="Avoid" && command = "holdback"
trigger1 = animelemtime(8) =[4,5]
value = 117
ctrl = 0

;AI青龙
[state 116]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [80,81])||(var(55) = [100,110])
triggerall = P2movetype = A
triggerall = animelemtime(8) =[4,5]
trigger1 = p2bodydist X = (29,85]
trigger1 = random <= 500
trigger2 = p2bodydist x = [-50,29]
value = 2150  

[state 116]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [81,82])||(var(55) = [100,110])
triggerall = P2movetype = A
triggerall = animelemtime(8) =[4,5]
trigger1 = p2bodydist X = [-50,29]
value = 1000

[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = p2bodydist X = [-30,30]
triggerall = animtime =0
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
triggerall = p2statetype != A
trigger1 = p2stateno = [0,160]
trigger2 = P2movetype = A
value = ifelse(random<500 && numenemy=1,960,930)

[state 116]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 11)||(var(55) = [20,21])||(var(55) = [40,42])||(var(55) = [60,64])||(var(55) = [80,87])||(var(55) = [100,110])
triggerall = animelemtime(8) =[4,5]
trigger1 = p2stateno = [0,160]
trigger1 = p2bodydist X = [-5,5]
value = ifelse(random<500,370,380)

[state 116]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [80,81])||(var(55) = [100,110])
triggerall = animelemtime(8) =[4,5]
trigger1 = (enemy,numhelper > var(35)) && (EnemyNear,statetype != L) 
trigger2 = (enemy,numproj > 0) && (EnemyNear,statetype != L) 
value = 112

[state 116]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [80,83])||(var(55) = [100,110])
triggerall = P2movetype = I
triggerall = animelemtime(8) =[4,5]
triggerall = p2stateno = [1000,4999]
triggerall = p2bodydist X = [0,70]
trigger1 = (enemy,numhelper > var(35)) && (EnemyNear,statetype != L) 
trigger2 = (enemy,numproj > 0) && (EnemyNear,statetype != L) 
value = 117

[state 116]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [80,82])||(var(55) = [100,110])
triggerall = P2movetype = A
triggerall = p2statetype = A
triggerall = animelemtime(8) =[4,5]
trigger1 = p2bodydist X = [0,60]
value = 1003

;AI凤凰
[state 116]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [80,85])||(var(55) = [100,110])
triggerall = P2movetype = A
triggerall = animelemtime(8) =[4,5]
trigger1 = p2bodydist X = (29,85]
trigger1 = random <= 500
trigger2 = p2bodydist x = [-50,29]
value = 2150  

[state 116]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [80,85])||(var(55) = [100,110])
triggerall = P2movetype = A
triggerall = animelemtime(8) =[4,5]
trigger1 = p2bodydist X = [-50,29]
value = 1080

[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = p2bodydist X = [-30,30]
triggerall = animtime =0
triggerall = (var(55) = 41)||(var(55) = [60,61])||(var(55) = [80,82])||(var(55) = [100,110])
triggerall = p2statetype != A
trigger1 = p2stateno = [0,160]
trigger2 = P2movetype = A
value = ifelse(random<500 && numenemy=1,960,980)

[state 116]
type = changestate
triggerall = var(59) = 1
triggerall = (var(55) = [80,82])||(var(55) = [100,110])
triggerall = fvar(10) = 1
triggerall = animelemtime(8) =[4,5]
trigger1 = p2stateno = [0,160]
trigger1 = p2bodydist X = [-5,5]
value = ifelse(random<500,370,380)

[state 116]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [80,82])||(var(55) = [100,110])
triggerall = animelemtime(8) =[4,5]
trigger1 = (enemy,numhelper > var(35)) && (EnemyNear,statetype != L) 
trigger2 = (enemy,numproj > 0) && (EnemyNear,statetype != L)
value = 112

[state 116]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [80,85])||(var(55) = [100,110])
triggerall = P2movetype = I
triggerall = animelemtime(8) =[4,5]
triggerall = p2stateno = [1000,4999]
triggerall = p2bodydist X = [0,70]
trigger1 = (enemy,numhelper > var(35)) && (EnemyNear,statetype != L) 
trigger2 = (enemy,numproj > 0) && (EnemyNear,statetype != L)
value = 117

[state 116]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [80,82])||(var(55) = [100,110])
triggerall = P2movetype = A
triggerall = p2statetype = A
triggerall = animelemtime(8) =[4,5]
trigger1 = p2bodydist X = [0,60]
value = 1090

[State 116]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;后回避
[Statedef 117]
type = S
movetype = I
physics = N
anim = 117
poweradd = 20
facep2 = 1
velset = 0,0
ctrl = 0

[State 210, 1]
type = PlaySnd
trigger1 = Time = 2
trigger1 = Random < 750
volume = -10
value = 112,0
channel = 0

[State 117]
type = HitBy
trigger1 = animelemtime(1) >= 0
trigger1 = animelemtime(6) <= 2
value = SCA, NT, ST, HT
time = 1

[State 116]
type = notHitBy
triggerall = animelemtime(1) >= 0
triggerall = animelemtime(6) <= 2
trigger1 = (enemy,numhelper > 0) && (EnemyNear,statetype != L)
trigger2 = (enemy,numproj > 0) && (EnemyNear,statetype != L)
trigger3 = p2bodydist x > 5
value = sac
time = 1

[State 116]
type = notHitBy
trigger1 = var(55) = [100,110]
value = sac
time = 1

[State 117]
type = AfterImage
trigger1 = animelem = 3
time = 19
PalBright = 0, 0, 0
PalContrast =  250,250,250
PalAdd = 10,10,25
PalMul = .65,.65,.75
Length = 26
FrameGap = 6
trans = add1

[State 117]
type = SprPriority
trigger1 = Time = 8
value = -1

[State 117]
type = VelSet
trigger1 = AnimElem = 1
x = -2

[State 117]
type = VelSet
trigger1 = AnimElem = 3
x = -7

[State 117]
type = VelSet
trigger1 = AnimElem = 4
x = -7

[State 117]
type = VelSet
trigger1 = AnimElem = 5
x = -2

[State 117,7]
type = VelSet
trigger1 = AnimElem = 6
x = 0

[State 117,6]
type = PlayerPush
trigger1 = Time < 24
value = 0

[State 117,5]
type = PlayerPush
trigger1 = Time >= 24
value = 1

;AI青龙
[state 117,4]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [80,82])||(var(55) = [100,110])
triggerall = animelemtime(6) >= 2
trigger1 = (enemy,numhelper > var(35)) && (EnemyNear,statetype != L) 
trigger2 = (enemy,numproj > 0) && (EnemyNear,statetype != L) 
value = 112

[state 117,3]
type = changestate
triggerall = var(59) = 1
triggerall = (var(55) = 41)||(var(55) = [60,61])||(var(55) = [80,82])||(var(55) = [100,110])
triggerall = fvar(10) = 0
trigger1 = AnimTime = 0
trigger1 = p2stateno = [5100,5122]
trigger1 = p2bodydist x > 65
value = ifelse(random>400,1150,ifelse(random>500,1100,1200))

;AI凤凰
[state 117,2]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [80,82])||(var(55) = [100,110])
triggerall = animelemtime(6) >= 2
trigger1 = (enemy,numhelper > var(35)) && (EnemyNear,statetype != L) 
trigger2 = (enemy,numproj > 0) && (EnemyNear,statetype != L)
value = 112

[state 117,a]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 41)||(var(55) = [60,61])||(var(55) = [80,82])||(var(55) = [100,110])
trigger1 = AnimTime = 0
trigger1 = p2stateno = [5100,5122]
trigger1 = p2bodydist x > 65
value = ifelse(random>400,1150,ifelse(random>500,1100,1200))

[State 117]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 站立 轻拳
[Statedef 210]
type = S
movetype = A
physics = S
anim = 210
velset = 0,0
juggle = 8+var(7)
poweradd = ifelse(fvar(10)!=1,5,2)
ctrl = 0

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
trigger1 = Random < 750
value = 2995,50
channel = 0

[State 210, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,0

[State 210, 3]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 2
attr = S, NA
air.animtype = back
animtype = light
damage = 30
priority = 7, Hit
guardflag = MA
pausetime = 8,8
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-40)/2,-75
hitsound = S210,0
guardsound = S150,0
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -3.5
air.velocity = -3.5,-6
getpower = ifelse(fvar(10)!=1,30,15),ifelse(fvar(10)!=1,10,5)
givepower = 1
air.juggle = 10
fall = 0 
yaccel = .5

[State 210, 3]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 2
attr = S, NA
air.animtype = back
animtype = light
damage = 30
priority = 7, Hit
guardflag = MA
pausetime = 8,8
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-40)/2,-75
hitsound = S210,0
guardsound = S150,0
p2stateno = ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -3.5
air.velocity = -3.5,-6
getpower = ifelse(fvar(10)!=1,30,15),ifelse(fvar(10)!=1,10,5)
givepower = 1
air.juggle = 10
fall = 0 
yaccel = .5

[State 210, 5]
type = varset
trigger1 = time = 0
var(45) = 1

;AI青龙
[State 210, 5]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 40)||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movecontact 
trigger1 = random <= 300
trigger1 = p2bodydist X > 0
value = 1100

[State 210, 5]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 40)||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movecontact 
trigger1 = random > 300
trigger1 = p2bodydist X > 0
value = 2150

;AI凤凰
[State 210, 5]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 40)||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movecontact 
trigger1 = random <= 300
trigger1 = p2bodydist X > 0
value = 1100

[State 210, 5]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 40)||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movecontact 
trigger1 = random > 300
trigger1 = p2bodydist X > 0
value = 2150

[State 210, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;站立 重拳
[Statedef 220]
type = s
movetype = a
physics = s
anim = 220
poweradd = ifelse(fvar(10)!=1,30,15)
juggle = 8+var(7)
velset = 0
ctrl = 0

[state 220, 1]
type = playsnd
trigger1 = AnimElem = 3
trigger1 = random >250
value = 2995,ifelse(random >500,51,52)
channel = 0

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 600,1
volume = 160

[State 210, 2]
type = velset
trigger1 = animelem = 2
x = 6

[state hitdef]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
persistent = 0
attr = S, NA
animtype  = high
damage    = 90
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = M
pausetime = 12,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-70)/2,-75
hitsound   = S220,0
guardsound = S150,1
ground.type = High
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-6.5
air.cornerpush = 1
air.animtype = Back
air.juggle = 10
fall = 0 
fall.recover = 0 
yaccel = .5

[state hitdef]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
persistent = 0
attr = S, NA
animtype  = high
damage    = 90
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = M
pausetime = 12,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-70)/2,-75
hitsound   = S220,0
guardsound = S150,1
p2stateno = ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.type = High
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-6.5
air.cornerpush = 1
air.animtype = Back
air.juggle = 10
fall = 0 
fall.recover = 0 
yaccel = .5

[state 3]
type = changestate
trigger1 = animtime = 0
value = 0;站立
ctrl = 1

;站立 轻脚
[Statedef 235]
type = S
movetype = A
physics = S
anim = ifelse(fvar(10)!=1,236,235)
velset = 0,0
poweradd = ifelse(fvar(10)!=1,10,5)
juggle = 8+var(7)
ctrl = 0

[State 205, 1]
type = PlaySnd
trigger1 = Time = 0
trigger1 = Random < 750
value = 2995,50
channel = 0

[State 205, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,0

[State 205, 3]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 3
attr = S, NA
air.animtype = back
animtype = light
damage = 40
priority = 7, Hit
guardflag = MA
pausetime = 10,10
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-40)/2,-70
hitsound = S210,0
guardsound = S150,0
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -3.5
air.velocity = -3.5,-6
guard.velocity = -5.5
getpower = ifelse(fvar(10)!=1,30,15),ifelse(fvar(10)!=1,10,5)
givepower = 1
fall = 0 
yaccel = .5 

[State 205, 3]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 3
attr = S, NA
air.animtype = back
animtype = light
damage = 40
priority = 7, Hit
guardflag = MA
pausetime = 10,10
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-40)/2,-70
hitsound = S210,0
guardsound = S150,0
ground.type = high
ground.slidetime = 9
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.hittime = 9
ground.velocity = -3.5
air.velocity = -3.5,-6
guard.velocity = -5.5
getpower = ifelse(fvar(10)!=1,30,15),ifelse(fvar(10)!=1,10,5)
givepower = 1
fall = 0 
yaccel = .5 

[State 205, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;站立 重脚
[statedef 245]
type = s
movetype = A
physics = s
anim = ifelse(fvar(10)!=1,246,245)
velset = 0,0
poweradd = ifelse(fvar(10)!=1,30,15)
juggle = 8+var(7)
ctrl = 0

[state 255, 1]
type = playsnd
trigger1 = animelem = 3
trigger1 = random >250
channel = 0
value = 2995,ifelse(random >500,51,52)

[State 40, NOTHITBY]
type = hitby
trigger1 = time = [5,12]
value = SCA, SA, HA, AP,SP,HP,AT,ST,HT

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 2000,9
volume = 100

[state hitdef]
type = HitDef
triggerall = var(50) = 0
triggerall = anim = 245
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
persistent = 0
attr = S, NA
animtype  = high
damage    = 90
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = M
pausetime = 12,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-80)/2,ifelse((anim = 246),-75,-95)
hitsound   = S210,3
guardsound = S150,1
ground.type = High
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -13
ground.cornerpush = 1
air.velocity = -3,-6.5
air.cornerpush = 1
air.animtype = Back
fall.recover = 0
yaccel = .5

[state hitdef]
type = HitDef
triggerall = var(50) = 0
triggerall = anim = 246
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
persistent = 0
attr = S, NA
animtype  = high
damage    = 90
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = M
pausetime = 12,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-80)/2,ifelse((anim = 246),-75,-95)
hitsound   = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-6.5
air.cornerpush = 1
air.animtype = Back
fall.recover = 0
yaccel = .5

[state hitdef]
type = HitDef
triggerall = var(50) = 1
triggerall = anim = 245
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
persistent = 0
attr = S, NA
animtype  = high
damage    = 90
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = M
pausetime = 12,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-80)/2,ifelse((anim = 246),-75,-95)
hitsound   = S210,3
guardsound = S150,1
ground.type = High
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -13
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.cornerpush = 1
air.velocity = -3,-6.5
air.cornerpush = 1
air.animtype = Back
fall.recover = 0
yaccel = .5

[state hitdef]
type = HitDef
triggerall = var(50) = 1
triggerall = anim = 246
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
persistent = 0
attr = S, NA
animtype  = high
damage    = 90
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = M
pausetime = 12,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-80)/2,ifelse((anim = 246),-75,-95)
hitsound   = S210,3
guardsound = S150,1
ground.type = low
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-6.5
air.cornerpush = 1
air.animtype = Back
fall.recover = 0
yaccel = .5

[state 2]
type = changestate
trigger1 = animtime = 0
value = 0;站立
ctrl = 1

;站立 重脚(近)
[Statedef 255]
type = s
movetype = a
physics = s
anim = ifelse(fvar(10)!=1,255,250)
poweradd = ifelse(fvar(10)!=1,30,15)
velset = 0
facep2 = 1
juggle = 8+var(7)
ctrl = 0

[state hitby]
type = hitby
trigger1 = p2bodydist x > 5
value = SCA,AP,SA,NA,HA
time=1

[state 255, 1]
type = playsnd
trigger1 = time = 0
trigger1 = random >250
channel = 0
value = 2995,ifelse(random >500,51,52)

[State 210, 2]
type = PlaySnd
trigger1 = Time = 0
value = 2000,9
volume = 100

[state hitdef]
type = HitDef
triggerall = var(50) = 0
trigger1 = anim = 255
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
persistent = 0
attr = S, NA
animtype  = high
damage    = 85
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,20,10)
givepower = 5
guardflag = M
pausetime = 12,13 
guard.pausetime = 12,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,ifelse((p2statetype = C),-55,-100)
hitsound   = S210,3
guardsound = S150,1
ground.type = high
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-6.5
air.cornerpush = 1
air.animtype = Back
air.fall = 0
fall = 0 
fall.recover = 0
yaccel = .45 

[state hitdef]
type = HitDef
triggerall = var(50) = 0
trigger1 = anim = 250
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
persistent = 0
attr = S, NA
animtype  = high
damage    = 85
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,20,10)
givepower = 5
guardflag = M
pausetime = 12,13 
guard.pausetime = 12,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,ifelse((p2statetype = C),-65,ifelse((p2statetype = S),-100,-120))
hitsound   = S210,3
guardsound = S150,1
ground.type = high
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-6.5
air.cornerpush = 1
air.animtype = Back
air.fall = 0
fall = 0 
fall.recover = 0
yaccel = .45 

[state hitdef]
type = HitDef
triggerall = var(50) = 1
trigger1 = anim = 255
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
persistent = 0
attr = S, NA
animtype  = high
damage    = 85
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,20,10)
givepower = 5
guardflag = M
pausetime = 12,13 
guard.pausetime = 12,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,ifelse((p2statetype = C),-55,-100)
hitsound   = S210,3
guardsound = S150,1
ground.type = high
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -7
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.cornerpush = 1
air.velocity = -3,-6.5
air.cornerpush = 1
air.animtype = Back
air.fall = 0
fall = 0 
fall.recover = 0
yaccel = .45 

[state hitdef]
type = HitDef
triggerall = var(50) = 1
trigger1 = anim = 250
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
persistent = 0
attr = S, NA
animtype  = high
damage    = 85
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,20,10)
givepower = 5
guardflag = M
pausetime = 12,13 
guard.pausetime = 12,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,ifelse((p2statetype = C),-65,ifelse((p2statetype = S),-100,-120))
hitsound   = S210,3
guardsound = S150,1
ground.type = high
ground.slidetime = 19
ground.hittime  = 19
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-6.5
air.cornerpush = 1
air.animtype = Back
air.fall = 0
fall = 0 
fall.recover = 0
yaccel = .45 

;AI青龙
[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [80,82])||(var(55) = [100,110])
trigger1 = p2movetype = A
trigger1 = p2bodydist X < 55
value = ifelse(random>500,2150,ifelse(p2stateno>3000,2150,1003))

[State 255, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = (var(55) = [80,81])||(var(55) = [100,110])
triggerall = fvar(10) = 0
triggerall = life <= 250
triggerall = power >= 3000
trigger1 = random <= 750
trigger1 = movehit >=2
trigger1 = p2bodydist X > 0
value = 4500 

[State 255, 5]
type = ChangeState
triggerall = var(59) = 1 
triggerall = (var(55) = 40)||(var(55) = [60,61])||(var(55) = [80,83])||(var(55) = [100,110])
triggerall = fvar(10) = 0
trigger1 = random > 500
trigger1 = moveguarded
trigger1 = p2bodydist X > 0
value = 1100 

[State 255, 6]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = random > 350
trigger1 = movecontact
trigger1 = p2bodydist X > 0
value = 1200 

[State 255, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life <=500
triggerall = (var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = random <= 750
trigger1 = movehit
trigger1 = p2bodydist X > 0
value = 1003 

[State 255, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall =  (var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
triggerall = life >500
trigger1 = random <= 750
trigger1 = movehit >=2
trigger1 = p2bodydist X > 0
value = 1000 

[State 255, 7]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movehit
trigger1 = p2bodydist X > 0
value = 1100 

;AI凤凰
[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [80,82])||(var(55) = [100,110])
trigger1 = p2movetype = A
trigger1 = p2bodydist X < 35
value = ifelse(random>500,2150,ifelse(p2stateno>3000,2150,1090))

[State 255, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [80,82])||(var(55) = [100,110])
triggerall = life <= 250
triggerall = power >= 3000
trigger1 = random <= 750
trigger1 = movehit >=2
trigger1 = p2bodydist X > 0
value = 4600 

[State 255, 5]
type = ChangeState
triggerall = var(59) = 1 
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = random > 500
trigger1 = moveguarded
trigger1 = p2bodydist X > 0
value = 1100 

[State 255, 6]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 40)||(var(55) = [60,61])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = random > 500
trigger1 = movecontact
trigger1 = p2bodydist X > 0
value = 1200 

[State 255, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 41)||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
triggerall = life <=500
trigger1 = random <= 750
trigger1 = movehit
trigger1 = p2bodydist X > 0
value = 1090 

[State 255, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
triggerall = life >500
trigger1 = random <= 750
trigger1 = movehit >=2
trigger1 = p2bodydist X > 0
value = 1080 

[State 255, 7]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movehit
trigger1 = p2bodydist X > 0
value = 1100 

[state 3]
type = changestate
trigger1 = animtime = 0
value = 0;站立
ctrl = 1

;站立 轻拳(近)
; Standing light punch
[Statedef 215]
type = S
movetype = A
physics = S
anim = 215
velset = 0,0
juggle = 8
poweradd = ifelse(fvar(10)!=1,10,5)
ctrl = 0

[State 215, 1]
type = PlaySnd
trigger1 = Time = 0
trigger1 = Random < 750
value = 2995,50
channel = 0

[State 215, 2]
type = PlaySnd
trigger1 = Time = 2
value = 600,0

[State 215, 3]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 2
attr = S, NA
air.animtype = back
animtype = light
damage = 25
priority = 7, Hit
guardflag = MA
pausetime = 8,8
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-40)/2,-75
hitsound = S210,0
guardsound = S150,0
ground.type = high
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -3.9
ground.cornerpush.veloff = -3.5
air.velocity = -3.5,-6
guard.velocity = -4.5
getpower = ifelse(fvar(10)!=1,30,15),ifelse(fvar(10)!=1,10,5)
givepower = 1
air.juggle = 10
fall = 0 
yaccel = .5

[State 215, 3]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 2
attr = S, NA
air.animtype = back
animtype = light
damage = 25
priority = 7, Hit
guardflag = MA
pausetime = 8,8
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-40)/2,-75
hitsound = S210,0
guardsound = S150,0
ground.type = high
ground.slidetime = 10
ground.hittime = 10
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.velocity = -3.9
ground.cornerpush.veloff = -3.5
air.velocity = -3.5,-6
guard.velocity = -4.5
getpower = ifelse(fvar(10)!=1,30,15),ifelse(fvar(10)!=1,10,5)
givepower = 1
air.juggle = 10
fall = 0 
yaccel = .5

;AI青龙
[State 215, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,43])||(var(55) = [60,64])||(var(55) = [80,85])||(var(55) = [100,110])
trigger1 = random < 500
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X <= 50
value = 410

[State 215, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,85])||(var(55) = [100,110])
trigger1 = random < 499
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = (0,35)
value = 215  

[State 215, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = (var(55) = 20)||(var(55) = [40,43])||(var(55) = [60,64])||(var(55) = [80,85])||(var(55) = [100,110])
triggerall = fvar(10) = 0
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X <= 35
value = 225 

;AI凤凰
[State 215, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,42])||(var(55) = [60,64])||(var(55) = [80,85])||(var(55) = [100,110])
trigger1 = random < 500
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X <= 50
value = 410

[State 215, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,85])||(var(55) = [100,110])
trigger1 = random < 500
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = (0,35)
value = 215  

[State 215, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,85])||(var(55) = [100,110])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X <= 35
value = 225 

[State 215, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;站立 重拳(近)
[Statedef 225]
type = s
movetype = a
physics = s
anim = ifelse(fvar(10)=1,226,225)
poweradd = ifelse(fvar(10)!=1,30,15)
velset = 0
juggle = 8+var(7)
ctrl = 0

[state hitby]
type = hitby
trigger1 = p2bodydist x > 5
trigger1 = time = [0,7]
value = SCA,AP,SA,NA,HA
time=1

[state hitby]
type = nothitby
trigger1 = time = [0,10]
trigger1 = prevstateno = [160,162]
trigger2 = time = [0,10]
trigger2 = p2stateno = 965
trigger3 = enemy,numhelper>var(35)
value = SCA
time=1
ignorehitpause=1

[state 225, 1]
type = playsnd
trigger1 = time = 0
trigger1 = random >250
channel = 0
value = 2995,ifelse(random >500,51,52)

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 600,1
volume = 160

[state hitdef]
type = HitDef
triggerall = var(50) = 0
triggerall = anim = 225
triggerall = !movecontact
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
persistent = 0
attr = S, NA
hitflag = MAF
animtype  = hard
air.animtype  = back
damage    = 80
getpower = ifelse(fvar(10)!=1,80,40),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = MA
pausetime = 12,13
sparkno = S736
guard.pausetime = 12,17
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,-65
hitsound   = S220,0
guardsound = S150,1
ground.type = hard
ground.slidetime = 17
ground.hittime  = 19
ground.velocity = -8
guard.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-8
air.cornerpush = 1
air.fall = 0
fall = 0
yaccel = .5

[state hitdef]
type = HitDef
triggerall = var(50) = 0
triggerall = anim = 225
triggerall = !movecontact
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 4
persistent = 0
attr = S, NA
hitflag = MAF
animtype  = hard
air.animtype  = back
damage    = 100
getpower = ifelse(fvar(10)!=1,80,40),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = MA
pausetime = 12,13
sparkno = S736
guard.pausetime = 12,17
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,-105
hitsound   = S220,0
guardsound = S150,1
ground.type = hard
ground.slidetime = 17
ground.hittime  = 19
ground.velocity = -8
guard.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-8
air.cornerpush = 1
air.fall = 0
fall = 0
yaccel = .5

[state hitdef]
type = HitDef
triggerall = var(50) = 0
triggerall = anim = 226
triggerall = !movecontact
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
persistent = 0
attr = S, NA
hitflag = MAF
animtype  = hard
air.animtype  = back
damage    = 80
getpower = ifelse(fvar(10)!=1,80,40),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = MA
pausetime = 12,13
sparkno = S736
guard.pausetime = 12,17
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-65
hitsound   = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 19
ground.hittime  = 23
ground.velocity = -8
guard.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-8
air.cornerpush = 1
air.fall = 0
fall = 0
yaccel = .5

[state hitdef]
type = HitDef
triggerall = var(50) = 0
triggerall = anim = 226
triggerall = !movecontact
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 4
trigger2 = animelem = 5
persistent = 0
attr = S, NA
hitflag = MAF
animtype  = hard
air.animtype  = back
damage    = 100
getpower = ifelse(fvar(10)!=1,80,40),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = MA
pausetime = 12,13
sparkno = S736
guard.pausetime = 12,17
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,-105
hitsound   = S220,0
guardsound = S150,1
ground.type = hard
ground.slidetime = 17
ground.hittime  = 19
ground.velocity = -8
guard.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-8
air.cornerpush = 1
air.fall = 0
fall = 0
yaccel = .5

[state hitdef]
type = HitDef
triggerall = var(50) = 1
triggerall = anim = 225
triggerall = !movecontact
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
persistent = 0
attr = S, NA
hitflag = MAF
animtype  = hard
air.animtype  = back
damage    = 80
getpower = ifelse(fvar(10)!=1,80,40),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = MA
pausetime = 12,13
sparkno = S736
guard.pausetime = 12,17
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,-65
hitsound   = S220,0
guardsound = S150,1
ground.type = hard
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.slidetime = 17
ground.hittime  = 19
ground.velocity = -8
guard.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-8
air.cornerpush = 1
air.fall = 0
fall = 0
yaccel = .5

[state hitdef]
type = HitDef
triggerall = var(50) = 1
triggerall = anim = 225
triggerall = !movecontact
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 4
persistent = 0
attr = S, NA
hitflag = MAF
animtype  = hard
air.animtype  = back
damage    = 100
getpower = ifelse(fvar(10)!=1,80,40),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = MA
pausetime = 12,13
sparkno = S736
guard.pausetime = 12,17
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,-105
hitsound   = S220,0
guardsound = S150,1
ground.type = hard
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.slidetime = 17
ground.hittime  = 19
ground.velocity = -8
guard.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-8
air.cornerpush = 1
air.fall = 0
fall = 0
yaccel = .5

[state hitdef]
type = HitDef
triggerall = var(50) = 1
triggerall = anim = 226
triggerall = !movecontact
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
persistent = 0
attr = S, NA
hitflag = MAF
animtype  = hard
air.animtype  = back
damage    = 80
getpower = ifelse(fvar(10)!=1,80,40),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = MA
pausetime = 12,13
sparkno = S736
guard.pausetime = 12,17
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-65
hitsound   = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 19
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.hittime  = 23
ground.velocity = -8
guard.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-8
air.cornerpush = 1
air.fall = 0
fall = 0
yaccel = .5

[state hitdef]
type = HitDef
triggerall = var(50) = 1
triggerall = anim = 226
triggerall = !movecontact
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 4
trigger2 = animelem = 5
persistent = 0
attr = S, NA
hitflag = MAF
animtype  = hard
air.animtype  = back
damage    = 100
getpower = ifelse(fvar(10)!=1,80,40),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = MA
pausetime = 12,13
sparkno = S736
guard.pausetime = 12,17
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,-105
hitsound   = S220,0
guardsound = S150,1
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.type = hard
ground.slidetime = 17
ground.hittime  = 19
ground.velocity = -8
guard.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-8
air.cornerpush = 1
air.fall = 0
fall = 0
yaccel = .5

;AI青龙
[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [80,81])||(var(55) = [100,110])
triggerall = p2stateno > 3000
triggerall = p2stateno != [5000,5300]
triggerall = p2movetype = I
triggerall = p2bodydist X < 35
trigger1 = prevstateno != [160,162]
trigger2 = prevstateno = [160,162]
trigger2 = time >= 5
value = 2150

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [80,81])||(var(55) = [100,110])
triggerall = p2movetype = A
triggerall = p2bodydist X < 55
trigger1 = prevstateno != [160,162]
trigger2 = prevstateno = [160,162]
trigger2 = time >= 5
value = ifelse(random>500,2150,ifelse(p2stateno>3000,2150,1003))

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life <= 300
triggerall = power >= 3000
triggerall = (var(55) = [80,81])||(var(55) = [100,110])
trigger1 = movehit
trigger1 = p2bodydist X < 70
value = 4500

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = (var(55) = [25,26])||(var(55) = [45,67])||(var(55) = [65,67])
trigger1 = random<400
trigger1 = movecontact
trigger1 = p2statetype != A 
trigger1 = p2bodydist X = [-20,55]
value = ifelse(random>=500,1700,1250)

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = power >= 1000
triggerall = life<p2life
triggerall = (var(55) = [60,61])||(var(55) = [80,83])||(var(55) = [103,110])
trigger1 = random < 400
trigger1 = movehit
trigger1 = p2statetype != A 
trigger1 = p2bodydist X < 70
value = ifelse(power>=2000,3600,3650)

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = power >= 1000
triggerall = (var(55) = [60,61])||(var(55) = [80,83])||(var(55) = [103,110])
trigger1 = movehit
trigger1 = p2statetype != A 
trigger1 = p2bodydist X < 70
value = ifelse(power>=2000,3010,3005)

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life <400
triggerall = (var(55) = 40)||(var(55) = [60,61])||(var(55) = [80,83])||(var(55) = [105,110])
trigger1 = random < 400
trigger1 = movehit 
trigger1 = p2bodydist X < 70
value = ifelse(random<300,1800,1515)

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 40)||(var(55) = [60,61])||(var(55) = [80,83])||(var(55) = [100,108])
trigger1 = random < 400
trigger1 = movehit
trigger1 = p2bodydist X <= 75
value = ifelse(random<300,1000,1003)

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 40)||(var(55) = [60,61])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movehit 
trigger1 = p2bodydist X <= 75
value = ifelse(random<600,1805,1515)  

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 40)||(var(55) = [60,61])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movecontact || moveguarded
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = [0,70]
value = ifelse(random>650,1800,ifelse(random>500,280,260))

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 40)||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movehit 
trigger1 = p2statetype != A 
trigger1 = p2bodydist X = [-20,70]
value = ifelse(random>750,900,ifelse(random>500,280,260))

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = animtime = 0
trigger1 = movecontact || moveguarded
trigger1 = p2statetype = S 
trigger1 = p2bodydist X = [0,65]
value = 410        

;AI凤凰
[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [80,81])||(var(55) = [100,110])
triggerall = p2stateno > 3000
triggerall = p2stateno != [5000,5300]
triggerall = p2movetype = I
triggerall = p2bodydist X < 35
trigger1 = prevstateno != [160,162]
trigger2 = prevstateno = [160,162]
trigger2 = time >= 8
value = 2150

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [80,82])||(var(55) = [100,110])
triggerall = p2movetype = A
triggerall = p2bodydist X < 55
trigger1 = prevstateno != [160,162]
trigger2 = prevstateno = [160,162]
trigger2 = time >= 8
value = ifelse(random>500,2150,ifelse(p2stateno>3000,2150,1080))

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life <= 300
triggerall = power >= 3000
triggerall = (var(55) = [80,82])||(var(55) = [100,110])
trigger1 = p2statetype != A
trigger1 = movehit
trigger1 = p2bodydist X = [-20,35]
value = 4600

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = (var(55) = [25,26])||(var(55) = [45,47])||(var(55) = [65,68])
trigger1 = random<400
trigger1 = movecontact
trigger1 = p2statetype != A 
trigger1 = p2bodydist X = [-20,55]
value = ifelse(random>=500,1700,1250)

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = (var(55) = 40)||(var(55) = [60,61])||(var(55) = [80,82])||(var(55) = [100,110])
trigger1 = movehit
trigger1 = p2statetype != A 
trigger1 = p2bodydist X = [-20,55]
value = ifelse(power>=2000,4300,3020)

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life <400
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [103,110])
trigger1 = random<400
trigger1 = movehit 
trigger1 = p2bodydist X = [-20,55]
value = 2400 

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [103,110])
trigger1 = movehit
trigger1 = p2bodydist X <= 55
value = ifelse(random<600,2400,1600)

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [25,26])||(var(55) = [45,47])||(var(55) = [65,69])
trigger1 = movehit
trigger1 = p2bodydist X <= 55
value = ifelse(random<600,1775,1090)

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = random < 400
trigger1 = movehit 
trigger1 = p2bodydist X <= 45
value = ifelse(random<600,1785,1080)  

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 40)||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movecontact || moveguarded
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = [-10,70]
value = ifelse(random>750,2400,ifelse(random>500,280,260))

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movehit 
trigger1 = p2statetype != A 
trigger1 = p2bodydist X = [-10,70]
value = ifelse(random>750,900,ifelse(random>500,280,260))

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = animtime = 0
trigger1 = movecontact || moveguarded
trigger1 = p2statetype = S 
trigger1 = p2bodydist X = [0,65]
value = 410        

[state 3]
type = changestate
trigger1 = animtime = 0
value = 0;站立
ctrl = 1

;站立 轻脚(近)
[Statedef 205]
type = S
movetype = A
physics = S
anim = 205
velset = 0,0
juggle = 8+var(7)
poweradd = ifelse(fvar(10)!=1,10,5)
ctrl = 0

[State 205, 1]
type = PlaySnd
trigger1 = Time = 0
trigger1 = Random < 750
value = 2995,50
channel = 0

[State 205, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,0

[State 205, 3]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 3
attr = S, NA
air.animtype = back
animtype = light
damage = 40
priority = 7, Hit
guardflag = MA
pausetime = 10,10
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-40)/2,-70
hitsound = S210,0
guardsound = S150,0
ground.type = low
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -3.5
air.velocity = -3.5,-7
guard.velocity = -5.5
getpower = ifelse(fvar(10)!=1,30,15),ifelse(fvar(10)!=1,10,5)
givepower = 1
air.juggle = 10
yaccel = .5

[State 205, 3]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 3
attr = S, NA
air.animtype = back
animtype = light
damage = 40
priority = 7, Hit
guardflag = MA
pausetime = 10,10
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-40)/2,-70
hitsound = S210,0
guardsound = S150,0
ground.type = low
ground.slidetime = 9
ground.hittime = 9
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.velocity = -3.5
air.velocity = -3.5,-7
guard.velocity = -5.5
getpower = ifelse(fvar(10)!=1,30,15),ifelse(fvar(10)!=1,10,5)
givepower = 1
air.juggle = 10
yaccel = .5

;AI青龙
[State 205, 11]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,85])||(var(55) = [100,110])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X <= 35
value = 225

[State 205, 12]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,85])||(var(55) = [100,110])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X < 60
value = 410  

;AI凤凰
[State 205, 13]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,85])||(var(55) = [100,110])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X <= 35
value = 225

[State 205, 14]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,85])||(var(55) = [100,110])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X < 60
value = 410  

[State 205, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 12

;超重
[Statedef 295]
type = S
movetype = A
physics = S
velset = 0,0
juggle = 10
ctrl = 0
poweradd = ifelse(fvar(10)!=1,40,20)
sprpriority = 2
anim = 295

[State 295]
type = AfterImage
trigger1 = prevstateno = [55,56]
trigger1 = Time = 0 && Vel X!= 0
time = 20
length = 8
trans = add1

[State 295]
type = varSet
triggerall = var(30) = 0
trigger1 = Movecontact
var(30) = 1

[STate 295]
type = PlaySNd
trigger1 = Animelem = 2 && fvar(28) = 0
value = 2995,ifelse(random >500,51,52)
channel = 0
persistent = 0

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 600,1
volume = 230

[State 210, 2]
type = posadd
trigger1 = animelem = 1
x = 15

[State 295]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = A,NA
damage = 115,0
getpower = ifelse(fvar(10)!=1,90,45),ifelse(fvar(10)!=1,30,15)
air.animtype = back
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 12,13
guard.pausetime = 11,11
sparkno = S736
guard.sparkno = S731
sparkxy = ((p2bodydist x)-80)/2,-67
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 27
ground.hittime = 29
ground.cornerpush.veloff = -5
guard.cornerpush.veloff = -17
ground.velocity = -3,-6
guard.velocity = -11
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 15
fall = 1
air.fall = 1
air.juggle = 10
fall.recover = 0

[State 295]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0

[State 295, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;下 轻拳
[Statedef 400]
type = C
movetype = A
physics = C
anim = 400
velset = 0,0
juggle = 8+var(7)
poweradd = ifelse(fvar(10)!=1,5,2)
ctrl = 0

[State 400, 1]
type = PlaySnd
trigger1 = Time = 0
trigger1 = Random < 650
value = 2995,50
channel = 0

[State 400, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,0

[State 400, 3]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 2
attr = S, NA
air.animtype = back
animtype = light
damage = 25
priority = 7, Hit
guardflag = MA
pausetime = 10,10
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-70)/2,-40
hitsound = S210,0
guardsound = S150,0
ground.type = low
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -3.5
air.velocity = -3.5,-6
air.juggle = 10
getpower = ifelse(fvar(10)!=1,30,15),ifelse(fvar(10)!=1,10,5)
givepower = 1
yaccel = .5

[State 400, 3]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 2
attr = S, NA
air.animtype = back
animtype = light
damage = 25
priority = 7, Hit
guardflag = MA
pausetime = 10,10
sparkno = S735
guard.sparkno = S732
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
sparkxy = ((p2bodydist x)-70)/2,-40
hitsound = S210,0
guardsound = S150,0
ground.type = low
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -3.5
air.velocity = -3.5,-6
air.juggle = 10
getpower = ifelse(fvar(10)!=1,30,15),ifelse(fvar(10)!=1,10,5)
givepower = 1
yaccel = .5

;AI青龙


[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [80,82])||(var(55) = [100,110])
trigger1 = p2movetype = A
trigger1 = p2bodydist X < 35
value = ifelse(random>500,2150,1003)

[State 400, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
triggerall = random < 300
trigger1 = movecontact || moveguarded
trigger1 = p2statetype = S 
trigger1 = p2bodydist X = [0,35]
value = ifelse(random>500,260,410)

[State 400, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
triggerall = random<200
trigger1 = movecontact || moveguarded
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = [0,35]
value = ifelse(random>500,260,280) 

[State 400, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
trigger1 = movecontact 
trigger1 = animtime = 0
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = [0,35]
value = ifelse(random>500,225,425)

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = moveguarded
trigger1 = p2bodydist X = (35,55)
value = 260

[State 400, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
triggerall = random<200
trigger1 = movehit
trigger1 = p2bodydist X =[0,28]
value = ifelse(random>500,425,ifelse(random<500,280,260))

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = var(5) = 1
trigger1 = movecontact
trigger1 = p2bodydist X = [0,55]
value = ifelse(random >= 500,400,410)

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
triggerall = random < 500
trigger1 = var(5) = 1
trigger1 = movecontact
trigger1 = p2bodydist X > 55
value = 260

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = (55,70)
value = 420

[State 400, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = !movecontact
trigger1 = animtime = 0
value = ifelse(random>500,112,ifelse(random<500,117,116)) 

[State 400, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
trigger1 = !movecontact
trigger1 = animtime = 0
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = [0,35]
value = ifelse(random>500,225,425) 

;AI凤凰

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = p2movetype = A
trigger1 = p2bodydist X < 35
value = ifelse(random>500,2150,1090)

[State 400, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
trigger1 = movecontact
trigger1 = animtime = 0
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = [0,35]
value = ifelse(random>500,225,425)   

[State 400, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = random<500
trigger1 = movecontact || moveguarded
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = [0,35]
value = ifelse(random>500,260,280)  

[State 400, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = random<500
trigger1 = movecontact || moveguarded
trigger1 = p2statetype = S 
trigger1 = p2bodydist X = [0,35]
value = ifelse(random>500,260,410)

[State 400, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movehit
trigger1 = p2bodydist X =[0,28]
value = ifelse(random>500,425,ifelse(random<500,280,260))

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = (35,55)
value = 260

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = random<500
trigger1 = var(5) = 1
trigger1 = movecontact
trigger1 = p2bodydist X = [0,55]
value = ifelse(random >= 500,400,410)

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = random<500
trigger1 = var(5) = 1
trigger1 = movecontact
trigger1 = p2bodydist X > 55
value = 260

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = (55,70)
value = 420

[State 400, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = !movecontact
trigger1 = animtime = 0
value = ifelse(random>500,112,ifelse(random<500,117,116)) 

[State 400, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
trigger1 = !movecontact
trigger1 = animtime = 0
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = [0,35]
value = ifelse(random>500,225,425) 

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;下 重拳
[Statedef 425]
type = C
movetype = a
physics = C
anim = ifelse(fvar(10)!=1,425,435)
poweradd = ifelse(fvar(10)!=1,30,15)
velset = 0
juggle = 8+var(7)
ctrl = 0

[state hitby]
type = hitby
trigger1 = p2bodydist x > 5
value = SCA,AP,SA,NA,HA
time=1

[state hitby]
type = nothitby
trigger1 = time = [0,10]
trigger1 = prevstateno = [160,162]
value = SCA
time=1
ignorehitpause=1

[state 425]
type = playsnd
trigger1 = time =0
value = 2995,ifelse(random >500,51,52)
channel = 0

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 600,1
volume = 180

[state hitdef]
type = HitDef
triggerall = var(50) = 0
triggerall = (p2stateno != [5020,5040])  
triggerall = p2stateno != [154,155]
trigger1 = animelem = 3
persistent = 0
attr = S, NA
animtype  = hard
damage    = 85
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = M
pausetime = 12,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,ifelse(fvar(10)!=1,-66,-51)
hitsound   = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 19
ground.hittime  = 21
ground.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-8
air.cornerpush = 1
air.animtype = Back
fall.recover = 0
yaccel = .5

[state hitdef]
type = HitDef
triggerall = var(50) = 0
triggerall = anim = 425
triggerall = !MoveContact
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 4
trigger2 = (p2stateno != [5020,5040])  
trigger2 = p2stateno != [154,155]
trigger2 = animelem = 5
persistent = 0
attr = S, NA
animtype  = high
damage    = 90
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = M
pausetime = 12,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-110
hitsound   = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -8
ground.cornerpush = 1
air.velocity = -3,-7
air.cornerpush = 1
air.animtype = Back
air.juggle = 10
fall.recover = 0
yaccel = .5

[state hitdef]
type = HitDef
triggerall = var(50) = 1
triggerall = (p2stateno != [5020,5040])  
triggerall = p2stateno != [154,155]
trigger1 = animelem = 3
persistent = 0
attr = S, NA
animtype  = hard
damage    = 85
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = M
pausetime = 12,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,ifelse(fvar(10)!=1,-66,-51)
hitsound   = S220,0
guardsound = S150,1
ground.type = low
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.slidetime = 19
ground.hittime  = 21
ground.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-8
air.cornerpush = 1
air.animtype = Back
fall.recover = 0
yaccel = .5

[state hitdef]
type = HitDef
triggerall = var(50) = 1
triggerall = anim = 425
triggerall = !MoveContact
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 4
trigger2 = (p2stateno != [5020,5040])  
trigger2 = p2stateno != [154,155]
trigger2 = animelem = 5
persistent = 0
attr = S, NA
animtype  = high
damage    = 90
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = M
pausetime = 12,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-110
hitsound   = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.velocity = -8
ground.cornerpush = 1
air.velocity = -3,-7
air.cornerpush = 1
air.animtype = Back
air.juggle = 10
fall.recover = 0
yaccel = .5

;AI青龙
[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [80,82])||(var(55) = [100,110])
triggerall = p2movetype = A
triggerall = p2bodydist X < 55
trigger1 = prevstateno != [160,162]
trigger2 = prevstateno = [160,162]
trigger2 = time >= 8
value = ifelse(random>500,2150,ifelse(p2stateno>3000,2150,1003))

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = (var(55) = [25,26])||(var(55) = [45,47])||(var(55) = [65,68])
trigger1 = random<400
trigger1 = movecontact
trigger1 = p2statetype != A 
trigger1 = p2bodydist X = [-20,55]
value = ifelse(random>=500,1700,1250)

[State 425, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = random < 400
trigger1 = movehit
trigger1 = p2bodydist X < 70
value = ifelse(random<500,280,ifelse(random<500,1515,1805)) 

[State 425, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = random < 500
trigger1 = movecontact || moveguarded
trigger1 = p2bodydist X < 70
value = ifelse(random<500,1800,ifelse(random<500,260,900)) 

[State 425, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movecontact || moveguarded
trigger1 = p2bodydist X < 70
value = ifelse(random<500,1150,ifelse(random<500,1200,1515)) 

;AI凤凰
[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [80,82])||(var(55) = [100,110])
triggerall = p2movetype = A
triggerall = p2bodydist X < 55
trigger1 = prevstateno != [160,162]
trigger2 = prevstateno = [160,162]
trigger2 = time >= 8
value = ifelse(random>500,2150,ifelse(p2stateno>3000,2150,1080))

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = (var(55) = [20,27])||(var(55) = [45,47])||(var(55) = [65,69])
trigger1 = random<400
trigger1 = movecontact
trigger1 = p2statetype != A 
trigger1 = p2bodydist X = [-20,55]
value = ifelse(random>=500,1700,1250)

[State 425, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = random < 700
trigger1 = movecontact || moveguarded
trigger1 = p2bodydist X < 70
value = ifelse(random<500,280,ifelse(random<500,2400,900)) 

[State 425, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movecontact || moveguarded
trigger1 = p2bodydist X < 70
value = ifelse(random<500,1150,ifelse(random<500,1200,2400)) 

[state 3]
type = changestate
trigger1 = animtime = 0
value = 11
ctrl = 1

;下 重脚
[Statedef 420]
type = C
movetype = A
physics = C
juggle = 15
velset = 0,0
ctrl = 0
poweradd = ifelse(fvar(10)!=1,30,15)
juggle = 13
sprpriority = 2
anim = ifelse(fvar(10)!=1,421,420)

[STate 420]
type = PlaySnd
trigger1 = Animelem = 2
trigger1 = random < 400
value = 2000,11
channel = 0

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 2
value = 600,5
volume = 160

[State 210, 2]
type = posadd
triggerall = anim = 421
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
x = 13

[State 420,1]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 2
attr = C,NA
damage = 85,0
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,20,10)
animtype = hard
guardflag = L
hitflag = MAF
priority = 5,Hit
pausetime = 12,13
guard.pausetime = 12,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,ifelse(anim=421,-40,-20)
hitsound = S210,3
guardsound = S150,1
ground.type = Trip
ground.slidetime = 15
ground.hittime = 20
ground.velocity = -3,-4
airguard.velocity = -2.3,-4
guard.velocity = -9
air.type = low
air.velocity = -2.4,-5
air.hittime = 10
fall = 1
air.fall = 1
fall.recover = 0
;down.velocity = -3,-5
;down.bounce = 1

[State 420,1]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 2
attr = C,NA
damage = 85,0
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,20,10)
animtype = hard
guardflag = L
hitflag = MAF
priority = 5,Hit
pausetime = 12,13
guard.pausetime = 12,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,ifelse(anim=421,-40,-20)
hitsound = S210,3
guardsound = S150,1
ground.type = Trip
ground.slidetime = 15
ground.hittime = 20
ground.velocity = -3,-4
airguard.velocity = -2.3,-4
guard.velocity = -9
air.type = low
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.velocity = -2.4,-5
air.hittime = 10
fall = 1
air.fall = 1
fall.recover = 0
;down.velocity = -3,-5
;down.bounce = 1

;AI青龙
[State 420, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = random < 500
trigger1 = movecontact || moveguarded
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = (0,70)
value = 900

[State 410, 4]
type = ChangeState
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
triggerall = fvar(10) = 0
triggerall = var(59) = 1
trigger1 = Random <= 500
trigger1 = moveguarded
trigger1 = p2bodydist X = (65,80)
value = 1350

[State 420, 4]
type = ChangeState
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
triggerall = var(59) = 1
trigger1 = random < 500
trigger1 = movehit 
trigger1 = p2bodydist X = (0,70)
value = 1650

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = (55,70)
value = 1702

;AI凤凰

[State 410, 4]
type = ChangeState
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
triggerall = fvar(10) = 1
triggerall = var(59) = 1
trigger1 = Random <= 500
trigger1 = moveguarded
trigger1 = p2bodydist X = (65,80)
value = ifelse(random<500,2150,1350)

[State 420, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [100,110])
trigger1 = movecontact || moveguarded
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = (0,70)
value = 2150

[State 420, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])
trigger1 = movecontact || moveguarded
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = (0,70)
value = 900

[State 420, 4]
type = ChangeState
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
triggerall = var(59) = 1
trigger1 = Random <= 500
trigger1 = movehit 
trigger1 = p2bodydist X = (0,70)
value = 1650

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = (55,70)
value = 1702

[State 420]
type = ChangeState 
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;下 轻脚
[Statedef 410]
type    = C
movetype= A
physics = C
juggle = 8+var(7)
poweradd= ifelse(fvar(10)!=1,5,2)
ctrl = 0
anim = 410
facep2 = 1
velset = 0,0

[state hitby]
type = hitby
trigger1 = p2bodydist x > 5
value = SCA,AP,SA,NA,HA
time=1

[State 410, 1]
type = PlaySnd
trigger1 = random <=710
trigger1 = Time = 1
channel = 0
value = 2995,50

[State 410, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,0

[State 410, 2]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 3
attr = C, NA
damage    = 18
air.animtype = back
animtype = light
getpower = ifelse(fvar(10)!=1,30,15),ifelse(fvar(10)!=1,10,5)
guardflag = LA
pausetime = 10,10
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-50)/2, 0
hitsound   = S210,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 11
ground.hittime  = 11
ground.velocity = -3.5
air.type = High
air.velocity = -1.4,-3

[State 410, 2]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 3
attr = C, NA
damage    = 18
air.animtype = back
animtype = light
getpower = ifelse(fvar(10)!=1,30,15),ifelse(fvar(10)!=1,10,5)
guardflag = LA
pausetime = 10,10
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-50)/2, 0
hitsound   = S210,0
guardsound = S150,0
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.type = Low
ground.slidetime = 11
ground.hittime  = 11
ground.velocity = -3.5
air.type = High
air.velocity = -1.4,-3

;AI青龙
[State 410, 4]
type = varset
triggerall = var(59) = 1
triggerall = fvar(10) = 0
trigger1 = !movecontact
trigger1 = p2stateno = [0,200] 
trigger1 = var(41)<=0
var(41)=1

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = time = 0
triggerall = (var(55) = [80,82])||(var(55) = [100,110])
trigger1 = (target,stateno = 4990)||(target,stateno = 4996)
value = ifelse(random<500,245,1510)

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [80,82])||(var(55) = [100,110])
trigger1 = p2stateno > 3000
trigger1 = p2movetype = I
trigger1 = p2bodydist X = [-50,50]
value = 2150

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = power >= 1000
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = p2statetype != A && p2life >= 80
trigger1 = life < p2life
trigger1 = movehit
trigger1 = p2bodydist X = (30,60)
trigger2 = random < 300
trigger2 = p2statetype != A && p2life >= 80
trigger2 = movehit
trigger2 = p2bodydist X = (30,60)
trigger3 = p2movetype = A
trigger3 = p2bodydist X = [-50,50]
value = 3000

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [80,82])||(var(55) = [100,110])
trigger1 = power < 1000
trigger1 = p2movetype = A
trigger1 = p2bodydist X = [-50,50]
value = ifelse(p2stateno>3000,2150,1003)

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [80,82])||(var(55) = [100,110])
triggerall = life <= 300
triggerall = power >= 3000
trigger1 = movehit
trigger1 = random <= 750
trigger1 = p2bodydist X > 50
value = 4500

[State 410,27]
type = ChangeState
value = ifelse(var(41)=1,1100,410)
triggerall = Var(59) = 1 
triggerall = fvar(10) = 0
triggerall = (var(55) = [25,26])||(var(55) = [45,47])||(var(55) = [65,69])
triggerall = p2life != 0
triggerall = time >= 8
trigger1 = p2movetype != A
trigger1 = P2statetype = S
trigger1 = P2BodyDist X = [35,55]
trigger2 = p2movetype != A
trigger2 = p2stateno != [5100,5170]
trigger2 = p2BodyDist x = [35,55]

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movecontact
trigger1 = p2bodydist X = [0,55]
value = ifelse(random >= 500,400,410)

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = var(5) = 1
trigger1 = movecontact
trigger1 = p2bodydist X > 55
value = 260

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
triggerall = life >= 400
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = [5,20]
value = 400

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = [21,30]
value = ifelse((p2statetype = s),260,280)  

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = [0,20]
value = 225

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
triggerall = life > 300
triggerall = power >= 3000
trigger1 = p2statetype != A && p2life > 330
trigger1 = movehit
trigger1 = p2bodydist X = (30,60)
value = ifelse(random < 500,2150,4250)

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
triggerall = fvar(10) = 0
trigger1 = random > 450
trigger1 = movehit 
trigger1 = p2bodydist X = (50,55)
value = 420

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])
triggerall = movecontact || moveguarded
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = (30,70)
value = ifelse(random>500,900,260)   

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [100,110])
triggerall = movecontact || moveguarded
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = (30,70)
value = ifelse(random>500,ifelse(random<300,900,420),ifelse(random<300,260,420))   

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = random <= 450
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = (30,60)
value = 1100

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = (30,45]
value = ifelse(random>700,2150,ifelse((random>500 && p2statetype = S),280,260))

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = (44,65]
value = ifelse(random>300,260,2150)

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X > 60
value = 1150  

[State 400, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = !movecontact
trigger1 = animtime = 0
value = ifelse(random>500,112,ifelse(random<500,117,116))  

;AI凤凰
[State 410, 4]
type = varset
triggerall = var(59) = 1
triggerall = fvar(10) = 1
trigger1 = !movecontact
trigger1 = p2stateno = [0,200] 
trigger1 = var(41)<=0
var(41)=1

[State 410,27]
type = ChangeState
value = ifelse(var(41)=1,1100,410)
triggerall = Var(59) = 1 
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
triggerall = p2life != 0
triggerall = time >= 8
trigger1 = p2movetype != A
trigger1 = P2statetype = S
trigger1 = P2BodyDist X = [35,65]
trigger2 = p2movetype != A
trigger2 = p2stateno != [5100,5170]
trigger2 = p2BodyDist x = [35,55]

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movecontact
trigger1 = p2bodydist X = [0,55]
value = ifelse(random >= 500,400,410)

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = var(5) = 1
trigger1 = movecontact
trigger1 = p2bodydist X > 55
value = 260

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = p2stateno > 3000
trigger1 = p2movetype = I
trigger1 = p2bodydist X = [-50,50]
value = 2150

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = power < 1000
trigger1 = p2movetype = A
trigger1 = p2bodydist X = [-50,50]
value = ifelse(p2stateno>3000,2150,1080)

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
triggerall = life <= 300
triggerall = power >= 3000
triggerall = p2statetype != A
trigger1 = movehit 
trigger1 = random <= 750
trigger1 = p2bodydist X <= 30
value = 4600

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
triggerall = life >= 400
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = [5,20]
value = 400

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = [21,30]
value = ifelse((p2statetype = s),260,280)  

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = [0,20]
value = 225

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
triggerall = life > 300
triggerall = power >= 3000
trigger1 = p2statetype != A && p2life > 330
trigger1 = movehit
trigger1 = p2bodydist X = (30,60)
value = ifelse(random < 500,2150,425)

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = p2statetype != A && p2life >= 80
trigger1 = life < p2life
trigger1 = movehit
trigger1 = p2bodydist X = (30,60)
trigger2 = random < 300
trigger2 = p2statetype != A && p2life >= 80
trigger2 = movehit
trigger2 = p2bodydist X = (30,60)
trigger3 = p2movetype = A
trigger3 = p2bodydist X = [-50,50]
value = 425

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = random > 450
trigger1 = movehit 
trigger1 = p2bodydist X = (50,55)
value = 420

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])
triggerall = movecontact || moveguarded
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = (30,70)
value = ifelse(random>500,900,260)   

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [100,110])
triggerall = movecontact || moveguarded
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = (30,70)
value = ifelse(random>500,ifelse(random<300,900,420),ifelse(random<300,260,420))   
  

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = random <= 450
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = (30,60)
value = 1100

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = (30,45]
value = ifelse(random>700,2150,ifelse((random>500 && p2statetype = S),280,260))

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = (44,65]
value = ifelse(random>300,260,2150)

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X > 60
value = 1150 

[State 400, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = !movecontact
trigger1 = animtime = 0
value = ifelse(random>500,112,ifelse(random<500,117,116))  

[State 410, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;外门肘打
[Statedef 280]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
poweradd = ifelse(fvar(10)!=1,60,35)
juggle = 0+var(7)
sprpriority = 2
anim = 280

[STate 280]
type = PlaySnd
trigger1 = Animelem = 2
trigger1 = random < 700
value = 2995,54
channel = 0

[STate 280]
type = PlaySnd
trigger1 = Animelem = 7
trigger1 = random < 700
value = 2000,11
channel = 0

[State 900, 2]
type = PlaySnd
trigger1 = Animelem = 2
trigger2 = Animelem = 6
value = 600,1
volume = 250

[state 900]
type = posadd
trigger1 = Animelem = 3
trigger2 = Animelem = 4
trigger3 = Animelem = 5
trigger4 = Animelem = 6
x = 17

[state 900]
type = posadd
trigger1 = Animelem = 11
trigger2 = Animelem = 12
x = -20 

[State 900,1]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
attr = A,NA
damage = 30,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 10,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-95
hitsound = S220,0
guardsound = S150,1
ground.type = high
ground.slidetime = 15
ground.hittime = 13
ground.velocity = -9
airguard.velocity = -6,-3
air.type = low
air.juggle = 5
air.velocity = -4,-3
air.hittime = 15
air.fall = 1
fall.recover = 0

[State 900,1]
type = HitDef
triggerall = var(50) = 0
triggerall = (p2stateno != [5020,5040])  
triggerall = p2stateno != [154,155]
trigger1 = animelem = 6
trigger2 = animelem = 8
attr = A,NA
damage = ifelse((animelem=8),70,20),0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 10,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,ifelse((animelem=8),-50,-70)
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 23
ground.hittime = 23
ground.velocity = -6
airguard.velocity = -3,-5
air.type = low
air.juggle = 5
air.velocity = -3,-5
air.hittime = 15
air.fall=1
fall.recover = 0

[State 900,1]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
attr = A,NA
damage = 30,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 10,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-95
hitsound = S220,0
guardsound = S150,1
ground.type = high
ground.slidetime = 15
ground.hittime = 13
ground.velocity = -9
airguard.velocity = -6,-3
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.type = low
air.juggle = 5
air.velocity = -4,-3
air.hittime = 15
air.fall = 1
fall.recover = 0

[State 900,1]
type = HitDef
triggerall = var(50) = 1
triggerall = (p2stateno != [5020,5040])  
triggerall = p2stateno != [154,155]
trigger1 = animelem = 6
trigger2 = animelem = 8
attr = A,NA
damage = ifelse((animelem=8),70,20),0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 10,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,ifelse((animelem=8),-50,-70)
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 23
ground.hittime = 23
ground.velocity = -6
airguard.velocity = -3,-5
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.type = low
air.juggle = 5
air.velocity = -3,-5
air.hittime = 15
air.fall=1
fall.recover = 0

;AI青龙
[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life > 300
triggerall = power >= 3000
triggerall = time > 25
trigger1 = p2statetype != A && p2life > 300
trigger1 = movehit
trigger1 = p2bodydist X >= 0
value = ifelse(random < 500,ifelse(random<500,1800,2150),3600)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = power >= 1000
triggerall = random < 500
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = p2statetype != A && p2life > 180
trigger1 = life < p2life
trigger1 = movehit
trigger1 = p2bodydist X >= 0
trigger2 = random < 300
trigger2 = p2statetype != A && p2life > 180
trigger2 = movehit
trigger2 = p2bodydist X >= 0
value = ifelse(random<500,1800,2150)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = power >= 1000
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = p2statetype != A && p2life > 180
trigger1 = life < p2life
trigger1 = movehit
trigger1 = p2bodydist X >= 0
trigger2 = random < 300
trigger2 = p2statetype != A && p2life > 180
trigger2 = movehit
trigger2 = p2bodydist X >= 0
value = ifelse(power >= 2000, 3410, 3400)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = movehit 
trigger1 = p2bodydist X >= 45
value = 1650

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = p2statetype = S
triggerall = time > 25
trigger1 = moveguarded
trigger1 = AnimTime = 0 
trigger1 = p2bodydist X >= 5
value = 410  

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life <500
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = movehit 
trigger1 = p2bodydist X <= 20
value = ifelse(random<500,1510,ifelse(random<600,1800,1003)) 

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life >500
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = movehit 
trigger1 = p2bodydist X <= 20
value = ifelse(random<500,1515,ifelse(random<400,1800,1600))

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = movecontact || moveguarded
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = random > 700
trigger1 = p2bodydist X > 0
value = 1100

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = movecontact || moveguarded
triggerall = time > 25
trigger1 = random < 300
trigger1 = p2bodydist X > 0
value = 1702

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = movecontact 
trigger1 = p2bodydist X = (20,60]
value = ifelse(random<400,1800,2150)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life >400
triggerall = movehit
triggerall = time > 25
triggerall = p2statetype != A 
trigger1 = p2bodydist X > 20
value = 2250

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life >400
triggerall = movehit
triggerall = time > 25
triggerall = p2statetype != A 
trigger1 = random > 700
trigger1 = p2bodydist X > 35
value = 1100

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life >400
triggerall = movehit
triggerall = time > 25 
trigger1 = random < 300
trigger1 = p2bodydist X > 35
value = 1700 

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life >400
triggerall = time > 25
trigger1 = movecontact || movehit || moveguarded
trigger1 = random > 800
trigger1 = p2bodydist X > 0
value = 1200

;AI凤凰
[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life > 300
triggerall = power >= 3000
triggerall = time > 25
trigger1 = p2statetype != A && p2life > 300
trigger1 = movehit
trigger1 = p2bodydist X >= 0
value = ifelse(random < 500,ifelse(random<500,1775,2150),4400)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = random < 500
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = p2statetype != A && p2life > 180
trigger1 = life < p2life
trigger1 = movehit
trigger1 = p2bodydist X >= 0
trigger2 = random < 300
trigger2 = p2statetype != A && p2life > 180
trigger2 = movehit
trigger2 = p2bodydist X >= 0
value = ifelse(random<500,1775,2150)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = p2statetype != A && p2life > 180
trigger1 = life < p2life
trigger1 = movehit
trigger1 = p2bodydist X >= 0
trigger2 = random < 300
trigger2 = p2statetype != A && p2life > 180
trigger2 = movehit
trigger2 = p2bodydist X >= 0
value = ifelse(power >= 2000, 4250, 4200)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = movehit 
trigger1 = p2bodydist X >= 45
value = 1650

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = p2statetype = S
triggerall = time > 25
trigger1 = moveguarded
trigger1 = AnimTime = 0 
trigger1 = p2bodydist X >= 5
value = 410  

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life <500
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = movehit 
trigger1 = p2bodydist X <= 20
value = ifelse(random<500,1515,ifelse(random<400,1775,2400)) 

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >500
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = movehit 
trigger1 = p2bodydist X <= 20
value = ifelse(random<500,1515,ifelse(random<400,1775,1080))

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = movecontact || moveguarded
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = random > 700
trigger1 = p2bodydist X > 0
value = 1100

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = movecontact || moveguarded
triggerall = time > 25
trigger1 = random < 300
trigger1 = p2bodydist X > 0
value = 1702

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = movecontact 
trigger1 = p2bodydist X = (20,60]
value = ifelse(random<400,1775,2150)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >400
triggerall = movehit
triggerall = time > 25
triggerall = p2statetype != A 
trigger1 = p2bodydist X > 20
value = 2250

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >400
triggerall = movehit
triggerall = time > 25
triggerall = p2statetype != A 
trigger1 = random > 700
trigger1 = p2bodydist X > 35
value = 1100

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >400
triggerall = movehit
triggerall = time > 25 
trigger1 = random < 300
trigger1 = p2bodydist X > 35
value = 1700 

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >400
triggerall = time > 25
trigger1 = movecontact || movehit || moveguarded
trigger1 = random > 800
trigger1 = p2bodydist X > 0
value = 1200

[State 900]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;前B
[Statedef 260]
type = C
movetype = A
physics = C
velset = 0,0
ctrl = 0
poweradd = ifelse(fvar(10)!=1,60,30)
juggle = 0+var(7)
sprpriority = 2
anim = 260

[STate 900]
type = PlaySnd
trigger1 = Animelem = 1
value = 1,1
channel = 1

[State 900, 2]
type = PlaySnd
triggerall = random <= 400
trigger1 = Time = 0
value = 2995,54
channel = 0

[State 900, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,1
volume = 180

[state 900]
type = velset
trigger1 = animelem = 2
x = 5.5

[state 900]
type = velset
trigger1 = animelem = 3
x = 3.5

[state 900]
type = velset
trigger1 = animelem = 4
x = 3

[State 900,1]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 2
attr = A,NA
damage = 10,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
guardflag = L
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 10,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-50
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 19
ground.hittime = 21
ground.velocity = -6
airguard.velocity = -6,-3
air.type = low
air.juggle = 5
air.velocity = -3,-3
air.hittime = 15
fall.recovertime = 10

[State 900,1]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 2
attr = A,NA
damage = 10,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
guardflag = L
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 10,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-50
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 19
ground.hittime = 21
ground.velocity = -6
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
airguard.velocity = -6,-3
air.type = low
air.juggle = 5
air.velocity = -3,-3
air.hittime = 15
fall.recovertime = 10

[State 900]
type = ChangeState
trigger1 = AnimTime = 0
value = 265

[Statedef 265]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
poweradd = 0
juggle = 0+var(7)
sprpriority = 2
anim = 265

[State 900, 2]
type = PlaySnd
triggerall = random <= 400
trigger1 = Animelem = 3
value = 2995,55
channel = 0

[State 900, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 600,1
volume = 180

[state 900]
type = velset
trigger1 = animelem = 1
x = 0  

[state 900]
type = velset
trigger1 = animelem = 2
x = 3

[state 900]
type = velset
trigger1 = animelem = 2
x = 6

[state 900]
type = velset
trigger1 = animelem = 4
x = 2  

[state 900]
type = velset
trigger1 = animelem = 5
x = 0

[State 900,1]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
attr = A,NA
damage = 50,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 10,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-50
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -6
airguard.velocity = -6,-3
ground.cornerpush.veloff = -13
air.type = low
air.juggle = 5
air.velocity = -3,-3
air.hittime = 15
fall.recovertime = 10

[State 900,1]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
attr = A,NA
damage = 50,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 10,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-50
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -6
airguard.velocity = -6,-3
ground.cornerpush.veloff = -13
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.type = low
air.juggle = 5
air.velocity = -3,-3
air.hittime = 15
fall.recovertime = 10

;AI青龙
[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
triggerall = life > 300
triggerall = power >= 3000
trigger1 = p2statetype != A && p2life > 300
trigger1 = movehit
trigger1 = p2bodydist X >= 0
value = ifelse(random < 500,ifelse(random<500,1800,2150),4500)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = power >= 1000
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = p2statetype != A && p2life > 180
trigger1 = life < p2life
trigger1 = movehit
trigger1 = p2bodydist X >= 0
trigger2 = random < 300
trigger2 = p2statetype != A && p2life > 180
trigger2 = movehit
trigger2 = p2bodydist X >= 0
value = ifelse((var(55) = [6,13]),1800,2150)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = power >= 1000
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = p2statetype != A && p2life > 180
trigger1 = life < p2life
trigger1 = movehit
trigger1 = p2bodydist X >= 0
trigger2 = random < 300
trigger2 = p2statetype != A && p2life > 180
trigger2 = movehit
trigger2 = p2bodydist X >= 0
value = ifelse(power >= 2000, 3650, 3600)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = movehit 
trigger1 = p2bodydist X >= 45
value = 1650

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
triggerall = p2statetype = S
trigger1 = moveguarded
trigger1 = AnimTime = 0 
trigger1 = p2bodydist X >= 5
value = 410  

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life <500
triggerall = p2statetype != A
trigger1 = movehit 
trigger1 = p2bodydist X <= 20
value = ifelse(random<500,1510,ifelse(random<400,1800,1003))

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life >500
triggerall = p2statetype != A
trigger1 = movehit 
trigger1 = p2bodydist X <= 20
value = ifelse(random<500,1510,ifelse(random<400,1800,1600))

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = movecontact || moveguarded
trigger1 = random > 700
trigger1 = p2bodydist X > 0
value = 1100

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = movecontact || moveguarded
trigger1 = random < 300
trigger1 = p2bodydist X > 0
value = 1702

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = p2statetype != A
trigger1 = (var(55) = [25,26])||(var(55) = [45,47])||(var(55) = [65,68])
trigger1 = movecontact 
trigger1 = p2bodydist X = (20,60]
value = ifelse(random<500,1800,2150)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life >400
triggerall = movehit
trigger1 = (var(55) = [25,26])||(var(55) = [45,47])||(var(55) = [65,68])
trigger1 = p2bodydist X > 35
value = 1100

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life >400
triggerall = movehit
triggerall = p2statetype != A 
trigger1 = (var(55) = [25,26])||(var(55) = [45,47])||(var(55) = [65,68])
trigger1 = p2bodydist X > 35
value = 1700 

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life >400
triggerall = p2statetype != A
trigger1 = movecontact || movehit || moveguarded
trigger1 = (var(55) = [25,26])||(var(55) = [45,47])||(var(55) = [65,68])
trigger1 = p2bodydist X > 0
value = 1200

;AI凤凰
[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
triggerall = life > 300
triggerall = power >= 3000
trigger1 = p2statetype != A && p2life > 300
trigger1 = movehit
trigger1 = p2bodydist X <= 30
value = ifelse(random < 500,ifelse(random<500,1775,2150),4600)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = p2statetype != A && p2life > 180
trigger1 = life < p2life
trigger1 = movehit
trigger1 = p2bodydist X >= 0
trigger2 = random < 300
trigger2 = p2statetype != A && p2life > 180
trigger2 = movehit
trigger2 = p2bodydist X >= 0
value = ifelse((var(55) = [6,13]),1775,2150)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = p2statetype != A && p2life > 180
trigger1 = life < p2life
trigger1 = movehit
trigger1 = p2bodydist X >= 0
trigger2 = random < 300
trigger2 = p2statetype != A && p2life > 180
trigger2 = movehit
trigger2 = p2bodydist X >= 0
value = ifelse(power >= 2000, 4250, 4200)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [25,26])||(var(55) = [45,47])||(var(55) = [65,68])
trigger1 = movehit 
trigger1 = p2bodydist X >= 45
value = 1650

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
triggerall = p2statetype = S
trigger1 = moveguarded
trigger1 = AnimTime = 0 
trigger1 = p2bodydist X >= 5
value = 410  

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life <500
triggerall = p2statetype != A
trigger1 = movehit 
trigger1 = p2bodydist X <= 20
value = ifelse(random<500,1510,ifelse(random<400,1775,1080))

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >500
triggerall = p2statetype != A
trigger1 = movehit 
trigger1 = p2bodydist X <= 20
value = ifelse(random<500,1510,ifelse(random<400,1775,1090))

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = movecontact || moveguarded
trigger1 = random > 700
trigger1 = p2bodydist X > 0
value = 1100

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = movecontact || moveguarded
trigger1 = random < 300
trigger1 = p2bodydist X > 0
value = 1702

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = p2statetype != A
trigger1 = (var(55) = [25,26])||(var(55) = [45,47])||(var(55) = [65,68])
trigger1 = movecontact 
trigger1 = p2bodydist X = (20,60]
value = ifelse(random<500,1775,2150)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >400
triggerall = movehit
trigger1 = random < 500
trigger1 = (var(55) = [25,26])||(var(55) = [45,47])||(var(55) = [65,68])
trigger1 = p2bodydist X > 35
value = 1100

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >400
triggerall = movehit
triggerall = p2statetype != A 
trigger1 = random < 500
trigger1 = (var(55) = [25,26])||(var(55) = [45,47])||(var(55) = [65,68])
trigger1 = p2bodydist X > 35
value = 1700 

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >400
triggerall = p2statetype != A
trigger1 = movecontact || movehit || moveguarded
trigger1 = (var(55) = [25,26])||(var(55) = [45,47])||(var(55) = [65,68])
trigger1 = p2bodydist X > 0
value = 1200

[State 900]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;前B
[Statedef 270]
type = C
movetype = A
physics = C
velset = 0,0
ctrl = 0
poweradd = ifelse(fvar(10)!=1,60,30)
juggle = 0+var(7)
sprpriority = 2
anim = 260

[STate 900]
type = PlaySnd
trigger1 = Animelem = 1
value = 1,1
channel = 1

[State 900, 2]
type = PlaySnd
triggerall = random <= 400
trigger1 = Time = 0
value = 2995,54
channel = 0

[State 900, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,1
volume = 180

[state 900]
type = velset
trigger1 = animelem = 2
x = 5.5

[state 900]
type = velset
trigger1 = animelem = 3
x = 3.5

[state 900]
type = velset
trigger1 = animelem = 4
x = 3

[State 900,1]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 2
attr = A,NA
damage = 15,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
guardflag = L
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 10,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-50
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 19
ground.hittime = 21
ground.velocity = -6
airguard.velocity = -6,-3
air.type = low
air.juggle = 5
air.velocity = -3,-3
air.hittime = 15
fall.recovertime = 10

[State 900,1]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 2
attr = A,NA
damage = 15,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
guardflag = L
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 10,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-50
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 19
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.hittime = 21
ground.velocity = -6
airguard.velocity = -6,-3
air.type = low
air.juggle = 5
air.velocity = -3,-3
air.hittime = 15
fall.recovertime = 10

[State 900]
type = ChangeState
trigger1 = AnimTime = 0
value = 275

[Statedef 275]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
poweradd = 0
juggle = 0+var(7)
sprpriority = 2
anim = 265

[State 900, 2]
type = PlaySnd
triggerall = random <= 400
trigger1 = Animelem = 3
value = 2995,55
channel = 0

[State 900, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 600,1
volume = 180

[state 900]
type = velset
trigger1 = animelem = 1
x = 0  

[state 900]
type = velset
trigger1 = animelem = 2
x = 3

[state 900]
type = velset
trigger1 = animelem = 2
x = 6

[state 900]
type = velset
trigger1 = animelem = 4
x = 2  

[state 900]
type = velset
trigger1 = animelem = 5
x = 0

[State 900,1]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
attr = A,NA
damage = 75,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 10,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-50
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -6
airguard.velocity = -6,-3
ground.cornerpush.veloff = -13
air.type = low
air.juggle = 5
air.velocity = -3,-3
air.hittime = 15
fall.recovertime = 10

[State 900,1]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
attr = A,NA
damage = 75,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 10,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-50
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -6
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
airguard.velocity = -6,-3
ground.cornerpush.veloff = -13
air.type = low
air.juggle = 5
air.velocity = -3,-3
air.hittime = 15
fall.recovertime = 10

[State 900]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;前 A
[Statedef 900]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
poweradd = ifelse(fvar(10)!=1,60,30)
juggle = 0+var(7)
sprpriority = 2
anim = 900

[STate 900]
type = PlaySnd
trigger1 = Animelem = 5
value = 2995,ifelse(random<500,54,55)
channel = 0

[State 900, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,1 

[State 900, 2]
type = posadd
trigger1 = Animelem = 1
x = 8

[State 900, 2]
type = posadd
trigger1 = Animelem = 2
trigger2 = Animelem = 5
x = 4 


[State 900, 2]
type = posadd
trigger1 = Animelem = 6
trigger2 = Animelem = 7
trigger3 = Animelem = 8
trigger4 = Animelem = 9
x = 10 

[State 900, 2]
type = posadd
trigger1 = Animelem = 12
x = -10

[State 900, 2]
type = posadd
trigger1 = Animelem = 13
x = -10

[State 900,1]
type = HitDef
triggerall = var(50) = 0
triggerall = (p2stateno != [5020,5040])  
triggerall = p2stateno != [154,155]
trigger1 = animelem = 6
trigger2 = animelem = 7
attr = A,NA
damage = 35,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 14,14
guard.pausetime = 14,14
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-50
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 19
ground.hittime = 18
ground.velocity = -6
airguard.velocity = -6,-3
air.type = low
air.juggle = 5
air.velocity = -3,-3
air.hittime = 15
fall.recovertime = 10

[State 900,1]
type = HitDef
triggerall = var(50) = 1
triggerall = (p2stateno != [5020,5040])  
triggerall = p2stateno != [154,155]
trigger1 = animelem = 6
trigger2 = animelem = 7
attr = A,NA
damage = 35,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 14,14
guard.pausetime = 14,14
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-50
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 19
ground.hittime = 18
ground.velocity = -6
airguard.velocity = -6,-3
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.type = low
air.juggle = 5
air.velocity = -3,-3
air.hittime = 15
fall.recovertime = 10

;AI青龙
[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life > 300
triggerall = power >= 3000
trigger1 = p2statetype != A && p2life > 300
trigger1 = movehit
trigger1 = p2bodydist X >= 0
value = ifelse(random < 500,2150,3400)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = random < 500
trigger1 = p2statetype != A && p2life > 180
trigger1 = life < p2life
trigger1 = movehit
trigger1 = p2bodydist X >= 0
trigger2 = random < 300
trigger2 = p2statetype != A && p2life > 180
trigger2 = movehit
trigger2 = p2bodydist X >= 0
value = 2150

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
trigger1 = p2statetype != A && p2life > 180
trigger1 = life < p2life
trigger1 = movehit
trigger1 = p2bodydist X >= 0
trigger2 = random < 300
trigger2 = p2statetype != A && p2life > 180
trigger2 = movehit
trigger2 = p2bodydist X >= 0
value = ifelse(power >= 2000, 3250, 3000)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
trigger1 = movehit 
trigger1 = p2bodydist X >= 45
value = 1650

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = p2statetype = S
trigger1 = moveguarded
trigger1 = AnimTime = 0 
trigger1 = p2bodydist X >= 5
value = 410  

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life <500
triggerall = p2statetype != A
trigger1 = movehit 
trigger1 = p2bodydist X <= 20
value = 1003 

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >500
triggerall = p2statetype != A
trigger1 = movehit 
trigger1 = p2bodydist X <= 20
value = 1000 

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = movecontact || moveguarded
trigger1 = random > 700
trigger1 = p2bodydist X > 0
value = 1100

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = movecontact || moveguarded
trigger1 = random < 300
trigger1 = p2bodydist X > 0
value = 1702

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
trigger1 = movecontact 
trigger1 = p2bodydist X = (20,60]
value = 2150

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >400
triggerall = movehit 
trigger1 = p2bodydist X > 20
value = 2250

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >400
triggerall = movehit 
trigger1 = random > 700
trigger1 = p2bodydist X > 35
value = 1100

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >400
triggerall = movehit 
trigger1 = random < 300
trigger1 = p2bodydist X > 35
value = 1700 

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >400
trigger1 = movecontact || movehit || moveguarded
trigger1 = random > 800
trigger1 = p2bodydist X > 0
value = 1200

;AI凤凰
[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life > 300
triggerall = power >= 3000
trigger1 = p2statetype != A && p2life > 300
trigger1 = movehit
trigger1 = p2bodydist X >= 0
value = ifelse(random < 500,2150,4200)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = random < 500
trigger1 = p2statetype != A && p2life > 180
trigger1 = life < p2life
trigger1 = movehit
trigger1 = p2bodydist X >= 0
trigger2 = random < 300
trigger2 = p2statetype != A && p2life > 180
trigger2 = movehit
trigger2 = p2bodydist X >= 0
value = 2150

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
trigger1 = p2statetype != A && p2life > 180
trigger1 = life < p2life
trigger1 = movehit
trigger1 = p2bodydist X >= 0
trigger2 = random < 300
trigger2 = p2statetype != A && p2life > 180
trigger2 = movehit
trigger2 = p2bodydist X >= 0
value = ifelse(power >= 2000, 4350, 4300)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
trigger1 = movehit 
trigger1 = p2bodydist X >= 45
value = 1650

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = p2statetype = S
trigger1 = moveguarded
trigger1 = AnimTime = 0 
trigger1 = p2bodydist X >= 5
value = 410  

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life <500
triggerall = p2statetype != A
trigger1 = movehit 
trigger1 = p2bodydist X <= 20
value = 1090 

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >500
triggerall = p2statetype != A
trigger1 = movehit 
trigger1 = p2bodydist X <= 20
value = 1080 

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = movecontact || moveguarded
trigger1 = random > 700
trigger1 = p2bodydist X > 0
value = 1100

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = movecontact || moveguarded
trigger1 = random < 300
trigger1 = p2bodydist X > 0
value = 1702

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
trigger1 = movecontact 
trigger1 = p2bodydist X = (20,60]
value = 2150

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >400
triggerall = movehit 
trigger1 = p2bodydist X > 20
value = 2250

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >400
triggerall = movehit 
trigger1 = random > 700
trigger1 = p2bodydist X > 35
value = 1100

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >400
triggerall = movehit 
trigger1 = random < 300
trigger1 = p2bodydist X > 35
value = 1700 

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >400
trigger1 = movecontact || movehit || moveguarded
trigger1 = random > 800
trigger1 = p2bodydist X > 0
value = 1200

[State 900]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;跳 轻拳
[Statedef 600]
type = A
movetype = A
physics = A
juggle = 15
ctrl = 0
poweradd = ifelse(fvar(10)!=1,20,10)
sprpriority = 2
anim = 600

[State 600]
type = AfterImage
trigger1 = prevstateno = [55,56]
trigger1 = Time = 0 && Vel X!= 0
time = 20
length = 8
trans = add1

[State 600]
type = varSet
triggerall = var(30) = 0
trigger1 = Movecontact
var(30) = 1

[STate 600]
type = PlaySNd
trigger1 = Animelem = 2
trigger1 = random < 500
value = 2995,50
channel = 0
persistent = 0

[State 600, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,0

[State 600,1]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 1
attr = A,NA
damage = 40,0
getpower = ifelse(fvar(10)!=1,30,15),ifelse(fvar(10)!=1,10,5)
animtype = light
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-45)/2,-50
hitsound = S210,0
guardsound = S150,0
ground.type = low
ground.slidetime = 7
ground.hittime = 9
ground.velocity = -3
ground.cornerpush.veloff = -3
guard.cornerpush.veloff = -3
airguard.velocity = -4,-3
air.type = low
air.velocity = -3.5,-5.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 600,1]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 1
attr = A,NA
damage = 40,0
getpower = ifelse(fvar(10)!=1,30,15),ifelse(fvar(10)!=1,10,5)
animtype = light
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-45)/2,-50
hitsound = S210,0
guardsound = S150,0
ground.type = low
ground.slidetime = 7
ground.hittime = 9
ground.velocity = -3
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.cornerpush.veloff = -3
guard.cornerpush.veloff = -3
airguard.velocity = -4,-3
air.type = low
air.velocity = -3.5,-5.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 600,4]
type = PlaySnd
trigger1 = animelem = 2
value = S1,0
persistent = 0

[State 600, 4]
type = ChangeState
triggerall = power >= 1000
trigger1 = var(59) = 1
trigger1 = movehit
value = 3100

;跳 重拳
[Statedef 615]
type = A
movetype = A
physics = A
juggle = 15
ctrl = 0
poweradd = ifelse(fvar(10)!=1,50,25)
sprpriority = 2
anim = 615

[State 615]
type = AfterImage
trigger1 = prevstateno = [55,56]
trigger1 = Time = 0 && Vel X!= 0
time = 20
length = 8
trans = add1

[State 615]
type = varSet
triggerall = var(30) = 0
trigger1 = Movecontact
var(30) = 1

[STate 615]
type = PlaySNd
trigger1 = Animelem = 2 && fvar(28) = 0
value = 2995,51
channel = 0
persistent = 0

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 600,1
volume = 180

[State 615]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = A,NA
damage = 90,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,20,10)
animtype = high
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,13
guard.pausetime = 13,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-45)/2,-30
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 13
ground.hittime = 13
ground.velocity = -6
ground.cornerpush.veloff = -7
guard.cornerpush.veloff = -8
airguard.velocity = -6,-3
air.type = low
air.velocity = -3.5,-6.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 615]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = A,NA
damage = 90,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,20,10)
animtype = high
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,13
guard.pausetime = 13,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-45)/2,-30
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 13
ground.hittime = 13
ground.velocity = -6
ground.cornerpush.veloff = -7
guard.cornerpush.veloff = -8
airguard.velocity = -6,-3
air.type = low
air.velocity = -3.5,-6.7
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 615]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0

;跳 轻脚
[Statedef 605]
type = A
movetype = A
physics = A
juggle = 15
ctrl = 0
poweradd = ifelse(fvar(10)!=1,20,10)
sprpriority = 2
anim = 605

[State 605]
type = AfterImage
trigger1 = prevstateno = [55,56]
trigger1 = Time = 0 && Vel X!= 0
time = 20
length = 8
trans = add1

[State 605]
type = varSet
triggerall = var(30) = 0
trigger1 = Movecontact
var(30) = 1

[STate 605]
type = PlaySNd
trigger1 = Animelem = 2 && random <= 500
value = 2995,55
channel = 0
persistent = 0

[State 605, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,0

[State 605]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = A,NA
damage = 50,0
getpower = ifelse(fvar(10)!=1,20,10),ifelse(fvar(10)!=1,10,5)
animtype = light
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-50)/2,-45
hitsound = S210,0
guardsound = S150,0
ground.type = low
ground.slidetime = 7
ground.hittime = 9
ground.velocity = -3
ground.cornerpush.veloff = -3
guard.cornerpush.veloff = -3
airguard.velocity = -4,-3
air.type = low
air.velocity = -3.5,-5.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 605]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = A,NA
damage = 50,0
getpower = ifelse(fvar(10)!=1,20,10),ifelse(fvar(10)!=1,10,5)
animtype = light
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-50)/2,-45
hitsound = S210,0
guardsound = S150,0
ground.type = low
ground.slidetime = 7
ground.hittime = 9
ground.velocity = -3
ground.cornerpush.veloff = -3
guard.cornerpush.veloff = -3
airguard.velocity = -4,-3
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.type = low
air.velocity = -3.5,-5.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 605]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0

[State 605, 4]
type = ChangeState
triggerall = power >= 1000
trigger1 = var(59) = 1
trigger1 = movehit
value = 3100

;跳 轻脚
[Statedef 606]
type = A
movetype = A
physics = A
juggle = 15
ctrl = 0
poweradd = ifelse(fvar(10)!=1,20,10)
sprpriority = 2
anim = ifelse(fvar(10)!=1,606,605)

[State 605]
type = AfterImage
trigger1 = prevstateno = [55,56]
trigger1 = Time = 0 && Vel X!= 0
time = 20
length = 8
trans = add1

[State 605]
type = varSet
triggerall = var(30) = 0
trigger1 = Movecontact
var(30) = 1

[STate 605]
type = PlaySNd
trigger1 = (Animelem = 2) && (random <= 500)
value = 2995,55
channel = 0
persistent = 0

[State 605, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,0

[State 605]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = A,NA
damage = 50,0
getpower = ifelse(fvar(10)!=1,20,10),ifelse(fvar(10)!=1,10,5)
animtype = light
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-40)/2,ifelse((animelem!=2),-20,-55)
hitsound = S210,0
guardsound = S150,0
ground.type = low
ground.slidetime = 7
ground.hittime = 9
ground.velocity = -3
airguard.velocity = -4,-3
ground.cornerpush.veloff = -3
guard.cornerpush.veloff = -3
air.type = low
air.velocity = -3.5,-6.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 605]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = A,NA
damage = 50,0
getpower = ifelse(fvar(10)!=1,20,10),ifelse(fvar(10)!=1,10,5)
animtype = light
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-40)/2,ifelse((animelem!=2),-20,-55)
hitsound = S210,0
guardsound = S150,0
ground.type = low
ground.slidetime = 7
ground.hittime = 9
ground.velocity = -3
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
airguard.velocity = -4,-3
ground.cornerpush.veloff = -3
guard.cornerpush.veloff = -3
air.type = low
air.velocity = -3.5,-6.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 605]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0

[State 605, 4]
type = ChangeState
triggerall = power >= 1000
trigger1 = var(59) = 1
trigger1 = movehit
value = 3100

;跳 重脚
[Statedef 610]
type = A
movetype = A
physics = A
juggle = 15
ctrl = 0
poweradd = ifelse(fvar(10)!=1,60,30)
sprpriority = 2
anim = ifelse(fvar(10)!=1,610,612)

[State 610]
type = AfterImage
trigger1 = prevstateno = [55,56]
trigger1 = Time = 0 && Vel X!= 0
time = 20
length = 8
trans = add1

[State 610]
type = varSet
triggerall = var(30) = 0
trigger1 = Movecontact
var(30) = 1

[STate 610]
type = PlaySNd
trigger1 = Animelem = 2 && fvar(28) = 0
value = 2995,ifelse(random >500,51,52)
channel = 0
persistent = 0

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 600,1
volume = 200

[State 610]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
attr = A,NA
damage = 85,0
getpower = ifelse(fvar(10)!=1,40,20),ifelse(fvar(10)!=1,10,10)
animtype = high
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,13
guard.pausetime = 15,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,ifelse(fvar(10)!=1,-26,-70)
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 13
ground.hittime = 13
ground.velocity = -6
ground.cornerpush.veloff = -7
guard.cornerpush.veloff = -8
airguard.velocity = -6,-3
air.type = low
air.velocity = -3.5,-6.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 610]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
attr = A,NA
damage = 85,0
getpower = ifelse(fvar(10)!=1,40,20),ifelse(fvar(10)!=1,10,10)
animtype = high
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,13
guard.pausetime = 15,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,ifelse(fvar(10)!=1,-26,-70)
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 13
ground.hittime = 13
ground.velocity = -6
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.cornerpush.veloff = -7
guard.cornerpush.veloff = -8
airguard.velocity = -6,-3
air.type = low
air.velocity = -3.5,-6.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 610]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0

;跳 重脚
[Statedef 645]
type = A
movetype = A
physics = A
juggle = 15
ctrl = 0
poweradd = ifelse(fvar(10)!=1,60,30)
sprpriority = 2
anim = 645

[State 610]
type = AfterImage
trigger1 = prevstateno = [55,56]
trigger1 = Time = 0 && Vel X!= 0
time = 20
length = 8
trans = add1

[State 610]
type = varSet
triggerall = var(30) = 0
trigger1 = Movecontact
var(30) = 1

[STate 610]
type = PlaySNd
trigger1 = Animelem = 2 && fvar(28) = 0
value = 2995,ifelse(random >500,51,52)
channel = 0
persistent = 0

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 600,1
volume = 200

[State 610]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = A,NA
damage = 85,0
getpower = ifelse(fvar(10)!=1,40,20),ifelse(fvar(10)!=1,10,5)
animtype = mid
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,13
guard.pausetime = 15,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-27
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 13
ground.hittime = 13
ground.velocity = -4,3.5
airguard.velocity = -4,3
ground.cornerpush.veloff = -7
guard.cornerpush.veloff = -8
air.type = low
air.velocity = -3.5,-6.7
air.hittime = 15
yaccel = .5
fall = 1

[State 610]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = A,NA
damage = 85,0
getpower = ifelse(fvar(10)!=1,40,20),ifelse(fvar(10)!=1,10,5)
animtype = mid
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,13
guard.pausetime = 15,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-27
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 13
ground.hittime = 13
ground.velocity = -4,3.5
airguard.velocity = -4,3
ground.cornerpush.veloff = -7
guard.cornerpush.veloff = -8
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.type = low
air.velocity = -3.5,-6.7
air.hittime = 15
yaccel = .5
fall = 1

[State 610]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0

;跳 重脚
[Statedef 639]
type = A
movetype = A
physics = A
juggle = 15
ctrl = 0
poweradd = ifelse(fvar(10)!=1,60,30)
sprpriority = 2
anim = 639

[State 610]
type = AfterImage
trigger1 = prevstateno = [55,56]
trigger1 = Time = 0 && Vel X!= 0
time = 20
length = 8
trans = add1

[State 639]
type = varSet
triggerall = var(30) = 0
trigger1 = Movecontact
var(30) = 1

[STate 639]
type = PlaySNd
trigger1 = Animelem = 2 && fvar(28) = 0
value = 2995,ifelse(random >500,51,52)
channel = 0
persistent = 0

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 600,1
volume = 200

[State 639]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 2
attr = A,NA
damage = 85,0
getpower = ifelse(fvar(10)!=1,40,20),ifelse(fvar(10)!=1,10,5)
animtype = high
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,13
guard.pausetime = 12,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-27
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 13
ground.hittime = 13
ground.velocity = -6
airguard.velocity = -6,-3
ground.cornerpush.veloff = -7
guard.cornerpush.veloff = -8
air.type = low
air.velocity = -3.5,-6.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 639]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 2
attr = A,NA
damage = 85,0
getpower = ifelse(fvar(10)!=1,40,20),ifelse(fvar(10)!=1,10,5)
animtype = high
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,13
guard.pausetime = 12,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-27
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 13
ground.hittime = 13
ground.velocity = -6
airguard.velocity = -6,-3
ground.cornerpush.veloff = -7
guard.cornerpush.veloff = -8
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.type = low
air.velocity = -3.5,-6.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 639]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0

;跳 重脚
[Statedef 611]
type = A
movetype = A
physics = A
juggle = 15
ctrl = 0
poweradd = ifelse(fvar(10)!=1,60,30)
sprpriority = 2
anim = 611

[State 611]
type = AfterImage
trigger1 = prevstateno = [55,56]
trigger1 = Time = 0 && Vel X!= 0
time = 20
length = 8
trans = add1

[State 611]
type = varSet
triggerall = var(30) = 0
trigger1 = Movecontact
var(30) = 1

[STate 611]
type = PlaySNd
trigger1 = Animelem = 2 && fvar(28) = 0
value = 2995,ifelse(random >500,51,52)
channel = 0
persistent = 0

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 600,1
volume = 200

[State 611]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
attr = A,NA
damage = 85,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = high
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 12,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-72
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 13
ground.hittime = 13
ground.velocity = -6
airguard.velocity = -6,-3
air.type = low
air.velocity = -3.5,-6.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 611]
type = HitDef
triggerall = var(50) = 0
triggerall = !movecontact
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 4
attr = A,NA
damage = 85,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = mid
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 12,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-70
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 13
ground.hittime = 13
ground.velocity = -6
airguard.velocity = -6,-3
ground.cornerpush.veloff = -7
guard.cornerpush.veloff = -8
air.type = low
air.velocity = -3.5,-5.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 611]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
attr = A,NA
damage = 85,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = high
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 12,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-72
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 13
ground.hittime = 13
ground.velocity = -6
airguard.velocity = -6,-3
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.type = low
air.velocity = -3.5,-6.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 611]
type = HitDef
triggerall = var(50) = 1
triggerall = !movecontact
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 4
attr = A,NA
damage = 85,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = mid
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 12,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-70
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 13
ground.hittime = 13
ground.velocity = -6
airguard.velocity = -6,-3
ground.cornerpush.veloff = -7
guard.cornerpush.veloff = -8
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.type = low
air.velocity = -3.5,-5.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 611]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0

;跳 超重
[Statedef 690]
type = A
movetype = A
physics = A
juggle = 15
ctrl = 0
poweradd = ifelse(fvar(10)!=1,60,30)
sprpriority = 2
anim = 690

[State 690]
type = AfterImage
trigger1 = prevstateno = [55,56]
trigger1 = Time = 0 && Vel X!= 0
time = 20
length = 8
trans = add1

[State 690]
type = varSet
triggerall = var(30) = 0
trigger1 = Movecontact
var(30) = 1

[STate 690]
type = PlaySNd
trigger1 = Animelem = 2 && fvar(28) = 0
value = 2995,ifelse(random >500,51,52)
channel = 0
persistent = 0

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 600,1
volume = 250

[State 690]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
attr = A,NA
damage = 115,0
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,20,10)
animtype = high
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,13
guard.pausetime = 12,17
sparkno = S736
guard.sparkno = S731
sparkxy = ((p2bodydist x)-60)/2,-37
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 7
ground.hittime = 9
ground.velocity = -5,-3.5
airguard.velocity = -5,-3.5
ground.cornerpush.veloff = -12
guard.cornerpush.veloff = -11
air.type = low
air.velocity = -3.5,-3
air.hittime = 15
fall = 1
air.fall = 1
yaccel = .35
fall.recover = 0

[State 690]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0

[Statedef 665]
type = S
movetype = A
physics = S
juggle = 15
ctrl = 0
velset = 0,0
poweradd = ifelse(fvar(10)!=1,50,25)
sprpriority = 2
anim = 2153

[State 690]
type = AfterImage
trigger1 = prevstateno = [55,56]
trigger1 = Time = 0 && Vel X!= 0
time = 20
length = 8
trans = add1

[STate 665]
type = posadd
trigger1 = Animelem = 2 
trigger2 = Animelem = 3
trigger3 = Animelem = 5
x = 10

[STate 665]
type = null
trigger1 = Animelem = 3 
x = 8

[STate 665]
type = PlaySNd
trigger1 = Animelem = 6 && fvar(28) = 0
value = 2995,51
channel = 0
persistent = 0

[State 665, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 600,1
volume = 250

[State 665]
type = HitDef
trigger1 = time = 0
attr = A,NA
damage = 85,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 17,17
guard.pausetime = 17,17
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-30)/2,-57
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 24
ground.hittime = 24
ground.velocity = -13
airguard.velocity = -6,-3
ground.cornerpush.veloff = -15
guard.cornerpush.veloff = -15
air.type = low
air.velocity = -3,-3
air.hittime = 15

[state changestate]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

暴气
[statedef 700]
type = s
movetype = I
physics = s
anim = 700
ctrl = 0

[state varset]
type = varset
trigger1 = time = 0
var(40) = 1000

[state poweradd]
type = poweradd
trigger1 = time = 6
value = -1000

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 5
value = 2995,60
channel = 0

[STate 3150]
type = PlaySNd
trigger1 = Animelem = 5
value = 700,0
channel = 1

[State 3000]
type = Explod
trigger1 = Animelem = 6
anim = 705
pos = 0,0
Pausemovetime = 99 
sprpriority = 2
bindtime = 1
ownpal = 1

[State 399, EnvShake]
type = EnvShake
trigger1 = animelem = 6
ignorehitpause = 1
persistent = 0
time = 15
freq = 100
ampl = -4
phase = 1

[state changestate]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;=*************************************************************
;加气
[Statedef 710]
type = S
movetype = I
physics = S
ctrl = 0
velset = 0,0
sprpriority = 1
anim = 710

[State 704, 1]
type = PowerAdd
trigger1 = power < 3000
trigger1 = Time >= 1
value = 6

[State 704, 2]
type = PlaySnd
triggerall = var(4) = [51,75]
trigger1 = Time = 5
value = 710,0
channel = 0
volume = 90

[State 704, 2]
type = PlaySnd
triggerall = var(4) = [0,50]
trigger1 = Time = 5
value = 710,1
channel = 0

[State 704, 2]
type = PlaySnd
trigger1 = Time = 5
value = 710,0
channel = 19
volume = 0

[State 704, 3]
type = PlaySnd
trigger1 = Time = 5
value = 5,4
channel = 20
volume = 50

[State 704, 4]
type = Explod
trigger1 = Time = 4
sprpriority = 2
anim = 737
id = 706
pos= 7,0
postype = P1
bindtime = 1
removeongethit = 1
removetime = -1
ownpal = 1

[State 3660]
type = varrandom
trigger1 = 1
v = 4
range = 90

[State 3660]
type = varrandom
trigger1 = 1
v = 5
range = 20

[State 704, 4]
type = Explod
trigger1 = Time >= 10
trigger1 =gametime%3=1
sprpriority = -2
anim = ifelse(random<500,720,721)
scale = .7,.2
vel = 0,-.9
id = 1158
pos = var(4)-35,-20-var(5)
postype = P1
bindtime = 1
ownpal = 1

[State 704, 4]
type = Explod
trigger1 = Time >= 10
trigger1 =gametime%3=1
sprpriority = 2
anim = ifelse(random<500,720,721)
scale = .7,.2
vel = 0,-.9
id = 1157
pos = var(4)-35,-20-var(5)
postype = P1
bindtime = 1
ownpal = 1

[State 704, 4]
type = Explod
trigger1 = Time = 4
sprpriority = -2
anim = 737
id = 707
pos= -7,0
facing = -1
postype = P1
bindtime = 1
removeongethit = 1
removetime = -1
ownpal = 1

[State 250, 4]
type = ChangeState
triggerall = var(59) = 1
trigger1 = p2stateno != [5030,5162]
trigger2 = power >= 3000
value = 715
ctrl = 0

[State 705, 4]
type = ChangeState
triggerall = var(59) != 1
trigger1 = power >= 3000
trigger2 = command != "hold_Z"
value = 715
ctrl = 0

;+++++++++++++++++++++++++++++++++++++++++++
; 加气结束
[Statedef 715]
type = S
movetype = I
physics = S
anim = 715
ctrl = 0

[State 705, 1]
type = StopSnd
trigger1 = Time = 0
channel = 19
value = 5,3

[State 705, 2]
type = StopSnd
trigger1 = Time = 0
channel = 0
value = 5,4

[STate 3150]
type = PlaySNd
trigger1 = power >= 3000
trigger1 = time = 0
value = 700,0
channel = 1

[State 704, 1]
type = PowerAdd
;trigger1 = power < 3000
trigger1 = Time >= 1
value = 6

[State 704, 4]
type = Explod
trigger1 = power >= 3000
trigger1 = Time = 0
ignorehitpause = 1
anim = 705
id = 705
pos= 0,0
postype = P1
supermove = 10
sprpriority = 2
removeongethit = 1
ownpal = 1

[State 399, EnvShake]
type = EnvShake
trigger1 = power >= 3000
trigger1 = time = 0
ignorehitpause = 1
persistent = 0
time = 15
freq = 100
ampl = -4
phase = 1

[State 250, 4]
type = ChangeState
triggerall = var(59) = 1
trigger1 = p2stateno != [5030,5162]
trigger2 = power >= 3000
value = 0
ctrl = 1

[State 705, 4]
type = ChangeState
triggerall = var(59) != 1
trigger1 = command != "hold_Z"
value = 0
ctrl = 1

[State 705, 4]
type = ChangeState
triggerall = var(59) != 1
triggerall = animtime = 0
trigger1 = power >= 3000
value = 0
ctrl = 1

;碎额破
[StateDef 950]
type = A
movetype = A
physics = N
anim = 950
velset = 0,0
poweradd = ifelse(fvar(10)!=1,80,40)
sprpriority = 3
facep2 = 1
juggle = 7 
ctrl = 0

[STate 3150]
type = PlaySNd
trigger1 = time = 3
value = 2000,9
channel = 1
volume = 250

[STate 3150]
type = PlaySNd
trigger1 = time = 2
value = 200,4
channel = 0
volume = 60

[State 600]
type = velSet
trigger1 = animelem = 1
x = 1
y = -1

[State 600]
type = velSet
trigger1 = animelem = 3
x = 1
y = 1

[State 600]
type = velSet
trigger1 = animelem = 4
x = 7
y = 7

[State 615]
type = HitDef
triggerall = var(50) = 0
triggerall = p2bodydist y >= 70
trigger1 = animelem = 2
attr = A,NA
damage = 55,0
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,20,10)
animtype = high
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 9,9
guard.pausetime = 13,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-30
hitsound = S220,0
guardsound = S150,1
ground.type = high
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -6
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 15
fall.recovertime = 10
air.fall = 1

[State 615]
type = HitDef
triggerall = var(50) = 0
triggerall = p2bodydist y < 70
trigger1 = animelem = 2
attr = A,NA
damage = 55,0
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,20,10)
animtype = high
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 9,9
guard.pausetime = 13,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-30
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -6
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 15
fall.recovertime = 10
air.fall = 1

[State 615]
type = HitDef
triggerall = var(50) = 1
triggerall = p2bodydist y >= 70
trigger1 = animelem = 2
attr = A,NA
damage = 55,0
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,20,10)
animtype = high
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 9,9
guard.pausetime = 13,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-30
hitsound = S220,0
guardsound = S150,1
ground.type = high
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -6
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 15
fall.recovertime = 10
air.fall = 1

[State 615]
type = HitDef
triggerall = var(50) = 1
triggerall = p2bodydist y < 70
trigger1 = animelem = 2
attr = A,NA
damage = 55,0
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,20,10)
animtype = high
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 9,9
guard.pausetime = 13,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-30
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -6
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 15
fall.recovertime = 10
air.fall = 1

[State Land]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 955
ctrl = 0

[StateDef 955]
type = S
movetype = A
physics = S
anim = 955
poweradd = 0
sprpriority = 3
facep2 = 1
juggle = 7 
ctrl = 0

[state 955]
type = MakeDust
trigger1 = time = 1
pos = -10,0

[STate 3150]
type = PlaySNd
trigger1 = time = 0
value = 40,0
volume = 255

[state posset]
type = posset
trigger1 = 1
y = 0

[state posset]
type = posadd
trigger1 = time = 0
x = 10

[state posset]
type = velset
trigger1 = 1
y = 0

[State Land]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1

;破天之光 低
[StateDef 1000]
type = S
movetype = A
physics = S
anim = 1000
velset = 0,0
poweradd = ifelse(fvar(10)!=1,150,70)
facep2 = 1
juggle = 7 + var(7)
sprpriority = 1
ctrl = 0

[State 1200, Explod]
type = Explod
trigger1 =animelem = 4
anim = 1051
ID = 1051
bindtime = 999
pausemove = 1
removetime = 30
velocity = 0,0
scale = 1,1
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 3
anim = 6211
ID = 6211
velocity = 0,0
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State AI reset]
type = VarSet
trigger1 = Time = 0
var(4) = 0

[State VarSet]
type = VarSet
trigger1 = Time = 0
sysvar(0) = 0

[State VarSet]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State Slow]
type = ChangeAnim
trigger1 = SysVar(0)
trigger1 = AnimElem = 1,2
persistent = 0
value = Anim
elem = 2

[State Step Front]
type = PosAdd
trigger1 = AnimElem = 3,0
x = 10

[State Voice]
type = PlaySnd
trigger1 = Time = 0
value = 2995,ifelse(random<350,60,ifelse(random<500,55,2))
channel = 1

[State Snd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 105,0
channel = 2

[State velset]
type = velset
trigger1 = AnimElem = 4
x = 1.5

[state nothitby]
type = nothitby
trigger1 = time >=0
value = SCA
time=1
ignorehitpause = 1

[state Projectile]
type = Projectile
triggerall = var(50) = 0
triggerall = p2stateno != [120,154]
trigger1 = animelem = 4
ProjAnim = 1005
ProjID = 1005
projhitanim = 1005
ProjRemoveTime = 4
offset = 0,0
attr = S,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 115,18
sparkno = S736
guard.sparkno = S733
sparkxy = 40,-70
hitsound = S220,0
guardsound = S150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 16
guard.velocity = -4
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -4,-6
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
id = 1000
air.hittime = 14
air.velocity = -4,-7
air.type = High
air.recover = 0
air.juggle = 12
fall.recover = 0
fall = 1
palfx.time = 55
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[state Projectile]
type = hitdef
triggerall = var(50) = 0
triggerall = p2stateno = [120,154]
trigger1 = animelem = 4
attr = S,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 125,18
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-70
hitsound = S220,0
guardsound = S150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 16
guard.velocity = -9
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -4,-6
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
id = 1000
air.hittime = 14
air.velocity = -4,-7
air.type = High
air.recover = 0
air.juggle = 9
fall.recover = 0
fall = 1
palfx.time = 55
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[state Projectile]
type = Projectile
triggerall = var(50) = 1
triggerall = p2stateno != [120,154]
trigger1 = animelem = 4
ProjAnim = 1005
ProjID = 1005
projhitanim = 1005
ProjRemoveTime = 4
offset = 0,0
attr = S,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 115,18
sparkno = S736
guard.sparkno = S733
sparkxy = 40,-70
hitsound = S220,0
guardsound = S150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 16
guard.velocity = -4
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -4,-6
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
id = 1000
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.hittime = 14
air.velocity = -4,-7
air.type = High
air.recover = 0
air.juggle = 12
fall.recover = 0
fall = 1
palfx.time = 55
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[state Projectile]
type = hitdef
triggerall = var(50) = 1
triggerall = p2stateno = [120,154]
trigger1 = animelem = 4
attr = S,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 125,18
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-70
hitsound = S220,0
guardsound = S150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 16
guard.velocity = -9
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -4,-6
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
id = 1000
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.hittime = 14
air.velocity = -4,-7
air.type = High
air.recover = 0
air.juggle = 9
fall.recover = 0
fall = 1
palfx.time = 55
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[State MoveHit]
type = VarSet
trigger1 = MoveContact
sysvar(1) = 1

[State 1000, 3]
type = ChangeState
trigger1 = projcontact1005 = 1
value = 1050
ctrl = 0

[State Jump]
type = ChangeState
trigger1 = AnimTime = 0
value = 1001
ctrl = 0

[Statedef 1050]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 105
velset = 1,0
anim = 1002
juggle  = 10
ctrl = 0
sprpriority = 2

[State Snd]
type = PlaySnd
trigger1 = time = 0
value = 4040,2

[State 1200, Explod]
type = Explod
trigger1 =time = 0
anim = 6212
ID = 6212
velocity = 0,0
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = numTarget(1000)>0
anim = 6215
ID = 6215
pos = 0,0
postype = p2
bindtime = 100
sprpriority = 3
persistent = 0
ownpal = 1

[state 1000]
type = nothitby
trigger1 = 1
time = 1
value = SAC
ignorehitpause=1

[state Projectile]
type = hitdef
trigger1 = time = 0
trigger1 = p2movetype != H
attr = S,SP
hitflag = MAF
guardflag = M
getpower = 60,30
givepower = 5
damage    = 125, 35
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-70
hitsound   = s220,1
guardsound = s150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 14
guard.velocity = -10.5
guard.slidetime = 6
ground.hittime = 14
ground.velocity = -4,-6
ground.slidetime = 12
ground.type = High
guard.cornerpush.veloff = -15
air.juggle = 9
air.hittime = 14
air.velocity = -4,-6
air.type = High
air.recover = 0
fall=1
palfx.time = 55
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
fall.recover = 0

[State 1000, 3]
type = ChangeState
trigger1 =  time >(Target(1000),GetHitVar(hittime))-2
value = 1001
ctrl = 0

[StateDef 1001]
type = A
movetype = A
physics = N
anim = 1001
velset = 0,0
juggle = 10 
sprpriority = 1
ctrl = 0

[State 1200, Explod]
type = Explod
trigger1 =time = 0
anim = 1052
ID = 1052
velocity = 0,0
scale = 1,1
pos = 0,0
bindtime = 999
pausemovetime = 100
removetime = 30
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 2
anim = 1053
ID = 1053
velocity = 0,0
scale = 1,1
pos = 0,0
pausemovetime = 100
removetime = 30
bindtime = 999
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State Snd]
type = PlaySnd
trigger1 =animelem = 2
value = 4040,2

[State 1200, Explod]
type = Explod
trigger1 =animelem = 3
anim = 1054
ID = 1054
velocity = 0,0
scale = 1,1
pos = 10,0
pausemove = 1
vel = .2,-.5
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = removeExplod
trigger1 =1
ID = 1051
ignorehitpause = 1

[State 1200, Explod]
type = removeExplod
trigger1 =animelem = 2
ID = 1052
ignorehitpause = 1

[State 1200, Explod]
type = removeExplod
trigger1 =animelem = 3
ID = 1053
ignorehitpause = 1

[State 1200, Explod]
type = removeExplod
trigger1 =animelem = 4
ID = 1054
ignorehitpause = 1

[state velset]
type = velset
trigger1 = animelem = 1
y = -5.5

[state velset]
type = velset
trigger1 = animelem = 2
y = -4.5

[state velset]
type = velset
trigger1 = time = [0,10]
x = 2

[state velset]
type = velset
trigger1 = time >10 
x = 0.5

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 10
y = const(movement.yaccel)

[state nothitby]
type = nothitby
trigger1 = time >=0 && time < 10
value = SCA
time=1
ignorehitpause = 1

[State 1200, Explod]
type = Explod
trigger1 = time <= 19
trigger1 =gametime%6=1
anim = 1055
ID = 1055
velocity = 0,.4
scale = 1,1
pos = 25,-90
sprpriority = 2
supermove = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 1
anim = 6213
ID = 6213
velocity = 0,0
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 2
anim = 6214
ID = 6214
velocity = 0,0
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State HitDef]
type = HitDef  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 1
attr = A,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 30,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-100
hitsound = S220,0
guardsound = S150,1
pausetime = 12,12
animtype = Up
guard.hittime = 14
guard.velocity = -9
guard.slidetime = 14
ground.hittime = 14
ground.velocity = -4,-8
ground.slidetime = 14
ground.type = High
ground.cornerpush.veloff = -9
air.hittime = 14
air.velocity = -4,-7.5
air.type = High
air.recover = 0
fall.recover = 0
air.juggle = 15
fall = 1
id = 1002
palfx.time = 85
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .43

[State HitDef]
type = HitDef
trigger1 = !movecontact
trigger1 = (p2stateno != [5050,5060])  
trigger1 = AnimElem = 2
attr = A,SA
hitflag = MAF
guardflag = M
getpower = 70,30
givepower = 5
damage = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-100
hitsound = S220,0
guardsound = S150,1
pausetime = 12,12
animtype = Up
guard.hittime = 16
guard.velocity = -9
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -4,-8
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -9
air.hittime = 14
air.velocity = -4,-8
air.type = High
air.recover = 0
air.juggle = 10
fall.recover = 0
id = 1002
fall = 1
palfx.time = 85
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .43

[State 1200, Explod]
type = Explod
trigger1 = numTarget(1002)>0
anim = 6215
ID = 6215
pos = 0,0
postype = p2
bindtime = 100
sprpriority = 3
ownpal = 1
persistent = 0

[State Land]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1002
ctrl = 0

;破天之光 高
[StateDef 1003]
type = S
movetype = A
physics = S
anim = 1003
velset = 0,0
poweradd = ifelse(fvar(10)!=1,150,70)
facep2 = 1
juggle = 7 
sprpriority = 1
ctrl = 0

[State 1200, Explod]
type = Explod
trigger1 =animelem = 4
anim = 1051
ID = 1051
bindtime = 999
pausemove = 1
velocity = 0,0
removetime = 30
scale = 1,1
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 3
anim = 6211
ID = 6211
velocity = 0,0
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 3784]
type = Explod
trigger1 = Animelem = 3 
anim = 1045
id = 1045
pos = -25,0
postype = p1
sprpriority = 4
bindtime = 30
ownpal = 1
removetime = 20
ownpal = 1

[State 1003, VelSet]
type = VarSet
trigger1 = time = 0
var(6)=0

[State AI reset]
type = VarSet
trigger1 = Time = 0
var(4) = 0

[State VarSet]
type = VarSet
trigger1 = Time = 0
sysvar(0) = 0

[State VarSet]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State Slow]
type = ChangeAnim
trigger1 = SysVar(0)
trigger1 = AnimElem = 1,2
persistent = 0
value = Anim
elem = 1

[State Step Front]
type = PosAdd
trigger1 = AnimElem = 3,0
x = 10

[State Voice]
type = PlaySnd
trigger1 = Time = 0
value = 2995,ifelse(random<350,60,ifelse(random<500,55,2))
channel = 1

[State Voice]
type = PlaySnd
trigger1 = Time = 5
value = 1000,0
channel = 1

[State Snd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 105,0
channel = 2

[state nothitby]
type = nothitby
trigger1 = time >=0
value = SCA
time=1
ignorehitpause = 1

[state Projectile]
type = Projectile
triggerall = var(50) = 0
triggerall = p2stateno != [120,154]
trigger1 = AnimElem = 4
ProjAnim = 1006
ProjID = 1006
projhitanim = 1006
ProjRemoveTime = 4
offset = 0,0
attr = S,SP
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 120,20
sparkno = S736
guard.sparkno = S733
sparkxy = 55,-67
hitsound = S220,0
guardsound = S150,1
pausetime = 15,15
animtype = Hard
guard.hittime = 14
guard.velocity = -4
guard.slidetime = 14
ground.hittime = 23
ground.velocity = -10,0
ground.slidetime = 23
ground.type = High
air.hittime = 14
id = 1003
air.juggle = 8
air.velocity = -4,-5
air.type = High
air.recover = 0
air.fall=1
fall.recover = 0
palfx.time = 45
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[state Projectile]
type = hitdef
triggerall = var(50) = 0
triggerall = p2stateno = [120,154]
trigger1 = AnimElem = 4
attr = S,SP
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 120,20
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-50-(AnimElem=3)*20
hitsound = S220,0
guardsound = S150,1
pausetime = 15,15
animtype = Hard
guard.hittime = 16
guard.velocity = -9
guard.slidetime = 16
ground.hittime = 14
ground.velocity = -10,0
ground.slidetime = 14
ground.type = High
ground.cornerpush.veloff = -13
air.hittime = 14
id = 1003
air.juggle = 8
air.velocity = -4,-5
air.type = High
air.recover = 0
air.fall=1
fall.recover = 0
palfx.time = 45
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[state Projectile]
type = Projectile
triggerall = var(50) = 1
triggerall = p2stateno != [120,154]
trigger1 = AnimElem = 4
ProjAnim = 1006
ProjID = 1006
projhitanim = 1006
ProjRemoveTime = 4
offset = 0,0
attr = S,SP
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 120,20
sparkno = S736
guard.sparkno = S733
sparkxy = 55,-67
hitsound = S220,0
guardsound = S150,1
pausetime = 15,15
animtype = Hard
guard.hittime = 14
guard.velocity = -4
guard.slidetime = 14
ground.hittime = 23
ground.velocity = -10,0
ground.slidetime = 23
ground.type = High
air.hittime = 14
id = 1003
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.juggle = 8
air.velocity = -4,-5
air.type = High
air.recover = 0
air.fall=1
fall.recover = 0
palfx.time = 45
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[state Projectile]
type = hitdef
triggerall = var(50) = 1
triggerall = p2stateno = [120,154]
trigger1 = AnimElem = 4
attr = S,SP
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 120,20
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-50-(AnimElem=3)*20
hitsound = S220,0
guardsound = S150,1
pausetime = 15,15
animtype = Hard
guard.hittime = 16
guard.velocity = -9
guard.slidetime = 16
ground.hittime = 14
ground.velocity = -10,0
ground.slidetime = 14
ground.type = High
ground.cornerpush.veloff = -13
air.hittime = 14
id = 1003
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.juggle = 8
air.velocity = -4,-5
air.type = High
air.recover = 0
air.fall=1
fall.recover = 0
palfx.time = 45
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[State MoveHit]
type = VarSet
trigger1 = MoveContact
sysvar(1) = 1

[State 1000, 3]
type = ChangeState
trigger1 = projcontact1006 = 1
value = 1055
ctrl = 0

[State Jump]
type = ChangeState
trigger1 = AnimTime = 0
value = 1004
ctrl = 0

[Statedef 1055]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 105
velset = 1,0
anim = 1002
juggle  = 10
ctrl = 0
sprpriority = 2

[State Snd]
type = PlaySnd
trigger1 =time = 0
value = 4040,2

[State 1200, Explod]
type = Explod
trigger1 =time = 0
anim = 6212
ID = 6212
velocity = 0,0
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = numTarget(1003)>0
anim = 6215
ID = 6215
pos = 0,0
postype = p2
bindtime = 100
sprpriority = 3
persistent = 0
ownpal = 1

[state 1000]
type = nothitby
trigger1 = 1
time = 1
value = SAC
ignorehitpause=1

[state Projectile]
type = hitdef
trigger1 = time = 0
trigger1 = p2movetype != H
attr = S,SP
hitflag = MAF
guardflag = M
getpower = 60,30
givepower = 5
damage    = 125, 35
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-70
hitsound   = s220,1
guardsound = s150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 14
guard.velocity = -10.5
guard.slidetime = 6
ground.hittime = 14
ground.velocity = -4,-6
ground.slidetime = 12
ground.type = High
guard.cornerpush.veloff = -15
air.juggle = 9
air.hittime = 14
air.velocity = -4,-6
air.type = High
air.recover = 0
palfx.time = 45
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
fall=1
fall.recover = 0

[State 1000, 3]
type = ChangeState
trigger1 =  time >(Target(1003),GetHitVar(hittime))-2
value = 1004
ctrl = 0

[StateDef 1004]
type = A
movetype = A
physics = N
anim = 1004
juggle = 10
velset = 0,0
sprpriority = 1
ctrl = 0

[State Snd]
type = PlaySnd
triggerall = random<800
trigger1 = movecontact
trigger1 =animelemtime(3) = 0
value = 2995,90
persistent = 0

[State Snd]
type = PlaySnd
trigger1 =animelem = 2
value = 4040,2

[State 3875, 慢镜头]
type = Pause 
triggerall = Target(1003),statetype != A
triggerall = !movehit
triggerall = var(6) = 1
triggerall = (GameTime%2) = 0
trigger1 = time = [0,35]
time = 1 
movetime = 1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 1
anim = 6213
ID = 6213
velocity = 0,0
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 2
anim = 6214
ID = 6214
velocity = 0,0
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1003, VelSet]
type = VarSet
triggerall = time = 0
trigger1 = Target(1003),movetype = H
var(6)=1 

[State 3784]
type = Explod
trigger1 = time = 0 
anim = 1050
pos = -25,0
postype = p1
pausemovetime = 100
sprpriority = 4
bindtime = 20
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 =time = 0
anim = 1052
ID = 1052
velocity = 0,0
scale = 1,1
pos = 0,0
bindtime = 999
removetime = 30
pausemovetime = 100
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 2
anim = 1053
ID = 1053
velocity = 0,0
scale = 1,1
pos = 0,0
pausemovetime = 100
removetime = 30
bindtime = 999
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 3
anim = 1054
ID = 1054
velocity = 0,0
scale = 1,1
pos = 10,0
pausemove = 1
vel = .2,-.5
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = removeExplod
trigger1 =1
ID = 1045
ignorehitpause = 1

[State 1200, Explod]
type = removeExplod
trigger1 =1
ID = 1051
ignorehitpause = 1

[State 1200, Explod]
type = removeExplod
trigger1 =animelem = 2
ID = 1052
ignorehitpause = 1

[State 1200, Explod]
type = removeExplod
trigger1 =animelem = 3
ID = 1053
ignorehitpause = 1

[State 1200, Explod]
type = removeExplod
trigger1 =animelem = 4
ID = 1054
ignorehitpause = 1

[state velset]
type = velset
trigger1 = animelem = 1
y = -8.5

[state velset]
type = varset
trigger1 = movehit 
var(7) = 15

[State 1004, VelSet]
type = Velset
trigger1 = Time = [0,13]
x = 3.5

[State 1004, VelSet]
type = Velset
trigger1 = Time = [14,25]
x = 2

[State 1004, VelSet]
type = VelSet
trigger1 = Time >25 
x = 1

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 20
y = .35

[State Gravity]
type = VelAdd
trigger1 = animelem = 3,>3
y = .4

[state nothitby]
type = nothitby
trigger1 = time >=0 && time < 16
value = SCA
time=1
ignorehitpause = 1

[State HitDef]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
trigger2 = var(6)!=1
attr = A,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 65,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-90
hitsound = S220,0
guardsound = S150,1
pausetime = 12,12
animtype = Up
guard.hittime = 16
guard.velocity = -9
guard.slidetime = 16
ground.hittime = 5
ground.velocity = -4,-9
ground.slidetime = 12
ground.type = High
ground.cornerpush.veloff = -8
air.hittime = 5
air.velocity = -4,-8.5
air.type = High
air.juggle = 14
air.recover = 0
id = 1004
fall = 1
fall.recover = 0
palfx.time = 85
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .4

[State 1200, Explod]
type = Explod
trigger1 = numTarget(1004)>0
anim = 6215
ID = 6215
pos = 0,0
postype = p2
bindtime = 100
sprpriority = 3
persistent = 0
ownpal = 1

[State 1004, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1002

[Statedef 1002]
type = S
movetype = A
physics = S
anim = 3
velset = 0,0

[State 1002, 2]
type = posset
trigger1 = Time = 0
y = 0

;AI青龙
[State 1002, 4]
type = ChangeState
triggerall = life >= 500
trigger1 = AnimTime = 0
trigger1 = fvar(10) = 0
trigger1 = var(59) = 1
trigger1 = p2movetype = A
trigger1 = p2bodydist X = (0,50)
value = 1000 

[State 1002, 4]
type = ChangeState
triggerall = life <500
trigger1 = var(59) = 1
trigger1 = fvar(10) = 0
trigger1 = AnimTime = 0
trigger1 = p2movetype = A
trigger1 = p2bodydist X = (0,50)
value = 1003 

;AI凤凰
[State 1002, 4]
type = ChangeState
triggerall = life >= 500
trigger1 = AnimTime = 0
trigger1 = fvar(10) = 1
trigger1 = var(59) = 1
trigger1 = p2movetype = A
trigger1 = p2bodydist X = (0,50)
value = 1080 

[State 1002, 4]
type = ChangeState
triggerall = life <500
trigger1 = fvar(10) = 1
trigger1 = var(59) = 1
trigger1 = AnimTime = 0
trigger1 = p2movetype = A
trigger1 = p2bodydist X = (0,50)
value = 1090 

[State 1002, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

[Statedef 1012]
type = S
physics = S
anim = 1
velset = 0,0
ctrl = ifelse((fvar(14)=1),0,1)

[state varset]
type = varset
trigger1 = fvar(14) = 1
trigger1 = fvar(1) = 0
fvar(1) = 1

[State 1002, 2]
type = posset
trigger1 = Time = 0
y = 0

[State 1002, 2]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = p2bodydist x < -12
value = 0
ctrl = 1

[Statedef 1013]
type = S
physics = S
anim = 1
velset = 0,0
ctrl = 0

[State 1002, 2]
type = posset
trigger1 = Time = 0
y = 0

[State 1002, 2]
type = ctrlset
triggerall = fvar(14) = 0
trigger1 = Time = 30
value = 1

[State 1002, 2]
type = varset
triggerall = fvar(14) = 1
trigger1 = Time = 30
fvar(1) = 1

[State 1002, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;--------------------------------------------------------------
;凤岚 低
[StateDef 1080]
type = S
movetype = A
physics = S
anim = 1080
velset = 0,0
poweradd = ifelse(fvar(10)!=1,150,70)
facep2 = 1
juggle = 7 + var(7)
sprpriority = 1
ctrl = 0

[State 1200, Explod]
type = Explod
trigger1 =animelem = 3
anim = 1086
ID = 1086
bindtime = 999
pausemove = 1
removetime = 30
velocity = 0,0
scale = 1,1
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State AI reset]
type = VarSet
trigger1 = Time = 0
var(4) = 0

[State VarSet]
type = VarSet
trigger1 = Time = 0
sysvar(0) = 0

[State VarSet]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State Slow]
type = ChangeAnim
trigger1 = SysVar(0)
trigger1 = AnimElem = 1,2
persistent = 0
value = Anim
elem = 2

[State Step Front]
type = PosAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
x = 15

[State Voice]
type = PlaySnd
trigger1 = Time = 0
value = 1080,0
channel = 1

[State Snd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 105,0
channel = 2

[State velset]
type = velset
trigger1 = AnimElem = 4
x = 1.5

[state nothitby]
type = nothitby
trigger1 = time >=0
value = SCA
time=1
ignorehitpause = 1

[state Projectile]
type = Projectile
triggerall = var(50) = 0
triggerall = p2stateno != [120,154]
trigger1 = animelem = 4
ProjAnim = 1005
ProjID = 1005
projhitanim = 1005
ProjRemoveTime = 4
offset = 0,0
attr = S,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 135,18
sparkno = S736
guard.sparkno = S733
sparkxy = 40,-70
hitsound = S220,10
guardsound = S150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 16
guard.velocity = -4
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -4,-6
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
id = 10001
air.hittime = 14
air.velocity = -4,-7
air.type = High
air.recover = 0
air.juggle = 12
fall.recover = 0
fall = 1
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[state Projectile]
type = hitdef
triggerall = var(50) = 0
triggerall = p2stateno = [120,154]
trigger1 = animelem = 4
attr = S,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 135,18
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-70
hitsound = S220,10
guardsound = S150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 16
guard.velocity = -9
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -4,-6
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
id = 10001
air.hittime = 14
air.velocity = -4,-7
air.type = High
air.recover = 0
air.juggle = 9
fall.recover = 0
fall = 1
palfx.time = 42
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[state Projectile]
type = Projectile
triggerall = var(50) = 1
triggerall = p2stateno != [120,154]
trigger1 = animelem = 4
ProjAnim = 1005
ProjID = 1005
projhitanim = 1005
ProjRemoveTime = 4
offset = 0,0
attr = S,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 135,18
sparkno = S736
guard.sparkno = S733
sparkxy = 40,-70
hitsound = S220,10
guardsound = S150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 16
guard.velocity = -4
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -4,-6
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
id = 10001
air.hittime = 14
air.velocity = -4,-7
air.type = High
air.recover = 0
air.juggle = 12
fall.recover = 0
fall = 1
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[state Projectile]
type = hitdef
triggerall = var(50) = 1
triggerall = p2stateno = [120,154]
trigger1 = animelem = 4
attr = S,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 135,18
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-70
hitsound = S220,10
guardsound = S150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 16
guard.velocity = -9
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -4,-6
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
id = 10001
air.hittime = 14
air.velocity = -4,-7
air.type = High
air.recover = 0
air.juggle = 9
fall.recover = 0
fall = 1
palfx.time = 42
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State MoveHit]
type = VarSet
trigger1 = MoveContact
sysvar(1) = 1

[State 1000, 3]
type = ChangeState
trigger1 = projcontact1005 = 1
value = 1082
ctrl = 0

[State Jump]
type = ChangeState
trigger1 = AnimTime = 0
value = 1082
ctrl = 0

[Statedef 1082]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 105
velset = 1,0
anim = 1002
juggle  = 10
ctrl = 0
sprpriority = 2

[State Snd]
type = PlaySnd
trigger1 = time = 0
value = 3000,1

[state 1000]
type = nothitby
trigger1 = 1
time = 1
value = SAC
ignorehitpause=1

[state Projectile]
type = hitdef
trigger1 = time = 0
trigger1 = p2movetype != H
attr = S,SP
hitflag = MAF
guardflag = M
getpower = 60,30
givepower = 5
damage    = 125, 35
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-70
hitsound   = s220,1
guardsound = s150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 14
guard.velocity = -10.5
guard.slidetime = 6
ground.hittime = 14
ground.velocity = -4,-6
ground.slidetime = 12
ground.type = High
guard.cornerpush.veloff = -15
air.juggle = 9
air.hittime = 14
air.velocity = -4,-6
air.type = High
air.recover = 0
id = 10001
fall=1
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
fall.recover = 0

[State 1000, 3]
type = ChangeState
trigger1 =  time >(Target(10001),GetHitVar(hittime))-2
value = 1085
ctrl = 0

[StateDef 1085]
type = A
movetype = A
physics = N
anim = 1085
velset = 0,0
juggle = 10 
sprpriority = 1
ctrl = 0

[State 1200, Explod]
type = Explod
trigger1 =time = 0
anim = 1087
ID = 1087
velocity = 0,0
scale = 1,1
pos = 0,0
bindtime = 999
pausemovetime = 100
removetime = 30
sprpriority = 3
removeongethit = 1
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 2
anim = 1088
ID = 1088
velocity = 0,0
scale = 1,1
pos = 0,0
pausemovetime = 100
removetime = 30
bindtime = 999
sprpriority = 3
removeongethit = 1
ignorehitpause = 1
ownpal = 1

[State Snd]
type = PlaySnd
trigger1 =animelem = 2
value = 3000,1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 3
anim = 1089
ID = 1089
velocity = 0,0
scale = 1,1
pos = -10,0
pausemove = 1
sprpriority = 3
removeongethit = 1
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = removeExplod
trigger1 =1
ID = 1086
ignorehitpause = 1

[State 1200, Explod]
type = removeExplod
trigger1 =animelem = 2
ID = 1087
ignorehitpause = 1

[State 1200, Explod]
type = removeExplod
trigger1 =animelem = 3
ID = 1088
ignorehitpause = 1

[State 1200, Explod]
type = removeExplod
trigger1 =animelem = 4
ID = 1089
ignorehitpause = 1

[state velset]
type = velset
trigger1 = animelem = 1
y = -7

[state velset]
type = velset
trigger1 = animelem = 3
x = -1.6

[state velset]
type = velset
trigger1 = animelem = 4 
x = -2.2

[state velset]
type = velset
trigger1 = animelem = 8 
x = -1

[state velset]
type = velset
trigger1 = animelem = 9 
x = -0.5

[State Gravity]
type = VelAdd
trigger1 = animelemtime(5)<0
trigger1 = Pos Y < 10
y = .30

[State Gravity]
type = VelAdd
trigger1 = animelemtime(5)>=0
trigger1 = Pos Y < 10
y = .23

[state nothitby]
type = nothitby
trigger1 = time >=0 && time < 10
value = SCA
time=1
ignorehitpause = 1

[State 1200, Explod]
type = Explod
trigger1 = time <= 19
trigger1 =gametime%6=1
anim = 1055
ID = 1055
velocity = 0,.4
scale = 1,1
pos = 25,-90
sprpriority = 2
supermove = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = time%10 = 1
trigger1 =animelemtime(1) >= 1
trigger1 =animelemtime(7) < 0
anim = 65
velocity = 0,0
pos = 20,-50
random = -20,-30
sprpriority = 3
ignorehitpause = 1
ownpal = 1


[State HitDef]
type = HitDef  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = A,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 130,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-100
hitsound = S220,10
guardsound = S150,1
pausetime = 12,12
animtype = Up
guard.hittime = 14
guard.velocity = -9
guard.slidetime = 14
ground.hittime = 14
ground.velocity = -4,-8
ground.slidetime = 14
ground.type = High
ground.cornerpush.veloff = -9
air.hittime = 14
air.velocity = -4,-7.5
air.type = High
air.recover = 0
fall.recover = 0
air.juggle = 15
fall = 1
id = 10001
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .43

[State 1200, Explod]
type = Explod
trigger1 = numTarget(1002)>0
anim = 6215
ID = 6215
pos = 0,0
postype = p2
bindtime = 100
sprpriority = 3
ownpal = 1
persistent = 0

[State Land]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1002
ctrl = 0



;--------------------------------------------------------------
;凤岚 高
[StateDef 1090]
type = S
movetype = A
physics = S
anim = 1090
velset = 0,0
poweradd = ifelse(fvar(10)!=1,150,70)
facep2 = 1
juggle = 7 + var(7)
sprpriority = 1
ctrl = 0

[State 1200, Explod]
type = Explod
trigger1 =animelem = 3
anim = 1086
ID = 1086
bindtime = 999
pausemove = 1
removetime = 30
velocity = 0,0
scale = 1,1
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State AI reset]
type = VarSet
trigger1 = Time = 0
var(4) = 0

[State VarSet]
type = VarSet
trigger1 = Time = 0
sysvar(0) = 0

[State VarSet]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State Slow]
type = ChangeAnim
trigger1 = SysVar(0)
trigger1 = AnimElem = 1,2
persistent = 0
value = Anim
elem = 2

[State Step Front]
type = PosAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
x = 15

[State Voice]
type = PlaySnd
trigger1 = Time = 0
value = 1080,0
channel = 1

[State Snd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 105,0
channel = 2

[State velset]
type = velset
trigger1 = AnimElem = 4
x = 1.5

[state nothitby]
type = nothitby
trigger1 = time >=0
value = SCA
time=1
ignorehitpause = 1

[state Projectile]
type = Projectile
triggerall = var(50) = 0
triggerall = p2stateno != [120,154]
trigger1 = animelem = 4
ProjAnim = 1005
ProjID = 1005
projhitanim = 1005
ProjRemoveTime = 4
offset = 0,0
attr = S,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 135,18
sparkno = S736
guard.sparkno = S733
sparkxy = 40,-70
hitsound = S220,10
guardsound = S150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 16
guard.velocity = -4
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -4,-6
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
id = 10001
air.hittime = 14
air.velocity = -4,-7
air.type = High
air.recover = 0
air.juggle = 12
fall.recover = 0
fall = 1
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[state Projectile]
type = hitdef
triggerall = var(50) = 0
triggerall = p2stateno = [120,154]
trigger1 = animelem = 4
attr = S,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 135,18
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-70
hitsound = S220,10
guardsound = S150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 16
guard.velocity = -9
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -4,-6
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
id = 10001
air.hittime = 14
air.velocity = -4,-7
air.type = High
air.recover = 0
air.juggle = 9
fall.recover = 0
fall = 1
palfx.time = 42
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[state Projectile]
type = Projectile
triggerall = var(50) = 1
triggerall = p2stateno != [120,154]
trigger1 = animelem = 4
ProjAnim = 1005
ProjID = 1005
projhitanim = 1005
ProjRemoveTime = 4
offset = 0,0
attr = S,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 135,18
sparkno = S736
guard.sparkno = S733
sparkxy = 40,-70
hitsound = S220,10
guardsound = S150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 16
guard.velocity = -4
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -4,-6
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
id = 10001
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.hittime = 14
air.velocity = -4,-7
air.type = High
air.recover = 0
air.juggle = 12
fall.recover = 0
fall = 1
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[state Projectile]
type = hitdef
triggerall = var(50) = 1
triggerall = p2stateno = [120,154]
trigger1 = animelem = 4
attr = S,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 135,18
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-70
hitsound = S220,10
guardsound = S150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 16
guard.velocity = -9
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -4,-6
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
id = 10001
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.hittime = 14
air.velocity = -4,-7
air.type = High
air.recover = 0
air.juggle = 9
fall.recover = 0
fall = 1
palfx.time = 42
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State MoveHit]
type = VarSet
trigger1 = MoveContact
sysvar(1) = 1

[State 1000, 3]
type = ChangeState
trigger1 = projcontact1005 = 1
value = 1092
ctrl = 0

[State Jump]
type = ChangeState
trigger1 = AnimTime = 0
value = 1092
ctrl = 0

[Statedef 1092]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 105
velset = 1,0
anim = 1002
juggle  = 10
ctrl = 0
sprpriority = 2

[State Snd]
type = PlaySnd
trigger1 = time = 0
value = 3000,1

[state 1000]
type = nothitby
trigger1 = 1
time = 1
value = SAC
ignorehitpause=1

[state Projectile]
type = hitdef
trigger1 = time = 0
trigger1 = p2movetype != H
attr = S,SP
hitflag = MAF
guardflag = M
getpower = 60,30
givepower = 5
damage    = 125, 35
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-70
hitsound   = s220,1
guardsound = s150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 14
guard.velocity = -10.5
guard.slidetime = 6
ground.hittime = 14
ground.velocity = -4,-6
ground.slidetime = 12
ground.type = High
guard.cornerpush.veloff = -15
air.juggle = 9
air.hittime = 14
air.velocity = -4,-6
air.type = High
air.recover = 0
id = 10001
fall=1
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
fall.recover = 0

[State 1000, 3]
type = ChangeState
trigger1 =  time >(Target(10001),GetHitVar(hittime))-2
value = 1095
ctrl = 0

[StateDef 1095]
type = A
movetype = A
physics = N
anim = 1095
velset = 0,0
juggle = 10 
sprpriority = 1
ctrl = 0

[State 1200, Explod]
type = Explod
trigger1 =time = 0
anim = 1087
ID = 1087
velocity = 0,0
scale = 1,1
pos = 0,0
bindtime = 999
pausemovetime = 100
removetime = 30
sprpriority = 3
removeongethit = 1
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 2
anim = 1088
ID = 1088
velocity = 0,0
scale = 1,1
pos = 0,0
pausemovetime = 100
removetime = 30
bindtime = 999
sprpriority = 3
removeongethit = 1
ignorehitpause = 1
ownpal = 1

[State Snd]
type = PlaySnd
trigger1 =animelem = 2
value = 3000,1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 3
anim = 1089
ID = 1089
velocity = 0,0
scale = 1,1
pos = -10,0
pausemove = 1
sprpriority = 3
removeongethit = 1
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = removeExplod
trigger1 =1
ID = 1086
ignorehitpause = 1

[State 1200, Explod]
type = removeExplod
trigger1 =animelem = 2
ID = 1087
ignorehitpause = 1

[State 1200, Explod]
type = removeExplod
trigger1 =animelem = 3
ID = 1088
ignorehitpause = 1

[State 1200, Explod]
type = removeExplod
trigger1 =animelem = 4
ID = 1089
ignorehitpause = 1

[state velset]
type = velset
trigger1 = animelem = 1
y = -8

[state velset]
type = velset
trigger1 = animelem = 3
x = -1.6

[state velset]
type = velset
trigger1 = animelem = 8 
x = -1.3

[state velset]
type = velset
trigger1 = animelem = 9 
x = -.70

[state velset]
type = velset
trigger1 = animelem = 4 
x = -2.2

[State Gravity]
type = VelAdd
trigger1 = animelemtime(5)<0
trigger1 = Pos Y < 10
y = .30

[State Gravity]
type = VelAdd
trigger1 = animelemtime(5)>=0
trigger1 = Pos Y < 10
y = .25

[state nothitby]
type = nothitby
trigger1 = time >=0 && time < 10
value = SCA
time=1
ignorehitpause = 1

[State 1200, Explod]
type = Explod
trigger1 = time <= 19
trigger1 =gametime%6=1
anim = 1055
ID = 1055
velocity = 0,.4
scale = 1,1
pos = 25,-90
sprpriority = 2
supermove = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = time%10 = 1
trigger1 =animelemtime(1) >= 1
trigger1 =animelemtime(7) < 0
anim = 65
velocity = 0,0
pos = 20,-50
random = -20,-30
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State HitDef]
type = HitDef  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = A,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 130,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,-100
hitsound = S220,10
guardsound = S150,1
pausetime = 12,12
animtype = Up
guard.hittime = 14
guard.velocity = -9
guard.slidetime = 14
ground.hittime = 14
ground.velocity = -4,-8
ground.slidetime = 14
ground.type = High
ground.cornerpush.veloff = -9
air.hittime = 14
air.velocity = -4,-7.5
air.type = High
air.recover = 0
fall.recover = 0
air.juggle = 15
fall = 1
id = 10001
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .43

[State Land]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1002
ctrl = 0



;-------------------------------------------------------------
;气动拳 3
[Statedef 1100]
type = S
movetype = A
physics = S
anim = 1100
velset = 0,0
poweradd = ifelse(fvar(10)!=1,100,50)
ctrl = 0

[State 1100, 1]
type = Posadd
trigger1 = Time = 0
x = 12

[STate 1100]
type = hitby
trigger1 = 1
value = SAC,NA,SA,HP,NP,SP,HA

[State 1100, 1]
type = PlaySnd
trigger1 = Time = 0
trigger1 = Random < 750
volume = 50
value = 5,1
channel = 0

[State 1100, 2]
type = PlaySnd
trigger1 = Time = 0
value = 2995,ifelse(random<500,50,53)

[State 1100]
type = Helper
trigger1 = animelem = 2,>= 0 && animelem = 6,<= 0
trigger1 = numhelper(3111) < 2
stateno = 1612
id = 3111
pos = 0,0
postype = p1
ownpal = 1
sprpriority = 3

[State 1100]
type = Helper
trigger1 = animelem = 7,>= 0 && animelem = 10,<= 0
trigger1 = numhelper(3111) < 2
stateno = 1611
id = 3111
pos = 0,0
postype = p1
ownpal = 1
sprpriority = 3

[State 1100, 3]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5030,5040])  
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
attr = S, SP
animtype = high
damage = 20,5
priority = 7, Hit
guardflag = MA
pausetime = 7,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-75
hitsound = S200,0
guardsound = S150,1
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -4.5
air.velocity = -3.5,-6
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,20,10)
givepower = 5
yaccel = .5
air.fall = 1
air.recover = 0
fall.recover = 0

[State 1100, 3]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5030,5040])  
trigger1 = AnimElem = 9
trigger2 = AnimElem = 10
trigger3 = AnimElem = 11
attr = S, SP
animtype = high
damage = 25,6
priority = 7, Hit
guardflag = MA
pausetime = 7,7
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-60
hitsound = S200,0
guardsound = S150,1
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -5.5
air.velocity = -3.5,-6
air.juggle = 8
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,20,10)
givepower = 5
yaccel = .5
air.fall = 1
air.recover = 0
fall.recover = 0

[State 1100, 3]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5030,5040])  
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
attr = S, SP
animtype = high
damage = 20,5
priority = 7, Hit
guardflag = MA
pausetime = 7,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-75
hitsound = S200,0
guardsound = S150,1
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -4.5
air.velocity = -3.5,-6
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,20,10)
givepower = 5
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
yaccel = .5
air.fall = 1
air.recover = 0
fall.recover = 0

[State 1100, 3]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5030,5040])  
trigger1 = AnimElem = 9
trigger2 = AnimElem = 10
trigger3 = AnimElem = 11
attr = S, SP
animtype = high
damage = 25,6
priority = 7, Hit
guardflag = MA
pausetime = 7,7
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-60
hitsound = S200,0
guardsound = S150,1
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -5.5
air.velocity = -3.5,-6
air.juggle = 8
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,20,10)
givepower = 5
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
yaccel = .5
air.fall = 1
air.recover = 0
fall.recover = 0

;AI青龙
[state 1100]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = movehit || movecontact || moveguarded
trigger1 = p2movetype != A 
trigger1 = p2BodyDist X > 65
trigger1 = animtime = 0
value = ifelse(random>700,1350,ifelse(random<300,1702,ifelse(random>500,1150,116)))

[state 1100]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = movehit || movecontact || moveguarded
triggerall = random < 200
trigger1 = power >= 1000 
trigger1 = p2BodyDist X > 65
trigger1 = animtime = 0
value = 3400

[state 1200]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = movehit || movecontact || moveguarded
trigger1 = p2BodyDist X > 65
trigger1 = animtime = 0
value = 116

;AI凤凰
[state 1100]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = movehit || movecontact || moveguarded
trigger1 = p2movetype != A 
trigger1 = p2BodyDist X > 65
trigger1 = animtime = 0
value = ifelse(random>700,1350,ifelse(random<300,1702,ifelse(random>500,1150,116)))

[state 1100]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = movehit || movecontact || moveguarded
triggerall = random < 200
trigger1 = power >= 1000 
trigger1 = p2BodyDist X > 65
trigger1 = animtime = 0
value = ifelse(random<500,4300,4200)

[state 1200]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = movehit || movecontact || moveguarded
trigger1 = p2BodyDist X > 65
trigger1 = animtime = 0
value = 116

[State 210, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

[Statedef 1612]
type    = A
movetype= I
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
poweradd = 0
sprpriority = -3
anim = 3112

[STate 3112]
type = HitBy
trigger1 = 1
value = SAC,NP,SP,HP

[STate 3112]
type = HitOverRide
trigger1 = 1
attr = SAC,NP,SP,HP
stateno = 3222

[State 3112]
type = Bindtoparent
trigger1 = 1
pos = 0,0

[State 3112]
type = Destroyself
trigger1 = root,stateno != 1100
trigger2 = root,animelem = 10,>= 0 && root,stateno = 1100


[Statedef 1611]
type    = A
movetype= I
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
poweradd = 0
sprpriority = -3
anim = 3111

[STate 3111]
type = HitBy
trigger1 = 1
value = SAC,NP,SP,HP

[STate 3111]
type = HitOverRide
trigger1 = 1
attr = SAC,NP,SP,HP
stateno = 3222

[State 3111]
type = Bindtoparent
trigger1 = 1
pos = 0,0

[State 3111]
type = Destroyself
trigger1 = root,stateno != 1100
trigger2 = root,animelem = 10,>= 0 && root,stateno = 1100

;气动拳 2
[Statedef 1150]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
anim = ifelse((fvar(10)=1),1205,1150)
poweradd = ifelse(fvar(10)!=1,120,60)
sprpriority = 2

[State 1150]
type = PalFx
trigger1 = timemod = 3,0
trigger1 = time <= 13
trigger1 = var(11) = 1 && var(32) = 1
add = 255,255,255
time = 2

;------------------
[state 1200]
type = varset
trigger1 = (animelemtime(1) >= 0) && (animelemtime(5) < 0)
var(31) = 0

[state 1200]
type = varset
trigger1 = (animelemtime(1) >= 0) && (animelemtime(5) < 0)
fvar(15) = 0

[STate 1150]
type = PlaySNd
trigger1 = Animelem = 5 
value = 800,0
channel = 0

[STate 1150]
type = PlaySNd
trigger1 = Animelem = 3 
value = 300,0
channel = 1

[State 1150]
type = Width
trigger1 = Animelem = 7,>= 0 && animelem = 14,<= 0
value = 15,0

[State 1100]
type = Helper
trigger1 = ifelse((fvar(10)=1),(Animelem = 6),(Animelem = 5)) 
stateno = 1201
id = 1201
pos = -2,ifelse((fvar(10)=1),-10,-1)
ownpal = 1
sprpriority = 3

;AI青龙
[state 1150]
type = changestate
triggerall = var(59) = 1 
triggerall = fvar(10) = 0
triggerall = statetype !=A
trigger1 = animtime = 0
trigger1 = p2movetype = A
trigger1 = p2bodydist X < 55
value = 1003

[state 1150]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = statetype = A 
trigger1 = p2BodyDist X > 65
trigger1 = animtime = 0
value = 1702

[state 1150]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = statetype = A 
trigger1 = p2BodyDist X <= 65
trigger1 = p2statetype = S
trigger1 = p2movetype != A
trigger1 = animtime = 0
value = 410

[state 1150]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = statetype = A
trigger1 = random > 700 
trigger1 = p2BodyDist X <= 70
trigger1 = p2statetype = C
trigger1 = p2movetype != A
trigger1 = animtime = 0
value = 201

[state 1150]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = statetype = A
trigger1 = random < 300 
trigger1 = p2BodyDist X <= 70
trigger1 = p2statetype = C
trigger1 = p2movetype != A
trigger1 = animtime = 0
value = 900

;AI凤凰
[state 1150]
type = changestate
triggerall = var(59) = 1 
triggerall = fvar(10) = 1
triggerall = statetype !=A
trigger1 = animtime = 0
trigger1 = p2movetype = A
trigger1 = p2bodydist X < 55
value = 1090

[state 1150]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = statetype = A 
trigger1 = p2BodyDist X > 65
trigger1 = animtime = 0
value = 1702

[state 1150]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = statetype = A 
trigger1 = p2BodyDist X <= 65
trigger1 = p2statetype = S
trigger1 = p2movetype != A
trigger1 = animtime = 0
value = 410

[state 1150]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = statetype = A
trigger1 = random > 700 
trigger1 = p2BodyDist X <= 70
trigger1 = p2statetype = C
trigger1 = p2movetype != A
trigger1 = animtime = 0
value = 201

[state 1150]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = statetype = A
trigger1 = random < 300 
trigger1 = p2BodyDist X <= 70
trigger1 = p2statetype = C
trigger1 = p2movetype != A
trigger1 = animtime = 0
value = 900

[State 1150]
type = ChangeState 
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;气动拳 1
[Statedef 1200]
type = S
movetype = A
physics = S
juggle = 15
velset = 0,0
ctrl = 0
anim = ifelse((fvar(10)=1),1205,1150)
poweradd = ifelse(fvar(10)!=1,120,60)
sprpriority = 2

[State 1200]
type = PalFx
trigger1 = timemod = 3,0
trigger1 = time <= 13
trigger1 = var(11) = 1 && var(32) = 1
add = 255,255,255
time = 2

;------------------
[state 1200]
type = varset
trigger1 = (animelemtime(1) >= 0) && (animelemtime(5) < 0)
var(31) = 0

[state 1200]
type = varset
trigger1 = (animelemtime(1) >= 0) && (animelemtime(5) < 0)
fvar(15) = 0

[STate 1200]
type = PlaySNd
trigger1 = Animelem = 5 
value = 800,0
channel = 0

[STate 1150]
type = PlaySNd
trigger1 = Animelem = 3 
value = 300,0
channel = 1

[State 1200]
type = posadd
trigger1 = AnimTime = 0
trigger2 = Time = 0
x = 10

[State 1200]
type = Width
trigger1 = Animelem = 7,>= 0 && animelem = 14,<= 0
value = 15,0

[State 1100]
type = Helper
trigger1 = ifelse((fvar(10)=1),(Animelem = 6),(Animelem = 5))
stateno = 1201
id = 1201
pos = -2,ifelse((fvar(10)=1),-10,-1)
ownpal = 1
sprpriority = 3

;AI青龙
[State 1200, 4]
type = ChangeState
triggerall = life >= 500
triggerall = fvar(10)=0
triggerall = var(59) = 1 
trigger1 = AnimTime = 0
trigger1 = p2movetype = A
trigger1 = p2bodydist X = (0,50)
value = 1000 

[State 1200, 4]
type = ChangeState
triggerall = life <500
triggerall = fvar(10)=0
triggerall = var(59) = 1 
trigger1 = AnimTime = 0
trigger1 = p2movetype = A
trigger1 = p2bodydist X = (0,50)
value = 1003

[state 1200]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10)=0
triggerall = statetype = A 
trigger1 = p2BodyDist X > 65
trigger1 = animtime = 0
value = 1702

[state 1200]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10)=0
triggerall = statetype = A 
trigger1 = p2BodyDist X <= 65
trigger1 = p2statetype = S
trigger1 = p2movetype != A
trigger1 = animtime = 0
value = 410

[state 1200]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10)=0
triggerall = statetype = A
trigger1 = random > 700 
trigger1 = p2BodyDist X <= 70
trigger1 = p2statetype = C
trigger1 = p2movetype != A
trigger1 = animtime = 0
value = 201

[state 1200]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10)=0
triggerall = statetype = A
trigger1 = random < 300 
trigger1 = p2BodyDist X <= 70
trigger1 = p2statetype = C
trigger1 = p2movetype != A
trigger1 = animtime = 0
value = 900

;AI凤凰
[State 1200, 4]
type = ChangeState
triggerall = life >= 500
triggerall = fvar(10)=1
triggerall = var(59) = 1 
trigger1 = AnimTime = 0
trigger1 = p2movetype = A
trigger1 = p2bodydist X = (0,50)
value = 1080 

[State 1200, 4]
type = ChangeState
triggerall = life <500
triggerall = fvar(10)=1
triggerall = var(59) = 1 
trigger1 = AnimTime = 0
trigger1 = p2movetype = A
trigger1 = p2bodydist X = (0,50)
value = 1090

[state 1200]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10)=1
triggerall = statetype = A 
trigger1 = p2BodyDist X > 65
trigger1 = animtime = 0
value = 1702

[state 1200]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10)=1
triggerall = statetype = A 
trigger1 = p2BodyDist X <= 65
trigger1 = p2statetype = S
trigger1 = p2movetype != A
trigger1 = animtime = 0
value = 410

[state 1200]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10)=1
triggerall = statetype = A
trigger1 = random > 700 
trigger1 = p2BodyDist X <= 70
trigger1 = p2statetype = C
trigger1 = p2movetype != A
trigger1 = animtime = 0
value = 201

[state 1200]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10)=1
triggerall = statetype = A
trigger1 = random < 300 
trigger1 = p2BodyDist X <= 70
trigger1 = p2statetype = C
trigger1 = p2movetype != A
trigger1 = animtime = 0
value = 900

[State 1200]
type = ChangeState 
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;闪光天雷击(短)
[statedef 1250]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
poweradd = ifelse(fvar(10)!=1,90,45)
sprpriority = 3
anim = 1250

[State 900, 2]
type = PlaySnd
triggerall = random <= 600
trigger1 = time = 2
value = 2995,54
channel = 0

[state nothitby]
type = nothitby
trigger1 = time >=0
value = SCA, NA,SA,NT,ST,NP,NP,SP,HP
time = 10
ignorehitpause = 1

[State Jump]
type = posadd
trigger1 = Time = 0
trigger2 = animelem = 2
trigger3 = AnimTime = 0
x = 10

[State Jump]
type = ChangeState
trigger1 = AnimTime = 0
value = 1300
ctrl = 0

[StateDef 1300]
type = A
movetype = A
physics = N
anim = 1300
velset = 0.0
ctrl = 0

[state playsnd]
type = playsnd
trigger1 = animelem = 4
value = 600,1
volume = 160

[State 1305, 2]
type = playsnd
trigger1 = animelem = 4
value = 2500,0
channel = 0

[State 1300, 2]
type = veladd
trigger1 = animelem = 1, <= 2
y = -2.7 
x = 0.7

[State 1300, 2]
type = veladd
trigger1 = animelem = 3, >= 3
y = 0 
x = 0

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = const(movement.yaccel)

[state hitdef]
type = hitdef
triggerall = fvar(10)=0
trigger1 = (p2stateno != [5020,5040])
trigger1 = animelem = 5
trigger2 = animelem = 6
attr = A,NA
damage = 40,10
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
animtype = high
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
sparkno = S736
guard.pausetime = 10,10
guard.sparkno = S731
sparkxy = ((p2bodydist x)-60)/2,-65
hitsound = S220,0
guardsound = S150,0
ground.type = low
ground.slidetime = 19
ground.hittime = 23
ground.velocity = -6
guard.velocity = -8
guard.cornerpush.veloff = -12
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 15
id=1300
fall.recover = 0
palfx.time = 55
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15

[state hitdef]
type = hitdef
triggerall = fvar(10)=1
trigger1 = (p2stateno != [5020,5040])
trigger1 = animelem = 5
trigger2 = animelem = 6
attr = A,NA
damage = 40,10
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
animtype = high
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
sparkno = S736
guard.pausetime = 10,10
guard.sparkno = S731
sparkxy = ((p2bodydist x)-60)/2,-65
hitsound = S220,10
guardsound = S150,0
ground.type = low
ground.slidetime = 19
ground.hittime = 23
ground.velocity = -6
guard.velocity = -8
guard.cornerpush.veloff = -12
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 15
id=10001
fall.recover = 0
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1

[State 1200, Explod]
type = Explod
trigger1 = numTarget(1300)>0
anim = 6215
ID = 6215
pos = 0,0
postype = p2
bindtime = 100
sprpriority = 3
persistent = 0
ownpal = 1

[state hitdef]
type = hitdef
triggerall = fvar(10)=0
trigger1 = animelem = 7
attr = A,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 60,10
sparkno = S736
guard.sparkno = S731
sparkxy = 10,-20
hitsound = S220,0
guardsound = S150,0
pausetime = 12,12
animtype = Up
guard.hittime = 23
guard.velocity = -4
guard.slidetime = 19
guard.velocity = -12
guard.cornerpush.veloff = -15
ground.hittime = 23
ground.velocity = -2,-5.5
ground.slidetime = 19
ground.type = High
air.hittime = 14
air.velocity = -4,-6
air.type = High
air.recover = 0
air.juggle = 8
fall.recover = 0
id=1000
fall = 1
palfx.time = 55
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[state hitdef]
type = hitdef
triggerall = fvar(10)=1
trigger1 = animelem = 7
attr = A,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 60,10
sparkno = S736
guard.sparkno = S731
sparkxy = 10,-20
hitsound = S220,10
guardsound = S150,0
pausetime = 12,12
animtype = Up
guard.hittime = 23
guard.velocity = -4
guard.slidetime = 19
guard.velocity = -12
guard.cornerpush.veloff = -15
ground.hittime = 23
ground.velocity = -2,-5.5
ground.slidetime = 19
ground.type = High
air.hittime = 14
air.velocity = -4,-6
air.type = High
air.recover = 0
air.juggle = 8
fall.recover = 0
id=10001
fall = 1
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State Land]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 1310
ctrl = 0

;闪光天雷击(长)
[statedef 1350]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
poweradd = ifelse(fvar(10)!=1,90,45)
sprpriority = 3
anim = 1250

[State 900, 2]
type = PlaySnd
triggerall = random <= 600
trigger1 = time = 2
value = 2995,54
channel = 0

[state nothitby]
type = nothitby
trigger1 = time >=0
value = SCA, NA,SA,NT,ST,NP,NP,SP,HP
time = 10
ignorehitpause = 1

[State Jump]
type = ChangeState
trigger1 = AnimTime = 0
value = 1305
ctrl = 0

[StateDef 1305]
type = A
movetype = A
physics = N
anim = 1350
juggle = 10
velset = 0.0
ctrl = 0

[state playsnd]
type = playsnd
trigger1 = animelem = 3
value = 600,1
volume = 160

[State 1305, 2]
type = veladd
trigger1 = animelem = 1, <= 2
y = -3.5 
x = 1.5

[State 1305, 2]
type = veladd
trigger1 = animelem = 3, >= 3
y = 0.2 
x = 0

[State 1305, 2]
type = playsnd
trigger1 = animelem = 4
value = 2500,0
channel = 0 

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = const(movement.yaccel)

[state hitdef]
type = hitdef
triggerall = fvar(10) = 0
trigger1 = (p2stateno != [5020,5040])
trigger1 = animelem = 5
trigger2 = animelem = 6
attr = A,NA
damage = 80,0
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
animtype = high
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
guard.pausetime = 10,10
guard.sparkno = S731
sparkno = S736
sparkxy = ((p2bodydist x)-60)/2,-65
hitsound = S220,0
guardsound = S150,0
ground.type = low
ground.slidetime = 19
ground.hittime = 23
ground.velocity = -6
guard.velocity = -8
guard.cornerpush.veloff = -12
airguard.velocity = -6,-3
air.type = low
id = 1306
palfx.time = 55
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
air.velocity = -4,-3
air.fall = 1
fall.recover = 0

[state hitdef]
type = hitdef
triggerall = fvar(10) = 1
trigger1 = (p2stateno != [5020,5040])
trigger1 = animelem = 5
trigger2 = animelem = 6
attr = A,NA
damage = 80,0
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
animtype = high
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
guard.pausetime = 10,10
guard.sparkno = S731
sparkno = S736
sparkxy = ((p2bodydist x)-60)/2,-65
hitsound = S220,10
guardsound = S150,0
ground.type = low
ground.slidetime = 19
ground.hittime = 23
ground.velocity = -6
guard.velocity = -8
guard.cornerpush.veloff = -12
airguard.velocity = -6,-3
air.type = low
id=10001
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
air.velocity = -4,-3
air.fall = 1
fall.recover = 0

[State 1200, Explod]
type = Explod
trigger1 = numTarget(1306)>0
trigger2 = numTarget(1305)>0
anim = 6215
ID = 6215
pos = 0,0
postype = p2
bindtime = 100
sprpriority = 3
persistent = 0
ownpal = 1

[state hitdef]
type = hitdef
triggerall = fvar(10) = 0
trigger1 = animelem = 7
attr = A,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 70,10
sparkno = S736
guard.sparkno = S731
sparkxy = 10,-20
hitsound = S220,0
guardsound = S150,0
pausetime = 12,12
animtype = Up
guard.hittime = 23
guard.velocity = -4
guard.slidetime = 19
ground.hittime = 23
ground.velocity = -2,-6
guard.velocity = -12
guard.cornerpush.veloff = -17
ground.slidetime = 19
ground.type = High
air.hittime = 14
air.velocity = -4,-6
air.type = High
air.recover = 0
fall.recover = 0
fall = 1
id = 1305
palfx.time = 55
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[state hitdef]
type = hitdef
triggerall = fvar(10) = 1
trigger1 = animelem = 7
attr = A,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 70,10
sparkno = S736
guard.sparkno = S731
sparkxy = 10,-20
hitsound = S220,10
guardsound = S150,0
pausetime = 12,12
animtype = Up
guard.hittime = 23
guard.velocity = -4
guard.slidetime = 19
ground.hittime = 23
ground.velocity = -2,-6
guard.velocity = -12
guard.cornerpush.veloff = -17
ground.slidetime = 19
ground.type = High
air.hittime = 14
air.velocity = -4,-6
air.type = High
air.recover = 0
fall.recover = 0
fall = 1
id=10001
fall = 1
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State Land]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 1310
ctrl = 0

[StateDef 1310]
type = S
movetype = A
physics = S
anim = 1310
velset = 0,0
ctrl = 0

[state posset]
type = posset
trigger1 = 1
y = 0

[State Jump]
type = ChangeState
trigger1 = animtime = 0
value = 12;站立
ctrl = 1

;倒旋(低)
[statedef 1400]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
poweradd = ifelse(fvar(10)!=1,100,50)
sprpriority = 1
juggle= 7+var(7)
anim = 1400

[state 1395]
type = nothitby
trigger1 = 1
value = sac
time = 1

[state playsnd]
type = posadd
trigger1 = animelem = 2
x = 15

[State 1650, 1]
type = ReversalDef
trigger1 = animelem = 1
trigger2 = animelem = 2 
reversal.attr = SCA,NA,SA, AP,NP,SP,AA,HP,HA
hitflag = MAFPD
numhits = 0
persistent = 0
pausetime = 16,21
sparkno = S731
hitsound = S150,1
p1stateno = 1401
p2stateno = 831

[State Jump]
type = ChangeState
trigger1 = animtime = 0
value = 1405
ctrl = 0

[statedef 1401]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
poweradd = ifelse(fvar(10)!=1,100,50)
sprpriority = 1
juggle= 7+var(7)
anim = 1401

[State 3784]
type = Explod
trigger1 = animelemtime(2) = 2
ignorehitpause = 1 
persistent = 0
anim = 1500
pos = 0,0
supermove = 1
pausemovetime = 100
postype = p1
sprpriority = 2
bindtime = 33
ownpal = 1

[State 399, -2]
type = EnvShake
trigger1 = animelemtime(6) = 2
ignorehitpause = 1
persistent = 0
time = 20
freq = 100
ampl = -3
phase = 1

[State 3784]
type = Explod
trigger1 = animelemtime(6) = 2
ignorehitpause = 1 
anim = 395
pos = -25,-2
supermove = 1
pausemovetime = 100
postype = p1
sprpriority = -3
bindtime = 33
ownpal = 1

[STate 1395]
type = PlaySNd
trigger1 = animelemtime(2) = 2
value = 2995,60
volume = 70

[STate 1395]
type = PlaySNd
trigger1 = animelemtime(2) = 2
value = 999,2
volume = 170

[State 3875, 慢镜头]
type = Pause 
trigger1 = animelem = 2
time = 40
movetime = 40
ignorehitpause = 1

[State 900, 2]
type = PlaySnd
triggerall = random <= 600
trigger1 = Animelem = 3
value = 2995,55
channel = 0

[state nothitby]
type = nothitby
trigger1 = time >=0
value = SCA, NA,SA,NT,ST,NP,NP,SP,HP
time = 1
ignorehitpause = 1

[State Jump]
type = ChangeState
trigger1 = AnimTime = 0
value = 1405
ctrl = 0

;倒旋(起)
[StateDef 1405]
type = A
movetype = A
physics = N
anim = 1405
velset = 0,0
ctrl = 0

[state playsnd]
type = playsnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = 600,1
volume = 60

[state 1436]
type = velset
trigger1 = animelem = 1
x = .7
y = -7

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = .4

[state hitdef]
type = hitdef
trigger1 = animelem = 1
attr = S,SA
damage = 55,20
getpower = 30,30
air.animtype = back
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 9,9
guard.pausetime = 12,12
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-40)/2,-70
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -5
airguard.velocity = -5,-7
guard.velocity = -5
air.type = low
air.velocity = -2,-6
air.hittime = 15
air.juggle = 8
fall.recover = 0
air.fall = 1
yaccel = .35

[state hitdef]
type = hitdef
trigger1 = animelem = 2
attr = S,SA
damage = 55,20
getpower = 30,30
air.animtype = back
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 15,15
guard.pausetime = 15,15
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-50)/2,-70
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -2,-7.5
airguard.velocity = -5,-7
guard.velocity = -23
air.type = low
air.velocity = -2,-6
air.hittime = 15
air.juggle = 8
fall.recover = 0
fall = 1
yaccel = .35

[state hitdef]
type = hitdef
trigger1 = animelem = 3
attr = S,SA
damage = 35,20
getpower = 50,30
air.animtype = back
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 18,18
guard.pausetime = 18,18
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-60)/2,-90
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 23
ground.hittime = 25
ground.velocity = -2,-7.5
guard.velocity = -18
airguard.velocity = -5,-7
air.type = low
air.velocity = -2,-6
air.hittime = 12
air.juggle = 8
fall.recover = 0
fall = 1
yaccel = .35

[State Land]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 1416
ctrl = 0

;倒旋(高)
[statedef 1410]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
poweradd = ifelse(fvar(10)!=1,100,50)
sprpriority = 3
juggle= 7+var(7)
anim = 1410

[State 900, 2]
type = PlaySnd
triggerall = random <= 600
trigger1 = Animelem = 3
value = 2995,55
channel = 0

[state nothitby]
type = nothitby
trigger1 = time >=0
value = SCA, NA,SA,NT,ST,NP,NP,SP,HP
time = 1
ignorehitpause = 1

[State 1650, 1]
type = ReversalDef
trigger1 = animelem = 1 
trigger2 = animelem = 2
reversal.attr = SCA,NA,SA, AP,NP,SP,AA,HP,HA
hitflag = MAFPD
numhits = 0
persistent = 0
pausetime = 16,21
sparkno = S731
hitsound = S150,1
p1stateno = 1411
p2stateno = 831

[State HitDef]
type = HitDef
triggerall = !movehit
trigger1 = animelem = 3
attr = S,SA
damage = 90,20
getpower = ifelse(fvar(10)!=1,65,36),ifelse(fvar(10)!=1,30,15)
air.animtype = back
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 6,6
guard.pausetime = 4,4
guard.sparkno = S733
sparkno = S736
sparkxy = -20,ifelse((animelem = 5),-80,-65)
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -1,-7.5
airguard.velocity = -1,-7
guard.velocity = -10
air.type = low
air.velocity = -1,-7
air.hittime = 15
fall.recover = 0
fall = 1
yaccel = .35

[State Jump]
type = ChangeState
trigger1 = AnimTime = 0
value = 1415
ctrl = 0

[statedef 1411]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
poweradd = ifelse(fvar(10)!=1,100,50)
sprpriority = 1
juggle= 7+var(7)
anim = 1401

[State 3784]
type = Explod
trigger1 = animelemtime(2) = 2
ignorehitpause = 1 
persistent = 0
anim = 1500
pos = 0,0
supermove = 1
pausemovetime = 100
postype = p1
sprpriority = 2
bindtime = 33
ownpal = 1

[State 399, -2]
type = EnvShake
trigger1 = animelemtime(6) = 2
ignorehitpause = 1
persistent = 0
time = 20
freq = 100
ampl = -3
phase = 1

[State 3784]
type = Explod
trigger1 = animelemtime(6) = 2
ignorehitpause = 1 
anim = 395
pos = -25,-2
supermove = 1
pausemovetime = 100
postype = p1
sprpriority = -3
bindtime = 33
ownpal = 1

[STate 1395]
type = PlaySNd
trigger1 = animelemtime(2) = 2
value = 2995,60

[STate 1395]
type = PlaySNd
trigger1 = animelemtime(2) = 2
value = 999,2
volume = 170

[State 3875, 慢镜头]
type = Pause 
trigger1 = animelem = 2
time = 40
movetime = 40
ignorehitpause = 1

[State 900, 2]
type = PlaySnd
triggerall = random <= 600
trigger1 = Animelem = 3
value = 2995,55
channel = 0

[state nothitby]
type = nothitby
trigger1 = time >=0
value = SCA, NA,SA,NT,ST,NP,NP,SP,HP
time = 1
ignorehitpause = 1

[State Jump]
type = ChangeState
trigger1 = AnimTime = 0
value = 1415
ctrl = 0

;倒旋(高起)
[StateDef 1415]
type = A
movetype = A
physics = N
anim = 1405
velset = 0,0
ctrl = 0

[state playsnd]
type = playsnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = 600,1
volume = 60

[state 1436]
type = velset
trigger1 = animelem = 1
x = 1.2
y = -7.5

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = .4

[state hitdef]
type = hitdef
trigger1 = animelem = 1
attr = S,SA
damage = 30,10
getpower = ifelse(fvar(10)!=1,60,36),ifelse(fvar(10)!=1,30,15)
air.animtype = back
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 9,9
guard.pausetime = 9,9
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-40)/2,-90
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -3,-7.5
airguard.velocity = -3,-7
guard.velocity = -15
air.type = low
air.velocity = -2,-6
air.hittime = 12
air.juggle = 8
fall.recover = 0
fall = 1
yaccel = .35

[state hitdef]
type = hitdef
trigger1 = animelem = 2
attr = S,SA
damage = 30,10
getpower = ifelse(fvar(10)!=1,60,36),ifelse(fvar(10)!=1,30,15)
air.animtype = back
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 15,15
guard.pausetime = 15,15
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-50)/2,-90
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 23
ground.hittime = 28
ground.velocity = -3,-7.5
airguard.velocity = -3,-7
guard.velocity = -23
air.type = low
air.velocity = -2,-6
air.hittime = 12
air.juggle = 8
fall.recover = 0
fall = 1
yaccel = .35

[state hitdef]
type = hitdef
trigger1 = animelem = 3
attr = S,SA
damage = 30,10
getpower = ifelse(fvar(10)!=1,60,36),ifelse(fvar(10)!=1,30,15)
air.animtype = back
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 18,18
guard.pausetime = 18,18
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-60)/2,-90
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -8,-7.5
airguard.velocity = -3,-7
guard.velocity = -12
air.type = low
air.velocity = -2,-6
air.hittime = 15
air.juggle = 8
fall.recover = 0
fall = 1
yaccel = .35

[State Land]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 1416
ctrl = 0

;倒旋(落)
[statedef 1416]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 1416

[state posset]
type = posset
trigger1 = time = 0
y = 0

[state posset]
type = playsnd
trigger1 = time = 0
value = 100,0

[State Land]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1
;**********************************************************************
;碎石踢(近)
[StateDef 1510]
type = A
movetype = A
physics = N
anim = 1510
poweradd = ifelse(fvar(10)!=1,100,50)
juggle = 9
velset = 0,0
ctrl = 0

[State 4100, Explod]
type = Explod
trigger1 = AnimElemtime(2) = 1
anim = 706
facing = -1
ownpal = 1
pos = 10,0
postype = p1
sprpriority = 5
bindtime = 1

[state 1510,playsnd]
type = playsnd
trigger1 = AnimElemtime(2) = 1
value = 40,0

[state 1510,playsnd]
type = playsnd
trigger1 = AnimElemtime(6) = 1
value = 100,0

[State 399, EnvShake]
type = EnvShake
trigger1 = movecontact
ignorehitpause = 1
persistent = 0
time = 10
freq = 100
ampl = -2
phase = 1

[state 1436]
type = posadd
trigger1 = animelem = 4
x = 1

[state 1436]
type = posadd
trigger1 = animelem = 5
x = 11

[state 1436]
type = posadd
trigger1 = animelem = 6
x = 15

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 5
value = 2995,51
channel = 0

[state 1436]
type = posadd
trigger1 = animelem = 3
x = 11

[state 1436]
type = posadd
trigger1 = animelem = 8
x = 11

[state 1436]
type = posadd
trigger1 = animelem = 10
x = 2

[state 1436]
type = velset
trigger1 = animelem = 3
y = -1
x = 9

[state 1436]
type = posset
trigger1 = animelem = 6
y = 0

[state 1436]
type = velset
trigger1 = animelem = 6
y = 0
x = 0

[state 1436]
type = veladd
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
y = .25

[state hitdef]
type = hitdef
triggerall = p2stateno != [5020,5040]
trigger1 = time = 0
attr = S,NA
damage = 100,25
getpower = ifelse(fvar(10)!=1,60,36),ifelse(fvar(10)!=1,30,15)
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
guard.pausetime = 10,13
guard.sparkno = S733
sparkno = S736
sparkxy = (p2bodydist x)/6-20,-78
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 19
ground.hittime = 23
ground.velocity = -6,-5
guard.velocity = -13
airguard.velocity = -6,-4.5
guard.cornerpush.veloff = -17
air.type = low
air.velocity = -4,-4
air.hittime = 15
air.juggle = 8
fall.recover = 0
fall = 1
yaccel = .35

[State Land]
type = ChangeState
trigger1 = animtime = 0
value = 0;站立
ctrl = 1
;**********************************************************************
;碎石踢(远)
[StateDef 1515]
type = A
movetype = A
physics = N
anim = 1515
juggle = 9
poweradd = ifelse(fvar(10)!=1,100,50)
velset = 0,0
ctrl = 0

[State 4100, Explod]
type = Explod
trigger1 = AnimElemtime(2) = 1
anim = 706
facing = -1
ownpal = 1
pos = 10,0
postype = p1
sprpriority = 5
bindtime = 1

[state 1510,playsnd]
type = playsnd
trigger1 = AnimElemtime(2) = 1
value = 40,0

[state 1510,playsnd]
type = playsnd
trigger1 = AnimElemtime(6) = 1
value = 100,0

[State 399, EnvShake]
type = EnvShake
trigger1 = movecontact
ignorehitpause = 1
persistent = 0
time = 15
freq = 100
ampl = -2
phase = 1

[state 1436]
type = posadd
trigger1 = animelem = 4
x = 1

[state 1436]
type = posadd
trigger1 = animelem = 5
x = 11

[state 1436]
type = posadd
trigger1 = animelem = 6
x = 15

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 5
value = 2995,51
channel = 0

[state 1436]
type = posadd
trigger1 = animelem = 3
x = 11

[state 1436]
type = posadd
trigger1 = animelem = 8
x = 11

[state 1436]
type = posadd
trigger1 = animelem = 10
x = 2

[state 1436]
type = velset
trigger1 = animelem = 3
y = -1
x = 9

[state 1436]
type = posset
trigger1 = animelem = 6
y = 0

[state 1436]
type = velset
trigger1 = animelem = 6
y = 0
x = 0

[state 1436]
type = veladd
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
y = .25

[state hitdef]
type = hitdef
triggerall = p2stateno != [5020,5040]
trigger1 = time = 0
attr = S,NA
damage = 115,35
getpower = ifelse(fvar(10)!=1,60,36),ifelse(fvar(10)!=1,30,15)
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
guard.pausetime = 10,16
guard.sparkno = S733
sparkno = S736
sparkxy = (p2bodydist x)/6-20,-78
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 19
ground.hittime = 23
ground.velocity = -6,-5
airguard.velocity = -6,-4.5
guard.velocity = -13
guard.cornerpush.veloff = -17
air.type = low
air.velocity = -4,-4
air.hittime = 15
air.juggle = 8
fall.recover = 0
fall = 1
yaccel = .35

[State Land]
type = ChangeState
trigger1 = animtime = 0
value = 0;站立
ctrl = 1
;**********************************************************************
;碎铁拳(近)
[StateDef 1600]
type = s
movetype = A
physics = s
anim = 1600
poweradd = ifelse(fvar(10)!=1,100,50)
velset = 0,0
juggle = var(7)
ctrl = 0

[state 1600]
type = posadd
trigger1 = animelem = 5 
x = 10

[state 1600]
type = velset
trigger1 = animelemtime(5) >= 0
trigger1 = animelemtime(7) < 0  
x = 8

[state 1600]
type = velset
trigger1 = animelem = 7 
x = 0

[State 399, EnvShake]
type = EnvShake
;trigger1 = time = 0
trigger1 = movecontact
ignorehitpause = 1
persistent = 0
time = 15
freq = 100
ampl = -4
phase = 1

[state 1650]
type = playsnd
trigger1 = animelem = 3
value = 2000,9

[state 1650]
type = playsnd
trigger1 = animelem = 4
value = 2000,10

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = const(movement.yaccel)

[State 3200]
type = HitDef
trigger1 = (p2stateno != [5020,5040])
trigger1 = animelem = 7
attr = S, NA
animtype = hard
damage = 100,20
priority = 7, Hit
guardflag = MA
pausetime = 12,12
guard.pausetime = 12,17
sparkno = S736
guard.sparkno = S731
sparkxy = ((p2bodydist x)-54)/2,-65
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 19
ground.hittime = 23
ground.velocity = -9,-6
air.velocity = -6.5,-6
air.juggle = 7
guard.velocity = -11
guard.cornerpush.veloff = -15
getpower = ifelse(fvar(10)!=1,60,36),ifelse(fvar(10)!=1,30,15)
givepower = 5
fall=1
fall.recover = 0
yaccel = .5

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;**********************************************************************
;碎铁拳(远)
[StateDef 1650]
type = s
movetype = A
physics = s
anim = 1650
poweradd = ifelse(fvar(10)!=1,100,50)
velset = 0,0
ctrl = 0

[state 1650]
type = playsnd
trigger1 = animelem = 3
value = 2000,9

[state 1650]
type = playsnd
trigger1 = animelem = 4
value = 2000,10

[state 1600]
type = posadd
trigger1 = animelem = 5 
x = 10

[state 1600]
type = velset
trigger1 = animelemtime(5) >= 0
trigger1 = animelemtime(7) < 0  
x = 10

[state 1600]
type = velset
trigger1 = animelem = 7 
x = 0

[State 399, EnvShake]
type = EnvShake
;trigger1 = time = 0
trigger1 = movecontact
ignorehitpause = 1
persistent = 0
time = 15
freq = 100
ampl = -5
phase = 1

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = const(movement.yaccel)

[State 3200]
type = HitDef 
trigger1 = animelem = 7
attr = S, NA
animtype = hard
damage = 120,25
priority = 7, Hit
guardflag = MA
pausetime =  7,7
guard.pausetime = 12,21
sparkno = S736
guard.sparkno = S731
sparkxy = ((p2bodydist x)-54)/2,-65
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 19
ground.hittime = 23
ground.velocity = -9,-6
air.velocity = -7.5,-6
guard.velocity = -11
guard.cornerpush.veloff = -15
getpower = ifelse(fvar(10)!=1,60,36),ifelse(fvar(10)!=1,30,15)
givepower = 5
fall=1
fall.recover = 0
yaccel = .5

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1
;**********************************************************************
;逆霞回旋铲(无彩)
[StateDef 1700]
type = A
movetype = A
physics = N
anim = 1700
velset = 0,0
juggle = 9
powadd = ifelse(fvar(10)!=1,100,50)
ctrl = 0


[State 1702, 2]
type = velset
trigger1 = animelem = 2
y = -4.1
x = 3

[State 1702, 2]
type = velset
trigger1 = animelemtime(5)=0
x = 3
y = 0

[State 1702, 2]
type = velset
trigger1 = animelemtime(5)=2
x = 2

[State 1702, 2]
type = velset
trigger1 = animelemtime(5)=4
x = 1

[State 1702, 2]
type = velset
trigger1 = animelem = 8
x = 3.5 

[State 1702, 2]
type = velset
trigger1 = animelem = 9
x = 6.5 

[State Gravity]
type = VelAdd
;triggerall = animelem != 5
trigger1 = Pos Y < 0
y = .3

[State Gravity]
type = posset
trigger1 = Pos Y > 0
y = 0

[state hitdef]
type = hitdef
trigger1 = animelem = 3
trigger2 = animelem = 4
attr = S,SA
damage = 20,10
getpower = ifelse(fvar(10)!=1,60,36),ifelse(fvar(10)!=1,30,15)
animtype = hard
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 11,15
guard.pausetime = 12,15
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-40)/2,-50
hitsound = S220,0
guardsound = S150,0
ground.type = low
ground.slidetime = 17
ground.hittime = 19
guard.velocity = -7
ground.velocity = -6
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 15
air.fall = 1
fall.recover = 0

[state hitdef]
type = hitdef
trigger1 = animelem = 6
attr = S,SA
damage = 40,10
getpower = ifelse(fvar(10)!=1,60,36),ifelse(fvar(10)!=1,30,15)
animtype = hard
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 11,15
guard.pausetime = 12,15
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-40)/2,-70
hitsound = S220,0
guardsound = S150,0
ground.type = hight
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -6
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 15
air.fall = 1
fall.recover = 0

[State HitDef]
type = HitDef
trigger1 = AnimElem = 9
attr = S,SA
damage = 80,10
getpower = ifelse(fvar(10)!=1,60,36),ifelse(fvar(10)!=1,30,15)
givepower = 5
animtype = hard
guardflag = MA
hitflag = MAFP
priority = 5,Hit
pausetime = 11,12
guard.pausetime = 12,12
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-40)/2,-30
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 20
ground.hittime = 30
ground.velocity = -3,-1
guard.velocity = -10
airguard.velocity = -5.2,-4
air.type = High
air.velocity = -5,-4
air.hittime = 12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = (1.3*-6)
guard.cornerpush.veloff = -17
airguard.cornerpush.veloff = (1.3*-6)
fall = 1
air.fall = 1
fall.recover = 0

[State Land]
type = ChangeState
trigger1 = animelemtime(9)>=8
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 1707
ctrl = 0

;逆霞回旋铲
[StateDef 1702]
type = A
movetype = A
physics = N
anim = 1700
velset = 0,0
powadd = ifelse(fvar(10)!=1,100,50)
ctrl = 0

[State 1702, 1]
type = posadd
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
x = 2

[State 1702, 2]
type = velset
trigger1 = animelem = 2
y = -4.1
x = 3

[State 1702, 2]
type = velset
trigger1 = animelemtime(5)=0
x = 3
y = 0

[State 1702, 2]
type = velset
trigger1 = animelemtime(5)=2
x = 2

[State 1702, 2]
type = velset
trigger1 = animelemtime(5)=4
x = 1

[State 1702, 2]
type = velset
trigger1 = animelem = 8
x = 3.5 

[State 1702, 2]
type = velset
trigger1 = animelem = 9
x = 6.5 

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = .3

[State Gravity]
type = posset
trigger1 = Pos Y > 0
y = 0

[state hitdef]
type = hitdef
trigger1 = animelem = 3
trigger2 = animelem = 4
trigger3 = animelem = 9
attr = S,SA
damage = 30,5
getpower = ifelse(fvar(10)!=1,60,36),ifelse(fvar(10)!=1,30,15)
animtype = hard
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
guard.pausetime = 10,10
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-40)/2,-50
hitsound = S220,0
guardsound = S150,0
ground.type = low
ground.slidetime = 17
ground.hittime = 19
guard.velocity = -11
ground.velocity = -6
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 12
air.fall = 1
fall.recover = 0

[state hitdef]
type = hitdef
trigger1 = animelem = 6
attr = S,SA
damage = 30,5
getpower = ifelse(fvar(10)!=1,60,36),ifelse(fvar(10)!=1,30,15)
animtype = hard
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
guard.pausetime = 10,10
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-40)/2,-90
hitsound = S220,0
guardsound = S150,0
ground.type = hight
ground.slidetime = 17
ground.hittime = 19
guard.velocity = -11
ground.velocity = -6
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 12
air.fall=1
fall.recover = 0

[State Land]
type = ChangeState
trigger1 = animelemtime(9)>=7
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 1701
ctrl = 0

[StateDef 1701]
type = S
movetype = A
physics = S
anim = 1701
velset = 0,0
ctrl = 0

[State 1701]
type = posset
trigger1 = Time = 0
y = 0

[state hitby]
type = hitby
trigger1 = time >= 0
value = SCA,AP,SA,NA,HA
time=1

[State 1701]
type = posadd
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
x = 2

[State 1701]
type = veladd
trigger1 = time = [0,30]
x = 1.3

[State -3, Width 1]
type = Width
trigger1 = 1
player = 20,-20

[State HitDef]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
trigger3 = AnimElem = 3
trigger4 = AnimElem = 4
trigger5 = AnimElem = 5
attr = S,NA
animtype = Heavy
damage = 20,5
priority = 7, Hit
guardflag = MA
pausetime = 12,12
guard.pausetime = 12,12
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-40)/2,-25
hitsound = S210,0
guardsound = S150,0
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -2.5
guard.velocity = ifelse(p2bodydist x <= 10 ,-13 ,-3)
air.velocity = -2.5,-3
getpower = 30,15
givepower = 5
fall = 1
fall.recover = 0
yaccel = .5

[State HitDef]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 6
attr = S,NA
animtype = Heavy
damage = 100,5
priority = 7, Hit
guardflag = MA
pausetime = 12,12
guard.pausetime = 12,12
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-25
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -2.5,-6
guard.velocity = ifelse(p2bodydist x <= 10 ,-13 ,-3)
air.velocity = -6,-10
getpower = 30,15
givepower = 5
fall = 1
yaccel = .5
fall.recover = 0

[State HitDef]
type = HitDef
triggerall = !Movehit||SysVar(0)
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 7
trigger2 = AnimElem = 8
trigger3 = AnimElem = 9
attr = S,NA
animtype = Heavy
damage = 100,5
priority = 7, Hit
guardflag = MA
pausetime = 12,12
guard.pausetime = 12,14
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-25
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -2.5
guard.velocity = ifelse(p2bodydist x <= 10 ,-13 ,-3)
air.velocity = -6,-10
getpower = 30,15
givepower = 5
fall = 1
yaccel = .5
fall.recover = 0

[State HitDef]
type = HitDef
triggerall = !Movehit||SysVar(0)
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 10
attr = S,NA
animtype = Heavy
damage = 100,5
priority = 7, Hit
guardflag = MA
pausetime = 12,12
guard.pausetime = 12,27
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-25
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 9
ground.hittime = 9
guard.velocity = ifelse(p2bodydist x <= 10 ,-13 ,-3)
guard.cornerpush.veloff = -17
ground.velocity = -2.5
air.velocity = -6,-10
getpower = 30,15
givepower = 5
fall = 1
yaccel = .5
fall.recover = 0

[State 1701]
type = ChangeState
trigger1 = AnimTime = 0
value = 1706
ctrl = 0

[StateDef 1706]
type = S
movetype = A
physics = S
anim = 1706
velset = 0,0
ctrl = 0

[State -3, Width 1]
type = Width
trigger1 = 1
player = 15,0

[State 1706]
type = posset
trigger1 = Time = 0
y = 0

[state 1706]
type = velset
trigger1 = animelem = 1
x = 5

[State 1706, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


[StateDef 1707]
type = S
movetype = A
physics = S
anim = 1707
velset = 6,0
ctrl = 0

[State 1706]
type = posset
trigger1 = Time = 0
y = 0

[state 1706]
type = ctrlset
triggerall = fvar(14) = 0
trigger1 = animelem = 3
value = 1

[state 1706]
type = varset
triggerall = fvar(14) = 1
trigger1 = animelem = 3
fvar(1) = 1

[State 1706, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1
;**********************************************
;魔炎烈脚(轻)第一式
;**********************************************
[StateDef 1900]
type = S
movetype = A
physics = S
anim = 1900
poweradd = ifelse(fvar(10)!=1,100,50)
facep2 = 1
velset = 0,0
sprpriority = -3
juggle = 9+var(7)
ctrl = 0

[state 1900]
type = statetypeset
trigger1 = animelem = 3
physics = S
statetype = s

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 4
trigger2 = Animelem = 7
value = 2995,50
channel = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 3
value = 47,0
volume = 100

[state 1650]
type = velset
trigger1 = animelem = 1
x=7.6

[state 1650]
type = posadd
trigger1 = animelem = 5
trigger2 = animelem = 6
x=7

[state 1650]
type = posadd
trigger1 = animelem = 7
x=15

[state 1650]
type = velset
trigger1 = animelem = 3
x=0
y = 0

[State 3200]
type = HitDef
trigger1 = animelem = 6 
attr = S, SA
air.animtype  = back
animtype = hard
damage = 20,10
priority = 7, Hit
guardflag = MA
pausetime =  9,9
guard.pausetime = 9,9
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-60)/2,-35
hitsound = S210,3
guardsound = S150,0
ground.type = low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -3,0
guard.velocity = -3
air.velocity = -2.5,-4
guard.cornerpush.veloff = -5
air.juggle = 2
getpower = 0,0
forcestand = 1
givepower = 0
yaccel = .45
air.fall = 1
fall.recover = 0

[State 3200]
type = HitDef
trigger1 = animelem = 9 
attr = S, SA
air.animtype  = back
animtype = hard
damage = 40,10
priority = 7, Hit
guardflag = MA
pausetime =  9,9
guard.pausetime = 9,9
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-40)/2,-85
hitsound = S210,3
guardsound = S150,0
ground.type = high
ground.slidetime = 23
ground.hittime = 23
ground.velocity = -7,0
guard.velocity = -9
guard.cornerpush.veloff = -9
air.velocity = -2.5,-7
air.juggle = 2
getpower = 0,0
givepower = 0
air.fall = 1
yaccel = .45
fall.recover = 0

[state 1900]
type = varset
trigger1 = time = 0
var(13) = 0

[state 1900]
type = varset
trigger1 = time = 0
var(23) = 0



[state 1900]
type = varset
triggerall = time = [7,37]
trigger1 = command = "B"
trigger2 = command = "D"
var(23) = 1

[state 1900]
type = varset
triggerall = time = [7,37]
trigger1 = var(13) = [641,647]
var(23) = 2

[State 3200, 4]
type = ChangeState
triggerall = var(23) = 1
trigger1 = animelemtime(10) >= 3
trigger2 = animelem = 11
trigger3 = animelem = 12
value = 1910

[State 3200, 4]
type = ChangeState
triggerall = var(23) = 2
trigger1 = animelemtime(10) >= 3
trigger2 = animelem = 11
trigger3 = animelem = 12
value = 1970

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1



;**********************************************************************
;龙裂踢(近)
[StateDef 1910]
type = A
movetype = A
physics = S
anim = 1910
velset = 0,0
ctrl = 0

[state 1436]
type = posadd
trigger1 = animelem = 3
x = 12

[state 1436]
type = posadd
trigger1 = animelem = 4
x = 15

[state 1436]
type = posadd
trigger1 = animelem = 5
x = 12

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 4
value = 2995,ifelse(random<500,93,52)
channel = 0

[state 1436]
type = posadd
trigger1 = animelem = 2
x = 11

[state 1436]
type = posadd
trigger1 = animelem = 9
x = 10

[state hitdef]
type = hitdef
triggerall = !MoveContact||SysVar(0)
trigger1 = animelem = 1
attr = S,NA
damage = 100,25
getpower = ifelse(fvar(10)!=1,60,36),ifelse(fvar(10)!=1,30,15)
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
guard.pausetime = 10,10
guard.sparkno = S733
sparkno = S736
sparkxy = (p2bodydist x)/6-20,-78
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -6,-6
guard.cornerpush.veloff = -15
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 15
air.juggle = 8
fall.recover = 0
fall = 1
yaccel = .35

[State Land]
type = ChangeState
trigger1 = animtime = 0
value = 0;站立
ctrl = 1



;**********************************************
;魔炎烈脚(重)第一式
;**********************************************
[StateDef 1950]
type = S
movetype = A
physics = S
anim = 1950
poweradd = ifelse(fvar(10)!=1,100,50)
facep2 = 1
velset = 0,0
sprpriority = -3
juggle = var(7)
ctrl = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 4
trigger2 = Animelem = 7
value = 2995,50
channel = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 3
value = 47,0
volume = 100

[state 1650]
type = velset
trigger1 = animelem = 2
trigger2 = animelem = 7
x=ifelse((animelem = 7),6,10)

[state 1650]
type = posadd
trigger1 = animelem = 5
trigger2 = animelem = 6
x=10

[state 1650]
type = posadd
trigger1 = animelem = 10
x=10

[state 1650]
type = velset
trigger1 = animelem = 3
trigger2 = animelem = 9
x=0
y = 0

[State 3200]
type = HitDef
trigger1 = animelem = 6 
attr = S, SA
air.animtype  = back
animtype = hard
damage = 70,20
priority = 7, Hit
guardflag = MA
pausetime =  11,11
guard.pausetime = 11,11
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-35
hitsound = S210,3
sparkno = S736
guardsound = S150,0
ground.type = low
ground.slidetime = 27
ground.hittime = 27
ground.velocity = -8
air.velocity = -2.5,-4
guard.velocity = -9
guard.cornerpush.veloff = -9
air.juggle = 2
getpower = 0,0
forcestand = 1
givepower = 0
air.fall = 1
yaccel = .5
fall.recover = 0

[State 3200]
type = HitDef
trigger1 = animelem = 11 
attr = S, SA
animtype = hard
damage = 70,20
priority = 7, Hit
guardflag = MA
pausetime =  11,11
guard.pausetime = 11,11
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-40)/2,-85
hitsound = S210,3
guardsound = S150,0
ground.type = high
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -1,-6
air.velocity = -1.5,-6
guard.velocity = -9
guard.cornerpush.veloff = -11
air.juggle = 2
fall = 1
getpower = 0,0
givepower = 0
yaccel = .4
fall.recover = 0

[state 1900]
type = varset
trigger1 = time = 0
var(13) = 0

[state 1900]
type = varset
trigger1 = time = 0
var(23) = 0



[state 1900]
type = varset
triggerall = time = [7,37]
trigger1 = command = "B"
trigger2 = command = "D"
var(23) = 1

[state 1900]
type = varset
triggerall = time = [7,37]
trigger1 = var(13) = [641,647]
var(23) = 2

[State 3200, 4]
type = ChangeState
triggerall = var(23) = 1
trigger1 = animelemtime(12) >= 3
trigger2 = animelem = 13
trigger3 = animelem = 14
value = 1955

[State 3200, 4]
type = ChangeState
triggerall = var(23) = 2
trigger1 = animelemtime(12) >= 3
trigger2 = animelem = 13
trigger3 = animelem = 14
value = 1970

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1



;**********************************************
;魔炎烈脚(近)第二式
;**********************************************
[StateDef 1955]
type = A
movetype = A
physics = S
anim = 1955
poweradd = ifelse(fvar(10)!=1,50,35)
facep2 = 1
velset = 0,0
juggle = 2+var(7)
ctrl = 0

[state 1650]
type = posadd
trigger1 = time = 0
x=0

[state 1650]
type = velset
trigger1 = animelem = 2
x=7

[state 1650]
type = velset
trigger1 = animelem = 5
x=0

[state 1900]
type = statetypeset
trigger1 = animelem = 3
physics = S
statetype = s

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 3
value = 2995,54
channel = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 3
value = 600,1
channel = 1
volume = 160

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 3
value = 47,0
volume = 160

[State 3200]
type = HitDef
trigger1 = time = 0 
attr = S, SA
animtype = hard
damage = ifelse((p2stateno = [5000,5010]),40,70),10
priority = 7, Hit
guardflag = MA
pausetime =  11,11
guard.pausetime = 12,12
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-60)/2,-85
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -1.5,-7
guard.velocity = -8
guard.cornerpush.veloff = -15
air.velocity = -1.5,-6
air.juggle = 2
getpower = 0,0
givepower = 5
yaccel = .45
fall = 1
fall.recover = 0

[state 1900]
type = varset
trigger1 = time = 0
var(13) = 0

[state 1900]
type = varset
trigger1 = time = 0
var(23) = 0

[state 1900]
type = varset
triggerall = time = [7,24]
trigger1 = command = "B"
trigger2 = command = "D"
var(23) = 1

[State 3200, 4]
type = ChangeState
trigger1 = Animelem = 9
trigger1 = var(23) = 1
value = 1960

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1
;**********************************************
;魔炎烈脚(近)第三式
;**********************************************
[StateDef 1960]
type = s
movetype = A
physics = S
anim = 1960
poweradd = ifelse(fvar(10)!=1,30,15)
facep2 = 1
velset = 0,0
juggle = 6+var(7)
ctrl = 0

[state 1650]
type = posadd
trigger1 = animelem = 2
x=10

[state 1650]
type = posadd
trigger1 = animelem = 4
x=14

[state 1910]
type = velset 
trigger1 = animelem = 5
x = 3

[state 1900]
type = statetypeset
trigger1 = animelem = 3
physics = S
statetype = A

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 3
value = 2995,60
channel = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 3
value = 600,1
channel = 1
volume = 160

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 3
value = 47,0
volume = 160

[State 3200]
type = HitDef
trigger1 = time = 0 
attr = S, SA
animtype = hard
damage = ifelse((p2stateno = [5050,5080]),50,100),10
priority = 7, Hit
guardflag = MA
pausetime =  11,11
guard.pausetime = 12,12
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-60)/2,-85
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -2,-7
guard.velocity = -10
guard.cornerpush.veloff = -15
air.velocity = -2.5,-7
air.juggle = 2
getpower = 0,0
givepower = 5
yaccel = .45
fall = 1
fall.recover = 0

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1





;**********************************************
;魔炎烈脚---逆袭（蹲防不可）
;**********************************************
[StateDef 1970]
type = S
movetype = A
physics = N
anim = 1970
poweradd = ifelse(fvar(10)!=1,100,50)
facep2 = 1
velset = 0,0
sprpriority = -3
juggle = 0+var(7)
ctrl = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 5
value = 2995,54
channel = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 6
value = 40,0
volume = 100

[State 3200]
type = HitDef
trigger1 = animelem = 5 
attr = S, SA
animtype = hard
damage = 90,30
priority = 7, Hit
guardflag = MA
pausetime =  9,9
guard.pausetime = 12,21
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-60)/2,-75
hitsound = S220,0
guardsound = S150,0
ground.type = low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -3,-8
air.velocity = -2,-8
air.juggle = 2
getpower = 0,0
forcestand = 1
fall = 1
givepower = 5
yaccel = .5
fall.recover = 0

[state 1900]
type = varset
trigger1 = time = 0
var(13) = 0

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1


;**********************************************
;八极里门肘打
;**********************************************
[StateDef 1775]
type = s
movetype = A
physics = s
anim = 1775
poweradd = ifelse(fvar(10)!=1,100,50)
juggle = 9
velset = 0,0
ctrl = 0

[state 1800]
type = hitby
trigger1 = time = [7,15]
value = SAC,SP,HP,SA,HA
time = 1

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 4
value = 200,ifelse(random<500,4,5)
channel = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 4
value = 40,0
volume = 100

[state 1650]
type = velset
trigger1 = animelem = 3
x=15

[state 1650]
type = posadd
trigger1 = animelem = 1
x=2

[State 1800, Explod]
type = Explod
trigger1 = AnimElemtime(6) = 1
anim = 706
pos = 0,0
postype = p1
sprpriority = 5
bindtime = 1
ownpal = 1

[State 3200]
type = HitDef  
trigger1 = time = 0
attr = S, SA
animtype = hard
damage = 90,15
priority = 7, Hit
guardflag = MA
pausetime =  12,12
guard.pausetime = 11,11
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-60)/2,-75
hitsound = S210,3
guardsound = S150,0
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -2.5,-8.5
air.velocity = -2.5,-8
getpower = ifelse(fvar(10)!=1,60,50),ifelse(fvar(10)!=1,30,15)
guard.velocity = -9
givepower = 5
fall=1
yaccel = .5
fall.recover = 0

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = power >= 2000
triggerall = movehit
triggerall = p2bodydist x = [0,70]
triggerall = p2bodydist y < -50
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 850

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = power >= 2000
triggerall = movehit
triggerall = p2bodydist x = [0,70]
triggerall = p2bodydist y = [-50,-10]
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 4410

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = power >= 1000
triggerall = random<400
triggerall = movehit
triggerall = p2bodydist x = [0,70]
triggerall = p2bodydist y < -50
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 850

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = power >= 1000
triggerall = movehit
triggerall = p2bodydist x = [0,90]
triggerall = p2stateno = [5030,5072]
trigger1 = p2life > 250
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = ifelse(random<100,40,ifelse(frontedgedist<120,4400,4200))

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = movehit
triggerall = p2bodydist x = [0,70]
triggerall = random>700
trigger1 = AnimTime = 0
value = ifelse(random>700,1702,ifelse(random>500,1700,1600))

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = movehit
triggerall = p2bodydist x = [0,70]
trigger1 = AnimTime = 0
value = ifelse(random>700,1080,ifelse(random>500,1100,280))

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;**********************************************
;八极里门肘打
;**********************************************
[StateDef 1785]
type = s
movetype = A
physics = s
anim = 1785
poweradd = ifelse(fvar(10)!=1,100,50)
juggle = 7
velset = 0,0
ctrl = 0

[state 1800]
type = hitby
trigger1 = time = [7,20]
value = SAC,SP,HP,SA,HA
time = 1

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 4
value = 200,ifelse(random<500,4,5)
channel = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 4
value = 40,0
volume = 100

[state 1650]
type = velset
trigger1 = animelem = 3
x=25

[state 1650]
type = posadd
trigger1 = animelem = 1
x=2

[State 1800, Explod]
type = Explod
trigger1 = AnimElemtime(6) = 1
anim = 706
pos = 0,0
postype = p1
sprpriority = 5
bindtime = 1
ownpal = 1

[State 3200]
type = HitDef  
trigger1 = time = 0
attr = S, SA
animtype = hard
damage = 110,15
priority = 7, Hit
guardflag = MA
pausetime =  12,12
guard.pausetime = 11,11
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-60)/2,-75
hitsound = S210,3
guardsound = S150,0
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -2.5,-8.5
air.velocity = -2.5,-8
getpower = ifelse(fvar(10)!=1,60,50),ifelse(fvar(10)!=1,30,15)
guard.velocity = -9
givepower = 5
fall=1
yaccel = .5
fall.recover = 0

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1
;**********************************************
;八极铁山靠
;**********************************************
[StateDef 1800]
type = s
movetype = A
physics = s
anim = 1800
poweradd = ifelse(fvar(10)!=1,100,50)
juggle = ifelse((p2stateno = [5050,5080]),10,7)
velset = 0,0
ctrl = 0

[State 1805, Width 1]
type = Width
trigger1 = animelemtime(1) >= 0 && animelemtime(8) < 0
player = 15,0

[state 1800]
type = hitby
trigger1 = var(24) = 0
trigger1 = animelemtime(1) >= 0 && animelemtime(4) < 3
value = SAC,NT,ST,HT,NP,SP,HP
time = 1

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 4
value = 2995,55
channel = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 4
value = 40,0
volume = 100

[state 1650]
type = velset
trigger1 = animelem = 5
x=4

[state 1650]
type = posadd
trigger1 = animelem = 2
x=5

[state 1650]
type = posadd
trigger1 = animelem = 5
x=15

[state 1650]
type = posadd
trigger1 = animelem = 1
trigger2 = animelem = 8
x=8

[State 1800, Explod]
type = Explod
trigger1 = AnimElemtime(1) = 3
trigger2 = AnimElemtime(5) = 1
anim = 706
pos = 0,0
postype = p1
sprpriority = 5
bindtime = 1
ownpal = 1

[State 3200]
type = HitDef  
trigger1 = time = 0
attr = S, SA
animtype = hard
damage = ifelse((p2stateno = [5050,5080]),50,90),15
priority = 7, Hit
guardflag = MA
pausetime =  12,12
guard.pausetime = 11,15
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-40)/2,-75
hitsound = S210,3
guardsound = S150,0
ground.type = high
ground.slidetime = 12
ground.hittime = 13
ground.velocity = -2.5,-9
p2stateno = 4990
air.velocity = -2.5,-9
getpower = ifelse(fvar(10)!=1,60,50),ifelse(fvar(10)!=1,30,15)
guard.velocity = -9
givepower = 5
fall=1
yaccel = .45
fall.recover = 0

[state 3200,var]
type = varset
trigger1 = animtime = 0
var(24) = 60

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = power >= 2000
triggerall = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])
triggerall = movehit
triggerall = p2bodydist x = [0,70]
triggerall = p2bodydist y < -50
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 850

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])
triggerall = animtime = 0
triggerall = movehit
trigger1 = random<400
value = ifelse(random>=500,1700,220)

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = power >= 2000
triggerall = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [104,110])
triggerall = movehit
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 3410

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = power >= 1000
triggerall = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [104,110])
triggerall = random<400
triggerall = movehit
triggerall = p2bodydist y < -50
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 850

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = power >= 1000
triggerall = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [104,110])
triggerall = movehit
triggerall = p2stateno = [5030,5072]
trigger1 = p2life > 250
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = ifelse(random<100,40,ifelse(frontedgedist<120,3400,3000))

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [100,105])
triggerall = movehit
triggerall = random>700
trigger1 = AnimTime = 0
value = ifelse(random>700,1510,ifelse(random>500,1702,1600))

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [100,110])
triggerall = movehit
trigger1 = AnimTime = 0
value = ifelse(random>700,1510,ifelse(random>500,220,280))

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1
;**********************************************
;八极铁山靠(慢)
;**********************************************
[StateDef 1805]
type = s
movetype = A
physics = s
anim = 1805
poweradd = ifelse(fvar(10)!=1,100,50)
juggle = ifelse((p2stateno = [5050,5080]),10,0)
velset = 0,0
ctrl = 0

[State 1805, Width 1]
type = Width
trigger1 = animelemtime(1) >= 0 && animelemtime(8) < 0
player = 15,0

[state 1805]
type = hitby
trigger1 = var(24) = 0
trigger1 = animelemtime(1) >= 0 && animelemtime(5) < 0
value = SAC,NT,ST,HT,NP,SP,HP
time = 1

[STate 1805]
type = PlaySNd
trigger1 = Animelem = 4
value = 2995,55
channel = 0

[STate 1805]
type = PlaySNd
trigger1 = Animelem = 4
value = 40,0
volume = 100

[state 1805]
type = velset
trigger1 = animelem = 5
x=7

[state 1805]
type = posadd
trigger1 = animelem = 2
x=5

[state 1805]
type = posadd
trigger1 = animelem = 5
x=15

[state 1805]
type = posadd
trigger1 = animelem = 1
trigger2 = animelem = 8
x=8

[State 1805, Explod]
type = Explod
trigger1 = AnimElemtime(1) = 3
trigger2 = AnimElemtime(5) = 1
anim = 706
pos = 0,0
postype = p1
sprpriority = 5
bindtime = 1
ownpal = 1

[State 1805]
type = HitDef  
trigger1 = time = 0
attr = S, SA
animtype = hard
damage = ifelse((p2stateno = [5050,5080]),55,110),25
priority = 7, Hit
guardflag = MA
pausetime =  13,13
guard.pausetime = 12,18
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-40)/2,-75
hitsound = S210,3
guardsound = S150,0
ground.type = high
ground.slidetime = 13
ground.hittime = 14
ground.velocity = -2.6,-9.5
air.velocity = -2.6,-9.5
p2stateno = 4990
getpower = ifelse(fvar(10)!=1,60,50),ifelse(fvar(10)!=1,30,15)
guard.velocity = -11
givepower = 5
fall=1
yaccel = .45
fall.recover = 0

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55)=[100,110])
triggerall = animtime = 0
trigger1 = random<400
trigger1 = movecontact
value = ifelse(random>=500,1700,220)

[State 1805, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1
;**********************************************
;魔幻之拳(近)第一式
;**********************************************
[StateDef 2150]
type = s
movetype = A
physics = s
anim = 2150
poweradd = ifelse(fvar(10)!=1,60,30)
facep2 = 1
velset = 0,0
juggle = 0+var(7)
ctrl = 0

[STate 3500]
type = varset
trigger1 = time = 0
trigger1 = var(42) != 0
var(42) = 0

[STate 3500]
type = varset
trigger1 = time = 0
trigger1 = random < 500
var(42) = 1

[State 1220, Width 1]
type = Width
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(6) < 0
value = 15,0

[STate 3500]
type = hitby
trigger1 = !movehit
trigger1 = prevstateno = [0,20]
trigger1 = p2stateno >= 1000
time = 1
value = SAC,AA,SA,HA,AP,SP,HP

[STate 3500]
type = hitby
trigger1 = !movehit
trigger1 = prevstateno = [112,117]
time = 1
value = SAC,AA,SA,HA,AP,SP,HP

[STate 3500]
type = hitby
trigger1 = movehit
trigger1 = animelemtime(4)>0 && animelemtime(8)<0
time = 10
value = SAC,AA,SA,HA,AP,SP,HP

[State 370, 2]
type = nothitby
trigger1 = enemy,numhelper > 0
trigger1 = movehit
value = SAC
time = 1

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 2
value = 2995,ifelse(var(42)=0,10,54)
channel = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 1
value = 40,0
volume = 100

[state 1650]
type = velset
trigger1 = animelem = 2
x=5

[state 1650]
type = velset
trigger1 = animelem = 3
x=11

[state 1650]
type = velset
trigger1 = animelem = 4
x=6

[state 1650]
type = veladd
trigger1 = animelem = 5 ,>=5 
x=.10

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = const(movement.yaccel)

[state varset 1650]
type = varset
trigger1 = movecontact
trigger1 = animelem = 6
var(9) = 13

[State 1650, 1]
type = ReversalDef
triggerall = var(9)<=0
triggerall = prevstateno = [111,119]
trigger1 = animelem = 1, <= 4
reversal.attr = SCA,NA,SA, AP,NP,SP,AA,HP,HA
numhits = 0
pausetime = 10,20
sparkno = S733
hitsound = 6,0
p2stateno = 831

[State 1650, 1]
type = ReversalDef
triggerall = var(9)<=0
triggerall = prevstateno != [111,119]
trigger1 = animelem = 1, <= 4
reversal.attr = SCA,NA,SA,HP,HA; SCA,NA,SA
numhits = 0
pausetime = 10,20
sparkno = S733
hitsound = 6,0
p2stateno = 831

[State 3200]
type = HitDef
triggerall = var(50) = 0
triggerall = p2stateno != [4990,4998]
trigger1 = animelem = 4 
attr = S, SA
air.animtype = back
animtype = hard
damage = 30,10
priority = 7, Hit
guardflag = MA
pausetime =  12,12
guard.pausetime = 12,21
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-75
hitsound = S230,0
guardsound = S150,1
ground.type = high
ground.slidetime = 19
ground.hittime = 20
ground.velocity = -7,0
ground.cornerpush.veloff = -12
guard.velocity = -12
guard.cornerpush.veloff = -15
air.velocity = -3.5,-5
air.juggle = 2
getpower = 0,0
givepower = 5
yaccel = .5
air.fall=1
fall.recover = 0

[State 3200]
type = HitDef
triggerall = var(50) = 0
triggerall = p2stateno != [4990,4998]
triggerall = !MoveContact
trigger1 = animelem = 5
trigger2 = animelem = 6
attr = S, SA
air.animtype = back
animtype = hard
damage = 35,8
priority = 7, Hit
guardflag = MA
pausetime =  12,12
guard.pausetime = 12,21
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-75
hitsound = S230,0
guardsound = S150,1
ground.type = high
ground.slidetime = 19
ground.hittime = 19
guard.velocity = -8
ground.velocity = -3.5,-4
air.velocity = -3.5,-6
getpower = 60,30
givepower = 5
fall=1
yaccel = .5
fall.recover = 0

[State 3200]
type = HitDef
triggerall = var(50) = 1
triggerall = p2stateno != [4990,4998]
trigger1 = animelem = 4 
attr = S, SA
air.animtype = back
animtype = hard
damage = 30,10
priority = 7, Hit
guardflag = MA
pausetime =  12,12
guard.pausetime = 12,21
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-75
hitsound = S230,0
guardsound = S150,1
ground.type = high
ground.slidetime = 19
ground.hittime = 20
ground.velocity = -7,0
ground.cornerpush.veloff = -12
guard.velocity = -12
guard.cornerpush.veloff = -15
air.velocity = -3.5,-5
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.juggle = 2
getpower = 0,0
givepower = 5
yaccel = .5
air.fall=1
fall.recover = 0

[State 3200]
type = HitDef
triggerall = var(50) = 1
triggerall = p2stateno != [4990,4998]
triggerall = !MoveContact
trigger1 = animelem = 5
trigger2 = animelem = 6
attr = S, SA
air.animtype = back
animtype = hard
damage = 35,8
priority = 7, Hit
guardflag = MA
pausetime =  12,12
guard.pausetime = 12,21
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-75
hitsound = S230,0
guardsound = S150,1
ground.type = high
ground.slidetime = 19
ground.hittime = 19
guard.velocity = -8
ground.velocity = -3.5,-4
air.velocity = -3.5,-6
getpower = 60,30
givepower = 5
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
fall=1
yaccel = .5
fall.recover = 0

[state 3200,varset]
type = varset
triggerall = time > 3
trigger1 = var(13) = [101,105]
trigger2 = var(13) = [341,345]
var(22) = 1

[state 3200,varset]
type = varset
triggerall = time > 3
trigger1 = var(13) = [121,125]
trigger2 = var(13) = [361,365]
var(22) = 2

[State 3200, 4]
type = ChangeState
trigger1 = var(22) = 1
trigger1 = animelemtime(4)>0 && animelemtime(8)<0
value = 2151
ctrl = 0

[State 3200, 4]
type = ChangeState
trigger1 = var(22) = 2
trigger1 = animelemtime(4)>0 && animelemtime(8)<0
value = 2251
ctrl = 0

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
trigger1 = animelemtime(4)>0 && animelemtime(8)<0
trigger1 = movecontact 
value = 2151

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1
;**********************************************
;魔幻之拳(近)第二式
;**********************************************
[StateDef 2151]
type = s
movetype = A
physics = s
anim = 2151
poweradd = ifelse(fvar(10)!=1,60,30)
velset = 0,0
ctrl = 0

[State 1220, Width 1]
type = Width
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(6) < 0
value = 15,0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 3
value = 2995,ifelse(var(42)=0,11,55)
channel = 0

[state varset 1650]
type = varset
trigger1 = movecontact
trigger1 = animelem = 10
var(9) = 13

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 1
value = 40,0
volume = 100

[state 1650]
type = velset
trigger1 = animelem = 2
x=11

[state 1650]
type = velset
trigger1 = animelem = 3
x=8

[state 1650]
type = VelAdd
trigger1 = animelem = 3
x=.13

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = const(movement.yaccel)

[State 3200]
type = HitDef
triggerall = var(50) = 0
triggerall = p2stateno != [4990,4998]   
trigger1 = time = 0
attr = S, SA
air.animtype = back
animtype = hard
damage = 55,13
priority = 7, Hit
guardflag = MA
pausetime =  17,17
guard.pausetime = 17,17
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,-75
hitsound = S230,0
guardsound = S150,1
ground.type = high
ground.slidetime = 17
ground.hittime = 19
guard.velocity = -10
guard.cornerpush.veloff = -20
ground.velocity = -2.3,-7.5
airguard.velocity = -2.3,-6
air.velocity = -2.3,-6
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
fall=1
yaccel = .5
fall.recover = 0

[State 3200]
type = HitDef
triggerall = var(50) = 1
triggerall = p2stateno != [4990,4998]   
trigger1 = time = 0
attr = S, SA
air.animtype = back
animtype = hard
damage = 55,13
priority = 7, Hit
guardflag = MA
pausetime =  17,17
guard.pausetime = 17,17
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,-75
hitsound = S230,0
guardsound = S150,1
ground.type = high
ground.slidetime = 17
ground.hittime = 19
guard.velocity = -10
guard.cornerpush.veloff = -20
ground.velocity = -2.3,-7.5
airguard.velocity = -2.3,-6
air.velocity = -2.3,-6
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
fall=1
yaccel = .5
fall.recover = 0

[state 3200,varset]
type = varset
triggerall = time > 3
trigger1 = var(13) = [101,105]
trigger2 = var(13) = [341,345]
var(15) = 1

[state 3200,varset]
type = varset
triggerall = time > 3
trigger1 = var(13) = [121,125]
trigger2 = var(13) = [361,365]
var(15) = 2

[State 3200, 4]
type = ChangeState
triggerall = var(15) = 1
trigger1 = animelemtime(4)>0 && animelemtime(7)<0
value = 2152
ctrl = 0

[State 3200, 4]
type = ChangeState
triggerall = var(15) = 2
trigger1 = animelemtime(4)>0 && animelemtime(7)<0
value = 2252
ctrl = 0

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
trigger1 = movecontact 
value = 2152

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1
;**********************************************
;魔幻之拳(近)第三式
;**********************************************
[StateDef 2152]
type = s
movetype = A
physics = s
anim = 2152
poweradd = ifelse(fvar(10)!=1,60,30)
velset = 0,0
ctrl = 0

[State 1220, Width 1]
type = Width
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(8) < 0
value = 20,-10

[state 3200,varset]
type = varset
trigger1 = time = 0
var(15) = 0

[state varset 1650]
type = varset
trigger1 = movecontact
trigger1 = animelem = 7
var(9) = 13

[state varset 1650]
type = varset
trigger1 = movehit
var(27) = 50

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 3
value = 2995,ifelse(var(42)=0,12,51)
channel = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 1
value = 40,0
volume = 100

[state 1650]
type = velset
trigger1 = animelem = 1,<=2
x=8

[state 1650]
type = veladd
trigger1 = animelem = 3 ,<=7 
x=.23

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = const(movement.yaccel)

[State 3200]
type = HitDef  
trigger1 = time = 0
attr = S, SA
air.animtype = back
animtype = hard
damage = 50,8
priority = 7, Hit
guardflag = MA
pausetime =  14,14
guard.pausetime = 14,22
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-90
hitsound = S210,3
guardsound = S150,1
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -13
p2stateno = 4990
air.velocity = -1.4,ifelse(fvar(10)!=1,-8.7,-7.3)
getpower = ifelse(fvar(10)!=1,60,50),ifelse(fvar(10)!=1,30,15)
givepower = 5
fall=1
yaccel = .45
fall.recover = 0

[state 3200,varset]
type = varset
triggerall = fvar(10) = 1
triggerall = time > 3
trigger1 = var(13) = [101,105]
trigger2 = var(13) = [341,345]
var(15) = 1

[state 3200,varset]
type = varset
triggerall = fvar(10) = 1
triggerall = time > 3
trigger1 = var(13) = [121,125]
trigger2 = var(13) = [361,365]
var(15) = 2

[State 3200, 4]
type = ChangeState
triggerall = fvar(10) = 1
triggerall = var(15) = 1
trigger1 = animelemtime(6)>0 && animelemtime(8)<0
value = 2154
ctrl = 0

[State 3200, 4]
type = ChangeState
triggerall = fvar(10) = 1
triggerall = var(15) = 2
trigger1 = animelemtime(6)>0 && animelemtime(8)<0
value = 2254
ctrl = 0

;AI青龙
[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = power >= 3000
triggerall = movehit
triggerall = random<400
triggerall = p2bodydist x < 70
trigger1 = p2life > 450
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 25

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = power >= 2000
triggerall = movehit
triggerall = p2bodydist x < 150
triggerall = p2bodydist y < -50
trigger1 = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [100,105])
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = (var(55) = [80,86])||(var(55) = [105,110])
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 850

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = power >= 2000
triggerall = movehit
triggerall = p2bodydist x < 170
triggerall = p2bodydist y = [-50,-10]
trigger1 = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [105,110])
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = (var(55) = [80,86])||(var(55) = [105,110])
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 3250

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = power >= 1000
triggerall = random<400
triggerall = movehit
triggerall = p2bodydist x < 170
triggerall = p2bodydist y < -50
trigger1 = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [105,110])
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = (var(55) = [80,86])||(var(55) = [100,105])
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 850

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = power >= 1000
triggerall = movehit
triggerall = p2bodydist x < 150
triggerall = p2stateno = [5030,5072]
trigger1 = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [100,110])
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [100,110])
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = ifelse(random<100,40,ifelse(frontedgedist<120,3000,3150))

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [100,110])
triggerall = movehit
triggerall = random>700
trigger1 = AnimTime = 0
value = ifelse(random>700,1700,1702)

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [100,110])
triggerall = movehit
triggerall = random>700
trigger1 = AnimTime = 0
value = ifelse(random>700,295,1510)

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [100,110])
triggerall = movehit
triggerall = p2bodydist x < 150
trigger1 = random > 700
trigger1 = AnimTime = 0
value = ifelse(random>700,1003,ifelse(random>500,1100,280))

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [100,110])
triggerall = movehit
trigger1 = AnimTime = 0
value = ifelse(random>700,ifelse((p2bodydist x=[-30,35]),225,220),245)

;AI凤凰
[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [100,110])
triggerall = power >= 2000
triggerall = movehit
triggerall = p2bodydist x < 70
triggerall = p2bodydist y < -50
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 850

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = movehit
trigger1 = animelemtime(6)>0 && animelemtime(8)<0
value = 2154
ctrl = 0

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;**********************************************
;魔幻之拳(近)第四式(凤式)
;**********************************************
[StateDef 2154]
type = s
movetype = A
physics = s
anim = 2154
poweradd = ifelse(fvar(10)!=1,60,30)
velset = 0,0
ctrl = 0

[state varset 2154]
type = varset
trigger1 = movecontact
trigger1 = animelem = 7
var(9) = 13

[state varset 2154]
type = varset
trigger1 = movehit
var(27) = 50

[STate 2154]
type = PlaySNd
trigger1 = Animelem = 5
value = 2995,55
channel = 0

[STate 2154]
type = PlaySNd
trigger1 = Animelem = 5
value = 40,0
volume = 100

[state 2154]
type = velset
trigger1 = animelem = 6
x=4

[state 2154]
type = posadd
trigger1 = animelem = 3
x=5

[state 2154]
type = posadd
trigger1 = animelem = 6
x=9

[state 2154]
type = posadd
trigger1 = animelem = 2
trigger2 = animelem = 9
x=8

[State 1800, Explod]
type = Explod
trigger1 = AnimElemtime(2) = 3
trigger2 = AnimElemtime(6) = 1
anim = 706
ownpal = 1
pos = 0,0
postype = p1
sprpriority = 5
bindtime = 1

[State 3200]
type = HitDef  
trigger1 = time = 0
attr = S, SA
air.animtype = back
animtype = hard
damage = 80,8
priority = 7, Hit
guardflag = MA
pausetime =  14,14
guard.pausetime = 14,14
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,-90
hitsound = S210,3
guardsound = S150,1
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -3,-8.5
air.velocity = -3,-8.5
guard.velocity = -9
p2stateno = 4990
getpower = ifelse(fvar(10)!=1,60,50),ifelse(fvar(10)!=1,30,15)
givepower = 5
fall=1
yaccel = .40
fall.recover = 0

;AI凤凰
[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [80,86])||(var(55) = [100,110])
triggerall = power >= 3000
triggerall = movehit
triggerall = random<400
triggerall = p2bodydist x < 170
trigger1 = p2life > 450
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = ifelse(random<500,3020,4300)

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [80,86])||(var(55) = [105,110])
triggerall = power >= 2000
triggerall = movehit
triggerall = p2bodydist x < 170
triggerall = p2bodydist y < -50
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 850

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [40,43])||(var(55) = [60,64])||(var(55) = [80,86])||(var(55) = [105,110])
triggerall = power >= 2000
triggerall = movehit
triggerall = p2bodydist x < 170
triggerall = p2bodydist y = [-50,-10]
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 3030

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = (var(55) = [80,86])||(var(55) = [105,110])
triggerall = random<400
triggerall = movehit
triggerall = p2bodydist x < 170
triggerall = p2bodydist y < -50
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 850

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [40,43])||(var(55) = [60,64])||(var(55) = [80,86])||(var(55) = [100,105])
triggerall = power >= 1000
triggerall = movehit
triggerall = p2bodydist x < 150
triggerall = p2stateno = [5030,5072]
trigger1 = p2life > 250
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = ifelse(random<100,2400,3020)

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [40,43])||(var(55) = [60,64])||(var(55) = [80,86])||(var(55) = [106,110])
triggerall = movehit
triggerall = p2bodydist x < 150
triggerall = random>700
trigger1 = AnimTime = 0
value = ifelse(random>700,2400,ifelse(random>500,1702,1600))

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [40,43])||(var(55) = [60,64])||(var(55) = [80,86])||(var(55) = [100,110])
triggerall = movehit
trigger1 = AnimTime = 0
value = ifelse(((random>800)&&(p2bodydist x=[-10,60])),1090,ifelse(random>800,ifelse(p2bodydist x<40,1200,1150),2400))

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1
;**********************************************
;魔幻之拳(远)第一式
;**********************************************
[StateDef 2250]
type = s
movetype = A
physics = s
anim = 2250
poweradd = ifelse(fvar(10)!=1,60,30)
velset = 0,0
juggle = 0+var(7)
ctrl = 0

[STate 3500]
type = varset
trigger1 = time = 0
trigger1 = var(42) != 0
var(42) = 0

[STate 3500]
type = varset
trigger1 = time = 0
trigger1 = random < 500
var(42) = 1

[State 1220, Width 1]
type = Width
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(6) < 0
value = 15,0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 2
value = 2995,ifelse(var(42)=0,10,54)
channel = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 1
value = 40,0
volume = 100

[state 1650]
type = velset
trigger1 = animelem = 2
trigger2 = animelem = 3
x=13

[state 1650]
type = veladd
trigger1 = animelem = 4,>=4 
x=.20

[State 370, 2]
type = nothitby
trigger1 = enemy,numhelper > 0
trigger1 = movehit
value = SAC
time = 1

[State 1650, 1]
type = ReversalDef
triggerall = var(9)<=0
trigger1 = animelem = 1, <= 4 
reversal.attr = SCA,NA,SA, AP,NP,SP,AA,HP,HA
hitflag = MAFPD
numhits = 0
pausetime = 10,10
sparkno = S733
hitsound = 6,0
p2stateno = 831

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = const(movement.yaccel)

[State 3200]
type = HitDef
triggerall = var(50) = 0
triggerall = p2stateno != [4990,4998]  
trigger1 = animelem = 4 
attr = S, SA
air.animtype = back
animtype = hard
damage = 30,10
priority = 7, Hit
guardflag = MA
pausetime =  17,17
guard.pausetime = 17,17
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-75
hitsound = S230,0
guardsound = S150,1
ground.type = high
ground.slidetime = 21
ground.hittime = 23
guard.velocity = -9
guard.cornerpush.veloff = -17
ground.velocity = -9,0
air.velocity = -3.5,-5
getpower = 0,0
givepower = 5
yaccel = .5
fall.recover = 0

[State 3200]
type = HitDef
triggerall = var(50) = 0
triggerall = p2stateno != [4990,4998]  
triggerall = !movecontact
trigger1 = animelem = 5
attr = S, SA
air.animtype = back
animtype = hard
damage = 80,8
priority = 7, Hit
guardflag = MA
pausetime =  17,17
guard.pausetime = 17,21
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-75
hitsound = S230,0
guardsound = S150,1
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -3,-4
air.velocity = -3.5,-6
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
fall=1
yaccel = .5
fall.recover = 0

[State 3200]
type = HitDef
triggerall = var(50) = 1
triggerall = p2stateno != [4990,4998]  
trigger1 = animelem = 4 
attr = S, SA
air.animtype = back
animtype = hard
damage = 30,10
priority = 7, Hit
guardflag = MA
pausetime =  17,17
guard.pausetime = 17,17
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-75
hitsound = S230,0
guardsound = S150,1
ground.type = high
ground.slidetime = 21
ground.hittime = 23
guard.velocity = -9
guard.cornerpush.veloff = -17
ground.velocity = -9,0
air.velocity = -3.5,-5
getpower = 0,0
givepower = 5
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
yaccel = .5
fall.recover = 0

[State 3200]
type = HitDef
triggerall = var(50) = 1
triggerall = p2stateno != [4990,4998]  
triggerall = !movecontact
trigger1 = animelem = 5
attr = S, SA
air.animtype = back
animtype = hard
damage = 80,8
priority = 7, Hit
guardflag = MA
pausetime =  17,17
guard.pausetime = 17,21
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-75
hitsound = S230,0
guardsound = S150,1
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -3,-4
air.velocity = -3.5,-6
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
fall=1
yaccel = .5
fall.recover = 0

[state 3200,varset]
type = varset
triggerall = time > 6
trigger1 = var(13) = [101,105]
trigger2 = var(13) = [341,345]
var(22) = 1

[state 3200,varset]
type = varset
triggerall = time > 6
trigger1 = var(13) = [121,125]
trigger2 = var(13) = [361,365]
var(22) = 2

[State 3200, 4]
type = ChangeState
trigger1 = var(22) = 1
trigger1 = animelemtime(4)>0 && animelemtime(8)<0
value = 2151
ctrl = 0

[State 3200, 4]
type = ChangeState
trigger1 = var(22) = 2
trigger1 = animelemtime(4)>0 && animelemtime(8)<0
value = 2251
ctrl = 0

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
trigger1 = movecontact 
value = 2151

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1
;**********************************************
;魔幻之拳(远)第二式
;**********************************************
[StateDef 2251]
type = s
movetype = A
physics = s
anim = 2251
poweradd = ifelse(fvar(10)!=1,60,30)
velset = 0,0
ctrl = 0

[State 1220, Width 1]
type = Width
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(6) < 0
value = 15,0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 2
value = 2995,ifelse(var(42)=0,11,55)
channel = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 1
value = 40,0
volume = 100

[state 1650]
type = velset
trigger1 = animelem = 2
x=8

[state 1650]
type = velset
trigger1 = animelem = 3
x=15

[state 1650]
type = veladd
trigger1 = animelem = 3 
x=.23

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = const(movement.yaccel)

[State 3200]
type = HitDef
triggerall = var(50) = 0
triggerall = p2stateno != [4990,4998]   
trigger1 = time = 0
attr = S, SA
air.animtype = back
animtype = hard
damage = 60,12
priority = 7, Hit
guardflag = MA
pausetime =  12,12
guard.pausetime = 12,12
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,-75
hitsound = S230,0
guardsound = S150,1
ground.type = high
ground.slidetime = 19
ground.hittime = 19
guard.velocity = -12
guard.cornerpush.veloff = -17
ground.velocity = -3,-7.5
airguard.velocity = -2.3,-6
air.velocity = -3.5,-6
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
fall=1
fall.recover = 0
yaccel = .5

[State 3200]
type = HitDef
triggerall = var(50) = 1
triggerall = p2stateno != [4990,4998]   
trigger1 = time = 0
attr = S, SA
air.animtype = back
animtype = hard
damage = 60,12
priority = 7, Hit
guardflag = MA
pausetime =  12,12
guard.pausetime = 12,12
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,-75
hitsound = S230,0
guardsound = S150,1
ground.type = high
ground.slidetime = 19
ground.hittime = 19
guard.velocity = -12
guard.cornerpush.veloff = -17
ground.velocity = -3,-7.5
airguard.velocity = -2.3,-6
air.velocity = -3.5,-6
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
fall=1
fall.recover = 0
yaccel = .5

[state 3200,varset]
type = varset
triggerall = time > 6
trigger1 = var(13) = [101,105]
trigger2 = var(13) = [341,345]
var(15) = 1

[state 3200,varset]
type = varset
triggerall = time > 6
trigger1 = var(13) = [121,125]
trigger2 = var(13) = [361,365]
var(15) = 2

[State 3200, 4]
type = ChangeState
trigger1 = var(15) = 1
trigger1 = animelemtime(4)>0 && animelemtime(7)<0
value = 2152
ctrl = 0

[State 3200, 4]
type = ChangeState
trigger1 = var(15) = 2
trigger1 = animelemtime(4)>0 && animelemtime(7)<0
value = 2252
ctrl = 0

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
trigger1 = movecontact 
value = 2152

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1
;**********************************************
;魔幻之拳(远)第三式
;**********************************************
[StateDef 2252]
type = s
movetype = A
physics = s
anim = 2252
poweradd = ifelse(fvar(10)!=1,60,30)
velset = 0,0
ctrl = 0

[State 1220, Width 1]
type = Width
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(8) < 0
value = 20,-10

[state 3200,varset]
type = varset
trigger1 = time = 0
var(15) = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 2
value = 2995,ifelse(var(42)=0,12,51)
channel = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 1
value = 40,0
volume = 100

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 11
value = 2995,60
channel = 0

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 11
value = 999,2
channel = 1

[State 399, EnvShake]
type = EnvShake
trigger1 = animelem = 12
ignorehitpause = 1
persistent = 0
time = 20
freq = 100
ampl = -3
phase = 1

[State 3784]
type = Explod
trigger1 = Animelem = 12
ignorehitpause = 1 
anim = 395
pos = -25,-2
postype = p1
sprpriority = -3
bindtime = 33
ownpal = 1

[state 1650]
type = velset
trigger1 = animelem = 1,<=2
x=8

[state 1650]
type = veladd
trigger1 = animelem = 3 ,<=7 
x=.23

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = const(movement.yaccel)

[State 3200]
type = HitDef
triggerall = !movecontact||SysVar(0)  
trigger1 = time = 0
attr = S, SA
air.animtype = back
animtype = hard
damage = 60,8
priority = 7, Hit
guardflag = MA
pausetime =  12,12
guard.pausetime = 12,12
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-90
hitsound = S210,3
guardsound = S150,1
ground.type = high
ground.slidetime = 19
ground.hittime = 19
ground.velocity = -13
air.velocity = -3.5,-9
p2stateno = 4990
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
fall=1
yaccel = .5
fall.recover = 0

[state 195]
type = ctrlset
triggerall = fvar(14) = 0
trigger1 = animelem = 15
value = 1

[state 195]
type = varset
triggerall = fvar(14) = 1
trigger1 = animelem = 15
fvar(1) = 1

[state 3200,varset]
type = varset
triggerall = fvar(10) = 1
triggerall = time > 6
trigger1 = var(13) = [101,105]
trigger2 = var(13) = [341,345]
var(15) = 1

[state 3200,varset]
type = varset
triggerall = fvar(10) = 1
triggerall = time > 6
trigger1 = var(13) = [121,125]
trigger2 = var(13) = [361,365]
var(15) = 2

[State 3200, 4]
type = ChangeState
triggerall = fvar(10) = 1
triggerall = var(15) = 1
trigger1 = animelemtime(6)>0 && animelemtime(8)<0
value = 2154
ctrl = 0

[State 3200, 4]
type = ChangeState
triggerall = fvar(10) = 1
triggerall = var(15) = 2
trigger1 = animelemtime(6)>0 && animelemtime(8)<0
value = 2254
ctrl = 0

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;**********************************************
;魔幻之拳(远)第四式(凤式)
;**********************************************
[StateDef 2254]
type = s
movetype = A
physics = s
anim = 2254
poweradd = ifelse(fvar(10)!=1,60,30)
velset = 0,0
ctrl = 0

[state varset 2154]
type = varset
trigger1 = movecontact
trigger1 = animelem = 7
var(9) = 13

[state varset 2154]
type = varset
trigger1 = movehit
var(27) = 50

[STate 2154]
type = PlaySNd
trigger1 = Animelem = 5
value = 2995,55
channel = 0

[STate 2154]
type = PlaySNd
trigger1 = Animelem = 5
value = 40,0
volume = 100

[state 2154]
type = velset
trigger1 = animelem = 6
x=4

[state 2154]
type = posadd
trigger1 = animelem = 3
x=5

[state 2154]
type = posadd
trigger1 = animelem = 6
x=9

[state 2154]
type = posadd
trigger1 = animelem = 2
trigger2 = animelem = 9
x=8

[State 1800, Explod]
type = Explod
trigger1 = AnimElemtime(2) = 3
trigger2 = AnimElemtime(6) = 1
anim = 706
ownpal = 1
pos = 0,0
postype = p1
sprpriority = 5
bindtime = 1

[State 3200]
type = HitDef  
trigger1 = time = 0
attr = S, SA
air.animtype = back
animtype = hard
damage = 75,15
priority = 7, Hit
guardflag = MA
pausetime =  14,14
guard.pausetime = 14,14
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,-90
hitsound = S210,3
guardsound = S150,1
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -4,-8
air.velocity = -4,-8
guard.velocity = -9
p2stateno = 4990
getpower = ifelse(fvar(10)!=1,60,50),ifelse(fvar(10)!=1,30,15)
givepower = 5
fall=1
yaccel = .5
fall.recover = 0

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 13
value = 2995,60
channel = 0

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 13
value = 999,2
channel = 1

[State 399, EnvShake]
type = EnvShake
trigger1 = animelem = 14
ignorehitpause = 1
persistent = 0
time = 20
freq = 100
ampl = -3
phase = 1

[State 3784]
type = Explod
trigger1 = Animelem = 14
ignorehitpause = 1 
anim = 395
pos = -25,-2
postype = p1
sprpriority = -3
bindtime = 33
ownpal = 1

[state 195]
type = ctrlset
triggerall = fvar(14) = 0
trigger1 = animelem = 15
value = 1

[state 195]
type = varset
triggerall = fvar(14) = 1
trigger1 = animelem = 15
fvar(1) = 1

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[statedef 2201]
type = A
movetype = A
physics = N
juggle = 45
ctrl = 0
poweradd = 150
velset = 0,0
anim = 2201

[state 2201]
type = changestate
trigger1 = time = 0
value = 2200
ctrl = 0

[statedef 2200]
type = A
movetype = A
physics = N
juggle = 45
ctrl = 0
velset = 0,0
anim = 2200

[state 2200]
type = veladd
trigger1 = animelem = 1 ,>=1
x = 1

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = const(movement.yaccel)

[state 2200]
type = hitdef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 1
trigger2 = animelem = 2
attr = S,SA
animtype = Heavy
damage = 100,5
priority = 7, Hit
guardflag = MA
pausetime = 12,12
guard.pausetime = 12,25
sparkno = S736
guard.sparkno = S733
sparkxy = 10,-75
hitsound = S210,0
guardsound = S150,0
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -2.5
air.velocity = -3.5,-6
getpower = 30,10
givepower = 10,5
fall = 1
yaccel = .5
fall.recover = 0


[State Land]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 1002
ctrl = 0




;**********************************************
;突击---罚 
;**********************************************
[StateDef 2400]
type = s
movetype = A
physics = s
anim = 100
poweradd = ifelse(fvar(10)!=1,60,30)
velset = 0,0
ctrl = 0

[State 1220, Width 1]
type = Width
trigger1 = 1
value = 20,-10

[state 3200,varset]
type = velset
trigger1 = 1
x = 5

[state 3200,varset]
type = velset
trigger1 = animelemtime(13)>=0
trigger1 = animelemtime(15)<0
x = 3

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = movehit
triggerall = p2bodydist x < 50
trigger1 = AnimTime = 0
value = ifelse(random>700,1080,ifelse(random>500,1100,280))

[State 3200, 4]
type = ChangeState
trigger1 = command = "D"
trigger1 = time > 3
value = 2405
ctrl = 0

[State 3200, 4]
type = ChangeState
trigger1 = command = "C"
trigger1 = time > 3
value = 2402
ctrl = 0

[State 3200, 4]
type = ChangeState
trigger1 = Time = 40
trigger2 = command = "A"
value = 2403
ctrl = 0

[State 3200, 4]
type = ChangeState
trigger1 = Time >= 3
trigger1 = command = "B"
value = 2404
ctrl = 0

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [40,43])||(var(55) = [60,64])||(var(55) = [80,86])||(var(55) = [100,110])
triggerall = p2bodydist x < 150
triggerall = p2statetype != A
trigger1 = Time > 3
value = ifelse((prevstateno=225),2405,2403)

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = p2statetype = A
trigger1 = time > 3
trigger1 = p2bodydist x < 150
value = 2405
;**********************************************
;突击---罚----上段技 
;**********************************************
[StateDef 2405]
type = a
movetype = A
physics = n
anim = 2405
poweradd = ifelse(fvar(10)!=1,60,30)
ctrl = 0

[State 1220, Width 1]
type = Width
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(5) < 0
value = 15,-15

[State 1220, Width 1]
type = Width
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(8) < 0
value = 30,-30

[state 3200,varset]
type = velset
trigger1 = animelem = 2
x = 6
y = -6

[state varset 1650]
type = veladd
trigger1 = vel y != 0
y = .43

[state varset 1650]
type = pause
triggerall = time%2 = 0
trigger1 = time = [8,16]
trigger1 = p2movetype = h
trigger2 = movehit
time = 1

[state varset 1650]
type = playsnd
trigger1 = animelem = 3
value = 2405,0

[state 2200]
type = hitdef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = S,SA
animtype = Heavy
damage = 180,55
priority = 7, Hit
guardflag = HA
pausetime = 14,14
guard.pausetime = 14,15
guard.sparkno = S733
sparkno = S736
sparkxy = (p2bodydist x)/6-30,-65
hitsound = S240,0
guardsound = S150,1
ground.type = high
ground.slidetime = 39
ground.hittime = 39
ground.velocity = -5,-7
guard.velocity = -29
air.velocity = -3.5,-6
getpower = 30,10
givepower = 10,5
fall = 1
yaccel = .5
fall.recover = 0

[State 399, EnvShake]
type = EnvShake
trigger1 = movecontact= 1
ignorehitpause = 1
persistent = 0
time = 20
freq = 100
ampl = -3
phase = 1

[State 3200, 4]
type = ChangeState
trigger1 = pos y >= 45
trigger1 = vel y > 0
value = 2401


;**********************************************
;突击---罚----上段技 ---落地起身
;**********************************************
[StateDef 2401]
type = a
movetype = A
physics = n
anim = 2401
velset = 0,0
ctrl = 0

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 2
value = 999,2
channel = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 395
pos = 0,10
postype = p1
sprpriority = -2
supermove = 1
bindtime = 1
ownpal = 1


[State 399, EnvShake]
type = EnvShake
trigger1 = Animelem = 2
ignorehitpause = 1
persistent = 0
time = 30
freq = 100
ampl = -4
phase = 1

[State 1220, Width 1]
type = Width
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(3) < 0
value = 30,-30

[state varset 1650]
type = posset
trigger1 = time = 0
y = 0

[State 3200, 4]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1

;**********************************************
;突击---罚----急停回避
;**********************************************
[StateDef 2402]
type = s
movetype = A
physics = n
anim = 2402
velset = 3,0
ctrl = 0

[State 1300,AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 25
length = 13
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = 1,1,1
timegap = 2
trans = add1

[State 3200, 4]
type = posadd
trigger1 = animelem = 5
x = 10

[State 3200, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;**********************************************
;突击---罚----急停 
;**********************************************
[StateDef 2403]
type = s
movetype = A
physics = n
anim = 2403
velset = 3,0
ctrl = 0

[State 1300,AfterImage]
type = velset
trigger1 = 1
x = 3

[State 3200, 4]
type = ChangeState
trigger1 = animtime = 0
value = 1002
ctrl = 1

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = p2statetype != A
trigger1 = animtime = 0
trigger1 = p2bodydist x < 40
value = ifelse(random<400,425,225)

;**********************************************
;突击---罚----折颈 
;**********************************************
[StateDef 2404]
type = a
movetype = A
physics = n
anim = 2404
velset = 0,0
ctrl = 0

[state 2200]
type = hitdef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = S,SA
animtype = Heavy
damage = 50,0
priority = 7, Hit
pausetime = 0,0
guard.pausetime = 14,15
guard.sparkno = S733
sparkno = S736
sparkxy = 0,-65
hitsound = S920,0
guardsound = S150,0
ground.type = high
p2stateno = 2406
id = 2406
ground.slidetime = 39
ground.hittime = 39
getpower = 30,10
givepower = 10,5
fall = 1
yaccel = .5
fall.recover = 0

[State 399, EnvShake]
type = EnvShake
trigger1 = animelem= 9
ignorehitpause = 1
persistent = 0
time = 20
freq = 100
ampl = -5
phase = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 10
anim = 395
pos = 0,10
postype = p1
sprpriority = -2
supermove = 1
bindtime = 1
ownpal = 1

[State 3200, 4]
type = targetbind
trigger1 = numtarget(2406) != 0
trigger1 = anim = 2404
trigger1 = animelemtime(4) >= 0
trigger1 = animelemtime(5) < 0
pos = -7,-26

[State 3200, 4]
type = targetbind
trigger1 = numtarget(2406) != 0
trigger1 = anim = 2404
trigger1 = animelemtime(5) >= 0
trigger1 = animelemtime(7) < 0
pos = -17,-38

[State 3200, 4]
type = targetbind
trigger1 = numtarget(2406) != 0
trigger1 = anim = 2404
trigger1 = animelemtime(7) >= 0
trigger1 = animelemtime(8) < 0
pos = -7,-46

[State 3200, 4]
type = targetbind
trigger1 = anim = 2404
trigger1 = numtarget(2406) != 0
trigger1 = animelemtime(8) >= 0
trigger1 = animelemtime(9) < 0
pos = 7,-37

[State 3200, 4]
type = targetbind
trigger1 = numtarget(2406) != 0
trigger1 = anim = 2404
trigger1 = animelemtime(9) >= 0
trigger1 = animelemtime(10) < 0
pos = 7,-19

[State 3200, 4]
type = targetbind
trigger1 = anim = 2404
trigger1 = numtarget(2406) != 0
trigger1 = animelemtime(10) >= 0
trigger1 = animelemtime(11) < 0
pos = 7,5

[State 1300,AfterImage]
type = targetlifeadd
trigger1 = numtarget(2406) != 0
trigger1 = animelem = 9
value = -150

[State 1300,AfterImage]
type = veladd
trigger1 = animelemtime(2) >= 0
trigger1 = animelemtime(10) < 0
y = 0.24

[State 1300,AfterImage]
type = velset
trigger1 = animelem = 2
x = 2
y = -5

[State 1300,AfterImage]
type = velset
trigger1 = animelem = 10
x = 0
y = 0

[State 1300,AfterImage]
type = posset
trigger1 = animelem = 10
y = 0

[State 1300,AfterImage]
type = playsnd
trigger1 = animelem = 4
value = 2404,0

[State 1300,AfterImage]
type = playsnd
trigger1 = animelem = 10
value = 999,2

[State 3200, 4]
type = ChangeState
trigger1 = !movehit
trigger1 = animelem = 4
value = 2407

[State 3200, 4]
type = ChangeState
trigger1 = animtime = 0
value = 1002
ctrl = 1

;**********************************************
;突击---罚----折颈 
;**********************************************
[StateDef 2406]
type = s
movetype = H
physics = s
ctrl = 0

[State 1300,AfterImage]
type = changeanim2
trigger1 = time = 0
value = 2406

[State 1300,AfterImage]
type = posadd
trigger1 = animtime = 0
x = 45

[State 3200, 4]
type = selfState
trigger1 = animtime = 0
value = 5100
ctrl = 0

;**********************************************
;突击---罚----折颈洛
;**********************************************
[StateDef 2407]
type = a
movetype = a
anim = 2407
physics = n
value = 2，-5
ctrl = 0

[state 2200]
type = hitdef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = S,SA
animtype = Heavy
damage = 180,55
priority = 7, Hit
guardflag = HA
pausetime = 14,14
guard.pausetime = 14,15
guard.sparkno = S733
sparkno = S736
sparkxy = 0,-15
hitsound = S210,0
guardsound = S150,0
ground.type = high
ground.slidetime = 39
ground.hittime = 39
ground.velocity = -3,-7
guard.velocity = -15
air.velocity = -1.5,-6
getpower = 30,10
givepower = 10,5
fall = 1
yaccel = .5
fall.recover = 0

[State 1300,AfterImage]
type = veladd
trigger1 = animelemtime(1) >= 0
trigger1 = animelemtime(10) < 0
y = 0.3

[State 1300,AfterImage]
type = velset
trigger1 = animelem = 10
y = 0
x = 1

[State 1300,AfterImage]
type = velset
trigger1 = animelem = 11
y = 0
x = 0

[State 1300,AfterImage]
type = posset
trigger1 = animelem = 10
y = 0

[State 399, EnvShake]
type = EnvShake
trigger1 = animelem= 10
ignorehitpause = 1
persistent = 0
time = 20
freq = 100
ampl = -5
phase = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 10
anim = 395
pos = 0,10
postype = p1
sprpriority = -2
supermove = 1
bindtime = 1
ownpal = 1

[State 1300,AfterImage]
type = playsnd
trigger1 = animelem = 10
value = 999,2

[State 1300,AfterImage]
type = playsnd
trigger1 = animelem = 10
value = 5000,2

[State 3200, 4]
type = selfState
trigger1 = animtime = 0
value = 10
ctrl = 1

;***************************************************
;龙牙箭
;***************************************************
[statedef 2500]
type = A
movetype = A
physics = N
juggle = 45
ctrl = 0
poweradd = 150
velset = 0,0
anim = 2201

[state 2201]
type = changestate
trigger1 = time = 0
value = 2505
ctrl = 0

[statedef 2505]
type = A
movetype = A
physics = N
juggle = 45
ctrl = 0
velset = 0,0
anim = 2505

[state 2206]
type = velset
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
x = 6

[State Gravity]
type = VelAdd
trigger1 = 1
y = const(movement.yaccel)
x = .85

[State Land]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 2510
ctrl = 0

[statedef 2510]
type = S
movetype = A
physics = S
juggle = 45
ctrl = 0
velset = 0,0
anim = 2510

[state 955]
type = MakeDust
trigger1 = time = 1
pos = -10,0

[state 2206]
type = playsnd
trigger1 = time = 0
value = 40,0

[state 2206]
type = ctrlset
triggerall = fvar(14) = 0
trigger1 = time = 2
value = 1

[state 2206]
type = varset
triggerall = fvar(14) = 1
trigger1 = time = 2
fvar(1) = 1

[state 2206]
type = posset
trigger1 = 1
y = 0

[State Land]
type = ChangeState
trigger1 = animtime = 0
value = 0;站立
ctrl = 1

;***************************************************
;龙牙刃闪
;***************************************************
[statedef 2600]
type = S
movetype = A
physics = S
juggle = 5
ctrl = 0
velset = 0,0
sprpriority = -5
anim = 2600

[state 2206]
type = playsnd
trigger1 = time = 0
value = 40,0

[state 2206]
type = posset
trigger1 = pos y > 0
trigger1 = time = 0
y = 0

[state hitdef]
type = hitdef
triggerall = time <= 35
trigger1 = animelem = 3
trigger2 = animelem = 4
attr = A,SA
damage = 15,10
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
animtype = high
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
sparkno = S736
guard.pausetime = 10,10
guard.sparkno = S731
sparkxy = 0,-65
hitsound = S220,0
guardsound = S150,0
ground.type = low
ground.slidetime = 16
ground.hittime = 17
ground.velocity = 6
guard.velocity = 8
ground.cornerpush.veloff = 12
airguard.velocity = 6,-3
air.type = low
air.velocity = 4,-3
air.hittime = 15
fall.recover = 0
palfx.time = 55
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15

[state 2200]
type = hitdef
triggerall = time <= 35
trigger1 = animelem = 6
trigger2 = animelem = 7
attr = S,SA
animtype = Heavy
damage = 15,5
priority = 7, Hit
guardflag = HA
hitflag = MAFP
pausetime = 5,5
guard.pausetime = 7,7
guard.sparkno = S733
sparkno = S736
sparkxy = 0,-65
hitsound = S210,0
guardsound = S150,0
ground.type = low
ground.slidetime = 24
ground.hittime = 24
ground.velocity = -10
guard.velocity = -15
ground.cornerpush.veloff = -5
air.velocity = -1.5,-6
getpower = 30,10
givepower = 10,5
air.fall = 1
yaccel = .5
fall.recover = 0

[state 2200]
type = hitdef
triggerall = time > 35
trigger1 = animelem = 6
trigger2 = animelem = 7
attr = S,SA
animtype = Heavy
damage = 20,5
priority = 7, Hit
guardflag = HA
hitflag = MAFP
pausetime = 5,5
guard.pausetime = 7,7
guard.sparkno = S733
sparkno = S736
sparkxy = 0,-65
hitsound = S210,0
guardsound = S150,0
ground.type = low
ground.slidetime = 24
ground.hittime = 24
ground.velocity = -2,-7
guard.velocity = -15
ground.cornerpush.veloff = -5
air.velocity = -1.5,-7
getpower = 30,10
givepower = 10,5
air.fall = 1
fall = 1
yaccel = .5
fall.recover = 0

[State Land]
type = ChangeState
trigger1 =animelemtime(7) >= 5
trigger1 = time >= 40
value = 0;站立
ctrl = 1

;***************************************************
;反击A
;***************************************************
[statedef 2950]
type = S
movetype = A
physics = S
ctrl = 0
poweradd = -500
velset = 0,0
anim = 195

[State 3784]
type = Explod
trigger1 = animelemtime(2) = 2
ignorehitpause = 1 
persistent = 0
anim = 1500
pos = 0,0
supermove = 1
pausemovetime = 100
postype = p1
sprpriority = 2
bindtime = 33
ownpal = 1

[State 399, -2]
type = EnvShake
trigger1 = animelemtime(6) = 2
ignorehitpause = 1
persistent = 0
time = 20
freq = 100
ampl = -3
phase = 1

[State 3784]
type = Explod
trigger1 = animelemtime(6) = 2
ignorehitpause = 1 
anim = 395
pos = -25,-2
supermove = 1
pausemovetime = 100
postype = p1
sprpriority = -3
bindtime = 33
ownpal = 1

[STate 1395]
type = PlaySNd
trigger1 = animelemtime(2) = 2
value = 2995,60
volume = 70

[STate 1395]
type = PlaySNd
trigger1 = animelemtime(2) = 2
value = 999,2
volume = 170

[State 3875, 慢镜头]
type = Pause 
trigger1 = animelem = 2
time = 55
movetime = 55
ignorehitpause = 1

[State 3875, 慢镜头]
type = nothitby
trigger1 = 1
time = 23
value = SAC
ignorehitpause = 1

[state 2201]
type = changestate
trigger1 = time >= 40
value = 2951
ctrl = 0

[statedef 2951]
type = S
movetype = A
physics = S
ctrl = 0
velset = 0,0
anim = 2951

[State 399, -2]
type = statetypeset
trigger1 = animelem = 4
statetype = A
physics = N

[State 399, -2]
type = velset
trigger1 = animelem = 4
x = 3
y = -3

[State 399, -2]
type = veladd
trigger1 = vel y != 0
y = .2

[State 399, -2]
type = EnvShake
trigger1 = movecontact
ignorehitpause = 1
persistent = 0
time = 30
freq = 100
ampl = -5
phase = 1

[state 2200]
type = hitdef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = S,SA
animtype = Heavy
damage = 180,55
priority = 7, Hit
guardflag = HA
pausetime = 14,14
guard.pausetime = 14,15
guard.sparkno = S733
sparkno = S736
sparkxy = (p2bodydist x)/6-30,-65
hitsound = S240,0
guardsound = S150,1
ground.type = high
ground.slidetime = 39
ground.hittime = 39
ground.velocity = -5,-7
guard.velocity = -29
air.velocity = -3.5,-6
getpower = 30,10
givepower = 10,5
fall = 1
yaccel = .5
fall.recover = 0

[STate 1395]
type = PlaySNd
trigger1 = animelemtime(3) = 2
value = 2405,0

[STate 1395]
type = PlaySNd
trigger1 = animelemtime(4) = 0
value = 600,1
volume = 70

[State 3875, 慢镜头]
type = nothitby
trigger1 = 1
time = 23
value = SAC
ignorehitpause = 1

[state 2201]
type = changestate
trigger1 = pos y >= 60
trigger1 = vel y > 0
value = 2952
ctrl = 0

[statedef 2952]
type = S
movetype = A
physics = S
ctrl = 0
velset = 0,0
anim = 2952

[STate 1395]
type = PlaySNd
trigger1 = time = 0
value = 999,2
volume = 70

[State 399, -2]
type = EnvShake
trigger1 = time = 0
ignorehitpause = 1
persistent = 0
time = 30
freq = 100
ampl = -3
phase = 1

[STate 1395]
type = posset
trigger1 = pos y != 0
y = 0

[State 3784]
type = Explod
trigger1 = time = 0
ignorehitpause = 1 
anim = 395
pos = 0,0
postype = p1
sprpriority = -3
ownpal = 1

[state 2201]
type = changestate
trigger1 = animtime = 0
value = 11
ctrl = 1
;***************************************************
;反击B
;***************************************************
[statedef 2955]
type = S
movetype = A
physics = S
ctrl = 0
poweradd = -500
velset = 0,0
anim = 195

[State 3784]
type = Explod
trigger1 = animelemtime(2) = 2
ignorehitpause = 1 
persistent = 0
anim = 1500
pos = 0,0
supermove = 1
pausemovetime = 100
postype = p1
sprpriority = 2
bindtime = 33
ownpal = 1

[State 399, -2]
type = EnvShake
trigger1 = animelemtime(6) = 2
ignorehitpause = 1
persistent = 0
time = 20
freq = 100
ampl = -3
phase = 1

[State 3784]
type = Explod
trigger1 = animelemtime(6) = 2
ignorehitpause = 1 
anim = 395
pos = -25,-2
supermove = 1
pausemovetime = 100
postype = p1
sprpriority = -3
bindtime = 33
ownpal = 1

[STate 1395]
type = PlaySNd
trigger1 = animelemtime(2) = 2
value = 2995,60
volume = 70

[STate 1395]
type = PlaySNd
trigger1 = animelemtime(2) = 2
value = 999,2
volume = 170

[State 3875, 慢镜头]
type = Pause 
trigger1 = animelem = 2
time = 55
movetime = 55
ignorehitpause = 1

[State 3875, 慢镜头]
type = nothitby
trigger1 = 1
time = 23
value = SAC
ignorehitpause = 1

[state 2201]
type = changestate
trigger1 = time >= 40
value = 2956
ctrl = 0

[statedef 2956]
type = S
movetype = A
physics = S
ctrl = 0
velset = 0,0
anim = 2956

[State 399, -2]
type = statetypeset
trigger1 = animelem = 5
statetype = A
physics = N

[State 399, -2]
type = velset
trigger1 = animelem = 5
x = 0
y = -9

[State 399, -2]
type = veladd
trigger1 = vel y != 0
y = .4

[State 399, -2]
type = EnvShake
trigger1 = movecontact
ignorehitpause = 1
persistent = 0
time = 30
freq = 100
ampl = -3
phase = 1

[state 2200]
type = hitdef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = S,SA
animtype = Heavy
damage = 120,45
priority = 7, Hit
guardflag = HA
pausetime = 14,14
guard.pausetime = 14,15
guard.sparkno = S733
sparkno = S736
sparkxy = (p2bodydist x)/6-30,-65
hitsound = S240,0
guardsound = S150,1
ground.type = high
ground.slidetime = 39
ground.hittime = 39
ground.velocity = -1,-8
guard.velocity = -29
air.velocity = -1.5,-8
getpower = 30,10
givepower = 30,10
fall = 1
yaccel = .5
fall.recover = 0

[STate 1395]
type = PlaySNd
trigger1 = animelemtime(3) = 2
value = 2995,60

[STate 1395]
type = PlaySNd
trigger1 = animelemtime(5) = 2
value = 600,1
volume = 70

[State 3875, 慢镜头]
type = nothitby
trigger1 = 1
time = 23
value = SAC
ignorehitpause = 1

[state 2201]
type = changestate
trigger1 = pos y >= 0
trigger1 = vel y > 0
value = 2957
ctrl = 0

[statedef 2957]
type = S
movetype = A
physics = S
ctrl = 0
velset = 0,0
anim = 2957

[STate 1395]
type = PlaySNd
trigger1 = time = 0
value = 47,0
volume = 70

[STate 1395]
type = posset
trigger1 = pos y != 0
y = 0

[State 3784]
type = Explod
trigger1 = time = 0
ignorehitpause = 1 
anim = 706
facing = -1
pos = -10,0
postype = p1
sprpriority = -3
ownpal = 1

[state 2201]
type = changestate
trigger1 = animtime = 0
value = 11
ctrl = 1
;==========================================================================================================
;龙系列超杀（魔龙列破）
;-----------------------------------------------------------------------------------------------------------
;***************************************************
;魔龙钢裂拳.咬
;***************************************************
[Statedef 3000]
type = S
movetype = A
physics = S
juggle = 8
velset = 0,0
ctrl = 0
anim = 3000
sprpriority = 2
poweradd = -1000

[State 0, ]
type = StateTypeSet
trigger1 = animelem = 15
sprpriority = 0
movetype = I

[state nothitby]
type = nothitby
trigger1 = time >=0 && time <=32
value = SCA
time = 1
ignorehitpause = 1

[state hitby]
type = hitby
trigger1 = time >=33
value = SCA,AA,NA,SA,HA
time = 1
ignorehitpause = 1

[State 3000, 1]
type = ReversalDef
trigger1 = time = [0,32]
reversal.attr = SCA,NA,SA, AP,NP,SP,AA
hitflag = MAFPD
numhits = 0
pausetime = 10,20
sparkno = S733
hitsound = 6,0
ignorehitpause = 1
p2stateno = 831

[State 3000]
type = PalFx
trigger1 = timemod = 3,0
trigger1 = time <= 13
trigger1 = var(11) = 1 && var(32) = 1
add = 255,255,255
time = 2

;------------------

[STate 3000]
type = PlaySNd
trigger1 = Animelem = 1
value = 2990,0

[STate 3000]
type = PlaySNd
trigger1 = Animelem = 12
value = 3000,2

[State 3000]
type = Width
trigger1 = Animelemtime(4) >= 0
trigger1 = Animelemtime(10) < 0
player = 10,0

[State 3000]
type = Width
trigger1 = Animelemtime(10) >= 0
trigger1 = Animelemtime(19) < 0
player = 40,0

[STate 3000]
type = SuperPause
trigger1 = Animelem = 1
time = 30
movetime = 4
sound = s1,17
anim = -1
pos = -20,-100

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 6001
ID = 1478
pos = -28,-70
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 6001
ID = 1479
pos = 20,-66
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 6000
ID = 6001
pos = -10,-67
postype = p1
sprpriority = -4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 31
anim = 1495
ID = 1495
pos = -10,40
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 31
anim = 1495
ID = 1497
pos = 46,46
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1

[State 3000] ; Shadows
type = Afterimage
trigger1 = animelem = 1
time = 60
PalBright = 0, 0, 0
PalContrast =  128,68,1
PalAdd = 0, 0, 0
PalMul = 1,1,1
Length = 25
FrameGap = 10
Trans = Add1


[State 1200, Explod]
type = removeExplod
trigger1 = animelem = 9
ID = 1495

[STate 3000]
type = PlaySNd
trigger1 = Animelem = 2
value = 3000,20
channel = 0

[State 3000]
type = Helper
trigger1 = animelem = 4,>= 0 && animelem = 8,<= 0
trigger1 = numhelper(3003) < 2
stateno = 3112
id = 3003
pos = 0,0
postype = p1
ownpal = 1
sprpriority = 3

[State 3000]
type = Helper
trigger1 = animelem = 7,>= 0 && animelem = 13,<= 0
trigger1 = numhelper(3003) < 2
stateno = 3111
id = 3003
pos = 0,0
postype = p1
ownpal = 1
sprpriority = 3

[State 3000]
type = Projectile
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElem = 6
trigger4 = AnimElem = 9
trigger5 = AnimElem = 10
ProjAnim = 3635
ProjID = 1005
projhitanim = 3008
ProjRemoveTime = 4
offset = 42,-63
attr = S,HP
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 3
damage = 10,3
sparkno = S736
guard.sparkno = S733
sparkxy = 25,-15
hitsound = S210,0
guardsound = S150,1
pausetime = 3,3
animtype = Hard
guard.hittime = 16
guard.velocity = -3
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -3
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
air.hittime = 14
air.velocity = -4,-4
air.type = High
air.recover = 0
fall.recover = 0
air.fall = 1
yaccel = .35

[State 3000]
type = Projectile
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElem = 6
trigger4 = AnimElem = 9
trigger5 = AnimElem = 10
ProjAnim = 3635
ProjID = 1005
projhitanim = 3008
ProjRemoveTime = 4
offset = 42,-63
attr = S,HP
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 3
damage = 10,3
sparkno = S736
guard.sparkno = S733
sparkxy = 25,-15
hitsound = S210,0
guardsound = S150,1
pausetime = 3,3
animtype = Hard
guard.hittime = 16
guard.velocity = -3
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -3
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
air.hittime = 14
air.velocity = -4,-4
air.type = High
air.recover = 0
fall.recover = 0
air.fall = 1
yaccel = .35

[State 3000]
type = Projectile
triggerall = var(50) = 0
trigger1 = AnimElem = 11
trigger2 = AnimElem = 12
trigger3 = AnimElem = 13
trigger4 = AnimElem = 14
ProjAnim = 3635
ProjID = 1006
projhitanim = 3008
ProjRemoveTime = 4
offset = 42,-63
attr = S,HP
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 3
damage = 25,3
sparkno = S736
guard.sparkno = S733
sparkxy = 40,-10
hitsound = S210,0
guardsound = S150,1
pausetime = 3,3
animtype = Hard
guard.hittime = 16
guard.velocity = -3
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -3
ground.slidetime = 16
ground.type = low
ground.cornerpush.veloff = -13
air.hittime = 14
air.velocity = -4,-4
air.type = High
air.recover = 0
fall.recover = 0
air.fall = 1
yaccel = .35

[State 3000]
type = Projectile
triggerall = var(50) = 1
trigger1 = AnimElem = 11
trigger2 = AnimElem = 12
trigger3 = AnimElem = 13
trigger4 = AnimElem = 14
ProjAnim = 3635
ProjID = 1006
projhitanim = 3008
ProjRemoveTime = 4
offset = 42,-63
attr = S,HP
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 3
damage = 25,3
sparkno = S736
guard.sparkno = S733
sparkxy = 40,-10
hitsound = S210,0
guardsound = S150,1
pausetime = 3,3
animtype = Hard
guard.hittime = 16
guard.velocity = -3
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -3
ground.slidetime = 16
ground.type = low
ground.cornerpush.veloff = -13
air.hittime = 14
air.velocity = -4,-4
air.type = High
air.recover = 0
fall.recover = 0
air.fall = 1
yaccel = .35

[State 1200, Explod]
type = Explod
triggerall = AnimElem = 7
triggerall = p2bodydist x = [0,100]
trigger1 = enemynear,stateno = [5000,5050]
trigger2 = (enemynear,stateno = 150)||(enemynear,stateno = 152)||(enemynear,stateno = 154)
anim = 6050
pos = -10,-80
postype = p1
sprpriority = 3
supermove = 1
pausemovetime = 9999
bindtime = 1
ownpal = 1

[STate 3000]
type = superPause
triggerall = Animelem = 7
triggerall = p2bodydist x = [0,100]
trigger1 = enemynear,stateno = [5000,5050]
trigger2 = (enemynear,stateno = 150)||(enemynear,stateno = 152)||(enemynear,stateno = 154)
time = 11
movetime = 2
sound = s0,-1
anim = -1
pos = -20,-100

[State 1200, Explod]
type = Explod
triggerall = Animelem = 7
triggerall = p2bodydist x = [0,100]
trigger1 = enemynear,stateno = [5000,5050]
trigger2 = (enemynear,stateno = 150)||(enemynear,stateno = 152)||(enemynear,stateno = 154)
anim = 1495
ID = 1495
pos = 15,43
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1
ownpal = 1

[State 1000, 3]
type = pause
triggerall = projcontact1005 = 1
trigger1 = animelemtime(4)>=0
trigger1 = animelemtime(7)<0
trigger2 = animelemtime(9)>=0
trigger3 = animelemtime(11)<0
time = 7

[State 1000, 3]
type = pause
trigger1 = animelemtime(11)>=0
trigger1 = animelemtime(15)<0
trigger1 = projcontact1006 = 1
time = 3

[State 1100]
type = Helper
trigger1 = animelem = 13
stateno = 3001
id = 3001
pos = 85,15
ownpal = 1
sprpriority = 4

[State 3000, 4]
type = ChangeState
triggerall = life >= 500
triggerall = var(59) = 1
trigger1 = AnimTime = 0
trigger1 = p2movetype = A
trigger1 = p2bodydist X = (0,50)
value = 1000 

[State 3000, 4]
type = ChangeState
triggerall = life <500
triggerall = var(59) = 1
trigger1 = AnimTime = 0
trigger1 = p2movetype = A
trigger1 = p2bodydist X = (0,50)
value = 1003

[State 3000]
type = ChangeState 
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;***************************************************
;魔龙钢裂拳.冲
;***************************************************
[Statedef 3005]
type = S
movetype = I
physics = S
juggle = 15
velset = 0,0
ctrl = 0
anim = 3005
sprpriority = 0
poweradd = -1000

[state nothitby]
type = nothitby
trigger1 = time >=0 && time <=10
value = SCA
time = 1
ignorehitpause = 1

[State 3150]
type = PalFx
trigger1 = timemod = 3,0
trigger1 = time <= 13
trigger1 = var(11) = 1 && var(32) = 1
add = 255,255,255
time = 2

;------------------

[STate 3150]
type = PlaySNd
trigger1 = Animelem = 2
value = 3005,0
channel = 0

[STate 3150]
type = PlaySNd
trigger1 = Animelem = 7
value = 3005,1
channel = 0
volume = 5

[STate 3150]
type = PlaySNd
trigger1 = Animelem = 2
value = 3000,20
channel = 1


[State 3150]
type = Width
trigger1 = Animelem = 7,>= 0 && animelem = 14,<= 0
value = 15,0

[STate 3150]
type = SuperPause
trigger1 = Animelem = 3
time = 45
movetime = 1
sound = s1,17
anim = -1
pos = -20,-100

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 6000
id = 6000
pos = 5,-80
postype = p1
sprpriority = -3
supermove = 1
bindtime = 100
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 6001
pos = -7,-75
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 6001
pos = 14,-85
postype = p1
sprpriority = -2
supermove = 1
bindtime = 1
ownpal = 1

[State 3150] ; Shadows
type = Afterimage
trigger1 = animelem = 2
time = 33
PalBright = 0, 0, 0
PalContrast =  128,68,1
PalAdd = 0, 0, 0
PalMul = 1,1,1
Length = 25
FrameGap = 7
Trans = Add1

[State 3205]
type = helper
trigger1 = AnimElem = 5
ID = 3006
pos = 70,20
stateno = 3006
sprpriority = 3
ownpal = 1

[State 3150, 4]
type = ChangeState
triggerall = life >= 500
triggerall = var(59) = 1
trigger1 = AnimTime = 0
trigger1 = p2movetype = A
trigger1 = p2bodydist X = (0,50)
value = 1000 

[State 3150, 4]
type = ChangeState
triggerall = life <500
triggerall = var(59) = 1
trigger1 = AnimTime = 0
trigger1 = p2movetype = A
trigger1 = p2bodydist X = (0,50)
value = 1003

[State 3150]
type = ChangeState 
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;***************************************************
;魔龙钢裂拳.霸
;***************************************************
[Statedef 3010]
type = S
movetype = A
physics = S
juggle = 15
velset = 0,0
ctrl = 0
anim = 3010
facep2 = 1
poweradd = -2000
sprpriority = 1

[State 3000] ; Shadows
type = Afterimage
trigger1 = animelem = 1
time = 60
PalBright = 0, 0, 0
PalContrast =  128,68,1
PalAdd = 0, 0, 0
PalMul = 1,1,1
Length = 25
timegap = 2
FrameGap = 7
Trans = Add1

[state nothitby]
type = nothitby
trigger1 = time >=0 && time <30
value = SCA
time = 1
ignorehitpause = 1

[state nothitby]
type = hitby
trigger1 = time >=30
value = SCA,AA,NA,SA,HA,NT,ST,HT
time = 1
ignorehitpause = 1

[State 3500, 1]
type = ReversalDef
trigger1 = animelem = 1,<=11
reversal.attr = SCA,NA,SA, AP,NP,SP,AA
hitflag = MAFPD
numhits = 0
pausetime = 10,10
sparkno = S733
hitsound = 6,0
p2stateno = 831

[State 3500]
type = PalFx
trigger1 = timemod = 3,0
trigger1 = time <= 13
trigger1 = var(11) = 1 && var(32) = 1
add = 255,255,255
time = 2

[State 3005, 4]
type = Explod
trigger1 = animelem = 9
anim = 7500
pos = 90,-70
supermove = 1
sprpriority = 7
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 3005, 4]
type = Explod
trigger1 = AnimElem = 2
anim = 6011
pos = -28,-70
supermove = 1
sprpriority = 3
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 3105, 4]
type = Explod
trigger1 = AnimElem = 2
anim = 6010
pos = -20,-67
supermove = 1
sprpriority = -3
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 6011
ID = 1495
pos = 20,-66
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1


;------------------

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 3
value = 1700,1
channel = 1

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 2
value = 3000,30
channel = 0

[State 3000]
type = Width
trigger1 = Animelemtime(4) >= 0
trigger1 = Animelemtime(10) < 0
player = 10,0

[State 3000]
type = Width
trigger1 = Animelemtime(10) >= 0
trigger1 = Animelemtime(19) < 0
player = 40,0

[STate 3500]
type = SuperPause
trigger1 = Animelem = 2
time = 30
movetime = 1
sound = s1,17
anim = -1
pos = -20,-100

[STate 3500]
type = SuperPause
trigger1 = Animelem = 7
time = 30
movetime = 2
sound = s1,17
anim = -1
pos = -20,-100

[State 3005, 4]
type = Explod
trigger1 = Animelemtime(7) = 0
anim = 3011
pos = 0,0
supermove = 1
sprpriority = 2
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 7
anim = 6050
pos = -13,-72
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1

[State 1200, Explod]
type = removeExplod
trigger1 = animelem = 9
ID = 1495

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 7
value = 3300,0
channel = 0

[State 3500]
type = Helper
trigger1 = animelem = 4,>= 0 && animelem = 8,<= 0
trigger1 = numhelper(3111) < 2
stateno = 3612
id = 3111
pos = 0,0
postype = p1
ownpal = 1
sprpriority = 3

[State 3500]
type = Helper
trigger1 = animelem = 9,>= 0 && animelem = 15,<= 0
trigger1 = numhelper(3111) < 2
stateno = 3611
id = 3111
pos = 0,0
postype = p1
ownpal = 1
sprpriority = 3

[State 3500]
type = Projectile
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElem = 6
trigger4 = AnimElem = 9
trigger5 = animelem = 10
ProjAnim = 3635
ProjID = 1005
projhitanim = 3008
ProjRemoveTime = 4
offset = 42,-63
attr = S, HP
animtype = hard
damage = 20,2
kill = 0
priority = 7, Hit
guardflag = MA
pausetime = 7,4
sparkno = S736
guard.sparkno = S733
sparkxy = (p2bodydist x)-20,-15
hitsound = S210,0
guardsound = S150,0
ground.type = high
ground.slidetime = 19
ground.hittime = 19
ground.velocity = -7
air.velocity = -3.5,-6
getpower = 20,10
givepower = 0
yaccel = .5

[State 3500]
type = Projectile
triggerall = var(50) = 0
trigger1 = AnimElem = 11
trigger2 = AnimElem = 12
trigger3 = AnimElem = 13
trigger4 = AnimElem = 14
ProjAnim = 3635
ProjID = 1006
projhitanim = 3008
ProjRemoveTime = 4
offset = 42,-63
attr = S, HP
animtype = hard
damage = 20,2
kill = 0
priority = 7, Hit
guardflag = MA
pausetime = 3,2
sparkno = S736
guard.sparkno = S733
sparkxy = (p2bodydist x)-20,0
hitsound = S210,0
guardsound = S150,0
ground.type = low
ground.slidetime = 19
ground.hittime = 19
ground.velocity = -7
air.velocity = -3.5,-6
getpower = 20,10
givepower = 0
yaccel = .5

[State 3500]
type = Projectile
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElem = 6
trigger4 = AnimElem = 9
trigger5 = animelem = 10
ProjAnim = 3635
ProjID = 1005
projhitanim = 3008
ProjRemoveTime = 4
offset = 42,-63
attr = S, HP
animtype = hard
damage = 20,2
kill = 0
priority = 7, Hit
guardflag = MA
pausetime = 7,4
sparkno = S736
guard.sparkno = S733
sparkxy = (p2bodydist x)-20,-15
hitsound = S210,0
guardsound = S150,0
ground.type = high
ground.slidetime = 19
ground.hittime = 19
ground.velocity = -7
air.velocity = -3.5,-6
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
getpower = 20,10
givepower = 0
yaccel = .5

[State 3500]
type = Projectile
triggerall = var(50) = 1
trigger1 = AnimElem = 11
trigger2 = AnimElem = 12
trigger3 = AnimElem = 13
trigger4 = AnimElem = 14
ProjAnim = 3635
ProjID = 1006
projhitanim = 3008
ProjRemoveTime = 4
offset = 42,-63
attr = S, HP
animtype = hard
damage = 20,2
kill = 0
priority = 7, Hit
guardflag = MA
pausetime = 3,2
sparkno = S736
guard.sparkno = S733
sparkxy = (p2bodydist x)-20,0
hitsound = S210,0
guardsound = S150,0
ground.type = low
ground.slidetime = 19
ground.hittime = 19
ground.velocity = -7
air.velocity = -3.5,-6
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
getpower = 20,10
givepower = 0
yaccel = .5

[State 1000, 3]
type = pause
triggerall = projcontact1005 = 1
trigger1 = animelemtime(4)>=0
trigger1 = animelemtime(7)<0
time = 7

[State 1000, 3]
type = pause
triggerall = projcontact1005 = 1
trigger1 = animelemtime(9)>=0
trigger1 = animelemtime(11)<0
time = 3

[State 1000, 3]
type = pause
trigger1 = animelemtime(11)>=0
trigger1 = animelemtime(15)<0
trigger1 = projcontact1006 = 1
time = 2

[State 3500]
type = Projectile
trigger1 = AnimElem = 15
ProjAnim = 3001
projhitanim = 3002
ProjID = 3010
projhits = 2
projshadow = 68,68,68
projpriority = 7
offset = 85, 15
velocity = 5,0
accel = 0, 0
attr = S, HP
damage = 40,15
animtype = back
getpower = 10,5
givepower = 0
guardflag = MAFP
pausetime = 3,16
sparkno = 1
guard.sparkno = S733
sparkxy = 30, -70
hitsound = S220,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = - 4,-5.5
guard.velocity = -1.5
airguard.velocity = -4.0     
air.velocity = -2.5,-5.5
air.juggle = 3
air.fall = 1
fall = 1
fall.recover = 0

[State 3500]
type = Projectile
trigger1 = AnimElem = 14
ProjAnim = 3001
projhitanim = 3002
ProjID = 3010
projhits = 2
projshadow = 68,68,68
projpriority = 7
offset = 85, 30
velocity = 5,0
accel = 0, 0
attr = S, HP
damage = 40,15
animtype = back
getpower = 10,5
givepower = 0
guardflag = MAFP
pausetime = 3,16
sparkno = 1
guard.sparkno = S733
sparkxy = 30, -70
hitsound = S220,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -1.5
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
guard.velocity = -4
airguard.velocity = -4.0     
air.velocity = -2.5,-5.5
air.juggle = 3
air.fall = 1
;fall = 1

[State 3500]
type = Projectile
trigger1 = AnimElem = 13
ProjAnim = 3001
projhitanim = 3002
ProjID = 3010
projhits = 2
projshadow = 68,68,68
projpriority = 7
offset = 85, -10
velocity = 5,0
accel = 0, 0
attr = S, HP
damage = 35,5
animtype = back
getpower = 10,5
givepower = 0
guardflag = MAFP
pausetime = 3,16
sparkno = 1
guard.sparkno = S733
sparkxy = 30, -70
hitsound = S220,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -1.5
guard.velocity = -1.5
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
airguard.velocity = -4.0     
air.velocity = -2.5,-5.5
air.juggle = 3
air.fall = 1
;fall = 1

[State 3500]
type = Projectile
trigger1 = AnimElem = 12
ProjAnim = 3001
projhitanim = 3002
ProjID = 3010
projhits = 2
projshadow = 68,68,68
projpriority = 7
offset = 85, 45
velocity = 5,0
accel = 0, 0
attr = S, HP
damage = 35,5
animtype = back
getpower = 10,5
givepower = 0
guardflag = MAFP
pausetime = 3,16
sparkno = 1
guard.sparkno = S733
sparkxy = 30, -70
hitsound = S220,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity =-1.5
guard.velocity = -1.5
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
airguard.velocity = -4.0     
air.velocity = -2.5,-5.5
air.juggle = 3
air.fall = 1
;fall = 1

[State 3500]
type = Projectile
trigger1 = AnimElem = 11
ProjAnim = 3001
projhitanim = 3002
ProjID = 3010
projhits = 2
projshadow = 68,68,68
projpriority = 7
offset = 85, -20
velocity = 5,0
accel = 0, 0
attr = S, HP
damage = 45,5
animtype = back
getpower = 10,5
givepower = 0
guardflag = MAFP
pausetime = 3,16
sparkno = 1
guard.sparkno = S733
sparkxy = 30, -70
hitsound = S220,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity =-1.5
guard.velocity = -1.5
airguard.velocity = -4.0     
air.velocity = -2.5,-5.5
air.juggle = 3
air.fall = 1
;fall = 1

[State 3500]
type = Projectile
trigger1 = AnimElem = 10
ProjAnim = 3001
projhitanim = 3002
ProjID = 3010
projshadow = 68,68,68
projpriority = 7
projhits = 2
offset = 85, 60
velocity = 5,0
accel = 0, 0
attr = S, HP
damage = 45,5
animtype = back
getpower = 10,5
givepower = 0
guardflag = MAFP
pausetime = 3,16
sparkno = 1
guard.sparkno = S733
sparkxy = 30, -70
hitsound = S220,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -1.5
guard.velocity = -1.5
airguard.velocity = -4.0     
air.velocity = -2.5,-5.5
air.juggle = 3
air.fall = 1
;fall = 1

[State 3500]
type = Projectile
trigger1 = AnimElem = 9
ProjAnim = 3001
projhitanim = 3002
ProjID = 3010
projshadow = 68,68,68
projpriority = 7
projhits = 2
offset = 85, -35
velocity = 5,0
accel = 0, 0
attr = S, HP
damage = 45,10
animtype = back
getpower = 10,5
givepower = 0
guardflag = MAFP
pausetime = 3,16
sparkno = 1
guard.sparkno = S733
sparkxy = 30, -70
hitsound = S220,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -1.5
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
guard.velocity = -1.5
airguard.velocity = -4.0     
air.velocity = -2.5,-5.5
air.juggle = 3
air.fall = 1
;fall = 1

[State 3500]
type = ChangeState 
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;***************************************************
;烈焰凤噬
;***************************************************
[Statedef 3020]
type = S
movetype = I
physics = S
juggle = 15
velset = 0,0
ctrl = 0
anim = 3020
sprpriority = 0
poweradd = -1000

[state Width]
type = Width
trigger1 = 1
edge = 0,15

[state nothitby]
type = nothitby
trigger1 = time >=0 && time <=10
value = SCA
time = 1
ignorehitpause = 1

[State 3150]
type = PalFx
trigger1 = timemod = 3,0
trigger1 = time <= 13
trigger1 = var(11) = 1 && var(32) = 1
add = 255,255,255
time = 2

[State 3205]
type = Explod
trigger1 = AnimElem = 3
anim = 3021
id = 3021
pos = 0,0
postype = p1
removetime = 999
bindtime = 999
removeongethit = 1
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1

[STate 3700]
type = PlaySNd
trigger1 = Animelem = 3
value = 3000,20
channel = 0
persistent = 0

[STate 3700]
type = PlaySNd
trigger1 = Animelem = 3
value = 2995,55
persistent = 0

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 6000
pos = -16,-96
postype = p1
sprpriority = -3
supermove = 1
bindtime = 1
ownpal = 1

[State 3205]
type = Explod
trigger1 = AnimElem = 3
anim = 6001
pos = -16,-96
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1

[State 3625]
type = Explod
trigger1 = time = 1
anim = 737
ID = 737
sprpriority = -2
postype = p1
pos = 0,0
bindtime = 999
supermove = 1
removeongethit = 1
removetime = -1
ownpal = 1

[State 3625]
type = Explod
trigger1 = time = 1
anim = 737
ID = 737
sprpriority = 2
postype = p1
pos = 0,0
facing = -1
bindtime = 999
supermove = 1
removeongethit = 1
removetime = -1
ownpal = 1

[STate 3700]
type = SuperPause
trigger1 = Animelem = 3
time = 30
movetime = 30
sound = s1,17
anim = -1

[State Land]
type = ChangeState
triggerall = var(59) = 1
triggerall = time >= 35
trigger1 = p2movetype = H
trigger2 = time > 200
trigger3 = random < 100
value = 3025
ctrl = 0

[State Land]
type = ChangeState
triggerall = time >= 35
trigger1 = command != "hold_x"
trigger1 = command != "hold_y"
trigger2 = time > 200
value = 3025
ctrl = 0

[Statedef 3025]
type = S
movetype = A
physics = S
juggle = 15
velset = 0,0
ctrl = 0
anim = 3025
sprpriority = 0

[state Width]
type = Width
trigger1 = time = [0,40]
edge = 15,15
player = 15,15

[State 3205]
type = removeExplod
trigger1 = AnimElem = 1
id = 3021

[State 3205]
type = removeExplod
trigger1 = AnimElem = 4
id = 737

[STate 3700]
type = velset
trigger1 = Animelemtime(4) = 4
x = 15

[STate 3700]
type = PlaySNd
trigger1 = Animelem = 4
value = 2995,51
persistent = 0

[STate 3700]
type = PlaySNd
trigger1 = Animelem = 5
value = 3300,0
persistent = 0

[State 3205]
type = Explod
trigger1 = Animelemtime(4) = 4
anim = 3026
pos = 15,25
postype = p1
sprpriority = 3
removeongethit = 1
bindtime = 99
supermove = 1
bindtime = 1
ownpal = 1

[State 3205]
type = Explod
trigger1 = Animelemtime(5) = 1
anim = 3027
pos = 10,5
postype = p1
sprpriority = 3
removeongethit = 1
bindtime = 99
supermove = 1
bindtime = 1
ownpal = 1

[State 3205]
type = Explod
trigger1 = Animelemtime(4) = 4
anim = 3022
pos = 30,40
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1

[State 3500]
type = Projectile
triggerall = var(50) = 0
trigger1 = AnimElemtime(5) = 4
ProjAnim = 3026
projhitanim = 3026
ProjID = 3026
projhits = 1
ProjRemoveTime = 40
projshadow = 68,68,68
projpriority = 7
offset = 10, 0
velocity = 0,0
accel = 0, 0
attr = S, HP
damage = 200+random/10,65
animtype = back
getpower = 10,5
givepower = 0
guardflag = MAFP
pausetime = 0,30
guard.pausetime = 0,18
sparkno = 1
guard.sparkno = S733
sparkxy = 30, -60
hitsound = S3305,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 28
ground.hittime = 30
ground.velocity =-1.5,-7
guard.velocity = -18
airguard.velocity = -4.0     
air.velocity = -2.5,-5.5
air.juggle = 3
fall = 1
fall.recover = 0
id = 10001
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State 3500]
type = Projectile
triggerall = var(50) = 0
trigger1 = AnimElemtime(5) = 5
ProjAnim = 3027
projhitanim = 3027
ProjID = 3026
projhits = 1
ProjRemoveTime = 46
projshadow = 68,68,68
projpriority = 7
offset = 20, 0
velocity = .25,0
accel = 0, 0
attr = S, HP
damage = 200+random/10,65
animtype = back
getpower = 10,5
givepower = 0
guardflag = MAFP
pausetime = 0,30
guard.pausetime = 0,18
sparkno = 1
guard.sparkno = S733
sparkxy = 30, -50
hitsound = S3305,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 28
ground.hittime = 30
ground.velocity =-1.5,-7
guard.velocity = -18
airguard.velocity = -4.0     
air.velocity = -2.5,-5.5
air.juggle = 3
fall = 1
fall.recover = 0
id = 10001
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State 3500]
type = Projectile
triggerall = var(50) = 1
trigger1 = AnimElemtime(5) = 4
ProjAnim = 3026
projhitanim = 3026
ProjID = 3026
projhits = 1
ProjRemoveTime = 40
projshadow = 68,68,68
projpriority = 7
offset = 10, 0
velocity = 0,0
accel = 0, 0
attr = S, HP
damage = 200+random/10,65
animtype = back
getpower = 10,5
givepower = 0
guardflag = MAFP
pausetime = 0,30
guard.pausetime = 0,18
sparkno = 1
guard.sparkno = S733
sparkxy = 30, -60
hitsound = S3305,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 28
ground.hittime = 30
ground.velocity =-1.5,-7
guard.velocity = -18
airguard.velocity = -4.0     
air.velocity = -2.5,-5.5
air.juggle = 3
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
fall = 1
fall.recover = 0
id = 10001
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State 3500]
type = Projectile
triggerall = var(50) = 1
trigger1 = AnimElemtime(5) = 5
ProjAnim = 3027
projhitanim = 3027
ProjID = 3026
projhits = 1
ProjRemoveTime = 46
projshadow = 68,68,68
projpriority = 7
offset = 20, 0
velocity = .25,0
accel = 0, 0
attr = S, HP
damage = 200+random/10,65
animtype = back
getpower = 10,5
givepower = 0
guardflag = MAFP
pausetime = 0,30
guard.pausetime = 0,18
sparkno = 1
guard.sparkno = S733
sparkxy = 30, -50
hitsound = S3305,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 28
ground.hittime = 30
ground.velocity =-1.5,-7
guard.velocity = -18
airguard.velocity = -4.0     
air.velocity = -2.5,-5.5
air.juggle = 3
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
fall = 1
fall.recover = 0
id = 10001
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State pause]
type = pause
trigger1 = NumTarget(10001) > 0
trigger1 = animelemtime(1)>=0
trigger1 = animelemtime(14) <0
time = 1

[State Land]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;***************************************************
;烈焰凤噬
;***************************************************
[Statedef 3030]
type = S
movetype = A
physics = S
juggle = 15
velset = 0,0
ctrl = 0
anim = 3030
sprpriority = 0
poweradd = -2000

[state Width]
type = Width
trigger1 = 1
edge = 0,15

[state nothitby]
type = nothitby
trigger1 = time >=0 && time <=10
value = SCA
time = 1
ignorehitpause = 1

[State 3150]
type = PalFx
trigger1 = timemod = 3,0
trigger1 = time <= 13
trigger1 = var(11) = 1 && var(32) = 1
add = 255,255,255
time = 2

[State 3205]
type = Explod
trigger1 = AnimElem = 3
anim = 3021
id = 3021
pos = 0,0
postype = p1
removetime = 999
bindtime = 999
removeongethit = 1
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1

[State 3500]
type = HitDef
triggerall = var(50) = 0
trigger1 = hitcount < 3
trigger1 = time%3 =1 
attr = S, HP
damage = 10+random/15,15
animtype = back
getpower = 10,5
givepower = 0
guardflag = MAFP
pausetime = 6,6
guard.pausetime = 6,6
guard.sparkno = S733
sparkxy = -15,-70
hitsound = S3305,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 28
ground.hittime = 30
ground.velocity = ifelse(hitcount=2,-3,0),-7
guard.velocity = -18
airguard.velocity = -4.0     
air.velocity = ifelse(hitcount=2,-3,0),-6.5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -3
air.juggle = 3
fall = 1
fall.recover = 0
id = 10001
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State 3500]
type = HitDef
triggerall = var(50) = 1
trigger1 = hitcount < 3
trigger1 = time%3 =1 
attr = S, HP
damage = 10+random/15,15
animtype = back
getpower = 10,5
givepower = 0
guardflag = MAFP
pausetime = 6,6
guard.pausetime = 6,6
guard.sparkno = S733
sparkxy = -15,-70
hitsound = S3305,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 28
ground.hittime = 30
ground.velocity = ifelse(hitcount=2,-3,0),-7
guard.velocity = -18
airguard.velocity = -4.0     
air.velocity = ifelse(hitcount=2,-3,0),-6.5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -3
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.juggle = 3
fall = 1
fall.recover = 0
id = 10001
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[STate 3700]
type = PlaySNd
trigger1 = Animelem = 3
value = 3000,30
channel = 0
persistent = 0

[STate 3700]
type = PlaySNd
trigger1 = Animelem = 3
value = 2995,55
persistent = 0

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 6010
pos = -16,-96
postype = p1
sprpriority = -3
supermove = 1
bindtime = 1
ownpal = 1

[State 3205]
type = Explod
trigger1 = AnimElem = 3
anim = 6011
pos = -16,-96
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1

[State 3625]
type = Explod
trigger1 = time = 1
anim = 737
ID = 737
sprpriority = -2
postype = p1
pos = 0,0
bindtime = 999
supermove = 1
removeongethit = 1
removetime = -1
ownpal = 1

[State 3625]
type = Explod
trigger1 = time = 1
anim = 737
ID = 737
sprpriority = 2
postype = p1
pos = 0,0
facing = -1
bindtime = 999
supermove = 1
removeongethit = 1
removetime = -1
ownpal = 1

[STate 3700]
type = SuperPause
trigger1 = Animelem = 3
time = 30
movetime = 30
sound = s1,17
anim = -1

[State pause]
type = pause
trigger1 = NumTarget(10001) > 0
time = 1

[State Land]
type = ChangeState
triggerall = var(59) = 1
triggerall = time >= 35
trigger1 = p2movetype = H
trigger2 = time > 200
trigger3 = random < 100
value = 3035
ctrl = 0

[State Land]
type = ChangeState
triggerall = time >= 35
trigger1 = command != "hold_x"
trigger1 = command != "hold_y"
trigger2 = time > 200
value = 3035
ctrl = 0

[Statedef 3035]
type = S
movetype = A
physics = S
juggle = 15
velset = 0,0
ctrl = 0
anim = 3035
sprpriority = 0

[state Width]
type = Width
trigger1 = time = [0,40]
edge = 15,15
player = 15,15

[State 3205]
type = removeExplod
trigger1 = AnimElem = 1
id = 3021

[State 3205]
type = removeExplod
trigger1 = AnimElem = 4
id = 737

[STate 3700]
type = velset
trigger1 = Animelemtime(4) = 4
x = 15

[STate 3700]
type = PlaySNd
trigger1 = Animelem = 4
value = 2995,51
persistent = 0

[STate 3700]
type = PlaySNd
trigger1 = Animelem = 5
value = 3300,0
persistent = 0

[State 3205]
type = Explod
trigger1 = Animelemtime(4) = 4
anim = 3026
pos = 15,25
postype = p1
sprpriority = 3
removeongethit = 1
bindtime = 99
supermove = 1
bindtime = 1
ownpal = 1

[State 3205]
type = Explod
trigger1 = Animelemtime(5) = 1
anim = 3027
pos = 10,5
postype = p1
sprpriority = 3
removeongethit = 1
bindtime = 99
supermove = 1
bindtime = 1
ownpal = 1

[State 3205]
type = Explod
trigger1 = Animelemtime(4) = 4
anim = 3022
pos = 30,40
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1

[State 3500]
type = Projectile
triggerall = var(50) = 0
trigger1 = AnimElemtime(5) = 3
ProjAnim = 3026
projhitanim = 3026
ProjID = 3026
projhits = 1
ProjRemoveTime = 40
projshadow = 68,68,68
projpriority = 7
offset = 10, 0
velocity = 0,0
accel = 0, 0
attr = S, HP
damage = 250+random/10,65
animtype = back
getpower = 10,5
givepower = 0
guardflag = MAFP
pausetime = 0,30
guard.pausetime = 0,18
sparkno = 1
guard.sparkno = S733
sparkxy = 30, -60
hitsound = S3305,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 28
ground.hittime = 30
ground.velocity =-1.5,-7
guard.velocity = -18
airguard.velocity = -4.0     
air.velocity = -2.5,-5.5
air.juggle = 3
fall = 1
fall.recover = 0
id = 10001
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State 3500]
type = Projectile
triggerall = var(50) = 0
trigger1 = AnimElemtime(5) = 3
ProjAnim = 3027
projhitanim = 3027
ProjID = 3026
projhits = 1
ProjRemoveTime = 46
projshadow = 68,68,68
projpriority = 7
offset = 20, 0
velocity = .25,0
accel = 0, 0
attr = S, HP
damage = 150+random/15,45
animtype = back
getpower = 10,5
givepower = 0
guardflag = MAFP
pausetime = 0,30
guard.pausetime = 0,18
sparkno = 1
guard.sparkno = S733
sparkxy = 30, -50
hitsound = S3305,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 28
ground.hittime = 30
ground.velocity =-1.5,-7
guard.velocity = -18
airguard.velocity = -4.0     
air.velocity = -2.5,-5.5
air.juggle = 3
fall = 1
fall.recover = 0
id = 10001
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State 3500]
type = Projectile
triggerall = var(50) = 0
trigger1 = AnimElemtime(10) = 3
ProjAnim = 3027
projhitanim = 3027
ProjID = 3026
projhits = 1
ProjRemoveTime = 46
projshadow = 68,68,68
projpriority = 7
offset = 25, 0
velocity = .25,0
accel = 0, 0
attr = S, HP
damage = 150+random/15,45
animtype = back
getpower = 10,5
givepower = 0
guardflag = MAFP
pausetime = 0,30
guard.pausetime = 0,18
sparkno = 1
guard.sparkno = S733
sparkxy = 30, -50
hitsound = S3305,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 28
ground.hittime = 30
ground.velocity =-1.5,-7
guard.velocity = -18
airguard.velocity = -4.0     
air.velocity = -2.5,-5.5
air.juggle = 3
fall = 1
fall.recover = 0
id = 10001
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State 3500]
type = Projectile
triggerall = var(50) = 0
trigger1 = AnimElemtime(14) = 3
ProjAnim = 3027
projhitanim = 3027
ProjID = 3026
projhits = 1
ProjRemoveTime = 46
projshadow = 68,68,68
projpriority = 7
offset = 33, 0
velocity = .25,0
accel = 0, 0
attr = S, HP
damage = 150+random/10,45
animtype = back
getpower = 10,5
givepower = 0
guardflag = MAFP
pausetime = 0,30
guard.pausetime = 0,18
sparkno = 1
guard.sparkno = S733
sparkxy = 30, -50
hitsound = S3305,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 28
ground.hittime = 30
ground.velocity =-1.5,-7
guard.velocity = -18
airguard.velocity = -4.0     
air.velocity = -2.5,-5.5
air.juggle = 3
fall = 1
fall.recover = 0
id = 10001
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

;----------------------

[State 3500]
type = Projectile
triggerall = var(50) = 1
trigger1 = AnimElemtime(5) = 3
ProjAnim = 3026
projhitanim = 3026
ProjID = 3026
projhits = 1
ProjRemoveTime = 40
projshadow = 68,68,68
projpriority = 7
offset = 10, 0
velocity = 0,0
accel = 0, 0
attr = S, HP
damage = 250+random/10,65
animtype = back
getpower = 10,5
givepower = 0
guardflag = MAFP
pausetime = 0,30
guard.pausetime = 0,18
sparkno = 1
guard.sparkno = S733
sparkxy = 30, -60
hitsound = S3305,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 28
ground.hittime = 30
ground.velocity =-1.5,-7
guard.velocity = -18
airguard.velocity = -4.0     
air.velocity = -2.5,-5.5
air.juggle = 3
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
fall = 1
fall.recover = 0
id = 10001
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State 3500]
type = Projectile
triggerall = var(50) = 1
trigger1 = AnimElemtime(5) = 3
ProjAnim = 3027
projhitanim = 3027
ProjID = 3026
projhits = 1
ProjRemoveTime = 46
projshadow = 68,68,68
projpriority = 7
offset = 20, 0
velocity = .25,0
accel = 0, 0
attr = S, HP
damage = 150+random/15,45
animtype = back
getpower = 10,5
givepower = 0
guardflag = MAFP
pausetime = 0,30
guard.pausetime = 0,18
sparkno = 1
guard.sparkno = S733
sparkxy = 30, -50
hitsound = S3305,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 28
ground.hittime = 30
ground.velocity =-1.5,-7
guard.velocity = -18
airguard.velocity = -4.0     
air.velocity = -2.5,-5.5
air.juggle = 3
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
fall = 1
fall.recover = 0
id = 10001
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State 3500]
type = Projectile
triggerall = var(50) = 1
trigger1 = AnimElemtime(10) = 3
ProjAnim = 3027
projhitanim = 3027
ProjID = 3026
projhits = 1
ProjRemoveTime = 46
projshadow = 68,68,68
projpriority = 7
offset = 25, 0
velocity = .25,0
accel = 0, 0
attr = S, HP
damage = 150+random/15,45
animtype = back
getpower = 10,5
givepower = 0
guardflag = MAFP
pausetime = 0,30
guard.pausetime = 0,18
sparkno = 1
guard.sparkno = S733
sparkxy = 30, -50
hitsound = S3305,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 28
ground.hittime = 30
ground.velocity =-1.5,-7
guard.velocity = -18
airguard.velocity = -4.0     
air.velocity = -2.5,-5.5
air.juggle = 3
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
fall = 1
fall.recover = 0
id = 10001
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State 3500]
type = Projectile
triggerall = var(50) = 1
trigger1 = AnimElemtime(14) = 3
ProjAnim = 3027
projhitanim = 3027
ProjID = 3026
projhits = 1
ProjRemoveTime = 46
projshadow = 68,68,68
projpriority = 7
offset = 33, 0
velocity = .25,0
accel = 0, 0
attr = S, HP
damage = 150+random/10,45
animtype = back
getpower = 10,5
givepower = 0
guardflag = MAFP
pausetime = 0,30
guard.pausetime = 0,18
sparkno = 1
guard.sparkno = S733
sparkxy = 30, -50
hitsound = S3305,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 28
ground.hittime = 30
ground.velocity =-1.5,-7
guard.velocity = -18
airguard.velocity = -4.0     
air.velocity = -2.5,-5.5
air.juggle = 3
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
fall = 1
fall.recover = 0
id = 10001
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State pause]
type = pause
trigger1 = NumTarget(10001) > 0
trigger1 = animelemtime(1)>=0
trigger1 = animelemtime(18) <0
time = 1

[State Land]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;***************************************************
;魔龙钢裂拳.空
;***************************************************
[Statedef 3100]
type = A
movetype = A
physics = N
juggle = 15
ctrl = 0
poweradd = -1000
sprpriority = 1
anim = 3100

[State 3700]
type = varSet
triggerall = power >= 3000
trigger1 = time = 0
trigger1 = var(59) = 1
var(29) = 3

[State 3700]
type = varSet
trigger1 = time = 0
var(39) = 0

[State 3700]
type = varadd
trigger1 = animelemtime(5) = 1
var(30) = 1

[State 3150] ; Shadows
type = Afterimage
trigger1 = animelem = 4
time = 55
PalBright = 0, 0, 0
PalContrast =  128,68,1
PalAdd = 0, 0, 0
PalMul = 1,1,1
Length = 25
FrameGap = 7
Trans = Add1

[STate 3700]
type = SuperPause
trigger1 = Animelem = 2
time = 30
movetime = 1
sound = s1,17
anim = -1
pos = -20,-100

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 1495
ID = 1495
pos = 15,23
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = var(29) = 0
trigger1 = AnimElem = 2
anim = 6000
pos = -10,-90
postype = p1
sprpriority = -3
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = var(29) = 0
trigger1 = AnimElem = 2
anim = 6001
pos = -10,-90
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = prevstateno != 3100
trigger1 = var(29) > 0
trigger1 = AnimElem = 2
anim = 6010
pos = -10,-90
postype = p1
sprpriority = -3
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = prevstateno != 3100
trigger1 = var(29) > 0
trigger1 = AnimElem = 2
anim = 6011
pos = -10,-90
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = prevstateno = 3100
trigger1 = AnimElem = 2
anim = 6011
pos = -10,-90
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = removeExplod
trigger1 = animelem = 4
ID = 1495

[State 3700]
type = AfterImage
trigger1 = prevstateno = [55,56]
trigger1 = Time = 0 && Vel X!= 0
time = 20
length = 8
trans = add1

[State 3700, 3]
type = velset
trigger1 = animelem = 1
y = -.3

[State 3700, 3]
type = velset
trigger1 = animelem = 3
y = -7.9
x = -1.8

[State Gravity]
type = VelAdd
trigger1 = vel Y != 0
y = .42

[State 3700]
type = varSet
triggerall = var(30) = 0
trigger1 = Movecontact
var(30) = 1

[STate 3700]
type = PlaySNd
trigger1 = Animelem = 3 && (var(29) = 0 || var(29) = 4)&& (pos y < -10)
value = 3050,0
channel = 0
persistent = 0

[STate 3700]
type = PlaySNd
trigger1 = Animelem = 3 && (var(29) != 0 && var(29) != 4) && (pos y < -10)
value = 2995,51
persistent = 0

[State 3205]
type = helper
trigger1 = AnimElem = 4
ID = 3628
pos = 70,-65
stateno = 3101
ownpal = 1

[State 3700, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,1

[State 3700]
type = PlaySnd
Trigger1 = var(29)=0
trigger1 = animelem = 2
value = 3000,20

[State 3700]
type = PlaySnd
trigger1 = prevstateno != 3100
Trigger1 = var(29)>0
trigger1 = animelem = 2
value = 3000,30

[State -3, AIfight]
type = Varadd
Trigger1 = var(29)>0
trigger1 = animelemtime(5) = 1
var(29) = -1
ignorehitpause = 1

[State ChangeState]
type = ChangeState
triggerall = var(39) < 3
trigger1 = animelemtime(6) = 1
trigger1 = var(29)> 1
trigger1 = power >= 1000
trigger1 = pos y > -200
value = 3100
ctrl = 0

[State Land]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 10
value = 3105
ctrl = 0

[StateDef 3105]
type = S
movetype = A
physics = S
anim = 3105
velset = 0,0
ctrl = 0

[State 1706]
type = varset
trigger1 = Time = 0
trigger1 = var(29) = 4
var(29) = 3

[State 1706]
type = posset
trigger1 = Time = 0
y = 0

[state 1706]
type = velset
trigger1 = animelem = 1
x = -5

[State 1706, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1
;============================================================================================================
;魔龙列破代码结束
;============================================================================================================




;============================================================================================================
;龙牙之舞代码系列
;============================================================================================================
;*****************************************************************
;龙牙之舞
;*****************************************************************
[Statedef 3200]
type = S
movetype = A
physics = S
anim = 3200
poweradd = -1000
juggle = 8
velset = 0,0
ctrl = 0

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 3
value = 2995,60
channel = 2

[State 399, EnvShake]
type = EnvShake
trigger1 = animelem = 4
ignorehitpause = 1
persistent = 0
time = 15
freq = 100
ampl = -2
phase = 1

[STate 3205]
type = SuperPause
trigger1 = Animelem = 1
time = 50
movetime = 45
sound = s1,17
anim = -1
pos = -20,-100

[State 3005, 4]
type = Explod
trigger1 = animelemtime(3) = 5
anim = 6001
pos = 25,-100
supermove = 1
sprpriority = 3
bindtime = 1
ownpal = 1

[State 3005, 4]
type = Explod
trigger1 = animelemtime(3) = 5
anim = 6000
pos = 25,-100
supermove = 1
sprpriority = -3
bindtime = 1
ownpal = 1

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 2
value = 800,2
channel = 0

[State 117]
type = ChangeState
trigger1 = AnimTime = 0
value = 3201
ctrl = 0
;----------------------------------------------
;前冲
;----------------------------------------------
[Statedef 3201]
type = S
movetype = A
physics = S
anim = 3201
poweradd = 50
velset = 0,0
ctrl = 0

[State 3000] ; Shadows
type = Afterimage
trigger1 = animelem = 1
time = 60
PalBright = 0, 0, 0
PalContrast =  128,68,1
PalAdd = 0, 0, 0
PalMul = 1,1,1
Length = 20
FrameGap = 5
Trans = Add1

[state hitby]
type = nothitby
trigger1 = time = [0,20]
value = SCA
time=1
ignorehitpause = 1

[state hitby]
type = hitby
trigger1 = time > 20
value = SCA,SA,NA,HA
time=1
ignorehitpause = 1

[State 4000, 1]
type = HitDef
;triggerall = p2bodydist y > -6
trigger1 = time = 0   
attr = SC,HA
damage = 0
animtype = hard
guard.sparkno = -1
sparkno = -1
sparkxy = 0,-45
guardflag = M
id = 4898
hitonce = 1
hitflag = MAF
guard.pausetime = 3,15
pausetime = 1,1
hitsound = S20,2
guardsound = s1,0
p2facing = 1
p1stateno = 3202
p2stateno = 4916                       

[State 117]
type = SprPriority
trigger1 = Time = 8
value = -1

[State 117]
type = VelSet
trigger1 = time = [0,30]
x = 7

[State 1701]
type = posadd
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
x = 12

[State 1701]
type = veladd
trigger1 = time = [3,9]
x = 2

[State 1701]
type = veladd
trigger1 = time = [10,20]
x = 5

[State 1701]
type = veladd
trigger1 = time = [21,30]
x = -2

[State 117]
type = ChangeState
trigger1 = moveguarded = 1
trigger2 = frontedgedist = 0
value = 105
ctrl = 0

[State 117]
type = ChangeState
trigger1 = Time = 30
value = 3204
ctrl = 0
;----------------------------------------------
;一段攻击
;----------------------------------------------
[Statedef 3202]
type = S
movetype = A
physics = S
anim = 3202
velset = 0
ctrl = 0
facep2 = 1
poweradd = 50

[state Width]
type = Width
trigger1 = time = 0
edge = 45,0

[State 117]
type = targetState
trigger1 = animelem = 2
trigger2 = animelem = 5
value = 4925

[State 117]
type = targetState
trigger1 = animelem = 8
trigger2 = animelem = 10
value = 4925

[State 3000] ; Shadows
type = Afterimage
trigger1 = animelem = 1
time = 0
PalBright = 0, 0, 0
PalContrast =  128,68,1
PalAdd = 0, 0, 0
PalMul = 1,1,1
Length = 25
FrameGap = 10
Trans = Add1

[State 4899,1]
type = statetypeset
trigger1 = 1
facep2 = 1

[State 371, 1]
type = TargetBind
trigger1 = 1
pos = 45,0

[State 117]
type = VelSet
trigger1 = frontedgedist < 30
trigger1 = p2bodydist x <= 10
x = -3

[State 400, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 4000,0

[State 400, 2]
type = PlaySnd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 5
trigger3 = AnimElem = 8
trigger4 = AnimElem = 10
value = 210,0

[State 3205]
type = Explod
trigger1 = AnimElem = 8
trigger2 = AnimElem = 10
anim = 735
pos = 50,-90
random = 10,10
supermove = 1
sprpriority = 2
bindtime = 1
ownpal = 1

[State 3205]
type = Explod
trigger1 = AnimElem = 2
trigger2 = AnimElem = 5
anim = 736
pos = 50,-70
random = 10,10
supermove = 1
sprpriority = 2
bindtime = 1
ownpal = 1

[State 399, hitAdd]
type = hitAdd
trigger1 = animelem = 2
trigger2 = animelem = 5
trigger3 = animelem = 8
trigger4 = animelem = 10
value = 1

[State 399, LifeAdd]
type = targetLifeAdd
trigger1 = animelem = 2
trigger2 = animelem = 5
trigger3 = animelem = 8
value = -1
kill = 0

[State 399, LifeAdd]
type = targetLifeAdd
trigger1 = animelem = 10
value = -20
kill = 0

[State 117]
type = ChangeState
trigger1 = p2stateno != [4900,9999]
value = 3201
ctrl = 0

[State 2979]
type = ChangeState 
trigger1 = AnimTime = 0
value = 3203
ctrl = 1
;----------------------------------------------
;二段攻击
;----------------------------------------------
[Statedef 3203]
type = S
movetype = A
physics = S
anim = 3203
velset = 0
ctrl = 0
facep2 = 1
poweradd = 50

[state Width]
type = Width
trigger1 = time = 0
edge = 45,0

[State 117]
type = nothitby
trigger1 = 1
value = sac
time = 1

[State 117]
type = targetState
trigger1 = animelem = 2
trigger2 = animelem = 5
value = 4915

[State 117]
type = targetState
trigger1 = animelem = 5
trigger2 = animelem = 9
trigger3 = animelem = 13
trigger4 = animelem = 18
trigger5 = animelem = 41
trigger6 = animelem = 47
trigger7 = animelem = 56
value = 4916

[State 117]
type = targetState
trigger1 = animelem = 17
trigger2 = animelem = 24
trigger3 = animelem = 27
trigger4 = animelem = 29
value = 4925

[State 117]
type = targetState
trigger1 = animelem = 17
trigger2 = animelem = 19
trigger3 = animelem = 32
value = 4926

[State 4900,1]
type = statetypeset
trigger1 = 1
facep2 = 1

[State 371, 1]
type = TargetBind
trigger1 = animelemtime(1)>=0
trigger1 = animelemtime(61)<0
pos = 45,0

[State 400, 2]
type = PlaySnd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 24
trigger3 = AnimElem = 27
trigger4 = AnimElem = 29
value = 210,0

[State 400, 2]
type = PlaySnd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 9
trigger3 = AnimElem = 13
trigger4 = AnimElem = 18
trigger5 = AnimElem = 19
trigger6 = AnimElem = 32
value = 220,0

[State 400, 2]
type = PlaySnd
trigger1 = AnimElem = 41
trigger2 = AnimElem = 47
trigger3 = AnimElem = 56
value = 200,0

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 60
value = 2995,60
channel = 0

[State 3205]
type = Explod
trigger1 = AnimElem = 2
anim = 735
pos = 50,-90
random = 10,10
supermove = 1
sprpriority = 2
bindtime = 1
ownpal = 1

[State 3205]
type = Explod
trigger1 = AnimElem = 24
trigger2 = AnimElem = 27
anim = 735
pos = 50,-10
supermove = 1
sprpriority = 2
bindtime = 1
ownpal = 1

[State 3205]
type = Explod
trigger1 = AnimElem = 13
trigger2 = AnimElem = 19
trigger3 = AnimElem = 29
trigger4 = AnimElem = 32
anim = 736
pos = 50,-70
supermove = 1
sprpriority = 2
bindtime = 1
ownpal = 1

[State 3205]
type = Explod
trigger1 = AnimElem = 5
trigger2 = AnimElem = 9
trigger3 = AnimElem = 18
trigger4 = AnimElem = 41
trigger5 = AnimElem = 47
trigger6 = AnimElem = 56
anim = 736
pos = 50,-100
supermove = 1
sprpriority = 2
bindtime = 1
ownpal = 1

[State 399, hitAdd]
type = hitAdd
trigger1 = animelem = 2
trigger2 = animelem = 5
trigger3 = animelem = 9
trigger4 = animelem = 13
trigger5 = animelem = 18
trigger6 = animelem = 19
trigger7 = animelem = 24
trigger8 = animelem = 27
trigger9 = animelem = 29
trigger10 = animelem = 32
trigger11 = animelem = 40
trigger12 = animelem = 46
trigger13 = animelem = 54
trigger14 = animelem = 62
value = 1

[State 399, LifeAdd]
type = targetLifeAdd
trigger1 = animelem = 2
trigger2 = animelem = 5
trigger3 = animelem = 9
trigger4 = animelem = 13
trigger5 = animelem = 18
trigger6 = animelem = 19
trigger7 = animelem = 24
trigger8 = animelem = 27
trigger9 = animelem = 29
trigger10 = animelem = 32
value = ifelse(random>700,-10,ifelse(random>700,-6,-8))
kill = 0

[State 399, LifeAdd]
type = targetLifeAdd
trigger1 = animelem = 40
trigger2 = animelem = 46
trigger3 = animelem = 56
value = ifelse(random>700,-40,ifelse(random>700,-20,-30))
kill = 0

[State 399, LifeAdd]
type = targetLifeAdd
trigger1 = animelem = 62
value = ifelse(random>700,-80,ifelse(random>700,-40,-60))

[State 399, LifeAdd]
type = targetLifeAdd
trigger1 = animelem = 62
value = ifelse(random>700,-100,ifelse(random>700,-60,-80))

[State 399, LifeAdd]
type = targetstate
triggerall = target,stateno != 4927
trigger1 = animelem = 62
value = 4927

[State 400, 2]
type = PlaySnd
trigger1 = Animelem = 62
value = 2200,1

[State 1200, Explod]
type = Explod
trigger1 = Animelem = 62
anim = 734
pos = 50,-90
postype = p1
sprpriority = 4
supermove = 1
pasuemovetime = 999
bindtime = 1
ownpal = 1

[state Projectile]
type = Projectile
triggerall = var(50) = 0
trigger1 = AnimElem = 62
ProjAnim = 3205
ProjID = 1005
projhitanim = 3205
ProjRemoveTime = 10
offset = 0,0
attr = S,SA
hitflag = MAF
guardflag = 
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 10
damage = ifelse(random<500,20,30),25
sparkno = S734
guard.sparkno = S733
sparkxy = 50,-90
hitsound = S2200,1
guardsound = S150,1
pausetime = 3,1
animtype = Hard
guard.hittime = 16
guard.velocity = -4
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -4,-6
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
p2stateno = 4927
id = 1000
air.hittime = 14
air.velocity = -4,-7
air.type = High
air.recover = 0
air.juggle = 12
fall.recover = 0
fall = 1
palfx.time = 55
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[State 3000]
type = Projectile
triggerall = fvar(10) = 1
trigger1 = AnimElem = 62
ProjAnim = 3205
ProjID = 1005
projhitanim = 3205
ProjRemoveTime = 10
offset = 0,0
attr = S,SA
hitflag = MAF
guardflag = 
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 10
damage = ifelse(random<500,20,30),25
sparkno = S734
guard.sparkno = S733
sparkxy = 50,-90
hitsound = S2200,1
guardsound = S150,1
pausetime = 3,1
animtype = Hard
guard.hittime = 16
guard.velocity = -4
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -4,-6
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
p2stateno = 4927
id = 10001
air.hittime = 14
air.velocity = -4,-7
air.type = High
air.recover = 0
air.juggle = 12
fall.recover = 0
fall = 1
palfx.time = 55
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[state pause]
type = pause
trigger1 = AnimElem = 62
time = 18
persistent = 0

[State 1200, Explod]
type = Explod
trigger1 = numtarget(1000) > 0
trigger1 = time%19 = 0
trigger1 = random < 500
anim = 6212
pos = 0,0
postype = p2
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = numtarget(1000) > 0
trigger1 = time%19 = 0
trigger1 = random < 500
anim = 6213
pos = 0,0
postype = p2
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = numtarget(1000) > 0
trigger1 = time%19 = 0
trigger1 = random < 500
anim = 6214
pos = 0,0
postype = p2
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = playsnd
trigger1 = numtarget(1000) > 0
value = 4040,0
persistent = 0

[State 1200, Explod]
type = playsnd
trigger1 = numtarget(10001) > 0
value = 3305,1
persistent = 0

[State 1200, Explod]
type = Explod
trigger1 = animelem = 66
anim = 395
pos = 0,0
postype = p1
sprpriority = -3
ownpal = 1

[State 399, EnvShake]
type = EnvShake
trigger1 = animelem = 62
trigger2 = animelem = 66
ignorehitpause = 1
time = 25
freq = 100
ampl = -5
phase = 1

[State 3600, env]
type = EnvColor
trigger1 = animelem = 62
value = 255,ifelse(fvar(10)=0,255,1),ifelse(fvar(10)=0,255,1)
time = 20
under = 1

[State 3000] ; Shadows
type = Afterimage
trigger1 = animelem = 58
time = 30
PalBright = 0, 0, 0
PalContrast =  128,68,1
PalAdd = 0, 0, 0
PalMul = 1,1,1
Length = 25
FrameGap = 10
Trans = Add1



[State 400, 2]
type = PlaySnd
trigger1 = Animelem = 66
value = 240,0
channel = 0

[state 3150]
type = statetypeset
trigger1 = AnimElem = 61
statetype = A
physics = N

[state 3150]
type = statetypeset
trigger1 = AnimElem = 66
statetype = S
physics = S

[state 3150]
type = velset
trigger1 = AnimElem = 61
x = 3
y = -3

[state 3150]
type = veladd
trigger1 = AnimElemtime(61) >= 0
trigger1 = AnimElemtime(66) < 0
y = .15

[state 3150]
type = velset
trigger1 = AnimElem = 66
x = 0
y = 0

[state 3150]
type = posset
trigger1 = AnimElem = 66
y = 0

[state 3150]
type = varset
trigger1 = time = 226
var(33) = 1

[State 2979]
type = ChangeState 
trigger1 = p2bodydist x >= 30
trigger1 = time= [10,152]
value = 3201
ctrl = 0

[State 117]
type = ChangeState
trigger1 = p2stateno != [4900,9999]
trigger1 = time= [10,152]
value = 3201
ctrl = 0

[State 2979]
type = ChangeState 
trigger1 = AnimTime = 0
trigger2 = time= [0,252]
trigger2 = p2stateno = [5060,5172]
value = 0
ctrl = 1
;----------------------------------------------
;滚到o(s□t)o
;----------------------------------------------
[Statedef 3204]
type = S
movetype = A
physics = S
anim = 3204
poweradd = 0
velset = 0,0
ctrl = 0

[State 1701]
type = velset
trigger1 = time = [0,35]
x = 2

[State 400, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 5000,2
channel = 5

[State 1701]
type = veladd
trigger1 = time = [0,35]
x = 1

[State 117]
type = ChangeState
trigger1 = animTime = 0
value = 5120
ctrl = 0

;*****************************************************************
;龙牙之舞.极
;*****************************************************************
[Statedef 3250]
type = S
movetype = A
physics = S
anim = 3200
poweradd = -2000
juggle = 8
velset = 0,0
ctrl = 0

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 3
value = 2995,60
channel = 2

[State 399, EnvShake]
type = EnvShake
trigger1 = animelem = 4
ignorehitpause = 1
persistent = 0
time = 15
freq = 100
ampl = -2
phase = 1

[State 3700]
type = varset
trigger1 = time = 0
var(37) = 36

[STate 3205]
type = SuperPause
trigger1 = Animelem = 1
time = 50
movetime = 45
sound = s1,17
anim = -1
pos = -20,-100

[State 3005, 4]
type = Explod
trigger1 = animelemtime(3) = 5
anim = 6011
pos = 31,-96
supermove = 1
sprpriority = 3
bindtime = 1
ownpal = 1

[State 3105, 4]
type = Explod
trigger1 = animelemtime(3) = 5
anim = 6010
pos = 31,-96
supermove = 1
sprpriority = -3
bindtime = 1
ownpal = 1

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 2
value = 800,2
channel = 0

[State 117]
type = ChangeState
trigger1 = AnimTime = 0
value = 3251
ctrl = 0
;----------------------------------------------
;前冲
;----------------------------------------------
[Statedef 3251]
type = S
movetype = A
physics = S
anim = 3201
poweradd = 50
velset = 0,0
ctrl = 0

[State 3000] ; Shadows
type = Afterimage
trigger1 = animelem = 1
time = 60
PalBright = 0, 0, 0
PalContrast =  128,68,1
PalAdd = 0, 0, 0
PalMul = 1,1,1
Length = 20
FrameGap = 5
Trans = Add1

[state hitby]
type = nothitby
trigger1 = time = [0,20]
value = SCA
time=1
ignorehitpause = 1

[state hitby]
type = hitby
trigger1 = time > 20
value = SCA,SA,NA,HA
time=1
ignorehitpause = 1

[State 4000, 1]
type = HitDef
;triggerall = p2bodydist y > -6
trigger1 = time = 0   
attr = SC,HA
damage = 0
animtype = hard
guard.sparkno = -1
sparkno = -1
sparkxy = 0,-45
guardflag = M
id = 4905
hitonce = 1
hitflag = MAF
guard.pausetime = 3,15
pausetime = 1,1
hitsound = S20,2
guardsound = s1,0
p2facing = 1
p1stateno = 3252
p2stateno = 4916                       

[State 117]
type = SprPriority
trigger1 = Time = 8
value = -1

[State 117]
type = VelSet
trigger1 = time = [0,30]
x = 7

[State 1701]
type = posadd
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
x = 12

[State 1701]
type = veladd
trigger1 = time = [3,9]
x = 2

[State 1701]
type = veladd
trigger1 = time = [10,20]
x = 5

[State 1701]
type = veladd
trigger1 = time = [21,30]
x = -2

[State 117]
type = ChangeState
trigger1 = moveguarded = 1
trigger2 = frontedgedist = 0
value = 105
ctrl = 0

[State 117]
type = ChangeState
trigger1 = Time = 30
value = 3254
ctrl = 0
;----------------------------------------------
;一段攻击
;----------------------------------------------
[Statedef 3252]
type = S
movetype = A
physics = S
anim = 3252
velset = 0
ctrl = 0
facep2 = 1
poweradd = 50

[state Width]
type = Width
trigger1 = time = 0
edge = 45,0

[State 117]
type = targetState
trigger1 = animelem = 8
trigger2 = animelem = 11
value = 4915

[State 117]
type = targetState
trigger1 = animelem = 2
trigger2 = animelem = 5
value = 4925

[State 3000] ; Shadows
type = Afterimage
trigger1 = animelem = 1
time = 0
PalBright = 0, 0, 0
PalContrast =  128,68,1
PalAdd = 0, 0, 0
PalMul = 1,1,1
Length = 25
FrameGap = 10
Trans = Add1

[State 4897, Bgpalfx]
type = Bgpalfx
trigger1 = 1
invertall = 1
time = 20
add = 10,10,10
mul = 256-var(37),256-var(37),256-var(37)
color = 255
ignorehitpause = 1

[State 3700]
type = varadd
trigger1 = var(37)<256
var(37) = 1

[State 4899,1]
type = statetypeset
trigger1 = 1
facep2 = 1

[State 371, 1]
type = TargetBind
trigger1 = 1
pos = 45,0

[State 117]
type = VelSet
trigger1 = frontedgedist < 30
trigger1 = p2bodydist x <= 15
x = -3

[State 400, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 4000,0

[State 400, 2]
type = PlaySnd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 5
trigger3 = AnimElem = 8
trigger4 = AnimElem = 10
value = 210,0

[State 3205]
type = Explod
trigger1 = AnimElem = 8
trigger2 = AnimElem = 10
anim = 735
pos = 50,-90
random = 10,10
supermove = 1
sprpriority = 2
bindtime = 1
ownpal = 1

[State 3205]
type = Explod
trigger1 = AnimElem = 2
trigger2 = AnimElem = 5
anim = 736
pos = 50,-70
supermove = 1
sprpriority = 2
bindtime = 1
ownpal = 1

[State 399, hitAdd]
type = hitAdd
trigger1 = animelem = 2
trigger2 = animelem = 5
trigger3 = animelem = 8
trigger4 = animelem = 10
value = 1

[State 399, LifeAdd]
type = targetLifeAdd
trigger1 = animelem = 2
trigger2 = animelem = 5
trigger3 = animelem = 8
value = -1
kill = 0

[State 399, LifeAdd]
type = targetLifeAdd
trigger1 = animelem = 10
value = -25
kill = 0

[State 2979]
type = ChangeState 
trigger1 = AnimTime = 0
value = 3253
ctrl = 1
;----------------------------------------------
;二段攻击
;----------------------------------------------
[Statedef 3253]
type = S
movetype = A
physics = S
anim = 3253
velset = 0
ctrl = 0
facep2 = 1
poweradd = 50

[state Width]
type = Width
trigger1 = time = 0
edge = 45,0

[State 117]
type = targetState
trigger1 = animelem = 2
trigger2 = animelem = 31
trigger3 = animelem = 44
value = 4915

[State 117]
type = targetState
trigger1 = animelem = 5
trigger2 = animelem = 9
trigger3 = animelem = 13
trigger4 = animelem = 24
trigger5 = animelem = 52
trigger6 = animelem = 61
trigger7 = animelem = 66
value = 4916

[State 117]
type = targetState
trigger1 = animelem = 23
trigger2 = animelem = 35
value = 4925

[State 117]
type = targetState
trigger1 = animelem = 19
trigger2 = animelem = 25
trigger3 = animelem = 38
value = 4926

[State 4900,1]
type = statetypeset
trigger1 = 1
facep2 = 1

[State 4897, Bgpalfx]
type = Bgpalfx
trigger1 = 1
invertall = 1
time = 20
add = 10,10,10
mul = 256-var(37),256-var(37),256-var(37)
color = 255
ignorehitpause = 1

[State 3700]
type = varadd
trigger1 = var(37)<256
var(37) = 1

[State 371, 1]
type = TargetBind
trigger1 = AnimElemtime(1) >= 0
trigger1 = AnimElemtime(75) < 0
pos = 45,0

[State 400, 2]
type = PlaySnd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 20
trigger3 = AnimElem = 35
value = 210,0

[State 400, 2]
type = PlaySnd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 13
trigger3 = AnimElem = 19
trigger4 = AnimElem = 24
trigger5 = AnimElem = 25
trigger6 = AnimElem = 31
trigger7 = AnimElem = 38
value = 220,0

[State 400, 2]
type = PlaySnd
trigger1 = AnimElem = 9
trigger2 = AnimElem = 44
trigger3 = AnimElem = 52
trigger4 = AnimElem = 60
trigger5 = AnimElem = 66
trigger6 = AnimElem = 75
value = 210,3

[State 3205]
type = Explod
trigger1 = AnimElem = 2
anim = 735
pos = 50,-90
random = 10,10
supermove = 1
sprpriority = 2
bindtime = 1
ownpal = 1

[State 3205]
type = Explod
trigger1 = AnimElem = 35
anim = 735
pos = 50,-30
supermove = 1
sprpriority = 2
bindtime = 1
ownpal = 1

[State 3205]
type = Explod
trigger1 = AnimElem = 19
anim = 736
pos = 50,-50
supermove = 1
sprpriority = 2
bindtime = 1
ownpal = 1

[State 3205]
type = Explod
trigger1 = AnimElem = 5
trigger2 = AnimElem = 13
trigger3 = AnimElem = 25
trigger4 = AnimElem = 31
trigger5 = AnimElem = 38
trigger6 = AnimElem = 44
trigger7 = AnimElem = 75
anim = 736
pos = 50,-70
supermove = 1
sprpriority = 2
bindtime = 1
ownpal = 1

[State 3205]
type = Explod
trigger1 = AnimElem = 9
trigger2 = AnimElem = 24
trigger3 = AnimElem = 40
trigger4 = AnimElem = 52
trigger5 = AnimElem = 60
trigger6 = AnimElem = 66
anim = 736
pos = 50,-100
supermove = 1
sprpriority = 2
bindtime = 1
ownpal = 1

[State 399, hitAdd]
type = hitAdd
trigger1 = animelem = 2
trigger2 = animelem = 5
trigger3 = animelem = 9
trigger4 = animelem = 13
trigger5 = animelem = 17
trigger6 = animelem = 20
trigger7 = animelem = 24
trigger8 = animelem = 25
trigger9 = animelem = 31
trigger10 = animelem = 35
trigger11 = animelem = 38
trigger12 = animelem = 44
trigger13 = animelem = 52
trigger14 = animelem = 60
trigger15 = AnimElem = 66
trigger16 = AnimElem = 75
value = 1

[State 399, LifeAdd]
type = targetLifeAdd
trigger1 = animelem = 2
trigger2 = animelem = 7
trigger3 = animelem = 9
trigger4 = animelem = 13
trigger5 = animelem = 17
trigger6 = animelem = 20
trigger7 = animelem = 24
trigger8 = animelem = 25
trigger9 = animelem = 31
trigger10 = animelem = 36
value = ifelse(random>700,-13,ifelse(random>700,-7,-10))
kill = 0

[State 399, LifeAdd]
type = targetLifeAdd
trigger1 = animelem = 38
trigger2 = animelem = 44
trigger3 = animelem = 52
trigger4 = animelem = 60
trigger5 = animelem = 66
value = ifelse(random>700,-60,ifelse(random>700,-30,-45))
kill = 0

[State 399, LifeAdd]
type = targetLifeAdd
trigger1 = animelem = 75
value = ifelse(random>700,-95,ifelse(random>700,-70,-85))
kill = 0

[State 3630]
type = playsnd
trigger1 = AnimElem = 89
value = 4960,0
persistent = 0

[State 3000]
type = HitDef
triggerall = fvar(10) = 0
triggerall = !movecontact
trigger1 = AnimElemtime(89) >= 5 &&  AnimElemtime(92) <= 50
attr = S,SP
damage = 115,25
animtype = hard
priority = 7, Hit
guardflag = MA
pausetime =  5,13
guard.pausetime = 12,21
guard.sparkno = S733
sparkno = S6215
sparkxy = -30,-165
hitsound = S4040,0
guardsound = S150,0
ground.type = low
ground.slidetime = 17
ground.hittime = 17
p2stateno = 4930
id = 1003
ground.velocity = -3,-8
air.velocity = -2,-11
p2facing = 1
palfx.time = 65
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
palfx.invertall = 1

[State 3000]
type = HitDef
triggerall = fvar(10) = 1
triggerall = !movecontact
trigger1 = AnimElemtime(89) >= 5 &&  AnimElemtime(92) <= 50
attr = S,SP
damage = 115,25
animtype = hard
priority = 7, Hit
guardflag = MA
pausetime =  5,13
guard.pausetime = 12,21
guard.sparkno = S733
sparkno = S82
sparkxy = -30,-165
hitsound = S3305,1
guardsound = S150,0
ground.type = low
ground.slidetime = 17
ground.hittime = 17
p2stateno = 4930
id = 10001
ground.velocity = -3,-8
air.velocity = -2,-11
p2facing = 1
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State 3000] ; Shadows
type = Afterimage
trigger1 = animelem = 58
time = 30
PalBright = 0, 0, 0
PalContrast =  128,68,1
PalAdd = 0, 0, 0
PalMul = 1,1,1
Length = 25
FrameGap = 10
Trans = Add1

[State 400, 2]
type = PlaySnd
trigger1 = Animelemtime(94) = 0
value = 4000,1
channel = 2

[state 3150]
type = varset
trigger1 = time = 226
var(33) = 1

[State 2979]
type = ChangeState 
trigger1 = p2bodydist x >= 30
trigger1 = time= [10,152]
value = 3251
ctrl = 0

[State 117]
type = ChangeState
trigger1 = p2stateno != [4900,4999]
trigger1 = time= [10,152]
value = 3251
ctrl = 0

[State Voice]
type = PlaySnd
trigger1 = AnimElemtime(81) = 0
value = 2995,55
channel = 1

[State Voice]
type = PlaySnd
trigger1 = AnimElemtime(89) = 0
value = 2995,60
channel = 1

[State Voice]
type = PlaySnd
trigger1 = AnimElemtime(81) = 0
value = 3000,20

[State Voice]
type = PlaySnd
trigger1 = AnimElemtime(89) = 0
value = 4960,0

[State Voice]
type = PlaySnd
trigger1 = fvar(10)=1
trigger1 = AnimElemtime(90) = 0
value = 3300,0

[State 1200, Explod]
type = Explod
trigger1 = AnimElemtime(81) = 3
anim = ifelse(fvar(10)=0,6050,6060)
pos = 8,-125
postype = p1
sprpriority = 3
supermove = 0
bindtime = 1

[State 1200, Explod]
type = Explod
trigger1 = NumTarget(10001) > 0
trigger1 = AnimElemtime(90) = 0
trigger1 = Target(10001), Time % 8 = 0
anim = 82
pos = Random % 80 - 40, Random % 40 -60
postype = p2
sprpriority = 3
supermove = 0

[State 3625]
type = Explod
triggerall = fvar(10)=0
trigger1 = animelemtime(81) = 1
trigger2 = animelemtime(81) = 70
anim = 6202
pos = 35,40
sprpriority = 5
postype = p1
bindtime = 1
ignorehitpause = 1

[State 3625]
type = Explod
triggerall = fvar(10)=0
trigger1 = animelemtime(81) = 1
trigger2 = animelemtime(81) = 70
anim = 6202
pos = -35,40
sprpriority = 5
postype = p1
bindtime = 1
ignorehitpause = 1

[State 3625]
type = Explod
triggerall = fvar(10)=0
trigger1 = animelemtime(81) = 1
trigger2 = animelemtime(81) = 70
anim = 6202
pos = 85,-40
sprpriority = -5
postype = p1
bindtime = 1
ignorehitpause = 1

[State 3625]
type = Explod
triggerall = fvar(10)=0
trigger1 = animelemtime(81) = 1
trigger2 = animelemtime(81) = 70
anim = 6202
pos = -85,-40
sprpriority = -5
postype = p1
bindtime = 1
ignorehitpause = 1

[State 3625]
type = Explod
triggerall = fvar(10)=0
trigger1 = animelemtime(81) = 1
trigger2 = animelemtime(81) = 70
anim = 6202
pos = 0,-40
sprpriority = -5
postype = p1
bindtime = 1
ignorehitpause = 1

[State 3625]
type = Explod
triggerall = fvar(10)=0
trigger1 = animelemtime(81) = 35
trigger2 = animelemtime(81) = 105
anim = 6202
pos = 35,-40
sprpriority = 5
postype = p1
bindtime = 1
ignorehitpause = 1

[State 3625]
type = Explod
triggerall = fvar(10)=0
trigger1 = animelemtime(81) = 35
trigger2 = animelemtime(81) = 105
anim = 6202
pos = -35,-40
sprpriority = 5
postype = p1
bindtime = 1
ignorehitpause = 1

[State 3625]
type = Explod
triggerall = fvar(10)=0
trigger1 = animelemtime(81) = 35
trigger2 = animelemtime(81) = 105
anim = 6202
pos = 85,40
sprpriority = -5
postype = p1
bindtime = 1
ignorehitpause = 1

[State 3625]
type = Explod
triggerall = fvar(10)=0
trigger1 = animelemtime(81) = 35
trigger2 = animelemtime(81) = 105
anim = 6202
pos = -85,40
sprpriority = -5
postype = p1
bindtime = 1
ignorehitpause = 1

[State 3625]
type = Explod
triggerall = fvar(10)=0
trigger1 = animelemtime(81) = 35
trigger2 = animelemtime(81) = 105
anim = 6202
pos = 0,40
sprpriority = -5
postype = p1
bindtime = 1
ignorehitpause = 1

[STate 3626]
type = PlaySNd
trigger1 = animelemtime(81) = 1
trigger2 = animelemtime(81) = 35
trigger3 = animelemtime(81) = 70
trigger4 = animelemtime(81) = 105
trigger5 = animelemtime(81) = 161
value = 4040,ifelse(fvar(10)=0,0,1)

[State 3205]
type = helper
triggerall = NumTarget(4905) > 0
trigger1 = animelemtime(81) = 71
trigger2 = animelemtime(81) = 107
ID = 845
postype = p2
pos = 0,0
stateno = 845
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 =animelemtime(81) = 0
anim = ifelse(fvar(10)=0,3609,3365)
velocity = 0,0
pos = 0,0
sprpriority = -3
ignorehitpause = 1
ownpal = 1

[State -3, 70]
type = Explod
trigger1 = NumTarget(845) > 0
ownpal = 1
postype = P2
pos = 0, 0
bindtime = 50
removetime = 50
ID = GameTime
anim = ifelse(fvar(10)=0,6203,86)
sprpriority = 7 ;-5
velocity = 0, 0
persistent = 0
ignorehitpause = 1

[STate 3626]
type = PlaySNd
trigger1 = NumTarget(845) > 0
trigger1 = Target(845), Time % 8 = 0
persistent = 0
value = 4040,0

[State 3784]
type = Explod
trigger1 = animelemtime(89) = 10
anim = ifelse(fvar(10)=0,6204,6209)
pos = 110,-70
postype = p1
supermove = 1
velocity = 0,-.5
sprpriority = 2
ownpal = 1

[State 3784]
type = Explod
trigger1 = animelemtime(89) = 10
anim = ifelse(fvar(10)=0,6204,6209)
pos = -90,-70
postype = p1
supermove = 1
velocity = 0,-.5
sprpriority = 2
ownpal = 1

;雷电---------
[State 3625]
type = Explod
triggerall = fvar(10)=0
trigger1 = animelemtime(89) = 0
anim = 3606
pos = 0,0
sprpriority = 3
postype = p1
bindtime = 1
ignorehitpause = 0

[State 3625]
type = Explod
triggerall = fvar(10)=0
trigger1 = animelemtime(89) = 0
anim = 3606
pos = 0,0
sprpriority = 3
postype = p1
bindtime = 1
facing = -1
ignorehitpause = 0

[State 3625]
type = Explod
triggerall = fvar(10)=0
trigger1 = animelemtime(89) = 0
anim = 3607
pos = 0,0
sprpriority = -3
postype = p1
bindtime = 1
ignorehitpause = 0

[State 3625]
type = Explod
triggerall = fvar(10)=0
trigger1 = animelemtime(89) = 0
anim = 3607
pos = 0,0
sprpriority = -3
postype = p1
bindtime = 1
facing = -1
ignorehitpause = 0

[State 3625]
type = Explod
triggerall = fvar(10)=0
trigger1 = animelemtime(89) = 0
anim = 3608
pos = 6,2
sprpriority = 3
postype = p1
bindtime = 1
ignorehitpause = 1

;火焰---------
[State 3625]
type = Explod
triggerall = fvar(10)=1
trigger1 = animelemtime(89) = 0
anim = 6208
pos = -30,-20
sprpriority = -3
postype = p1
bindtime = 1
ignorehitpause = 0

[State 3625]
type = Explod
triggerall = fvar(10)=1
trigger1 = animelemtime(89) = 0
anim = 6208
pos = -58,-10
sprpriority = 3
postype = p1
bindtime = 1
facing = -1
ignorehitpause = 0

[State 3625]
type = Explod
triggerall = fvar(10)=1
trigger1 = animelemtime(89) = 0
anim = 6208
pos = -80,0
sprpriority = 3
postype = p1
bindtime = 1
ignorehitpause = 0

[State 3625]
type = Explod
triggerall = fvar(10)=1
trigger1 = animelemtime(89) = 0
anim = 6208
pos = -58,10
sprpriority = 3
postype = p1
bindtime = 1
facing = -1
ignorehitpause = 0

[State 3625]
type = Explod
triggerall = fvar(10)=1
trigger1 = animelemtime(89) = 0
anim = 6208
pos = -30,20
sprpriority = 3
postype = p1
bindtime = 1
ignorehitpause = 1

[State 3625]
type = Explod
triggerall = fvar(10)=1
trigger1 = animelemtime(89) = 0
anim = 6208
pos = 30,-20
sprpriority = -3
postype = p1
bindtime = 1
ignorehitpause = 0

[State 3625]
type = Explod
triggerall = fvar(10)=1
trigger1 = animelemtime(89) = 0
anim = 6208
pos = 58,-10
sprpriority = 3
postype = p1
bindtime = 1
facing = -1
ignorehitpause = 0

[State 3625]
type = Explod
triggerall = fvar(10)=1
trigger1 = animelemtime(89) = 0
anim = 6208
pos = 80,0
sprpriority = 3
postype = p1
bindtime = 1
ignorehitpause = 0

[State 3625]
type = Explod
triggerall = fvar(10)=1
trigger1 = animelemtime(89) = 0
anim = 6208
pos = 58,10
sprpriority = 3
postype = p1
bindtime = 1
facing = -1
ignorehitpause = 0

[State 3625]
type = Explod
triggerall = fvar(10)=1
trigger1 = animelemtime(89) = 0
anim = 6208
pos = 30,20
sprpriority = 3
postype = p1
bindtime = 1
ignorehitpause = 1
;----------------------------

[State 3625]
type = Explod
trigger1 = animelemtime(89) = 0
anim = ifelse(fvar(10)=0,3609,3365)
pos = 0,0
sprpriority = -3
postype = p1
bindtime = 1
ignorehitpause = 1

[State 1200, Explod]
type = helper
trigger1 = animelemtime(81) = 10
stateno = 6206
id = 6206
pos = -5,0
postype = P1

[STate 3626]
type = SuperPause
trigger1 = Animelem = 81
time = 1
movetime = 2
sound = s1,17
anim = -1
pos = -20,-100

[State 3875, 慢镜头]
type = Pause 
triggerall = (GameTime%2) = 0 && roundstate = 2 
trigger1 = (animelemtime(70) > 5) &&  (animelemtime(83) < 5)
time = 1 
movetime = 1
p2movetime = 1 
ignorehitpause = 1

[State 399, -2]
type = EnvShake
trigger1 = animelem = 89
ignorehitpause = 1
persistent = 0
time = 50
freq = 100
ampl = -5
phase = 1

[State 1200, Explod]
type = Explod
trigger1 = fvar(10)=0
trigger1 = movecontact
trigger1 = time%19 = 0
trigger1 = random < 500
anim = 6212
pos = 0,0
postype = p2
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
triggerall = fvar(10)=0
triggerall = movecontact
trigger1 = time%19 = 0
trigger1 = random < 500
trigger2 = animtime = 0
anim = 6213
pos = 0,0
postype = p2
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
triggerall = fvar(10)=0
triggerall = movehit
trigger1 = time%19 = 0
trigger1 = random < 500
trigger2 = animtime = 0
anim = 6214
pos = 0,0
postype = p2
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State -3, 70]
type = Explod
triggerall = fvar(10)=1
triggerall = time%6 = 0
triggerall = random < 500
trigger1 = movecontact
trigger2 = NumTarget(845) > 0
ownpal = 1
postype = P2
pos = Random % 80 - 40, Random % 40 -60
bindtime = 2
ID = GameTime
anim = ifelse(random < 500,64,65)
sprpriority = 7 ;-5
velocity = 0, 0
ignorehitpause = 1

[State -3, 70]
type = Explod
triggerall = fvar(10)=1
triggerall = time%6 = 0
triggerall = random < 500
trigger1 = movecontact
trigger2 = NumTarget(845) > 0
ownpal = 1
postype = P2
pos = Random % 80 - 80, Random % 40 -100
ID = GameTime
anim = ifelse(random < 500,62,61)
sprpriority = 7 ;-5
velocity = 0, 0
ignorehitpause = 1

[State -3, 70]
type = Explod
triggerall = fvar(10)=1
triggerall = time%19 = 0
triggerall = random < 500
trigger1 = movehit
trigger2 = NumTarget(845) > 0
ownpal = 1
postype = P2
pos = Random % 80 - 40, Random % 40 -60
ID = GameTime
anim = ifelse(random < 450,64,65)
sprpriority = 7 ;-5
velocity = 0, 0
ignorehitpause = 1

[State 2979]
type = Targetstate
trigger1 = animelem = 75
value = 4928

[State 371, 1]
type = TargetBind
trigger1 = Animelem = 75
pos = 50,-10

[State 2979]
type = ChangeState 
trigger1 = Animtime = 0
value = 0
ctrl = 1
;----------------------------------------------
;滚到o(s□t)o
;----------------------------------------------
[Statedef 3254]
type = S
movetype = A
physics = S
anim = 3204
poweradd = 0
velset = 0,0
ctrl = 0

[State 1701]
type = velset
trigger1 = time = [0,35]
x = 2

[State 400, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 5000,2
channel = 5

[State 1701]
type = velset
trigger1 = time = [35,38]
x = 1

[State 117]
type = ChangeState
trigger1 = animTime = 0
value = 3255
ctrl = 0


[Statedef 3255]
type = S
movetype = A
physics = S
anim = 5121
poweradd = 0
velset = 0,0
ctrl = 0

[State 117]
type = ChangeState
trigger1 = animTime = 0
value = 0
ctrl = 1
;==============================================================================================
;龙牙之舞系列结束
;====================================================================================================



;======================================================================================================================
;龙拳爆发代码系列
;==========================================================================================================
;*************************************************************************
;龙拳.爆发(一级)
;*************************************************************************
[Statedef 3400]
type = S
movetype = A
physics = S
poweradd = -1000
anim = 3400
velset = 0,0
juggle = 8
sprpriority = 2
ctrl = 0

[state 4100]
type = statetypeset
trigger1 = Animelem = 5
physics = N
Statetype = A

[State 4100]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3000,20
channel = 2

[State 4100]
type = PlaySnd
trigger1 = AnimElem = 6
trigger2 = movecontact >= 1
trigger2 = time = 90
value = 779,0
channel = 1

[State 4100]
type = PlaySnd
trigger1 = AnimElem = 2
value = 2995,54
channel = 0

[State 4100]
type = PlaySnd
trigger1 = AnimElem = 2
value = 2995,54
channel = 0

[STate 4100]
type = SuperPause
trigger1 = time = 6
time = 39
movetime = 39
sound = s1,17
anim = -1
pos = -20,-100

[State 3005, 4]
type = Explod
trigger1 = Animelem = 6
anim = 7500
pos = 50,-70
supermove = 1
sprpriority = 3
bindtime = 1
ownpal = 1

[State 3105, 4]
type = Explod
trigger1 = AnimElem = 4
anim = 6001
pos = -8,-78
supermove = 1
sprpriority = 3
bindtime = 1
ownpal = 1

[State 4100, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 6000
pos = -8,-78
postype = p1
sprpriority = -3
supermove = 1
bindtime = 1

[State 1200, Explod]
type = Explod
trigger1 = time >= 50
trigger1 =gametime%2=1
anim = 1156
ID = 1156
velocity = -.4,0
scale = .3,1
pos = 35,ifelse(random<300,-45,ifelse(random<500,-85,-65))
sprpriority = 5
supermove = 1

[State 4100, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 3402
id = 3402
pos = 0,0
postype = p1
sprpriority = 4
add = 184,28,0
mul = 248,168,104
sinadd= 138,118,14,16
removeongethit = 1 
removetime = 200
bindtime = 200
ownpal = 1

[State 4100, Explod]
type = Explod
trigger1 = AnimElem = 6
anim = 3401
id = 3401
pos = 0,0
postype = p1
sprpriority = 3
removeongethit = 1
removetime = 200
bindtime = 200

[State 4100, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 3403
id = 3403
pos = -40,0
postype = p1
velocity = .7
sprpriority = 5
bindtime = 10

[State 4100, Explod]
type = Explod
triggerall = movecontact >= 1
trigger1 = time = 90
anim = 3403
id = 3403
pos = -40,0
postype = p1
velocity = .7,.15
sprpriority = 5
bindtime = 1

[state 4100,posadd]
type = posadd
trigger1 = AnimElem = 4
x = 8

[state 4100,posadd]
type = posadd
trigger1 = AnimElem = 5
x = 15

[state 4100,posadd]
type = posadd
trigger1 = AnimElem = 6
x = 10

[state 4100,velset]
type = velset
trigger1 = AnimElem = 6
x = 11
y = -2

[state 4100,veladd]
type = veladd
trigger1 = AnimElemtime(6) >= 0 && AnimElemtime(6) <= 5 
y = .2

[state 4100,veladd]
type = veladd
trigger1 = AnimElemtime(7) >= 0 && AnimElemtime(8) <= 10 
y = .06

[state 4100]
type = pause
triggerall = movecontact
trigger1 = animelem = 6
trigger2 = animelem = 7
trigger3 = animelem = 8
time = 10

[State 4100]
type = HitDef
trigger1 = animelem = 6
trigger2 = animelem = 7
trigger3 = animelem = 8
attr = A,NA
damage = ifelse(random>300,18,ifelse(random>500,20,10)),10
getpower = 10,5
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 11,11
snap = 35,-5
guard.pausetime = 10,10
sparkno = S736
guard.sparkno = S733
sparkxy = -30,-67
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 7
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.hittime = 9
ground.velocity = -9,-6
guard.velocity = -11     
airguard.velocity = -6,-1
air.type = low
air.velocity = -4,-1.2
air.hittime = 12
fall = 1
air.fall = 1
fall.recover = 0

[state hitby]
type = nothitby
trigger1 = time = [0,56]
value = SCA
time=1
ignorehitpause = 1

[state hitby]
type = nothitby
triggerall = movehit
trigger1 = time = [57,90]
value = SCA
time=1
ignorehitpause = 1

[State 4100]
type = ChangeState
triggerall = time > 90
trigger1 = pos y >= 0
trigger1 = vel y > 0
value = 3405

[Statedef 3405]
type = A
movetype = A
physics = N
anim = 3405
ctrl = 0

[State 4100]
type = PlaySnd
trigger1 = AnimElemtime(2) = 1
value = 40,0
volume = 100

[State 4100, Explod]
type = Explod
trigger1 = AnimElemtime(2) = 3
anim = 706
ownpal = 1
pos = 0,0
postype = p1
sprpriority = 5
bindtime = 1

[state hitby]
type = nothitby
trigger1 = time = [0,10]
value = SCA
time=1
ignorehitpause = 1

[state 4100]
type = removeExplod
trigger1 = time = 0
id = 3402

[state 4100]
type = removeExplod
trigger1 = animelem = 2
id = 3401

[State 4100, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 3404
pos = 0,0
postype = p1
sprpriority = 3
bindtime = 10

[state 4100]
type = statetypeset
trigger1 = Animelem = 2
physics = S
Statetype = S

[state 4100,veladd]
type = veladd
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(2) <= 10 
y = .2

[state 4110]
type = posset
trigger1 = animelemtime(2) >= 0
y = 0

[State 399, EnvShake]
type = EnvShake
trigger1 = movecontact = 1
ignorehitpause = 1
persistent = 0
time = 40
freq = 100
ampl = -5
phase = 1

[State 4100]
type = HitDef
trigger1 = animelem = 1
attr = A,NA
damage = ifelse(random>400,230,ifelse(random>500,300,160)),45
getpower = 10,10
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 12,12
guard.pausetime = 15,31
sparkno = S736
guard.sparkno = S733
sparkxy = -30,-67
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 7
ground.hittime = 9
ground.velocity = -9,-6
guard.velocity = -13
;guard.cornerpush.veloff = -30
p2stateno = 4930     
airguard.velocity = -6,-3
air.type = low
air.velocity = 2,-11
air.hittime = 12
fall = 1
air.fall = 1
fall.recover = 0

[State 4110]
type = ChangeState
trigger1 = animTime = 0
value = 0
ctrl = 1

;*************************************************************************
;龙拳.爆发(二级)
;*************************************************************************
[Statedef 3410]
type = S
movetype = A
physics = S
poweradd = -2000
anim = 3400
velset = 0,0
juggle = 8
sprpriority = 2
ctrl = 0

[state 4100]
type = statetypeset
trigger1 = Animelem = 5
physics = N
Statetype = A

[State 4100]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3000,30
channel = 2

[State 4100]
type = PlaySnd
trigger1 = AnimElem = 6
trigger2 = movecontact >= 1
trigger2 = time = 90
value = 779,0
channel = 1

[State 4100]
type = PlaySnd
trigger1 = AnimElem = 2
value = 2995,54
channel = 0

[State 4100]
type = PlaySnd
trigger1 = AnimElemtime(5) = 3
value = 4550,1
volume = 100
channel = 0

[STate 4100]
type = SuperPause
trigger1 = time = 6
time = 39
movetime = 39
sound = s1,17
anim = -1
pos = -20,-100

[State 3005, 4]
type = Explod
trigger1 = Animelem = 4
anim = 4090
pos = -15,-80
supermove = 1
sprpriority = 3
bindtime = 1
ownpal = 1

[State 3005, 4]
type = Explod
trigger1 = Animelem = 6
anim = 7500
pos = 50,-70
supermove = 1
sprpriority = 3
bindtime = 1
ownpal = 1

[State 4100, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 6010
pos = -8,-79
postype = p1
sprpriority = -3
supermove = 1
bindtime = 1

[State 4100, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 6011
pos = -8,-79
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1

[State 1200, Explod]
type = Explod
trigger1 = time >= 50
trigger1 =gametime%2=1
anim = 1156
ID = 1156
velocity = -.4,0
scale = .3,1
pos = 35,ifelse(random<300,-45,ifelse(random<500,-85,-65))
sprpriority = 5
supermove = 1

[State 4100, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 3401
id = 3401
pos = 0,0
postype = p1
sprpriority = 4
add = 184,28,0
mul = 248,168,104
sinadd= 138,118,14,16 
removeongethit = 1
removetime = 200
bindtime = 200
ownpal = 1

[State 4100, Explod]
type = Explod
trigger1 = AnimElem = 6
anim = 3402
id = 3402
pos = 0,0
postype = p1
sprpriority = 3
removeongethit = 1
removetime = 200
bindtime = 200

[State 4100, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 3403
id = 3403
pos = -40,0
postype = p1
velocity = .7
sprpriority = 5
bindtime = 10

[State 4100, Explod]
type = Explod
triggerall = movecontact >= 1
trigger1 = time = 90
anim = 3403
id = 3403
pos = -40,0
postype = p1
velocity = .7,.15
sprpriority = 5
bindtime = 1

[state 4100,posadd]
type = posadd
trigger1 = AnimElem = 4
x = 8

[state 4100,posadd]
type = posadd
trigger1 = AnimElem = 5
x = 15

[state 4100,posadd]
type = posadd
trigger1 = AnimElem = 6
x = 10

[state 4100,velset]
type = velset
trigger1 = AnimElem = 6
x = 11
y = -2

[state 4100,veladd]
type = veladd
trigger1 = AnimElemtime(6) >= 0 && AnimElemtime(6) <= 5 
y = .2

[state 4100,veladd]
type = veladd
trigger1 = AnimElemtime(7) >= 0 && AnimElemtime(8) <= 10 
y = .06

[state 4100]
type = pause
triggerall = movecontact
trigger1 = animelem = 6
trigger2 = animelem = 7
trigger3 = animelem = 8
time = 10

[State 4100]
type = HitDef
trigger1 = animelem = 6
trigger2 = animelem = 7
trigger3 = animelem = 8
attr = A,NA
damage = ifelse(random>400,18,ifelse(random>500,20,10)),10
getpower = 7,3
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 11,11
snap = 35,-5
guard.pausetime = 10,10
sparkno = S736
guard.sparkno = S733
sparkxy = -30,-67
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 7
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.hittime = 9
ground.velocity = -9,-6
guard.velocity = -11     
airguard.velocity = -6,-1
air.type = low
air.velocity = -4,-1.2
air.hittime = 12
fall = 1
kill = 0
air.fall = 1
fall.recover = 0

[state hitby]
type = nothitby
trigger1 = time = [0,56]
value = SCA
time=1
ignorehitpause = 1

[state hitby]
type = nothitby
triggerall = movehit
trigger1 = time = [57,90]
value = SCA
time=1
ignorehitpause = 1

[state 4150]
type = varset
trigger1 = time = 0
var(16) = 0

[state 4150]
type = varset
triggerall = time > 75
trigger1 = var(13) = [101,105]
trigger2 = var(13) = [121,125]
var(16) = 1

[State 4100]
type = ChangeState
triggerall = time > 90
trigger1 = pos y >= 0
trigger1 = vel y > 0
value = 3415
;-------------------------------------------------------------------------------------
;龙拳二段
;-------------------------------------------------------------------------------------
[Statedef 3415]
type = A
movetype = A
physics = N
anim = 3415
ctrl = 0

[State 3630]
type = envcolor
triggerall = movecontact
trigger1 = time = [0,5]
value = 55,55,55
time = 6
under = 1

[State 3630]
type = envcolor
triggerall = movecontact
trigger1 = time = [6,10]
value = 35,35,35
time = 6
under = 1

[State 3630]
type = envcolor
triggerall = movecontact
trigger1 = time = [11,15]
value = 15,15,15
time = 6
under = 1

[State 3630]
type = envcolor
triggerall = movecontact
trigger1 = time >=16
value = 0,0,0
time = 38
under = 1

[state 189, nofg]
type = assertspecial
trigger1 = 1
flag = NoFG

[STate 3778]
type = PlaySNd
triggerall = movecontact
trigger1 = AnimElem = 6
value = 4160,0
volume = 30

[State 4100, Explod]
type = Explod
triggerall = movecontact
trigger1 = AnimElem = 6
anim = 7605
pos = 8,10
postype = left
supermove = 1
sprpriority = -3

[STate 4100]
type = SuperPause
trigger1 = animelemtime(6) = 5
time = 27
movetime = 0
sound = s1,17
anim = -1
pos = -20,-100

[State 4100]
type = PlaySnd
trigger1 = AnimElemtime(2) = 1
value = 40,0
volume = 100

[State 4100, Explod]
type = Explod
trigger1 = AnimElemtime(2) = 3
anim = 706
ownpal = 1
pos = 0,0
postype = p1
sprpriority = 5
bindtime = 1

[State 4100, Explod]
type = Explod
triggerall = movecontact
trigger1 = AnimElem = 6
anim = 6050
id = 3255
pos = 29,-96
postype = p1
supermove = 1
sprpriority = 3

[State 4100]
type = PlaySnd
trigger1 = AnimElemtime(6) = 1
value = 3000,20
channel = 2

[state hitby]
type = nothitby
trigger1 = time = [0,10]
value = SCA
time=1
ignorehitpause = 1

[state hitby]
type = nothitby
triggerall = movecontact
trigger1 = time > 10
value = SCA
time=1
ignorehitpause = 1

[state 4100]
type = removeExplod
trigger1 = time = 0
id = 3402

[state 4100]
type = removeExplod
trigger1 = animelem = 2
id = 3401

[State 4100, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 3404
pos = 0,0
postype = p1
sprpriority = 3
bindtime = 10

[state 4100]
type = statetypeset
trigger1 = Animelem = 2
physics = S
Statetype = S

[state 1650]
type = velset
trigger1 = animelem = 9
x=15

[state 1650]
type = posadd
trigger1 = animelem = 7
x=2

[state 4100,veladd]
type = veladd
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(2) <= 10 
y = .2

[state 4110]
type = posset
trigger1 = animelemtime(2) >= 0
y = 0

[state 1650]
type = velset
trigger1 = animelem = 20
x=4

[state 1650]
type = posadd
trigger1 = animelem = 17
x=5

[state 1650]
type = posadd
trigger1 = animelem = 20
x=15

[state 1650]
type = posadd
trigger1 = animelem = 16
trigger2 = animelem = 23
x=8

[State 399, EnvShake]
type = EnvShake
triggerall = movecontact = 1
trigger1 = animelem = 1
trigger2 = animelem = 12
ignorehitpause = 1
persistent = 0
time = 40
freq = 100
ampl = -5
phase = 1

[State 4100, Explod]
type = Explod
trigger1 = animelem = 11
anim = 3403
id = 3403
pos = -40,0
postype = p1
velocity = .7,.15
sprpriority = 5
bindtime = 1

[State 4100]
type = PlaySnd
trigger1 = AnimElem = 11
value = 779,0
channel = 1

[State 4100]
type = HitDef
triggerall = !movecontact
trigger1 = animelemTIME(1) >= 1
attr = A,HA
damage = ifelse(random>400,230,ifelse(random>500,300,160)),45
getpower = 10,10
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 12,12
guard.pausetime = 11,42
sparkno = S736
guard.sparkno = S733
sparkxy = -30,-67
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 7
ground.hittime = 9
ground.velocity = -9,-6
guard.velocity = -11
p2stateno = 4940     
airguard.velocity = -6,-3
air.type = low
air.velocity = 2,-11
air.hittime = 12
fall = 1
kill = 0
air.fall = 1
fall.recover = 0

[State 4100]
type = HitDef
trigger1 = animelem = 12
attr = A,HA
damage = 30,15
getpower = 10,10
animtype = high
guardflag = MA
hitflag = MAFD
priority = 7,Hit
pausetime = 12,12
guard.pausetime = 11,42
sparkno = S736
guard.sparkno = S733
sparkxy = -30,-67
hitsound = S210,3
p2stateno = 3425
snap = 30,-70
guardsound = S150,1
ground.type = low
ground.slidetime = 7
ground.hittime = 9
ground.velocity = -1,-5
guard.velocity = -11    
airguard.velocity = -6,-3
air.type = low
air.velocity = 2,-5
air.hittime = 12
fall = 1
kill = 0
yaccel = .4
air.fall = 1
fall.recover = 0

[State 4100]
type = HitDef
trigger1 = animelem = 20
trigger2 = !movecontact
trigger2 = animelem = 21
attr = A,HA
damage = 30,15
getpower = 10,10
animtype = high
guardflag = MA
hitflag = MAFD
priority = 7,Hit
pausetime = 12,12
guard.pausetime = 11,42
sparkno = S736
guard.sparkno = S733
sparkxy = -30,-67
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 7
ground.hittime = 9
p2stateno = 3425
snap = 30,-70
ground.velocity = -1,-10
guard.velocity = -11    
airguard.velocity = -6,-3
air.type = low
air.velocity = -1,-7
air.hittime = 12
fall = 1
kill = 0
yaccel = .4
air.fall = 1
fall.recover = 0

[state 4150]
type = turn
triggerall = movehit
trigger1 = animelem = 4

[state 4150]
type = varset
trigger1 = animelemtime(11) >= 0 && animelemtime(15) <= 0
trigger1 = (command = "C") && (command = "D")
trigger2 = animelemtime(19) >= 0 && animelemtime(24) <= 0
trigger2 = (command = "C") && (command = "D")
var(16) = 0 

[state 4150]
type = varset
triggerall = animelemtime(1) >= 0 && animelemtime(3) <= 7
trigger1 = var(13) = [101,105]
trigger2 = var(13) = [121,125]
var(16) = 1 

[State 4110]
type = ChangeState
trigger1 = animTime = 0
value = 3416

[State 4110]
type = ChangeState
triggerall = moveguarded
triggerall = var(16) = 0
trigger1 = animelemtime(3) = 10
trigger2 = animelemtime(15) = 3
trigger3 = animelemtime(24) = 2
value = 1013

[State 4110]
type = ChangeState
triggerall = !movecontact
trigger1 = animelemtime(3) = 10
value = 0
ctrl = 1
;-------------------------------------------------------------------------------------
;升龙开始
;-------------------------------------------------------------------------------------
[statedef 3416]
type = S
movetype = A
physics = S
anim = 1003
velset = 0,0
sprpriority = 1
facep2 = 1
ctrl = 0

[State 1200, Explod]
type = Explod
trigger1 =animelem = 3
anim = 6211
ID = 6211
velocity = 0,0
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = numTarget(4160)>0
anim = 6215
ID = 6215
pos = 0,0
postype = p2
bindtime = 100
sprpriority = 3
persistent = 0
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 4
anim = 6212
ID = 6212
velocity = 0,0
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 3630]
type = envcolor
trigger1 = 1
value = 0,0,0
time = 83
under = 1

[state nothity]
type = nothitby
trigger1 = time >= 0
value = sca
time = 0
ignorehitpause = 1

[State 3660]
type = varrandom
trigger1 = 1
v = 4
range = 20

[State 3660]
type = varrandom
trigger1 = 1
v = 5
range = 50

[State 399, EnvShake]
type = EnvShake
triggerall = movecontact = 1
trigger1 = animelem = 4
ignorehitpause = 1
persistent = 0
time = 50
freq = 100
ampl = -5
phase = 1

[State 704, 4]
type = Explod
trigger1 = Time >= 5
trigger1 =gametime%1=1
sprpriority = -2
anim = ifelse(random<500,1158,1159)
scale = .7,.2
vel = 0,-.9
id = 1158
pos = var(4)+25,-20-var(5)
postype = P1
bindtime = 1
ownpal = 1

[State 704, 4]
type = Explod
trigger1 = Time >= 5
trigger1 =gametime%1=1
sprpriority = 2
anim = ifelse(random<500,1158,1159)
scale = .7,.2
vel = 0,-.9
id = 1157
pos = var(4)+25,-20-var(5)
postype = P1
bindtime = 1
ownpal = 1

[STate 3000]
type = SuperPause
trigger1 = Animelem = 1
time = 30
movetime = 1
sound = s1,17
anim = -1
pos = -20,-100

[State 1200, Explod]
type = Explod
trigger1 = time = 0
anim = 6051
ID = 1478
pos = -50,-70
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1

[State 1200, Explod]
type = Explod
trigger1 = time = 0
anim = 6045
ID = 1495
pos = -24,48
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1

[State 1200, Explod]
type = Explod
trigger1 = time = 0
anim = 6050
pos = -43,-64
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1

[State 1200, Explod]
type = removeExplod
trigger1 = animelem = 2
ID = 1495

[state nothitby]
type = nothitby
trigger1 = time >=0
value = SCA
time=1
ignorehitpause = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 7655
pos = 43,-70
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 4
anim = 1051
ID = 4160
bindtime = 999
pausemove = 1
removetime = 30
velocity = 0,0
scale = 1,1
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = S,HA
hitflag = MAF
guardflag = M
getpower = 0
givepower = 0
damage = 0,20
sparkno = S736
guard.sparkno = S733
sparkxy = -25,-80
hitsound = S210,0
guardsound = S150,0
pausetime = 13,13
animtype = Hard
snap = 35,-35
guard.hittime = 14
guard.velocity = -4
guard.slidetime = 6
ground.hittime = 14
ground.velocity = -4,-9
ground.slidetime = 12
ground.type = High
air.hittime = 14
air.velocity = -4,-9
air.type = High
air.recover = 0
id = 4160
fall=1
fall.recover = 0
palfx.time = 85
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[State 1200, Explod]
type = Explod
trigger1 =animelem = 4
anim = 3609
velocity = 0,0
pos = 0,0
sprpriority = -3
ignorehitpause = 1
ownpal = 1

[State Snd]
type = PlaySnd
trigger1 =animelem = 4
value = 4040,2

[State 3000] ; Shadows
type = Afterimage
trigger1 = time = 1
time = 80
PalBright = 0, 0, 0
PalContrast =  128,68,1
PalAdd = 0, 0, 0
PalMul = 1,1,1
Length = 25
timegap = 2
FrameGap = 7
Trans = Add1

[State MoveHit]
type = VarSet
trigger1 = MoveContact
sysvar(1) = 1

[State 3784]
type = Explod
trigger1 = Animelemtime(4) = 1 
anim = 3419
pos = 25,0
postype = p1
supermove = 1
sprpriority = 3
ownpal = 1

[State 3784]
type = Explod
trigger1 = Animelemtime(4) = 2 
anim = 60051
pos = 0,0
postype = left
supermove = 1
bindtime = 999
sprpriority = 7
ownpal = 1

[State Jump]
type = ChangeState
trigger1 = AnimTime = 0
value = 3417
ctrl = 0

;-------------------------------------------------------------------------------------
;升龙升起
;-------------------------------------------------------------------------------------

[StateDef 3417]
type = A
movetype = A
physics = N
anim = 3417
velset = 0,-15
ctrl = 0

[state 3305]
type = removeExplod
trigger1 = time = 0
id = 4160

[State Snd]
type = PlaySnd
trigger1 =animelem = 2
value = 4040,2

[State 1200, Explod]
type = Explod
trigger1 =animelemtime(1) = 5
anim = 6213
ID = 6213
velocity = 0,0
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 2
anim = 6214
ID = 6214
velocity = 0,0
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = numTarget(4165)>0
anim = 6215
ID = 6215
pos = 0,0
postype = p2
bindtime = 100
sprpriority = 3
persistent = 0
ownpal = 1

[State 3875, 慢镜头]
type = Pause 
triggerall = (GameTime%2) = 1 ;&& roundstate = 2 
trigger1 = 1
time = 1 
movetime = 1 
ignorehitpause = 1

[State 3630]
type = playsnd
trigger1 = animelem = 1
value = 4960,0
channel = 3

[State 3784, VelSet]
type = VelSet
trigger1 = Time = [0,10]
x = 1

[State 3784, VelSet]
type = VelSet
trigger1 = Time >10 && time <16
x = .5

[State Gravity]
type = VelAdd
trigger1 = time > 23
y = .44

[state nothitby]
type = nothitby
trigger1 = time >=0 && time < 10
value = SCA
time=1
ignorehitpause = 1

[State 3784]
type = Explod
trigger1 = Animelem = 1 
anim = 3418
pos = 25,0
postype = p1
supermove = 1
sprpriority = 2
bindtime = 16
ownpal = 1
removetime = 16

[State 3784]
type = Explod
trigger1 = Animelemtime(1) = 6 
anim = 6204
pos = 80,0
postype = p1
supermove = 1
velocity = 0,-.5
sprpriority = 2
ownpal = 1

[State 3784]
type = Explod
trigger1 = Animelemtime(1) = 6
anim = 6204
pos = -50,0
postype = p1
supermove = 1
velocity = 0,-.5
sprpriority = 2
ownpal = 1

[State 3784]
type = Explod
trigger1 = Animelemtime(1) = 6 
anim = 6202
pos = 80,70
postype = p1
supermove = 1
velocity = 0,0
sprpriority = 1
ownpal = 1

[State 3784]
type = Explod
trigger1 = Animelemtime(1) = 6 
anim = 6202
pos = -50,70
postype = p1
supermove = 1
velocity = 0,0
sprpriority = 1
ownpal = 1

[State 3630]
type = envcolor
trigger1 = time >= 0
value = 0,0,0
time = 21
under = 1

[STate 3784]
type = PlaySNd
trigger1 = time = 3
value = 4550,0
volume = 100

[State HitDef]
type = HitDef
trigger1 = animelem = 1
attr = A,HA
hitflag = MAF
guardflag = M
getpower = 30,10
givepower = 0
damage = 100,10
sparkno = S736
guard.sparkno = S733
sparkxy = 20,-120
hitsound = S210,0
guardsound = S150,0
pausetime = 14,4
animtype = Up
guard.hittime = 14
guard.velocity = -4
guard.slidetime = 6
ground.hittime = 5
ground.velocity = -4,-9
ground.slidetime = 12
ground.type = High
air.hittime = 5
air.velocity = 0,-9
air.type = High
fall.recover = 0
fall = 1
id = 4165
palfx.time = 85
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[State HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = A,HA
hitflag = MAF
guardflag = M
getpower = 70
givepower = 0
damage = 70,10
sparkno = S736
guard.sparkno = S733
sparkxy = 20,-120
hitsound = S210,0
guardsound = S150,0
pausetime = 15,15
animtype = Up
guard.hittime = 14
guard.velocity = -4
guard.slidetime = 6
ground.hittime = 5
ground.velocity = -4,-8
ground.slidetime = 12
ground.type = High
air.hittime = 5
air.velocity = -5,-8
air.type = High
fall.recover = 0
fall = 1
id = 4165
palfx.time = 90
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[State 3784, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1002

;---------------------------
;龙拳爆发代码对应p2动作
;---------------------------
[Statedef 3425]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[state changeanim2]
type = changeanim2
trigger1 = time = 0
value = 3425

[State 5070, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 3426

[State 5070, 3]
type = ForceFeedback
trigger1 = time = 0
time = 12
waveform = sinesquare
ampl = 140

[Statedef 3426]
type = A
movetype = H
physics = N
ctrl = 0

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)


[State 3784, 2]
type = selfState
trigger1 = Pos Y >= -5 && Vel Y > 0
value = 5100
;===================================================================================================
;龙拳爆发代码结束
;===================================================================================================

;***************************************************
;罚.凤之翔(短)
;***************************************************
[StateDef 3300]
type = A
movetype = A
physics = N
anim = 3300
velset = 0,0
poweradd = -300
sprpriority = 1
facep2 = 1
juggle = 7 
ctrl = 0

[STate 3000]
type = SuperPause
trigger1 = Animelem = 1
time = 45
movetime = 26
sound = s1,17
anim = -1
pos = -20,-90

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 6046
ID = 6046
pos = 60,43
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 6000
ID = 6000
pos = 30,-40
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 6001
ID = 6001
pos = 30,-40
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
triggerall = numExplod(3355) = 0
trigger1 = AnimElem = 7
anim = 3350
ID = 3355
pos = 0,0
postype = p1
sprpriority = 4
supermove = 1
removeongethit = 1
bindtime = 9999
ownpal = 1

[state nothitby]
type = nothitby
trigger1 = time >=0 && time <=32
value = SCA
time = 1
ignorehitpause = 1

[State 3700]
type = PlaySnd
trigger1 = animelem = 6
value = 3000,20

[State 3700]
type = PlaySnd
trigger1 = animelem = 7
value = 3800,0

[STate 3150]
type = PlaySNd
trigger1 = time = 3
value = 2000,9
channel = 1
volume = 250

[STate 3150]
type = PlaySNd
trigger1 = time = 2
value = 2995,54
channel = 0
volume = 60

[State 600]
type = velSet
trigger1 = animelem = 1
x = 1
y = -1

[State 600]
type = velSet
trigger1 = animelem = 4
x = 1
y = 1

[State 600]
type = velSet
trigger1 = animelem = 7
x = 5
y = 7.5

[State 615]
type = HitDef
triggerall = p2bodydist y >= 70
trigger1 = animelem = 7
trigger2 = animelem = 8
attr = A,NA
damage = 10,2
getpower = ifelse(fvar(10)!=1,60,6),ifelse(fvar(10)!=1,20,2)
animtype = high
air.animtype  = back
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 9,9
guard.pausetime = 13,13
sparkno = S82
guard.sparkno = S733
sparkxy = -20,-30
hitsound = S210,0
guardsound = S150,1
ground.type = high
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -6
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 15
fall.recovertime = 10
air.fall = 1
Palfx.time = 40
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1

[State 615]
type = HitDef
triggerall = p2bodydist y < 70
trigger1 = animelem = 7
trigger2 = animelem = 8
attr = A,NA
damage = 10,2
getpower = ifelse(fvar(10)!=1,60,6),ifelse(fvar(10)!=1,20,2)
animtype = high
air.animtype  = back
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 9,9
guard.pausetime = 13,13
sparkno = S82
guard.sparkno = S733
sparkxy = -20,-30
hitsound = S210,0
guardsound = S150,1
ground.type = low
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -6
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 15
fall.recovertime = 10
air.fall = 1
Palfx.time = 40
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1

[State Land]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 3305
ctrl = 0
;***************************************************
;罚.凤之翔(长)
;***************************************************
[StateDef 3325]
type = A
movetype = A
physics = N
anim = 3300
velset = 0,0
poweradd = -1000
sprpriority = 1
facep2 = 1
juggle = 7 
ctrl = 0

[STate 3000]
type = SuperPause
trigger1 = Animelem = 1
time = 45
movetime = 26
sound = s1,17
anim = -1
pos = -20,-90

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 6046
ID = 6046
pos = 60,43
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 6000
ID = 6010
pos = 30,-40
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 6001
ID = 6001
pos = 30,-40
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
triggerall = numExplod(3355) = 0
trigger1 = AnimElem = 7
anim = 3355
ID = 3355
pos = 0,0
postype = p1
sprpriority = 4
supermove = 1
removeongethit = 1
bindtime = 9999
ownpal = 1

[state nothitby]
type = nothitby
trigger1 = time >=0 && time <=32
value = SCA
time = 1
ignorehitpause = 1

[State 3700]
type = PlaySnd
trigger1 = animelem = 6
value = 3000,20

[State 3700]
type = PlaySnd
trigger1 = animelem = 7
value = 3800,0

[STate 3150]
type = PlaySNd
trigger1 = time = 3
value = 2000,9
channel = 1
volume = 250

[STate 3150]
type = PlaySNd
trigger1 = time = 2
value = 2995,54
channel = 0
volume = 60

[State 600]
type = velSet
trigger1 = animelem = 1
x = 1
y = -1

[State 600]
type = velSet
trigger1 = animelem = 4
x = 1
y = 1

[State 600]
type = velSet
trigger1 = animelem = 7
x = 11
y = 7.5

[State 615]
type = HitDef
triggerall = p2bodydist y >= 70
trigger1 = animelem = 7
trigger2 = animelem = 8
attr = A,NA
damage = 10,2
getpower = ifelse(fvar(10)!=1,60,6),ifelse(fvar(10)!=1,20,2)
animtype = high
air.animtype  = back
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 9,9
guard.pausetime = 13,13
sparkno = S82
guard.sparkno = S733
sparkxy = -20,-30
hitsound = S210,0
guardsound = S150,1
ground.type = high
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -6
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 15
fall.recovertime = 10
air.fall = 1
Palfx.time = 40
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1

[State 615]
type = HitDef
triggerall = p2bodydist y < 70
trigger1 = animelem = 7
trigger2 = animelem = 8
attr = A,NA
damage = 10,2
getpower = ifelse(fvar(10)!=1,60,6),ifelse(fvar(10)!=1,20,2)
animtype = high
air.animtype  = back
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 9,9
guard.pausetime = 13,13
sparkno = S82
guard.sparkno = S733
sparkxy = -20,-30
hitsound = S210,0
guardsound = S150,1
ground.type = low
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -6
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 15
fall.recovertime = 10
air.fall = 1
Palfx.time = 40
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1

[State Land]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 3305
ctrl = 0

[StateDef 3305]
type = S
movetype = A
physics = S
anim = 3305
poweradd = -700
sprpriority = 3
facep2 = 1
juggle = 7 
ctrl = 0

[State 3660]
type = varrandom
trigger1 = 1
v = 4
range = 90

[State 3660]
type = varrandom
trigger1 = 1
v = 5
range = 20

[State 704, 4]
type = Explod
trigger1 = Time = [3,40]
trigger1 =gametime%3=1
sprpriority = -2
anim = ifelse(random<500,720,721)
scale = .7,.2
vel = 0,-.9
id = 1158
pos = var(4)-35,-20-var(5)
postype = P1
bindtime = 1
ownpal = 1

[State 704, 4]
type = Explod
trigger1 = Time = [3,40]
trigger1 =gametime%3=1
sprpriority = 2
anim = ifelse(random<500,720,721)
scale = .7,.2
vel = 0,-.9
id = 1157
pos = var(4)-35,-20-var(5)
postype = P1
bindtime = 1
ownpal = 1

[state nothitby]
type = nothitby
trigger1 = time >=0 && time <=45
value = SCA
time = 1
ignorehitpause = 1

[State 3630]
type = Helper
trigger1 = animelemtime(2) = 10
stateno = 3665
id = 3660
pos = 0,-180
postype = p1
ownpal = 1
sprpriority = -3
bindtime = -1
ignorehitpause = 1

[State 3630]
type = Helper
trigger1 = animelemtime(2) = 10
stateno = 3665
id = 3661
pos = 0,-200
postype = p1
ownpal = 1
sprpriority = -3
bindtime = -1
ignorehitpause = 1

[State 3700]
type = PlaySnd
trigger1 = animelem = 1
value = 3305,2

[State 3700]
type = PlaySnd
trigger1 = animelem = 1
value = 3305,0

[state 3305]
type = removeExplod
trigger1 = numExplod(3355) >= 1
id = 3355

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 3360
ID = 3360
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 90
ownpal = 1 

[State 1200, Explod]
type = Explod
trigger1 = time = 10
anim = 3365
ID = 3365
pos = 0,0
postype = p1
sprpriority = -4
bindtime = 90
ownpal = 1

[state 955]
type = MakeDust
trigger1 = time = 1
pos = -10,0

[STate 3150]
type = PlaySNd
trigger1 = time = 0
value = 40,0
volume = 255

[state posset]
type = posset
trigger1 = 1
y = 0

[state posset]
type = posadd
trigger1 = time = 0
x = 10

[state posset]
type = posadd
trigger1 = animelem = 3
x = 10

[state posset]
type = velset
trigger1 = 1
y = 0

[state pause]
type = pause
trigger1 = time = [0,15]
trigger1 = moveguarded
time = 5
persistent = 0

[state pause]
type = pause
trigger1 = time = [16,30]
trigger1 = moveguarded
time = 5
persistent = 0

[state pause]
type = pause
trigger1 = time = [31,40]
trigger1 = moveguarded
time = 5
persistent = 0

[State -3, 70]
type = Explod
triggerall = NumTarget(10001) > 0
triggerall = Target(10001), stateno != [120,154]
triggerall = Target(10001), Time % 8 = 0
triggerall = Target(10001), stateno != 5030
trigger1 = Target(10001),time = [0,20]
ownpal = 1
postype = P2
pos = Random % 80 - 40, Random % 40 -60
ID = GameTime
anim = 82
sprpriority = 7 ;-5
velocity = 0, 0
ignorehitpause = 1

[State 615]
type = HitDef
persistent = 0
trigger1 = time = [0,15]
attr = S, HP
animtype = back
damage = 300,25
priority = 7, Hit
guardflag = HLM
pausetime = 7,7
guard.pausetime = 0,14
guard.ctrltime = 17
guard.sparkno = S733
sparkno = S82
sparkxy = -30,-125
hitsound = S3305,1
guardsound = S150,0
ground.type = high
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -2,-11
guard.velocity = -1
air.velocity = -2,-11
getpower = 30,10
givepower = 10,5
air.juggle = 5
;yaccel = .5
p2stateno = 4935
fall.recover = 0
id = 10001
fall = 1
Palfx.time = 90
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1

[State 615]
type = HitDef
persistent = 0
trigger1 = time = [16,30]
attr = S, HP
animtype = back
damage = 300,25
priority = 7, Hit
guardflag = HLM
pausetime = 7,7
guard.pausetime = 0,14
guard.ctrltime = 17
guard.sparkno = S733
sparkno = S82
sparkxy = -30,-75
hitsound = S3305,1
guardsound = S150,0
ground.type = high
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -2,-11
guard.velocity = -1
air.velocity = -2,-11
getpower = 30,10
givepower = 10,5
air.juggle = 5
;yaccel = .5
p2stateno = 4935
fall.recover = 0
id = 10001
fall = 1
Palfx.time = 90
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1

[State 615]
type = HitDef
persistent = 0
trigger1 = time = [31,40]
attr = S, HP
animtype = back
damage = 300,25
priority = 7, Hit
guardflag = HLM
pausetime = 7,7
guard.pausetime = 0,14
guard.ctrltime = 17
guard.sparkno = S733
sparkno = S82
sparkxy = -30,-75
hitsound = S3305,1
guardsound = S150,0
ground.type = high
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -2,-11
guard.velocity = -1
air.velocity = -2,-11
getpower = 30,10
givepower = 10,5
air.juggle = 5
;yaccel = .5
p2stateno = 4935
fall.recover = 0
id = 10001
fall = 1
Palfx.time = 90
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1

[State Land]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1

;***************************************************
;罚.凤之翔(极)
;***************************************************
[StateDef 3350]
type = A
movetype = A
physics = N
anim = 3300
velset = 0,0
poweradd = -2000
sprpriority = 1
facep2 = 1
juggle = 7 
ctrl = 0

[STate 3000]
type = varset
trigger1 = Animelem = 1
var(29) = 0

[STate 3000]
type = SuperPause
trigger1 = Animelem = 1
time = 45
movetime = 26
sound = s1,17
anim = -1
pos = -20,-90

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 6
anim = 6046
ID = 6046
pos = 60,43
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 6010
ID = 6010
pos = 30,-40
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 6011
ID = 6011
pos = 30,-40
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 7
anim = 3355
ID = 3355
pos = 0,0
postype = p1
sprpriority = 4
supermove = 1
removeongethit = 1
bindtime = 9999
ownpal = 1

[state nothitby]
type = nothitby
trigger1 = time >=0 && time <=32
value = SCA
time = 1
ignorehitpause = 1

[State 3700]
type = PlaySnd
trigger1 = animelem = 6
value = 3000,30

[State 3700]
type = PlaySnd
trigger1 = animelem = 7
value = 3800,0

[STate 3150]
type = PlaySNd
trigger1 = time = 3
value = 2000,9
channel = 1
volume = 250

[STate 3150]
type = PlaySNd
trigger1 = time = 2
value = 2995,54
channel = 0
volume = 60

[State 600]
type = velSet
trigger1 = animelem = 1
x = 1
y = -1

[State 600]
type = velSet
trigger1 = animelem = 4
x = 1
y = 1

[State 600]
type = velSet
trigger1 = animelem = 7
x = 11
y = 7.5

[State 615]
type = HitDef
triggerall = p2bodydist y >= 70
trigger1 = animelem = 7
trigger2 = animelem = 8
attr = A,NA
damage = 10,2
getpower = ifelse(fvar(10)!=1,60,6),ifelse(fvar(10)!=1,20,2)
animtype = high
air.animtype  = back
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 9,9
guard.pausetime = 13,13
sparkno = S82
guard.sparkno = S733
sparkxy = -20,-30
hitsound = S210,0
guardsound = S150,1
ground.type = high
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -6
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 15
fall.recovertime = 10
air.fall = 1
Palfx.time = 40
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1

[State 615]
type = HitDef
triggerall = p2bodydist y < 70
trigger1 = animelem = 7
trigger2 = animelem = 8
attr = A,NA
damage = 10,2
getpower = ifelse(fvar(10)!=1,60,6),ifelse(fvar(10)!=1,20,2)
animtype = high
air.animtype  = back
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 9,9
guard.pausetime = 13,13
sparkno = S82
guard.sparkno = S733
sparkxy = -20,-30
hitsound = S210,0
guardsound = S150,1
ground.type = low
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -6
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 15
fall.recovertime = 10
air.fall = 1
Palfx.time = 40
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1

[State Land]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 3355
ctrl = 0


[StateDef 3355]
type = s
movetype = A
physics = s
anim = 3370
velset = 8,0
ctrl = 0

[state posset]
type = velset
trigger1 = animelemtime(2) >= 0
trigger1 = animelemtime(3) < 8
x = 2

[state posset]
type = velset
trigger1 = animelemtime(3) = [9,17]
x = 1

[state posset]
type = targetlifeadd
trigger1 = animelemtime(2) >= 5
trigger1 = animelemtime(3) < 25
value = -10

[State 399, EnvShake]
type = EnvShake
trigger1 = Animelemtime(3) = 30
ignorehitpause = 1
persistent = 0
time = 50
freq = 100
ampl = -5
phase = 1

[State 3630]
type = envcolor
trigger1 = animtime<41
value = (40-animtime),(40-animtime),(40-animtime)
time = 3
ignorehitpause = 1
under = 1

[state posset]
type = pause
trigger1 = time%2 = 1
trigger1 = animelemtime(4) >= 0
trigger1 = animelemtime(10) < 0
time = 1

[state posset]
type = playsnd
trigger1 = animelemtime(4) = 3
value = 3305,2

[state posset]
type = playsnd
trigger1 = animelemtime(3) = 10
value = 3950,1

[state posset]
type = targetlifeadd
trigger1 = animelemtime(4) = 3
value = -300

[state posset]
type = posset
trigger1 = time = 0
y = 0

[State 1200, Explod]
type = Explod
trigger1 = animelemtime(1) = 1
anim = 3380
ID = 3380
pos = -20,5
postype = p1
sprpriority = 4
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = animelemtime(1) = 1
anim = 3380
ID = 3380
pos = -20,-5
postype = p1
sprpriority = -4
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = animelem = 5
anim = 3365
ID = 3365
pos = 0,0
postype = p1
sprpriority = -4
bindtime = 90
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 3360
ID = 3360
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 90
ownpal = 1 

[State 1200, Explod]
type = Explod
trigger1 = animelem = 5
anim = 3365
ID = 3365
pos = 0,0
postype = p1
sprpriority = -4
bindtime = 90
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = time%4 = 0
trigger1 = animelemtime(3) >= 20
trigger1 = animelemtime(4) < 2
anim = 720
ID = 720
pos = -60,-15
random = 280,20
postype = p1
sprpriority = ifelse(random<500,0,4)
vel = 0,-0.2
accel = 0,0.001
scale = 0.6,0.25
ownpal = 1

[State 615]
type = HitDef
trigger1 = animelem = 1
attr = A,NA
damage = 10,2
getpower = ifelse(fvar(10)!=1,60,6),ifelse(fvar(10)!=1,20,2)
animtype = high
air.animtype  = back
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 9,9
guard.pausetime = 13,13
sparkno = S82
guard.sparkno = S733
sparkxy = -20,-30
hitsound = S210,0
guardsound = S150,1
ground.type = low
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -6
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 15
fall.recovertime = 10
air.fall = 1
sanp = 20,-20
p2stateno = 3357
Palfx.time = 280
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1

[State Land]
type = targetbind
trigger1 = animelemtime(1)>=0
trigger1 = animelemtime(5)<0
pos = 5,-7

[State 1200, Explod]
type = removeExplod
trigger1 = time = 0
ID = 3355

[State Land]
type = ChangeState
trigger1 = !movehit
trigger1 = time = 1
value = 3305
ctrl = 0

[State Land]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[Statedef 3357]
type = S
movetype = H
physics = N
juggle = 8
velset = 0,0
ctrl = 0
sprpriority = 0

[state 1]
type = changeanim2
trigger1 = time = 0
value = 3375

[state 1]
type = posadd
trigger1 = animtime = 0
y = 7

[state selfstate]
type = selfstate
trigger1 = animtime = 0
value = 5100


;******************************************************************************************************************
;雷拳 电冲击
;******************************************************************************************************************
[StateDef 3600]
type = s
movetype = A
physics = s
anim = 3600
velset = 0,0
poweradd = -1000
ctrl = 0

[STate 3000]
type = nothitby
trigger1 = time = 0
time = 53
value = sac

[STate 3000]
type = SuperPause
trigger1 = Animelem = 1
time = 50
movetime = 50
sound = s1,17
anim = -1
pos = -20,-90

[State 3700]
type = PlaySnd
trigger1 = animelem = 6
value = 3000,20

[State 3700]
type = PlaySnd
trigger1 = AnimElemtime(4) >= 0
trigger1 = time%19 = 0
trigger1 = random < 500
value = 4040,0

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 3601
id = 3601
pos = 1,5
postype = p1
sprpriority = 3
removeongethit=1
supermove = 1
bindtime = 999
removetime = 999
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 6000
ID = 6010
pos = 18,-98
postype = p1
sprpriority = -4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 6001
ID = 6001
pos = 18,-98
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = time >= 0
trigger1 = time%19 = 0
trigger1 = random < 300
anim = 6211
pos = 0,0
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = time >= 0
trigger1 = time%19 = 0
trigger1 = random < 500
anim = 6212
pos = 0,0
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = time >= 10
trigger1 = time%19 = 0
trigger1 = random < 500
anim = 6213
pos = 0,0
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = time >= 20
trigger1 = time%19 = 0
trigger1 = random < 500
anim = 6214
pos = 0,0
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 399, EnvShake]
type = EnvShake
trigger1 = Animelemtime(12) = 1
ignorehitpause = 1
persistent = 0
time = 50
freq = 100
ampl = -5
phase = 1

[State 3700]
type = PlaySnd
triggerall = var(59) = 0
trigger1 = animelemtime(6) >= 200
trigger2 = animelemtime(6) >= 16
trigger2 = command != "hold_x"
trigger2 = command != "hold_y"
value = 2990,0

[state selfstate]
type = changestate
triggerall = var(59) = 0
trigger1 = animelemtime(6) >= 200
trigger2 = animelemtime(6) >= 16
trigger2 = command != "hold_x"
trigger2 = command != "hold_y"
value = 3605

[State 3700]
type = PlaySnd
triggerall = var(59) != 0
trigger1 = animelemtime(6) >= 200
trigger2 = animelemtime(6) >= 16
trigger2 = p2bodydist x < 70 
value = 2990,0

[state selfstate]
type = changestate
triggerall = var(59) != 0
trigger1 = animelemtime(6) >= 200
trigger2 = animelemtime(6) >= 16
trigger2 = p2bodydist x < 70 
value = 3605

[StateDef 3605]
type = s
movetype = A
physics = s
anim = 3605
velset = 0,0
ctrl = 0

[State 1200, Explod]
type = removeexplod
trigger1 = numexplod(8001) != 0
trigger1 = AnimElemtime(20) = 0
id = 8001

[State 3630]
type = envcolor
trigger1 = PrevStateNo = 4510
trigger1 = numexplod(8001) != 0
value = 0,0,0
time = 5
under = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElemtime(1) = 0
anim = 6215
pos = 0,0
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 3700]
type = PlaySnd
trigger1 = animelem = 9
value = 3650,2

[STate 3000]
type = nothitby
trigger1 = time = 0
time = 40
value = sac

[STate 3000]
type = removeexplod
trigger1 = time = 0
id = 3601

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 6
anim = 3609
pos = 0,0
postype = p1
sprpriority = -3
supermove = 1
bindtime = 99
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 6
anim = 3606
pos = 0,0
postype = p1
sprpriority = 2
supermove = 1
ignorehitpause = 0
bindtime = 99
scale = .8,.7
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 6
anim = 3606
pos = 0,0
postype = p1
sprpriority = 2
supermove = 1
facing = -1
bindtime = 99
ignorehitpause = 0
scale = .8,.7
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 6
anim = 3607
pos = 0,0
postype = p1
sprpriority = -3
supermove = 1
bindtime = 99
ignorehitpause = 0
scale = .8,.7
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 6
anim = 3607
pos = 0,0
postype = p1
sprpriority = -3
supermove = 1
facing = -1
bindtime = 99
ignorehitpause = 0
scale = .8,.7
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 6
anim = 3608
id = 3608
pos = 6,0
postype = p1
sprpriority = 3
supermove = 1
ownpal = 1

[State 3700]
type = PlaySnd
trigger1 = animelem = 6
value = 4040,0

[State 3700]
type = PlaySnd
trigger1 = animelem = 6
value = 4960,0

[State 399, EnvShake]
type = EnvShake
trigger1 = Animelemtime(6) = 1
ignorehitpause = 1
persistent = 0
time = 50
freq = 100
ampl = -5
phase = 1

[State 399, EnvShake]
type = hitdef
triggerall = var(50) = 0
trigger1 = animelem = 6
trigger2 = !movehit
trigger2 = animelem = 7
trigger3 = animelem = 8
trigger4 = !movehit
trigger4 = animelem = 9
trigger5 = animelem = 10
trigger6 = !movehit
trigger6 = animelem = 11
trigger7 = animelem = 12
trigger8 = !movehit
trigger8 = animelem = 13
attr = S,SP
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 60,20
sparkno = S736
guard.sparkno = S733
sparkxy = (p2bodydist x)/3-30,-67
hitsound = S220,0
guardsound = S150,1
pausetime = 5,15
animtype = Hard
guard.hittime = 14
guard.velocity = 0
guard.slidetime = 14
ground.hittime = 23
ground.velocity = 0,-6
ground.slidetime = 23
ground.type = High
air.hittime = 14
id = 1003
air.juggle = 8
air.velocity = 0,-5
air.type = High
air.recover = 0
air.fall=1
fall.recover = 0
palfx.time = 45
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[State 399, EnvShake]
type = hitdef
triggerall = var(50) = 0
trigger1 = animelem = 14
attr = S,SP
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 150,20
sparkno = S736
guard.sparkno = S733
sparkxy = (p2bodydist x)/3-30,-67
hitsound = S220,0
guardsound = S150,1
pausetime = 5,15
animtype = Hard
guard.hittime = 14
guard.velocity = -4
guard.slidetime = 14
ground.hittime = 23
ground.velocity = -2,-7
ground.slidetime = 23
ground.type = High
air.hittime = 14
id = 1003
air.juggle = 8
air.velocity = -2,-7
air.type = High
air.recover = 0
air.fall=1
fall.recover = 0
palfx.time = 45
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

;------------

[State 399, EnvShake]
type = hitdef
triggerall = var(50) = 1
trigger1 = animelem = 6
trigger2 = !movehit
trigger2 = animelem = 7
trigger3 = animelem = 8
trigger4 = !movehit
trigger4 = animelem = 9
trigger5 = animelem = 10
trigger6 = !movehit
trigger6 = animelem = 11
trigger7 = animelem = 12
trigger8 = !movehit
trigger8 = animelem = 13
attr = S,SP
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 60,20
sparkno = S736
guard.sparkno = S733
sparkxy = (p2bodydist x)/3-30,-67
hitsound = S220,0
guardsound = S150,1
pausetime = 5,15
animtype = Hard
guard.hittime = 14
guard.velocity = 0
guard.slidetime = 14
ground.hittime = 23
ground.velocity = 0,-6
ground.slidetime = 23
ground.type = High
air.hittime = 14
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
id = 1003
air.juggle = 8
air.velocity = 0,-5
air.type = High
air.recover = 0
air.fall=1
fall.recover = 0
palfx.time = 45
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[State 399, EnvShake]
type = hitdef
triggerall = var(50) = 1
trigger1 = animelem = 14
attr = S,SP
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 150,20
sparkno = S736
guard.sparkno = S733
sparkxy = (p2bodydist x)/3-30,-67
hitsound = S220,0
guardsound = S150,1
pausetime = 5,15
animtype = Hard
guard.hittime = 14
guard.velocity = -4
guard.slidetime = 14
ground.hittime = 23
ground.velocity = -2,-7
ground.slidetime = 23
ground.type = High
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.hittime = 14
id = 1003
air.juggle = 8
air.velocity = -2,-7
air.type = High
air.recover = 0
air.fall=1
fall.recover = 0
palfx.time = 45
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[State 1200, Explod]
type = Explod
trigger1 = movecontact
trigger1 = time%19 = 0
trigger1 = random < 500
anim = 6212
pos = 0,0
postype = p2
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
triggerall = movecontact
trigger1 = time%19 = 0
trigger1 = random < 500
trigger2 = animtime = 0
anim = 6213
pos = 0,0
postype = p2
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
triggerall = movehit
trigger1 = time%19 = 0
trigger1 = random < 500
trigger2 = animtime = 0
anim = 6214
pos = 0,0
postype = p2
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[state selfstate]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;******************************************************************************************************************
;雷拳 电冲击
;******************************************************************************************************************
[StateDef 3650]
type = s
movetype = A
physics = s
anim = 3600
poweradd = -2000
velset = 0,0
ctrl = 0

[STate 3000]
type = SuperPause
trigger1 = Animelem = 1
time = 53
movetime = 53
sound = s1,17
anim = -1
pos = -20,-90

[STate 3000]
type = nothitby
trigger1 = time = 0
time = 70
value = sac

[State 3700]
type = PlaySnd
trigger1 = animelem = 6
value = 3000,30

[State 3700]
type = PlaySnd
trigger1 = AnimElemtime(4) >= 0
trigger1 = time%19 = 0
trigger1 = random < 500
value = 4040,0

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 3601
id = 3601
pos = 1,5
postype = p1
sprpriority = 3
supermove = 1
removeongethit=1
bindtime = 999
removetime = 999
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 6010
ID = 6010
pos = 18,-98
postype = p1
sprpriority = -4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 6011
ID = 6001
pos = 18,-98
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = time >= 0
trigger1 = time%19 = 0
trigger1 = random < 300
anim = 6211
pos = 0,0
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = time >= 0
trigger1 = time%19 = 0
trigger1 = random < 500
anim = 6212
pos = 0,0
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = time >= 10
trigger1 = time%19 = 0
trigger1 = random < 500
anim = 6213
pos = 0,0
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = time >= 20
trigger1 = time%19 = 0
trigger1 = random < 500
anim = 6214
pos = 0,0
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 399, EnvShake]
type = EnvShake
trigger1 = Animelemtime(12) = 1
ignorehitpause = 1
persistent = 0
time = 50
freq = 100
ampl = -5
phase = 1

[state selfstate]
type = changestate
trigger1 = animelemtime(6) >= 250
trigger2 = animelemtime(6) >= 15
trigger2 = command != "hold_x"
trigger2 = command != "hold_y"
value = 3655

[state selfstate]
type = changestate
triggerall = var(59) != 0
trigger1 = animelemtime(6) >= 200
trigger2 = animelemtime(6) >= 15
trigger2 = p2bodydist x < 70 
value = 3655

[StateDef 3655]
type = s
movetype = A
physics = s
anim = 3655
velset = 0,0
ctrl = 0

[State 1200, Explod]
type = Explod
trigger1 = AnimElemtime(1) = 0
anim = 6215
pos = 0,0
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[STate 3000]
type = removeexplod
trigger1 = time = 0
id = 3601

[STate 3000]
type = nothitby
trigger1 = time = 0
time = 45
value = sac

[State 3700]
type = PlaySnd
trigger1 = animelem = 2
value = 3650,0

[State 3700]
type = PlaySnd
trigger1 = animelem = 13
value = 3650,1

[State 3700]
type = PlaySnd
trigger1 = animelem = 23
value = 3650,2

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 6
trigger2 = AnimElem = 16
trigger3 = AnimElem = 23
anim = 3609
pos = 0,0
postype = p1
sprpriority = -3
supermove = 1
bindtime = 99
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 6
trigger2 = AnimElem = 16
anim = 3606
pos = 0,0
postype = p1
sprpriority = 2
supermove = 1
ignorehitpause = 0
bindtime = 99
scale = .8,.7
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 6
trigger2 = AnimElem = 16
anim = 3606
pos = 0,0
postype = p1
sprpriority = 2
supermove = 1
facing = -1
bindtime = 99
ignorehitpause = 0
scale = .8,.7
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 6
trigger2 = AnimElem = 16
anim = 3607
pos = 0,0
postype = p1
sprpriority = -3
supermove = 1
bindtime = 99
ignorehitpause = 0
scale = .8,.7
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 6
trigger2 = AnimElem = 16
anim = 3607
pos = 0,0
postype = p1
sprpriority = -3
supermove = 1
facing = -1
bindtime = 99
ignorehitpause = 0
scale = .8,.7
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 23
anim = 3606
pos = 0,0
postype = p1
sprpriority = 2
supermove = 1
ignorehitpause = 0
bindtime = 99
scale = 1,.8
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 23
anim = 3606
pos = 0,0
postype = p1
sprpriority = 2
supermove = 1
facing = -1
bindtime = 99
ignorehitpause = 0
scale = 1,.8
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 23
anim = 3607
pos = 0,0
postype = p1
sprpriority = -3
supermove = 1
bindtime = 99
ignorehitpause = 0
scale = 1,.8
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 23
anim = 3607
pos = 0,0
postype = p1
sprpriority = -3
supermove = 1
facing = -1
bindtime = 99
ignorehitpause = 0
scale = 1,.8
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 6
anim = 3608
id = 3608
pos = 6,0
postype = p1
sprpriority = 3
supermove = 1
ownpal = 1

[State 3700]
type = PlaySnd
trigger1 = animelem = 6
trigger2 = animelem = 16
trigger3 = animelem = 23
value = 4040,0

[State 3700]
type = PlaySnd
trigger1 = animelem = 6
trigger2 = animelem = 16
trigger3 = animelem = 23
value = 4960,0

[State 399, EnvShake]
type = EnvShake
trigger1 = animelem = 6
trigger2 = animelem = 16
trigger3 = animelem = 23
ignorehitpause = 1
time = 50
freq = 100
ampl = -5
phase = 1

[State 399, EnvShake]
type = hitdef
triggerall = var(50) = 0
trigger1 = animelem = 6
trigger2 = !movehit
trigger2 = animelem = 7
trigger3 = animelem = 8
trigger4 = !movehit
trigger4 = animelem = 9
trigger5 = animelem = 10
trigger6 = !movehit
trigger6 = animelem = 11
trigger7 = animelem = 16
trigger8 = animelem = 17
trigger9 = animelem = 23
trigger10 = !movehit
trigger10 = animelem = 24
trigger11 = animelem = 25
trigger12 = !movehit
trigger12 = animelem = 26
trigger13 = animelem = 27
trigger14 = !movehit
trigger14 = animelem = 28
trigger16 = !movehit
trigger16 = animelem = 29
trigger17 = animelem = 30
attr = S,SP
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 60,20
sparkno = S736
guard.sparkno = S733
sparkxy = (p2bodydist x)/3-30,-67
hitsound = S220,0
guardsound = S150,1
pausetime = 5,15
animtype = Hard
guard.hittime = 14
guard.velocity = 0
guard.slidetime = 14
ground.hittime = 23
ground.velocity = 0,-6
ground.slidetime = 23
ground.type = High
air.hittime = 14
id = 1003
air.velocity = 0,-5
air.type = High
air.recover = 0
air.fall=1
fall.recover = 0
palfx.time = 45
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[State 399, EnvShake]
type = hitdef
triggerall = var(50) = 0
trigger1 = animelem = 31
attr = S,SP
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 150,20
sparkno = S736
guard.sparkno = S733
sparkxy = (p2bodydist x)/3-30,-67
hitsound = S220,0
guardsound = S150,1
pausetime = 5,15
animtype = Hard
guard.hittime = 14
guard.velocity = -4
guard.slidetime = 14
ground.hittime = 23
ground.velocity = -2,-7
ground.slidetime = 23
ground.type = High
air.hittime = 14
id = 1003
air.velocity = -2,-7
air.type = High
air.recover = 0
air.fall=1
fall.recover = 0
palfx.time = 45
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

;----------------------

[State 399, EnvShake]
type = hitdef
triggerall = var(50) = 1
trigger1 = animelem = 6
trigger2 = !movehit
trigger2 = animelem = 7
trigger3 = animelem = 8
trigger4 = !movehit
trigger4 = animelem = 9
trigger5 = animelem = 10
trigger6 = !movehit
trigger6 = animelem = 11
trigger7 = animelem = 16
trigger8 = animelem = 17
trigger9 = animelem = 23
trigger10 = !movehit
trigger10 = animelem = 24
trigger11 = animelem = 25
trigger12 = !movehit
trigger12 = animelem = 26
trigger13 = animelem = 27
trigger14 = !movehit
trigger14 = animelem = 28
trigger16 = !movehit
trigger16 = animelem = 29
trigger17 = animelem = 30
attr = S,SP
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 60,20
sparkno = S736
guard.sparkno = S733
sparkxy = (p2bodydist x)/3-30,-67
hitsound = S220,0
guardsound = S150,1
pausetime = 5,15
animtype = Hard
guard.hittime = 14
guard.velocity = 0
guard.slidetime = 14
ground.hittime = 23
ground.velocity = 0,-6
ground.slidetime = 23
ground.type = High
air.hittime = 14
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
id = 1003
air.velocity = 0,-5
air.type = High
air.recover = 0
air.fall=1
fall.recover = 0
palfx.time = 45
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[State 399, EnvShake]
type = hitdef
triggerall = var(50) = 1
trigger1 = animelem = 31
attr = S,SP
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 150,20
sparkno = S736
guard.sparkno = S733
sparkxy = (p2bodydist x)/3-30,-67
hitsound = S220,0
guardsound = S150,1
pausetime = 5,15
animtype = Hard
guard.hittime = 14
guard.velocity = -4
guard.slidetime = 14
ground.hittime = 23
ground.velocity = -2,-7
ground.slidetime = 23
ground.type = High
air.hittime = 14
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
id = 1003
air.velocity = -2,-7
air.type = High
air.recover = 0
air.fall=1
fall.recover = 0
palfx.time = 45
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[State 1200, Explod]
type = Explod
trigger1 = movecontact
trigger1 = time%19 = 0
trigger1 = random < 500
anim = 6212
pos = 0,0
postype = p2
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
triggerall = movecontact
trigger1 = time%19 = 0
trigger1 = random < 500
trigger2 = animtime = 0
anim = 6213
pos = 0,0
postype = p2
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
triggerall = movehit
trigger1 = time%19 = 0
trigger1 = random < 500
trigger2 = animtime = 0
anim = 6214
pos = 0,0
postype = p2
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[state selfstate]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;*********************************************************************************************************************************
;防御体***************************************************************************************************************************
;*********************************************************************************************************************************
[Statedef 3112]
type    = A
movetype= I
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
poweradd = 0
sprpriority = -3
anim = 3112

[STate 3112]
type = HitBy
trigger1 = 1
value = SAC,NP,SP,HP

[STate 3112]
type = HitOverRide
trigger1 = 1
attr = SAC,NP,SP,HP
stateno = 3222

[State 3112]
type = Bindtoparent
trigger1 = 1
pos = 0,0

[State 3112]
type = Destroyself
trigger1 = root,stateno != 3000
trigger2 = root,animelem = 13,>= 0 && root,stateno = 3000

;防御体-----------------------------------

[Statedef 3111]
type    = A
movetype= I
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
poweradd = 0
sprpriority = -3
anim = 3111

[STate 3111]
type = HitBy
trigger1 = 1
value = SAC,NP,SP,HP

[STate 3111]
type = HitOverRide
trigger1 = 1
attr = SAC,NP,SP,HP
stateno = 3222

[State 3111]
type = Bindtoparent
trigger1 = 1
pos = 0,0

[State 3111]
type = Destroyself
trigger1 = root,stateno != 3000
trigger2 = root,animelem = 13,>= 0 && root,stateno = 3000

[STatedef 3222]
type = A
anim = 3222
ctrl = 0
sprpriority = -3
velset = 0,0

[STate 3222]
type = DestroySelf
trigger1 = time = 2

[STatedef 1475]
type = A
anim = 3000
ctrl = 0
sprpriority = 3
velset = 0,0

[State 1475]
type = velset
trigger1 = 1
x = 0

[STate 1475]
type = DestroySelf
trigger1 = animtime = 0

[STatedef 1475]
type = A
anim = 3002
ctrl = 0
sprpriority = 3
velset = 1,0

[State 1475]
type = velset
trigger1 = 1
x = 0

[STate 1475]
type = DestroySelf
trigger1 = animtime = 0

[STatedef 1477]
type = A
anim = 3006
ctrl = 0
sprpriority = 3
velset = 1,0

[State 1475]
type = velset
trigger1 = 1
x = 0

[STate 1475]
type = DestroySelf
trigger1 = animtime = 0

[Statedef 3612]
type    = A
movetype= I
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
poweradd = 0
sprpriority = -3
anim = 3112

[STate 3112]
type = HitBy
trigger1 = 1
value = SAC,NP,SP,HP

[STate 3112]
type = HitOverRide
trigger1 = 1
attr = SAC,NP,SP,HP
stateno = 3222

[State 3112]
type = Bindtoparent
trigger1 = 1
pos = 0,0

[State 3112]
type = Destroyself
trigger1 = root,stateno != 3500
trigger2 = root,animelem = 13,>= 0 && root,stateno = 3500


[Statedef 3611]
type    = A
movetype= I
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
poweradd = 0
sprpriority = -3
anim = 3111

[STate 3111]
type = HitBy
trigger1 = 1
value = SAC,NP,SP,HP

[STate 3111]
type = HitOverRide
trigger1 = 1
attr = SAC,NP,SP,HP
stateno = 3222

[State 3111]
type = Bindtoparent
trigger1 = 1
pos = 0,0

[State 3111]
type = Destroyself
trigger1 = root,stateno != 3500
trigger2 = root,animelem = 13,>= 0 && root,stateno = 3500

[STatedef 1478]
type = A
anim = 3006
ctrl = 0
sprpriority = 3
velset = 1,0

[State 1470]
type = velset
trigger1 = 1
x = 0

[STate 1470]
type = Pause
trigger1 = TimeMod = 2,0
time = 1
ignorehitpause = 1

[STate 1470]
type = DestroySelf
trigger1 = animtime = 0


[STatedef 1470]
type = A
anim = 3000
ctrl = 0
sprpriority = 3
velset = 1,0

[State 1470]
type = velset
trigger1 = 1
x = 0

[STate 1470]
type = Pause
trigger1 = TimeMod = 2,0
time = 1
ignorehitpause = 1

[STate 1470]
type = DestroySelf
trigger1 = animtime = 0

;******************************************************
;烈火漩舞
;******************************************************
[statedef 4000]
type = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
poweradd = -1000
facep2 = 1
anim = 4000

[state nothitby]
type = nothitby
triggerall = movehit
trigger1 = time > 35
value = sca
time = 1
ignorehitpause = 1

[STate 3205]
type = SuperPause
trigger1 = Animelem = 1
time = 25
movetime = 15
sound = s1,17
anim = -1
pos = -20,-100

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 6000
pos = 10,-95
postype = p1
sprpriority = -3
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 6001
pos = 40,-80
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 6001
pos = 0,-80
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1

[State 3700]
type = PlaySnd
trigger1 = animelem = 1
value = 3000,20

[State stop]
type = ChangeState
trigger1 = animtime = 0
value = 4001
ctrl = 0

[statedef 4001]
type = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 4001

[state nothitby]
type = nothitby
triggerall = movehit
trigger1 = time > 35
value = sca
time = 1
ignorehitpause = 1

[State 3700]
type = PlaySnd
trigger1 = animelem = 5
value = 4300,0

[State 3700]
type = PlaySnd
trigger1 = animelem = 7
value = 3305,0

[State 1200, Explod]
type = Explod
trigger1 = numexplod(4002)=0
trigger1 = AnimElem = 5
anim = 4002
id = 4002
pos = 13,-66
postype = p1
sprpriority = 5
supermove = 1
bindtime = 99999
removetime = -1
ignorehitpause = 1
removegethit = 1

[State 1200, Explod]
type = Explod
trigger1 = numexplod(4003)=0
trigger1 = AnimElem = 5
anim = 4003
id = 4003
pos = -5,-56
postype = p1
sprpriority = 4
supermove = 1
bindtime = 99999
removetime = -1
ignorehitpause = 1
removegethit = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 7
anim = 3365
pos = 5,-0
postype = p1
sprpriority = -4
supermove = 1
bindtime = 99999

[State HitDef]
type = HitDef
trigger1 = AnimElem = 6
trigger2 = AnimElem = 7
trigger3 = AnimElem = 8
attr = S,HA
damage = ifelse(!movehit,150,15),15
getpower = 15,1
animtype = back
guardflag = M
hitflag = MAF
priority = 7,Hit
pausetime = 12,12
guard.pausetime = 12,12
sparkno = S82
snap = 55,-40
guard.sparkno = S733
sparkxy = 10,-90
hitsound = S220,10
guardsound = S150,1
ground.type = low
ground.slidetime = 27
ground.hittime = 29
ground.velocity =  0,-3
airguard.velocity = -7,-6
guard.velocity = -6
air.type = low
air.velocity = 0,-3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -3
air.hittime = 12
air.recover = 0
id = 10001
fall.recover = 0
fall = 1
Palfx.time = 40
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State stop]
type = ChangeState
triggerall = power >= 1000
trigger1 = (var(13) = [841,850])
trigger2 = (var(13) = [861,870])
value = 4005
ctrl = 0

[State stop]
type = ChangeState
trigger1 = time >= 150
value = 4009
ctrl = 0
;---------------------------------------------------
;烈火追击
[statedef 4005]
type = S
movetype= A
physics = S
velset = 0,0
poweradd = -1000
ctrl = 0
facep2 = 1
anim = 4005

[State 1200, Explod]
type = removeExplod
trigger1 = AnimElem = 2
id = 4002

[State 1200, Explod]
type = removeExplod
trigger1 = AnimElem = 2
id = 4003

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 11
anim = 3365
pos = 15,-0
postype = p1
sprpriority = -4
supermove = 1
bindtime = 99999

[State 399, EnvShake]
type = EnvShake
trigger1 = animelem = 11
ignorehitpause = 1
persistent = 0
time = 60
freq = 100
ampl = -6
phase = 1

[STate 3205]
type = SuperPause
trigger1 = Animelem = 1
time = 50
movetime = 45
sound = s1,17
anim = -1
pos = -20,-100

[State 3700]
type = PlaySnd
trigger1 = animelem = 7
value = 3305,0

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 6060
pos = 0,-75
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 11
anim = 4303
pos = 0,10
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1

[State 3700]
type = PlaySnd
trigger1 = animelem = 7
value = 3000,20

[State 3700]
type = PlaySnd
trigger1 = animelem = 11
value = 4960,0

[State HitDef]
type = HitDef
trigger1 = time = 0
attr = S,HA
damage = 250,75
getpower = 65,10
animtype = back
guardflag = M
hitflag = MAFD
priority = 7,Hit
pausetime = 12,12
guard.pausetime = 12,12
sparkno = S82
snap = 70,-25
guard.sparkno = S733
sparkxy = 10,-90
hitsound = S220,10
guardsound = S150,1
ground.type = low
ground.slidetime = 27
ground.hittime = 29
ground.velocity =  -3,-6
airguard.velocity = -7,-6
guard.velocity = -16
air.type = low
air.velocity = -3,-6
ground.cornerpush.veloff = -10
guard.cornerpush.veloff = -17
air.hittime = 12
air.recover = 0
id = 10001
fall.recover = 0
fall = 1
Palfx.time = 40
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 11
anim = 80
pos = 100,-8
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1

[State stop]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------
;烈火追击
[statedef 4009]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 4009

[State 1200, Explod]
type = removeExplod
trigger1 = AnimElem = 2
id = 4002

[State 1200, Explod]
type = removeExplod
trigger1 = AnimElem = 2
id = 4003

[State 1200, Explod]
type = Explod
triggerall = time%3=1
trigger1 = AnimElemtime(1) >= 0
trigger1 = animelemtime(5) < 0
anim = ifelse(random<500,64,65)
pos = 0,-50
random = 90,90
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1

[State stop]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;******************************************************
;烈火漩舞
;******************************************************
[statedef 4050]
type = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
poweradd = -2000
facep2 = 1
anim = 4000

[state nothitby]
type = nothitby
triggerall = movehit
trigger1 = time > 35
value = sca
time = 1
ignorehitpause = 1

[STate 3205]
type = SuperPause
trigger1 = Animelem = 1
time = 25
movetime = 15
sound = s1,17
anim = -1
pos = -20,-100

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 6010
pos = 10,-95
postype = p1
sprpriority = -3
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 6011
pos = 40,-80
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 6011
pos = 0,-80
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1

[State 3700]
type = PlaySnd
trigger1 = animelem = 1
value = 3000,30

[State stop]
type = ChangeState
trigger1 = animtime = 0
value = 4051
ctrl = 0

;--------------------------------------------------------------------------------------------
[statedef 4051]
type = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 4001

[state nothitby]
type = nothitby
triggerall = movehit
trigger1 = time > 35
value = sca
time = 1
ignorehitpause = 1

[State 3700]
type = PlaySnd
trigger1 = animelem = 5
value = 4300,0

[State 3700]
type = PlaySnd
trigger1 = animelem = 7
value = 3305,0

[State 1200, Explod]
type = Explod
trigger1 = numexplod(4002)=0
trigger1 = AnimElem = 5
anim = 4002
id = 4002
pos = 13,-66
postype = p1
sprpriority = 5
supermove = 1
bindtime = 99999
removetime = -1
ignorehitpause = 1
removegethit = 1

[State 1200, Explod]
type = Explod
trigger1 = numexplod(4003)=0
trigger1 = AnimElem = 5
anim = 4003
id = 4003
pos = -5,-56
postype = p1
sprpriority = 4
supermove = 1
bindtime = 99999
removetime = -1
ignorehitpause = 1
removegethit = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 7
anim = 3365
pos = 5,-0
postype = p1
sprpriority = -4
supermove = 1
bindtime = 99999

[State HitDef]
type = HitDef
trigger1 = AnimElem = 6
trigger2 = AnimElem = 7
trigger3 = AnimElem = 8
attr = S,HA
damage = ifelse(!movehit,200,15),15
getpower = 15,1
animtype = back
guardflag = M
hitflag = MAF
priority = 7,Hit
pausetime = 12,12
guard.pausetime = 12,12
sparkno = S82
snap = 55,-40
guard.sparkno = S733
sparkxy = 10,-90
hitsound = S220,10
guardsound = S150,1
ground.type = low
ground.slidetime = 27
ground.hittime = 29
ground.velocity =  0,-2
airguard.velocity = -7,-6
guard.velocity = -6
air.type = low
air.velocity = 0,-3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -2
air.hittime = 12
air.recover = 0
id = 10001
fall.recover = 0
fall = 1
Palfx.time = 40
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State stop]
type = ChangeState
triggerall = power >= 1000
trigger1 = (var(13) = [841,850])
trigger2 = (var(13) = [861,870])
value = 4055
ctrl = 0

[State stop]
type = ChangeState
trigger1 = time >= 280
value = 4059
ctrl = 0
;---------------------------------------------------
;烈火追击
[statedef 4055]
type = S
movetype= A
physics = S
velset = 0,0
poweradd = -1000
ctrl = 0
facep2 = 1
anim = 4005

[State 1200, Explod]
type = removeExplod
trigger1 = AnimElem = 2
id = 4002

[State 1200, Explod]
type = removeExplod
trigger1 = AnimElem = 2
id = 4003

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 11
anim = 3365
pos = 15,-0
postype = p1
sprpriority = -4
supermove = 1
bindtime = 99999

[STate 3205]
type = SuperPause
trigger1 = Animelem = 1
time = 50
movetime = 45
sound = s1,17
anim = -1
pos = -20,-100

[State 3700]
type = PlaySnd
trigger1 = animelem = 7
value = 3305,0

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 6060
pos = 0,-75
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1


[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 11
anim = 4303
pos = 0,10
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1

[State 3700]
type = PlaySnd
trigger1 = animelem = 7
value = 3000,20

[State 3700]
type = PlaySnd
trigger1 = animelem = 11
value = 3305,2

[State 3700]
type = helper
trigger1 = animelem = 11
stateno = 4006
id = 4006
pos = 56,-5
size.xscale = 1
size.yscale = 1

[State HitDef]
type = HitDef
trigger1 = time = 0
attr = S,HA
damage = 250,75
getpower = 65,10
animtype = back
guardflag = M
hitflag = MAFD
priority = 7,Hit
pausetime = 12,12
guard.pausetime = 12,12
sparkno = S82
snap = 70,-25
guard.sparkno = S733
sparkxy = 10,-90
hitsound = S220,10
guardsound = S150,1
ground.type = low
ground.slidetime = 27
ground.hittime = 29
ground.velocity =  -3,-6
airguard.velocity = -7,-6
guard.velocity = -16
air.type = low
air.velocity = -3,-6
ground.cornerpush.veloff = -10
guard.cornerpush.veloff = -17
air.hittime = 12
air.recover = 0
id = 10001
fall.recover = 0
fall = 1
Palfx.time = 40
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State stop]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------
;烈火追击
[statedef 4059]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 4009

[State 1200, Explod]
type = removeExplod
trigger1 = AnimElem = 2
id = 4002

[State 1200, Explod]
type = removeExplod
trigger1 = AnimElem = 2
id = 4003


[State stop]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;******************************************************
;九天凤玄舞
;******************************************************
[statedef 4200]
type = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
poweradd = -1000
facep2 = 1
anim = 4200

[State 3630]
type = envcolor
trigger1 = time = 0
value = 40,40,40
time = 30
ignorehitpause = 1
under = 1

[State 3630]
type = envcolor
trigger1 = time = 5
value = 30,30,30
time = 30
ignorehitpause = 1
under = 1

[State 3630]
type = envcolor
trigger1 = time = 10
value = 20,20,20
time = 30
ignorehitpause = 1
under = 1

[State 3630]
type = envcolor
trigger1 = time = 15
value = 10,10,10
time = 30
ignorehitpause = 1
under = 1

[State 3630]
type = envcolor
trigger1 = time = 20
value = 0,0,0
time = 30
ignorehitpause = 1
under = 1

[State 3700]
type = PlaySnd
trigger1 = animelem = 1
value = 3000,20

[State 3700]
type = PlaySnd
trigger1 = animelem = 13
value = 3305,0

[state nothitby]
type = nothitby
trigger1 = time <=50
value = SCA
time = 1
ignorehitpause = 1

[state nothitby]
type = nothitby
triggerall = movehit
trigger1 = time > 35
value = sca
time = 1
ignorehitpause = 1

[state 1600]
type = posadd
trigger1 = animelem = 3
trigger2 = animelem = 4
x=5

[state 1600]
type = posadd
trigger1 = animelem = 5
x=10

[STate 3205]
type = SuperPause
trigger1 = Animelem = 2
time = 45
movetime = 25
sound = s1,17
anim = -1
pos = -20,-100

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 7
anim = 6000
pos = 0,-41
postype = p1
sprpriority = -4
supermove = 1
bindtime = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 7
anim = 6001
pos = 0,-41
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1

[State 1200, Explod]
type = posadd
trigger1 = animelemtime(10) = 0
x = 25

[State 1200, Explod]
type = posadd
trigger1 = animelemtime(11) = 0
x = 15

[State 1200, Explod]
type = Explod
trigger1 = animelemtime(13) = 4
anim = 4204
ID = 4204
pos = 37,-99
postype = p1
sprpriority = 3
supermove = 1

[State 1200, Explod]
type = removeExplod
trigger1 = AnimElem = 3
ID = 1495

[State 399, EnvShake]
type = EnvShake
;trigger1 = time = 0
trigger1 = movehit
ignorehitpause = 1
persistent = 0
time = 15
freq = 100
ampl = -2
phase = 1

[State 1650, 1]
type = ReversalDef
trigger1 = animelem = 1 
reversal.attr = SCA,NA,SA, AP,NP,SP,AA,HP,HA
hitflag = MAFPD
numhits = 0
pausetime = 10,10
sparkno = S733
hitsound = 6,0
p2stateno = 831

[STate 3205]
type = statetypeset
trigger1 = Animelem = 13
statetype = A
physics = N

[STate 3205]
type = velset
trigger1 = Animelem = 12
x = 12

[STate 3205]
type = velset
trigger1 = Animelem = 13
x = 1
y = -8

[STate 3205]
type = veladd
trigger1 = Animelemtime(13) >= 0
y = .4

[State HitDef]
type = HitDef
trigger1 = animelem = 13
attr = S,HA
damage = 20,25
getpower = 65,10
animtype = back
guardflag = M
hitflag = MAF
priority = 7,Hit
pausetime = 12,12
guard.pausetime = 12,12
sparkno = S82
guard.sparkno = S733
sparkxy = 10,-90
hitsound = S220,10
guardsound = S150,1
ground.type = low
ground.slidetime = 27
ground.hittime = 29
ground.velocity =  0,-7.5
airguard.velocity = -7,-6
guard.velocity = -16
air.type = low
air.velocity = 0,-7.2
ground.cornerpush.veloff = -10
guard.cornerpush.veloff = -17
air.hittime = 12
air.recover = 0
id = 10001
fall.recover = 0
fall = 1
Palfx.time = 40
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State HitDef]
type = HitDef
trigger1 = animelem = 14
attr = S,HA
damage = 50,25
getpower = 65,10
animtype = back
guardflag = M
hitflag = MAF
priority = 7,Hit
pausetime = 28,28
guard.pausetime = 25,25
sparkno = S82
guard.sparkno = S733
sparkxy = 10,-90
snap = 50,-30
hitsound = S779,0
guardsound = S150,1
ground.type = low
ground.slidetime = 27
ground.hittime = 29
ground.velocity =  0,-9.5
guard.velocity = -17
airguard.velocity = -7,-6
air.type = low
air.velocity = 0,-9.2
ground.cornerpush.veloff = -10
guard.cornerpush.veloff = -17
air.hittime = 12
air.recover = 0
id = 10001
fall.recover = 0
fall = 1
Palfx.time = 90
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .20

[State Jump]
type = ChangeState
trigger1 = pos y >= 0
trigger1 = vel y > 0
trigger1 = movehit 
value = 4201
ctrl = 0

[State stop]
type = ChangeState
trigger1 = pos y >= 0
trigger1 = vel y > 0
value = 4202
ctrl = 1

[StateDef 4201]
type = S
movetype = A
physics = S
anim = 4201
velset = 0,0
ctrl = 0

[STate 3205]
type = pause
trigger1 =  time%2=1
time = 1

[STate 3205]
type = posset
trigger1 = Animelem = 1
y = 0

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 10
anim = 3360
ID = 3360
pos = 0,0
postype = p1
ignorehitpause = 0
sprpriority = 3
supermove = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 10
anim = 3365
ID = 3365
pos = 0,0
postype = p1
ignorehitpause = 0
sprpriority = -3
supermove = 1

[state nothitby]
type = nothitby
trigger1 = time >=0
value = SCA
time = 1

[state hitdef]
type = hitdef
trigger1 = time = 0
attr = S,HA
damage = 200,45
getpower = 0,0
animtype = back
guardflag = M
hitflag = MAF
priority = 7,Hit
pausetime = 20,20
guard.pausetime = 20,20
sparkno = S82
guard.sparkno = S733
sparkxy = 10,-30
hitsound = S779,0
guardsound = S1,14
ground.type = low
ground.slidetime = 37
ground.hittime = 39
ground.velocity = 0,-9
airguard.velocity = -3,-8
air.type = low
air.velocity = 0,-9
air.hittime = 12
id = 10001
fall.recover = 0
fall = 1
Palfx.time = 40
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .25

[State 3700]
type = PlaySnd
trigger1 = animelem = 10
value = 3305,2

[State 3700]
type = PlaySnd
trigger1 = animelem = 8
value = 2995,60

[State 3700]
type = PlaySnd
trigger1 = animelem = 10
value = 4960,0

[State 3700]
type = PlaySnd
trigger1 = animelem = 1
value = 47,0

[State 399, EnvShake]
type = EnvShake
trigger1 = Animelemtime(10) = 1
ignorehitpause = 1
persistent = 0
time = 50
freq = 100
ampl = -5
phase = 1

[State Land]
type = ChangeState
trigger1 = movecontact
trigger1 = animtime = 0
value = 4204
ctrl = 0

[State Land]
type = ChangeState
trigger1 = !movecontact
trigger1 = animtime = 0
value = 0
ctrl = 1



[StateDef 4202]
type = S
movetype = A
physics = S
anim = 4202
velset = 0,0
ctrl = 0

[STate 3205]
type = posset
trigger1 = Animelem = 1
y = 0

[State 3700]
type = PlaySnd
trigger1 = animelem = 1
value = 47,0

[State Land]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
[statedef 4204]
type = S
movetype = A
physics = S
anim = 1003
velset = 0,0
sprpriority = 1
facep2 = 1
ctrl = 0

[State 3630]
type = envcolor
trigger1 = 1
value = 0,0,0
time = 83
under = 1

[state nothity]
type = nothitby
trigger1 = time >= 0
value = sca
time = 0
ignorehitpause = 1

[State 3778]
type = Explod
trigger1 = Animelem = 1 
anim = 4965
pos = 90,-50
supermove = 1
facing = -1
pausemovetime = 999
sprpriority = -2
bindtime = 1
ownpal = 1

[State 3778]
type = Explod
trigger1 = time = 5 
anim = 784
pos = 0,0
supermove = 1
sprpriority = 3
bindtime = 1
ownpal = 1

[STate 3778]
type = PlaySNd
trigger1 = time = 0
value = 4550,1
volume = 100

[STate 3000]
type = SuperPause
trigger1 = Animelem = 1
time = 30
movetime = 1
sound = s1,17
anim = -1
pos = -20,-100

[State 1200, Explod]
type = Explod
trigger1 = time = 0
anim = 6046
ID = 1495
pos = -25,53
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1

[State 1200, Explod]
type = Explod
trigger1 = time = 0
anim = 6051
pos = -50,-70
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1

[State 1200, Explod]
type = removeExplod
trigger1 = animelem = 2
ID = 1495

[state nothitby]
type = nothitby
trigger1 = time >=0
value = SCA
time=1
ignorehitpause = 1

[State HitDef]
type = HitDef
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
attr = S,HA
hitflag = MAF
guardflag = M
getpower = 0
givepower = 0
damage = 0,100
sparkno = S20003
guard.sparkno = S733
sparkxy = 10,-50-(AnimElem=3)*20
hitsound = S210,0
guardsound = S150,0
pausetime = 6,6
animtype = Hard
guard.hittime = 14
guard.velocity = -4
guard.slidetime = 6
ground.hittime = 14
ground.velocity = -4,-9
ground.slidetime = 12
ground.type = High
air.hittime = 14
air.velocity = -4,-9
air.type = High
air.recover = 0
fall=1
fall.recover = 0
yaccel = .35

[State 3000] ; Shadows
type = Afterimage
trigger1 = time = 1
time = 80
PalBright = 0, 0, 0
PalContrast =  128,68,1
PalAdd = 0, 0, 0
PalMul = 1,1,1
Length = 25
timegap = 2
FrameGap = 7
Trans = Add1

[State MoveHit]
type = VarSet
trigger1 = MoveContact
sysvar(1) = 1

[State Jump]
type = ChangeState
trigger1 = AnimTime = 0
value = 4205
ctrl = 0
;---------------------------------------------------------------------------
[StateDef 4205]
type = A
movetype = A
physics = N
anim = 3417
velset = 0,-8
ctrl = 0

[State 3875, 慢镜头]
type = Pause 
triggerall = (GameTime%2) = 0 
trigger1 = 1
time = 1 
movetime = 1 
ignorehitpause = 1

[State 3630]
type = playsnd
trigger1 = animelem = 1
value = 3800,0
channel = 3

[State 3784, VelSet]
type = VelSet
trigger1 = Time = [0,10]
x = 1

[State 3784, VelSet]
type = VelSet
trigger1 = Time >10 && time <16
x = .5

[State Gravity]
type = VelAdd
trigger1 = time > 23
y = .44

[state nothitby]
type = nothitby
trigger1 = time >=0 && time < 10
value = SCA
time=1
ignorehitpause = 1

[State 3625]
type = Explod
trigger1 = time = 0
anim = 4965
pos = -80,-110
supermove = 1
pausemovetime = 999
sprpriority = 5
bindtime = 1
ownpal = 1

[State 3784]
type = Explod
trigger1 = time = 0 
anim = 4965
pos = 80,-110
facing = -1
pausemovetime = 999
supermove = 1
sprpriority = 5
bindtime = 1
ownpal = 1

[State 3784]
type = Explod
trigger1 = Animelem = 1 
anim = 787
pos = 25,0
postype = p1
supermove = 1
sprpriority = 2
bindtime = 16
ownpal = 1
removetime = 16

[STate 3630]
type = Explod
trigger1 = animelem = 2
anim = 790
id = 790
sprpriority = -4
pos = 50;ifelse(facing=1,50,0)
bindtime = -1
postype = left
facing = 1;ifelse(facing=1,1,-1)
ignorehitpause = 1
ownpal = 1
supermove = 1
supermovetime = 9999
pausemovetime = 99999
under = 1
removetime = 59


[State 3630]
type = Helper
trigger1 = animelem = 4
stateno = 3660
id = 3660
pos = 0,-120
postype = p1
ownpal = 1
sprpriority = -3
bindtime = -1
ignorehitpause = 1

[State 3630]
type = Helper
trigger1 = animelem = 4
stateno = 3660
id = 3661
pos = 0,-150
postype = p1
ownpal = 1
sprpriority = -3
bindtime = -1
ignorehitpause = 1

[STate 3630]
type = Explod
trigger1 = time = 0
anim = 788
id = 788
sprpriority = -1
pos = 25,130
vel = 0,-20
postype = p1
;ignorehitpause = 1
ownpal = 1
supermove = 1
supermovetime = 9999
under = 1
removetime = 100

[STate 3784]
type = PlaySNd
trigger1 = time = 3
value = 4550,0
volume = 100

[State HitDef]
type = HitDef
trigger1 = animelem = 1
attr = A,HA
hitflag = MAF
guardflag = M
getpower = 30,10
givepower = 0
damage = 115,10
sparkno = S82
guard.sparkno = S82
sparkxy = 10,-80
hitsound = S210,0
guardsound = S150,0
pausetime = 14,4
animtype = Up
guard.hittime = 14
guard.velocity = -4
guard.slidetime = 16
ground.hittime = 15
ground.velocity = -4,-9
ground.slidetime = 12
ground.type = High
air.hittime = 5
air.velocity = 0,-9
air.type = High
air.recover = 0
id = 10001
fall = 1
palfx.time = 155
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = A,HA
hitflag = MAF
guardflag = M
getpower = 70
givepower = 0
damage = 120,10
sparkno = S82
guard.sparkno = S82
sparkxy = 10,-80
hitsound = S210,0
guardsound = S150,0
pausetime = 15,15
animtype = Up
guard.hittime = 14
guard.velocity = -4
guard.slidetime = 16
ground.hittime = 15
ground.velocity = -3,-8
ground.slidetime = 12
ground.type = High
air.hittime = 5
air.velocity = -3,-8
air.type = High
air.recover = 0
id = 10001
fall = 1
fall.recover = 0
fall.recovertime = 40
palfx.time = 120
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State 3630]
type = playsnd
trigger1 = AnimElem = 2
trigger1 = movehit
value = 3305,1
persistent = 0

[State playsnd]
type = playsnd
trigger1 = NumTarget(10001) > 0
trigger1 = AnimElem = 4
value = 7600,0
persistent = 0

[State 3784, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1002

;---------------------------------------------------------------------------
;******************************************************
;九天凤玄舞.极
;******************************************************
[statedef 4250]
type = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
poweradd = -2000
facep2 = 1
anim = 4200

[State 3630]
type = envcolor
trigger1 = time = 0
value = 40,40,40
time = 30
ignorehitpause = 1
under = 1

[State 3630]
type = envcolor
trigger1 = time = 5
value = 30,30,30
time = 30
ignorehitpause = 1
under = 1

[State 3630]
type = envcolor
trigger1 = time = 10
value = 20,20,20
time = 30
ignorehitpause = 1
under = 1

[State 3630]
type = envcolor
trigger1 = time = 15
value = 10,10,10
time = 30
ignorehitpause = 1
under = 1

[State 3630]
type = envcolor
trigger1 = time = 20
value = 0,0,0
time = 30
ignorehitpause = 1
under = 1

[State 3700]
type = PlaySnd
trigger1 = animelem = 1
value = 3000,30

[State 3700]
type = PlaySnd
trigger1 = animelem = 13
value = 3305,0

[state nothitby]
type = nothitby
trigger1 = time <=55
value = SCA
time = 1
ignorehitpause = 1

[STate 3205]
type = SuperPause
trigger1 = Animelem = 2
time = 45
movetime = 25
sound = s1,17
anim = -1
pos = -20,-100

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 7
anim = 6010
pos = 0,-41
postype = p1
sprpriority = -4
supermove = 1
bindtime = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 7
anim = 6011
pos = 0,-41
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1

[State 1200, Explod]
type = posadd
trigger1 = animelemtime(10) = 0
x = 25

[State 1200, Explod]
type = posadd
trigger1 = animelemtime(11) = 0
x = 15

[State 1200, Explod]
type = Explod
trigger1 = animelemtime(13) = 4
anim = 4204
ID = 4204
pos = 37,-99
postype = p1
sprpriority = 3
supermove = 1


[State 1650, 1]
type = ReversalDef
trigger1 = animelem = 1 
reversal.attr = SCA,NA,SA, AP,NP,SP,AA,HP,HA
hitflag = MAFPD
numhits = 0
pausetime = 10,10
sparkno = S733
hitsound = 6,0
p2stateno = 831

[STate 3205]
type = statetypeset
trigger1 = Animelem = 13
statetype = a
physics = n

[STate 3205]
type = velset
trigger1 = Animelem = 12
x = 12

[STate 3205]
type = velset
trigger1 = Animelem = 13
x = 1
y = -8

[STate 3205]
type = veladd
trigger1 = Animelemtime(13) >= 0
y = .4

[State HitDef]
type = HitDef
trigger1 = animelem = 13
attr = S,HA
damage = 20,25
getpower = 65,10
animtype = back
guardflag = M
hitflag = MAF
priority = 7,Hit
pausetime = 12,12
guard.pausetime = 12,12
sparkno = S82
guard.sparkno = S733
sparkxy = 10,-90
hitsound = S220,10
guardsound = S150,1
ground.type = low
ground.slidetime = 27
ground.hittime = 29
ground.velocity =  0,-7.5
airguard.velocity = -7,-6
guard.velocity = -16
air.type = low
air.velocity = 0,-7.2
air.hittime = 12
ground.cornerpush.veloff = -10
guard.cornerpush.veloff = -17
air.recover = 0
id = 10001
fall.recover = 0
fall = 1
Palfx.time = 40
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State HitDef]
type = HitDef
trigger1 = animelem = 14
attr = S,HA
damage = 50,25
getpower = 65,10
animtype = back
guardflag = M
hitflag = MAF
priority = 7,Hit
pausetime = 28,28
guard.pausetime = 25,25
sparkno = S82
guard.sparkno = S733
sparkxy = 10,-90
snap = 50,-30
hitsound = S779,0
guardsound = S150,1
ground.type = low
ground.slidetime = 27
ground.hittime = 29
ground.velocity =  0,-9.5
guard.velocity = -17
airguard.velocity = -7,-6
air.type = low
air.velocity = 0,-9.2
ground.cornerpush.veloff = -10
guard.cornerpush.veloff = -17
air.hittime = 12
air.recover = 0
id = 10001
fall.recover = 0
fall = 1
Palfx.time = 90
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .20

[State Jump]
type = ChangeState
trigger1 = pos y >= 0
trigger1 = vel y > 0
trigger1 = movehit 
value = 4251
ctrl = 0

[State stop]
type = ChangeState
trigger1 = pos y >= 0
trigger1 = vel y > 0
value = 4202
ctrl = 1

[StateDef 4251]
type = S
movetype = A
physics = S
anim = 4251
velset = 0,0
ctrl = 0

[STate 3205]
type = pause
trigger1 = time%2=1
time = 1

[STate 3205]
type = posset
trigger1 = Animelem = 1
y = 0

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 10
anim = 3360
ID = 3360
pos = 0,0
postype = p1
ignorehitpause = 0
sprpriority = 3
supermove = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 10
anim = 3365
ID = 3365
pos = 0,0
postype = p1
ignorehitpause = 0
sprpriority = -3
supermove = 1

[state nothitby]
type = nothitby
trigger1 = time >=0
value = SCA
time = 1

[state hitdef]
type = hitdef
trigger1 = time = 0
attr = S,HA
damage = 150,45
getpower = 0,0
animtype = back
guardflag = M
hitflag = MAF
priority = 7,Hit
pausetime = 20,20
guard.pausetime = 20,20
sparkno = S82
guard.sparkno = S733
sparkxy = 10,-30
hitsound = S779,0
guardsound = S1,14
ground.type = low
ground.slidetime = 37
ground.hittime = 39
ground.velocity = 0,-9
airguard.velocity = -3,-8
air.type = low
air.velocity = 0,-9
air.hittime = 12
id = 10001
fall.recover = 0
fall = 1
Palfx.time = 40
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .25

[State 3700]
type = PlaySnd
trigger1 = animelem = 10
value = 3305,2

[State 3700]
type = PlaySnd
trigger1 = animelem = 8
value = 2995,60

[State 3700]
type = PlaySnd
trigger1 = animelem = 10
value = 4960,0

[State 3700]
type = PlaySnd
trigger1 = animelem = 1
value = 47,0

[State 399, EnvShake]
type = EnvShake
trigger1 = Animelemtime(10) = 1
ignorehitpause = 1
persistent = 0
time = 50
freq = 100
ampl = -5
phase = 1


[State Jump]
type = ChangeState
trigger1 = animtime = 0
trigger1 = movehit 
value = 4252
ctrl = 0

[State stop]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;--------------------------------------------------------------------------
;---------------------------------------------------------------------------
[statedef 4252]
type = S
movetype = A
physics = S
anim = 4252
velset = 0,0
sprpriority = 1
ctrl = 0

[State 3660]
type = varrandom
trigger1 = 1
v = 4
range = 90

[State 3660]
type = varrandom
trigger1 = 1
v = 5
range = 20

[State 704, 4]
type = Explod
trigger1 = Time = [25,80]
trigger1 =gametime%2=1
sprpriority = -2
anim = ifelse(random<500,720,721)
scale = .7,.2
vel = 0,-.9
id = 1158
pos = var(4)-45,-3-var(5)
postype = P1
bindtime = 1
ownpal = 1

[State 704, 4]
type = Explod
trigger1 = Time = [25,80]
trigger1 =gametime%2=1
sprpriority = 2
anim = ifelse(random<500,720,721)
scale = .7,.2
vel = 0,-.9
id = 1157
pos = var(4)-45,-3-var(5)
postype = P1
bindtime = 1
ownpal = 1

[State 3630]
type = envcolor
trigger1 = 1
value = 0,0,0
time = 83
under = 1

[state nothity]
type = nothitby
trigger1 = time >= 0
value = sca
time = 0
ignorehitpause = 1

[State 3630]
type = Helper
trigger1 = time = 0
stateno = 4665
id = 4660
pos = 0,0
postype = p1
ownpal = 1
supermove = 99999
sprpriority = -3
bindtime = -1
ignorehitpause = 1

[State 3630]
type = Helper
trigger1 = time = 0
stateno = 4665
id = 4661
pos = 0,0
postype = p1
ownpal = 1
supermove = 999999
sprpriority = -3
bindtime = -1
ignorehitpause = 1

[State 3778]
type = Explod
trigger1 = Animelem = 3 
anim = 4965
pos = 90,-50
supermove = 1
facing = -1
pausemovetime = 999
sprpriority = -2
bindtime = 1
ownpal = 1

[State 3778]
type = Explod
trigger1 = Animelem = 5 
anim = 7656
pos = 40,-68
supermove = 1
pausemovetime = 999
sprpriority = 2
bindtime = 1
ownpal = 1

[State 3778]
type = Explod
trigger1 = Animelem = 11
anim = 7656
pos = 50,-70
supermove = 1
pausemovetime = 999
sprpriority = 2
bindtime = 1
ownpal = 1

[State 3778]
type = Explod
trigger1 = time = 5 
anim = 784
pos = 0,0
supermove = 1
sprpriority = 3
bindtime = 1
ownpal = 1

[State 3778]
type = Explod
trigger1 = animelemtime(7) = 2
anim = 784
pos = 0,0
supermove = 1
pausemovetime = 99
sprpriority = 3
bindtime = 1
ownpal = 1

[STate 3778]
type = PlaySNd
trigger1 = time = 0
value = 3950,1
volume = 100

[STate 3778]
type = PlaySNd
trigger1 = animelemtime(7) = 1
value = 3000,30
volume = 50

[STate 3778]
type = PlaySNd
trigger1 = time = 0
value = 4550,1
volume = 100

[STate 3000]
type = SuperPause
trigger1 = Animelem = 3
time = 30
movetime = 30
sound = s1,17
anim = -1
pos = -20,-100

[State 3875, 慢镜头]
type = Pause 
triggerall = (GameTime%1) = 0 && roundstate = 2 
trigger1 = movecontact
time = 1 
movetime = 1 
ignorehitpause = 1

[State 1200, Explod]
type = Explod
trigger1 = time = 6
anim = 6046
ID = 1495
pos = -12,53
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1

[State 1200, Explod]
type = Explod
trigger1 = time = 6
anim = 6051
pos = -37,-63
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1

[State 704, 4]
type = Explod
trigger1 = Time = 0
sprpriority = 2
anim = 737
id = 716
pos= -10,0
postype = P1
bindtime = 1
removeongethit = 1
removetime = -1
supermove = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = animelemtime(4) = 2
anim = 3365
pos = 0,0
postype = p1
sprpriority = -3
scale = 1,1
supermove = 1
bindtime = 1

[State 1200, Explod]
type = Explod
trigger1 = animelemtime(5) = 21
anim = 6046
ID = 1495
pos = -25,53
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1

[State 1200, Explod]
type = Explod
trigger1 = animelemtime(5) = 27
anim = 6051
pos = -42,-66
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1

[State 1200, Explod]
type = removeExplod
trigger1 = animelem = 4
trigger2 = animelem = 8
ID = 1495

[State 1200, Explod]
type = removeExplod
trigger1 = animelem=5
ID = 716

[state nothitby]
type = nothitby
trigger1 = time >=0
value = SCA
time=1
ignorehitpause = 1

[State 3875, 慢镜头]
type = Pause 
triggerall = movehit
triggerall = (GameTime%1) = 0 ;&& roundstate = 2 
trigger1 = 1
time = 1 
movetime = 1 
ignorehitpause = 1

[State 399, EnvShake]
type = EnvShake
trigger1 = animelem = 5
ignorehitpause = 1
persistent = 0
time = 70
freq = 100
ampl = -3
phase = 1

[State 399, EnvShake]
type = EnvShake
trigger1 = animelem = 10
ignorehitpause = 1
persistent = 0
time = 20
freq = 100
ampl = -3
phase = 1

[State HitDef]
type = HitDef
trigger1 = AnimElem = 5
attr = S,HA
hitflag = MAF
guardflag = M
getpower = 0
givepower = 0
damage = 300,100
sparkno = S734
guard.sparkno = S733
sparkxy = -15,-70
hitsound   = S220,0
guardsound = S150,1
pausetime = 16,16
snap = 40,-25
animtype = Hard
guard.hittime = 14
guard.velocity = -4
guard.slidetime = 6
ground.hittime = 14
ground.velocity = 1,-3
ground.slidetime = 12
ground.type = High
air.hittime = 14
air.velocity = 1,-3
air.type = High
air.recover = 0
p2facing = 1 
fall=1
fall.recover = 0
yaccel = .15

[State HitDef]
type = HitDef
trigger1 = AnimElem = 9
trigger2 = AnimElem = 11
attr = S,HA
hitflag = MAF
guardflag = M
getpower = 0
givepower = 0
damage = 100,100
sparkno = S734
guard.sparkno = S733
sparkxy = -10,-50
hitsound = S210,0
guardsound = S150,0
pausetime = 6,6
animtype = Hard
guard.hittime = 14
guard.velocity = -4
guard.slidetime = 6
ground.hittime = 14
ground.velocity = -4,-9
ground.slidetime = 12
ground.type = High
air.hittime = 14
air.velocity = -4,-9
air.type = High
air.recover = 0
fall=1
fall.recover = 0
yaccel = .35

[State 3000] ; Shadows
type = Afterimage
trigger1 = time = 1
time = 80
PalBright = 0, 0, 0
PalContrast =  128,68,1
PalAdd = 0, 0, 0
PalMul = 1,1,1
Length = 25
timegap = 2
FrameGap = 7
Trans = Add1

[State MoveHit]
type = VarSet
trigger1 = MoveContact
sysvar(1) = 1

[State Jump]
type = ChangeState
trigger1 = AnimTime = 0
value = 4253
ctrl = 0
;---------------------------------------------------------------------------
[StateDef 4253]
type = A
movetype = A
physics = N
anim = 3417
velset = 0,-8
ctrl = 0

[State 3875, 慢镜头]
type = Pause 
triggerall = (GameTime%2) = 0 ;&& roundstate = 2 
trigger1 = 1
time = 1 
movetime = 1 
ignorehitpause = 1

[State 3630]
type = playsnd
trigger1 = animelem = 1
value = 3800,0
channel = 3

[State 3784, VelSet]
type = VelSet
trigger1 = Time = [0,10]
x = 1

[State 3784, VelSet]
type = VelSet
trigger1 = Time >10 && time <16
x = .5

[State Gravity]
type = VelAdd
trigger1 = time > 23
y = .44

[state nothitby]
type = nothitby
trigger1 = time >=0 && time < 10
value = SCA
time=1
ignorehitpause = 1

[State 3625]
type = Explod
trigger1 = time = 0
anim = 4965
pos = -80,-110
supermove = 1
pausemovetime = 999
sprpriority = 5
bindtime = 1
ownpal = 1

[State 3784]
type = Explod
trigger1 = time = 0 
anim = 4965
pos = 80,-110
facing = -1
pausemovetime = 999
supermove = 1
sprpriority = 5
bindtime = 1
ownpal = 1

[State 3784]
type = Explod
trigger1 = Animelem = 1 
anim = 787
pos = 25,0
postype = p1
supermove = 1
sprpriority = 2
bindtime = 16
ownpal = 1
removetime = 16

[STate 3630]
type = Explod
trigger1 = animelem = 2
anim = 790
id = 790
sprpriority = -4
pos = 50;ifelse(facing=1,50,0)
bindtime = -1
postype = left
facing = 1;ifelse(facing=1,1,-1)
ignorehitpause = 1
ownpal = 1
supermove = 1
supermovetime = 9999
pausemovetime = 99999
under = 1
removetime = 59


[State 3630]
type = Helper
trigger1 = animelem = 4
stateno = 3660
id = 3660
pos = 0,-120
postype = p1
ownpal = 1
sprpriority = -3
bindtime = -1
ignorehitpause = 1

[State 3630]
type = Helper
trigger1 = animelem = 4
stateno = 3660
id = 3661
pos = 0,-150
postype = p1
ownpal = 1
sprpriority = -3
bindtime = -1
ignorehitpause = 1

[STate 3630]
type = Explod
trigger1 = time = 0
anim = 788
id = 788
sprpriority = -1
pos = 25,130
vel = 0,-20
postype = p1
;ignorehitpause = 1
ownpal = 1
supermove = 1
supermovetime = 9999
under = 1
removetime = 100

[STate 3784]
type = PlaySNd
trigger1 = time = 3
value = 4550,0
volume = 100

[State HitDef]
type = HitDef
trigger1 = animelem = 1
attr = A,HA
hitflag = MAF
guardflag = M
getpower = 30,10
givepower = 0
damage = 175,10
sparkno = S82
guard.sparkno = S82
sparkxy = 10,-80
hitsound = S210,0
guardsound = S150,0
pausetime = 14,4
animtype = Up
guard.hittime = 14
guard.velocity = -4
guard.slidetime = 16
ground.hittime = 15
ground.velocity = -3,-9
ground.slidetime = 12
ground.type = High
air.hittime = 5
air.velocity = 0,-9
air.type = High
air.recover = 0
id = 10001
fall = 1
palfx.time = 155
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = A,HA
hitflag = MAF
guardflag = M
getpower = 70
givepower = 0
damage = 150,10
sparkno = S82
guard.sparkno = S82
sparkxy = 10,-80
hitsound = S210,0
guardsound = S150,0
pausetime = 15,15
animtype = Up
guard.hittime = 14
guard.velocity = -4
guard.slidetime = 16
ground.hittime = 15
ground.velocity = -3,-8
ground.slidetime = 12
ground.type = High
air.hittime = 5
air.velocity = -3,-8
air.type = High
air.recover = 0
id = 10001
fall = 1
palfx.time = 120
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State 3630]
type = playsnd
trigger1 = AnimElem = 2
trigger1 = movehit
value = 3305,1
persistent = 0

[State playsnd]
type = playsnd
trigger1 = NumTarget(10001) > 0
trigger1 = AnimElem = 4
value = 7600,0
persistent = 0

[State 3784, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1002

;---------------------------------------------------------------------------
;*************************************************************************
;百龙之神
;*************************************************************************
[StateDef 4500]
type = s
movetype = A
physics = s
anim = 4500
velset = 0,0
ctrl = 0

[State 3700]
type = PlaySnd
trigger1 = animelem = 5
value = 3000,30

[State 3700]
type = PlaySnd
trigger1 = animelem = 9
value = 3150,10

[state nothitby]
type = nothitby
trigger1 = time >=0
value = SCA
time=1
ignorehitpause = 1

[state poweradd]
type = poweradd
trigger1 = time = 0
value = ifelse(var(40)>0,-2000,-3000)

[STate 3000]
type = SuperPause
trigger1 = Animelem = 1
time = 85
movetime = 85
sound = s1,17
anim = -1
pos = -20,-100

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 6010
pos = 7,-75
postype = p1
sprpriority = -3
supermove = 1
bindtime = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 6011
pos = 7,-75
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1

[State 1200, Explod]
type = Explod
trigger1 = time%19 = 0
trigger1 = random < 500
anim = 6212
pos = 0,0
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = time%19 = 0
trigger1 = random < 500
trigger2 = animtime = 0
anim = 6213
pos = 0,0
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = time%19 = 0
trigger1 = random < 500
trigger2 = animtime = 0
anim = 6214
pos = 0,0
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 3200, 4]
type = ChangeState
trigger1 = AnimelemTime(11) = 10
value = 4501
ctrl = 0

[StateDef 4501]
type = s
movetype = A
physics = s
anim = 4501
poweradd = 50
velset = 0,0
ctrl = 0

[state nothitby]
type = nothitby
trigger1 = time >=0
value = SCA
time=1
ignorehitpause = 1

[State 1200, Explod]
type = Explod
trigger1 = var(37) < 100
trigger1 = time%19 = 0
trigger1 = random < 500
anim = 6212
pos = 0,0
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = var(37) < 100
trigger1 = time%19 = 0
trigger1 = random < 500
trigger2 = animtime = 0
anim = 6213
pos = 0,0
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = var(37) < 100
trigger1 = time%19 = 0
trigger1 = random < 500
trigger2 = animtime = 0
anim = 6214
pos = 0,0
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 3700]
type = varset
trigger1 = time = 0
var(37) = 0

[State 3700]
type = PlaySnd
trigger1 = animelem = 5
value = 3150,11

[State 3700]
type = PlaySnd
trigger1 = animelem = 6
value = 779,0

[State 3700]
type = velset
trigger1 = animelem = 6
trigger2 = animelem = 7
x = 15

[State 3200, 1]
type = ReversalDef
trigger1 = AnimElem = 1
reversal.attr = SCA, AA,AP
hitflag = MAFPD
numhits = 0
pausetime = 10,12
sparkno = S733
sparkxy = 100,-65
hitsound = S210,0

[State 1200, Explod]
type = Explod
trigger1 = AnimElemtime(5) = 3
anim = 7500
id = 7500
pos = 60,-65
postype = p1
sprpriority = 3
supermovetime = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElemtime(7) = 3
anim = 3403
id = 3403
pos = -30,0
postype = p1
bindtime = 99
ignorehitpause = 0
sprpriority = 3
supermovetime = 1

[State 3625]
type = HitDef
trigger1 = AnimElem = 8
attr = S, HA
animtype = back
damage = ifelse(life<=300,20,6),40
priority = 7, Hit
guardflag = M
pausetime = 38,38
guard.pausetime = 18,18
sparkno = S734
guard.sparkno = S733
sparkxy = -10,-75
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 59
ground.hittime = 59
guard.slidetime = 34
guard.hittime = 39
ground.velocity = -.3,-.7
guard.velocity = -8
airguard.velocity = -6,-5
air.velocity = -.3,-.7
ground.cornerpush.veloff = -.3
guard.cornerpush.veloff = -12
getpower = 5,5
id = 4500
givepower = 0,0
yaccel = .003
palfx.time = 495
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
kill = 0
fall = 1
fall.recover = 0

[State 3625]
type = HitDef
trigger1 = !movehit
trigger1 = AnimElem = 9
attr = S, HA
animtype = back
damage = ifelse(life<=300,20,6),80
priority = 7, Hit
guardflag = M
pausetime = 38,38
guard.pausetime = 33,33
sparkno = S734
guard.sparkno = S733
sparkxy = -10,-75
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 59
ground.hittime = 59
guard.slidetime = 34
guard.hittime = 39
ground.velocity = -.3,-.7
guard.velocity = -19
airguard.velocity = -6,-5
air.velocity = -.3,-1
ground.cornerpush.veloff = -.3
guard.cornerpush.veloff = -17
getpower = 5,5
id = 4500
givepower = 0,0
yaccel = .003
palfx.time = 495
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
kill = 0
fall = 1
fall.recover = 0

[state helper]
type = helper
trigger1 = movehit
persistent = 0
stateno = 4506
postype = p1
pos = 0,0
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = movecontact
trigger1 = time%19 = 0
trigger1 = random < 500
anim = 6212
pos = 0,0
postype = p2
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
triggerall = movecontact
trigger1 = time%19 = 0
trigger1 = random < 500
trigger2 = animtime = 0
anim = 6213
pos = 0,0
postype = p2
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
triggerall = movehit
trigger1 = time%19 = 0
trigger1 = random < 500
trigger2 = animtime = 0
anim = 6214
pos = 0,0
postype = p2
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1


[State 4897, Bgpalfx]
type = Bgpalfx
trigger1 = var(37)<150
trigger1 = movehit
trigger1 = 1
invertall = 1
time = 20
add = 10,10,10
mul = 256-var(37)*2,256-var(37)*2,256-var(37)*2
color = 255
ignorehitpause = 1

[State 3630]
type = envcolor
trigger1 = var(37) >= 150
value = 0,0,0
time = 10
under = 1

[State 3700]
type = varadd
trigger1 = var(37)<150
trigger1 = movehit
var(37) = 1

[state a]
type = Trans
trigger1 = var(37) < 150
trigger1 = movehit
trans = addalpha
alpha = 150-var(37), 150+var(37)

[state a]
type = Trans
trigger1 = var(37) = 150
trigger1 = movehit
trans = addalpha
alpha = 0, 256

[State 1200, Explod]
type = Explod
trigger1 = time = 188
anim = 8001
id = 8001
pos = 0,0
postype = left
scale = 1,1
sprpriority = -20
supermovetime = 1
bindtime = 10000
removeongethit = 1
removetime = 1500

[State 3200, 4]
type = ChangeState
trigger1 = movehit
trigger1 = AnimelemTime(10) >= 200
value = 4510
ctrl = 0

[State 3200, 4]
type = ChangeState
trigger1 = !movehit
trigger1 = AnimelemTime(10) >= 5
value = 4502
ctrl = 0

[StateDef 4502]
type = A
movetype = A
physics = N
anim = 4502
poweradd = 50
ctrl = 0

[State 3200, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[StateDef 4510]
type = s
movetype = A
physics = s
anim = 4510
poweradd = 50
velset = 0,0
ctrl = 0

[State 1200, Explod]
type = Explod
trigger1 = time%19 = 0
trigger1 = random < 500
anim = 6212
pos = 0,0
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = time%19 = 0
trigger1 = random < 500
trigger2 = animtime = 0
anim = 6213
pos = 0,0
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = time%19 = 0
trigger1 = random < 500
trigger2 = animtime = 0
anim = 6214
pos = 0,0
postype = p1
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 3700]
type = varadd
trigger1 = var(37)>0
var(37) = -1

[state a]
type = Trans
trigger1 = var(37) > 0
trans = addalpha
alpha = 150-var(37), 150+var(37)

[State 3700]
type = PlaySnd
trigger1 = animelem = 9
value = 2995,60

[State 3700]
type = PlaySnd
trigger1 = animelem = 1
value = 3950,1

[State 1200, Explod]
type = posset
trigger1 = time = 0
y = 0
x = target(4500),pos x

[State 399, EnvShake]
type = EnvShake
trigger1 = Animelemtime(10) = 1
ignorehitpause = 1
persistent = 0
time = 50
freq = 100
ampl = -5
phase = 1

[State 1200, Explod]
type = Explod
trigger1 = time%5 = 1
trigger1 = AnimElemtime(1) >= 3
anim = ifelse(random<500,1158,1159)
id = 1158
pos = 160,200
random = 320,30
postype = back
sprpriority = -3
vel = 0,-.5
scale = .7,.2
ignorehitpause = 1
ownpal = 1
supermove = 1
supermovetime = 9999
pausemovetime = 99999
under = 1

[State 1200, Explod]
type = Explod
trigger1 = time%5 = 1
trigger1 = AnimElemtime(1) >= 3
anim = ifelse(random<500,1158,1159)
id = 1158
pos = 160,200
random = 320,30
postype = back
sprpriority = 3
vel = 0,-.5
scale = .7,.2
ignorehitpause = 1
ownpal = 1
supermove = 1
supermovetime = 9999
pausemovetime = 99999
under = 1

[State 1200, Explod]
type = helper
trigger1 = AnimElem = 2
stateno = 6206
id = 6206
pos = 5,0
postype = p1
ownpal = 1

[State 3630]
type = envcolor
trigger1 = 1
value = 0,0,0
time = 10
under = 1

[state nothitby]
type = nothitby
trigger1 = time >=0
value = SCA
time=1
ignorehitpause = 1

[State 1100]
type = Helper
trigger1 = AnimElem = 11
stateno = 779
id = 779
pos = ifelse(random<333,70,ifelse(random<500,65,60)),8
ownpal = 1
sprpriority = 3

[State 1100]
type = Helper
trigger1 = AnimElem = 13
stateno = 779
id = 779
pos = ifelse(random<333,-50,ifelse(random<500,-45,-40)),8
ownpal = 1
sprpriority = 3

[State 1100]
type = Helper
trigger1 = AnimElem = 15
stateno = 779
id = 779
pos = ifelse(random<333,-50,ifelse(random<500,-45,-40)),-8
ownpal = 1
sprpriority = 3

[State 1100]
type = Helper
trigger1 = AnimElem = 16
stateno = 779
id = 779
pos = ifelse(random<333,70,ifelse(random<500,65,60)),-8
ownpal = 1
sprpriority = 3

[State 3625]
type = Explod
trigger1 = Animelem = 12
anim = 779
pos = 45,-12
supermove = 1
sprpriority = -2
bindtime = 1
ownpal = 1

[State 3625]
type = Explod
trigger1 = Animelem = 13
anim = 779
pos = -16,-12
supermove = 1
sprpriority = -2
bindtime = 1
ownpal = 1

[State 3625]
type = Explod
trigger1 = Animelem = 14
anim = 779
pos = 45,12
supermove = 1
sprpriority = 2
bindtime = 1
ownpal = 1

[State 3625]
type = Explod
trigger1 = Animelem = 15
anim = 779
pos = -16,12
supermove = 1
sprpriority = 2
bindtime = 1
ownpal = 1

[State 3625]
type = Explod
trigger1 = time = 200
trigger2 = time = 380
anim = 789
pos = -70,0
supermove = 1
sprpriority = 2
bindtime = 1
ownpal = 1

[State 3625]
type = Explod
trigger1 = time = 290
anim = 789
pos = -70,0
supermove = 1
sprpriority = -2
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
triggerall = movehit
trigger1 = AnimElem = 11
trigger2 = AnimElem = 13
trigger3 = AnimElem = 14
trigger4 = AnimElem = 16
anim = 736
ID = 736
pos = ifelse(random<333,5,ifelse(random<500,15,25)),ifelse(random<333,-75,ifelse(random<500,-50,-35))
postype = p2
sprpriority = 3

[State 3625]
type = HitDef
trigger1 = AnimElem = 11
trigger2 = AnimElem = 13
trigger3 = AnimElem = 14
trigger4 = AnimElem = 16
attr = S, HA
animtype = back
damage = ifelse(life<=300,20,6),1
priority = 7, Hit
guardflag = M
pausetime = 8,8
sparkno = -1
guard.sparkno = S733
sparkxy = -30,-75
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = 0
air.velocity = ifelse(p2bodydist x < -50,-4,ifelse(p2bodydist x > 40,4,0)),ifelse(p2bodydist y < -70,-2,-1.1)
getpower = 5,5
givepower = 0,0
yaccel = .5
palfx.time = 45
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
kill = 0
fall = 1
fall.recover = 0

[State 1200, Explod]
type = Explod
triggerall = numtarget(4500)>0
trigger1 = time%19 = 0
trigger1 = random < 500
anim = 6212
pos = 0,0
postype = p2
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
triggerall = numtarget(4500)>0
trigger1 = time%19 = 0
trigger1 = random < 500
trigger2 = animtime = 0
anim = 6213
pos = 0,0
postype = p2
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
triggerall = numtarget(4500)>0
trigger1 = time%19 = 0
trigger1 = random < 500
trigger2 = animtime = 0
anim = 6214
pos = 0,0
postype = p2
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 3700]
type = null;PlaySnd
trigger1 = life < 300
trigger1 = Time = 350
value = 2995,85
channel = 0

[State 3700]
type = null;PlaySnd
trigger1 = life < 300
trigger1 = Time = 410
value = 2995,86
channel = 0

[State 3700]
type = null;PlaySnd
trigger1 = life < 300
trigger1 = Time = 470
value = 2995,87
channel = 0

[State 3700]
type = PlaySnd
trigger1 = life < 300
trigger1 = Time = 620
value = 2995,75
channel = 0

[State 3625]
type = ChangeState
trigger1 = life > 300
trigger1 = Time >= 500
value = 3605
ctrl = 0

[State 3625]
type = ChangeState
trigger1 = Time >= 650
value = 4520
ctrl = 0

[StateDef 4520]
type = S
movetype = A
physics = S
anim = 4520
velset = 0,0
facep2 = 1
poweradd = 100
ctrl = 0

[State 3700]
type = PlaySnd
trigger1 = time = 0
value = 2995,76
channel = 0

[State 3700]
type = PlaySnd
trigger1 = animelem = 1
value = 3000,30

[STate 3626]
type = SuperPause
trigger1 = Animelem = 1
time = 25
movetime = 2
sound = s1,17
anim = -1
pos = -20,-100

[State 3630]
type = envcolor
trigger1 = 1
value = 0,0,0
time = 55
under = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 6050
pos = -36,-59
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 1479
pos = -10,-80
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1

[State 3625]
type = Explod
trigger1 = Animelem = 4
anim = 3419
sprpriority = 2
postype = p1
pos = 20,-10
ignorehitpause = 0

[STate 3626]
type = PlaySNd
trigger1 = Animelem = 3
value = 4960,0

[State 3875, 慢镜头]
type = Pause 
triggerall = (GameTime%1) = 0 && roundstate = 2 
trigger1 = time > 5
time = 1 
movetime = 1 
ignorehitpause = 1

[State 3626, EnvShake]
type = EnvShake
trigger1 = animelem = 3
ignorehitpause = 0
persistent = 0
time = 25
freq = 100
ampl = -5
phase = 1

[State AI reset]
type = VarSet
trigger1 = Time = 0
var(4) = 0

[State VarSet]
type = VarSet
trigger1 = Time = 0
sysvar(0) = 0

[State VarSet]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State Slow]
type = ChangeAnim
trigger1 = SysVar(0)
trigger1 = AnimElem = 1,2
persistent = 0
value = Anim
elem = 1

[State Step Front]
type = PosAdd
trigger1 = AnimElem = 3,0
x = 10

[State 1004, VelSet]
type = VelSet
trigger1 = Time = [0,5]
x = 3.5

[State 3778]
type = Explod
trigger1 = time = 5 
anim = 784
pos = 0,0
supermove = 1
sprpriority = 3
bindtime = 1
ownpal = 1

[State Snd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1000,1
channel = 2

[state nothitby]
type = nothitby
trigger1 = time >=0
value = SCA
time=1
ignorehitpause = 1

[State 3625]
type = HitDef
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
attr = S,HA
hitflag = MAF
guardflag = M
getpower = 70
givepower = 10
damage = 365,10
sparkno = S20003
guard.sparkno = S733
sparkxy = 10,-50-(AnimElem=3)*20
hitsound = S 1000,2
guardsound = S 5003,0
pausetime = 6,6
animtype = Hard
guard.hittime = 14
guard.velocity = -4
guard.slidetime = 6
ground.hittime = 14
ground.velocity = -4,-6
ground.slidetime = 12
ground.type = High
air.hittime = 14
air.velocity = -4,-6
air.type = High
air.recover = 0
fall=1
fall.recover = 0
palfx.time = 45
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[State 1200, Explod]
type = Explod
trigger1 = movecontact
trigger1 = time%19 = 0
trigger1 = random < 500
anim = 6212
pos = 0,0
postype = p2
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
triggerall = movecontact
trigger1 = time%19 = 0
trigger1 = random < 500
trigger2 = animtime = 0
anim = 6213
pos = 0,0
postype = p2
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
triggerall = movehit
trigger1 = time%19 = 0
trigger1 = random < 500
trigger2 = animtime = 0
anim = 6214
pos = 0,0
postype = p2
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1


[State MoveHit]
type = VarSet
trigger1 = MoveContact
sysvar(1) = 1

[State Jump]
type = ChangeState
trigger1 = AnimTime = 0
value = 4530
ctrl = 0

[StateDef 4530]
type = A
movetype = A
physics = N
anim = 4530
velset = 0,0
ctrl = 0

[State 4530,removeExplod]
type = removeExplod
trigger1 = numExplod(8001) >=1
trigger1 = AnimElemtime(4) = 3
ID = 8001

[State 3630]
type = envcolor
trigger1 = AnimElemtime(1) >= 0
trigger1 = AnimElemtime(4) < 0
value = 0,0,0
ignorehitpause = 0
time = 12
under = 1

[State 3626, Explod]
type = Explod
trigger1 = AnimElemtime(1) = 5
anim = 6204
pos = 60,0
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1

[State 3626, Explod]
type = Explod
trigger1 = AnimElemtime(1) = 5
anim = 6204
pos = -60,0
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1


[State 3784]
type = Explod
trigger1 = AnimElemtime(1) = 5
anim = 6202
pos = -60,0
id = 785
postype = p1
supermove = 1
sprpriority = 2

[State 3784]
type = Explod
trigger1 = AnimElemtime(1) = 5
anim = 6202
pos = -60,0
id = 785
postype = p1
supermove = 1
sprpriority = 2


[state nothitby]
type = nothitby
trigger1 = time >=0
value = SCA
time=1
ignorehitpause = 1

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = const(movement.yaccel)

[State 3000, VelSet]
type = VelSet
trigger1 = Time = 0
x = 0.5
y = -15

[state 3000]
type = pause
triggerall = movecontact
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
trigger3 = AnimElem = 3
trigger4 = AnimElem = 4
time = 4 

[State 3625]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
trigger3 = AnimElem = 3
attr = S, HA
animtype = hard
damage = 525
priority = 7, Hit
guardflag = MA
pausetime = 12,12
guard.sparkno = S733
sparkxy = 10,-75
hitsound = S210,0
guardsound = S150,0
ground.type = high
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -3
air.velocity = -1,-15
getpower = 30,10
givepower = 10,5
fall = 1
fall.recover = 0
palfx.time = 145
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[State 3625]
type = HitDef
trigger1 = AnimElem = 4
attr = S, HA
animtype = hard
damage = 525
priority = 7, Hit
guardflag = MA
pausetime = 12,12
guard.sparkno = S733
sparkxy = 10,-75
hitsound = S210,0
guardsound = S150,0
ground.type = high
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -3
air.velocity = -1,-15
getpower = 30,10
givepower = 10,5
id = 3625
kill = 1
fall = 1
fall.recover = 0
palfx.time = 145
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[State 1200, Explod]
type = Explod
trigger1 = movecontact
trigger1 = time%19 = 0
trigger1 = random < 500
anim = 6212
pos = 0,0
postype = p2
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
triggerall = movecontact
trigger1 = time%19 = 0
trigger1 = random < 500
trigger2 = animtime = 0
anim = 6213
pos = 0,0
postype = p2
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
triggerall = movehit
trigger1 = time%19 = 0
trigger1 = random < 500
trigger2 = animtime = 0
anim = 6214
pos = 0,0
postype = p2
sprpriority = 4
supermove = 1
bindtime = 1
ownpal = 1


[State 3625]
type = Explod
trigger1 = time = 0
anim = 4965
pos = -80,-110
supermove = 1
pausemovetime = 999
sprpriority = 5
bindtime = 1
ownpal = 1

[State 3784]
type = Explod
trigger1 = time = 0 
anim = 4965
pos = 80,-110
facing = -1
pausemovetime = 999
supermove = 1
sprpriority = 5
bindtime = 1
ownpal = 1

[State 3875, 慢镜头]
type = Pause 
triggerall = (GameTime%2) = 0 && roundstate = 2 
trigger1 = time = [0,30]
time = 1 
movetime = 1 
ignorehitpause = 1

[State playsnd]
type = playsnd
trigger1 = NumTarget(3625) > 0
trigger1 = AnimElem = 6
value = 7600,0
persistent = 0


[State Land]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 1002
ctrl = 0

[StateDef 1002]
type = S
movetype = I
physics = S
anim = 1
velset = 0,0
ctrl = 0

[State End]
type = ChangeState
trigger1 = Anim = 1
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;============================================================================================================
;凤之殇代码开始
;============================================================================================================
;*************************************************************************
;凤之殇
;*************************************************************************
[Statedef 4300]
type = S
movetype = A
physics = S
anim = 4300
velset = 0,0
ctrl = 0

[state hitby]
type = nothitby
trigger1 = 1
value = SCA
time=1
ignorehitpause = 1

[STate 3205]
type = SuperPause
trigger1 = Animelem = 2
time = 40
movetime = 39
sound = s1,-1
anim = -1
pos = -20,-100

[State 704, 2]
type = PlaySnd
trigger1 = Animelemtime(2) = 7
value = 7600,0

[State 704, 2]
type = PlaySnd
trigger1 = Animelemtime(1) = 2
value = 4300,0

[State 3625]
type = Explod
trigger1 = Animelemtime(2) = 9
anim = 4304
ID = 4304
sprpriority = -2
postype = p1
pos = 3,-60
bindtime = 1
supermove = 1
removeongethit = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 6000
pos = 10,-95
postype = p1
sprpriority = -3
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 6001
pos = 40,-80
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 6001
pos = 0,-80
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1

[State 3625]
type = Explod
trigger1 = time = 0
anim = 737
ID = 737
sprpriority = -2
postype = p1
pos = 7,0
bindtime = 1
supermove = 1
removeongethit = 1
removetime = -1
ownpal = 1

[State 3625]
type = Explod
trigger1 = time = 0
anim = 737
ID = 737
sprpriority = 5
postype = p1
pos = 7,0
facing = -1
bindtime = 1
supermove = 1
removeongethit = 1
removetime = -1
ownpal = 1

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 1
value = 800,2
channel = 1

[STate 3500]
type = PlaySNd
trigger1 = animelem = 2
value = 3000,20

[State 117]
type = ChangeState
triggerall = var(59) != 0
triggerall = p2bodydist x = [-10,150]
triggerall = (p2movetype = H) || (p2movetype = A)
trigger1 = animtime = 0
trigger1 = p2bodydist y = [-80,50]
value = 4302
ctrl = 0

[State 117]
type = ChangeState
trigger1 = var(59) != 0
trigger1 = animtime = 0
value = 4301

[State 3000, end1]
type = changestate
trigger1 = var(59) != 1
trigger1 = ((command = "hold_A")||(command = "hold_C")) && (animtime = 0)
value = 4301

[State 117]
type = ChangeState
trigger1 = var(59) != 1
trigger1 = (animtime = 0) && ((command != "hold_A")&&(command != "hold_C"))
value = 4302
ctrl = 0
;-----------------------------------------------------------------------------------
;凤之殇 蓄力
;-----------------------------------------------------------------------------------
[Statedef 4301]
type = S
movetype = A
physics = S
anim = 4301
velset = 0,0
ctrl = 0

[state hitby]
type = nothitby
trigger1 = time = [0,16]
value = SCA
time=1
ignorehitpause = 1

[State 3660]
type = varrandom
trigger1 = 1
v = 4
range = 90

[State 3660]
type = varrandom
trigger1 = 1
v = 5
range = 20

[State 704, 2]
type = PlaySnd
trigger1 = Time = 0
value = 710,0
channel = 19
volume = 50

[State 704, 4]
type = Explod
trigger1 = Time >= 0
trigger1 =gametime%3=1
sprpriority = -2
anim = ifelse(random<500,720,721)
scale = .7,.2
vel = 0,-.9
id = 1158
pos = var(4)-45,-20-var(5)
postype = P1
supermove = 1
bindtime = 1

[State 704, 4]
type = Explod
trigger1 = Time >= 0
trigger1 =gametime%3=1
sprpriority = 2
anim = 720
scale = .7,.2
vel = 0,-.9
id = 1157
pos = var(4)-45,-20-var(5)
postype = P1
supermove = 1
bindtime = 1

[State 117]
type = ChangeState
trigger1 = var(59) != 0
trigger1 = time >15
trigger1 = p2bodydist y = [-80,10]
value = 4302
ctrl = 0

[State 117]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = ((command != "hold_A")&&(command != "hold_C")) && (time >= 15)
value = 4302
ctrl = 0

[State 117]
type = ChangeState
trigger1 = Time = 200
value = 4305
ctrl = 0
;-----------------------------------------------------------------------------------
;凤之殇 冲刺
;-----------------------------------------------------------------------------------
[Statedef 4302]
type = S
movetype = A
physics = S
anim = 4302
poweradd = -1000
velset = 0,0
juggle = 8
ctrl = 0

[State 1701]
type = pause
trigger1 = time = [10,17]
time = 1

[state Width]
type = Width
trigger1 = animelemtime(7)>=0
trigger1 = animelemtime(12)<=5
edge = 15,-10
player = 15,-10

[State 3625]
type = removeExplod
trigger1 = animelem = 5
ID = 737

[State 3205]
type = Explod
trigger1 = animelem = 5
anim = 4303
pos = 0,10
;supermove = 1
sprpriority = -2
ownpal = 1

[State 3000] ; Shadows
type = Afterimage
trigger1 = animelem = 1
time = 60
PalBright = 0, 0, 0
PalContrast =  128,68,1
PalAdd = 0, 0, 0
PalMul = 1,1,1
Length = 15
FrameGap = 7
Trans = Add1

[state hitby]
type = nothitby
trigger1 = time = [0,25]
value = SCA
time=1
ignorehitpause = 1

[State 3205]
type = Explod
trigger1 = time = 20
trigger2 = time = 40
anim = 81
pos = 0,0
;supermove = -1
sprpriority = 2
ownpal = 1

[STate 3500]
type = PlaySNd
trigger1 = time = 1
value = 3300,0
channel = 1

[State 3205]
type = Explod
trigger1 = time = 30
trigger2 = time = 50
anim = 81
pos = 0,0
;supermove = 1
sprpriority = 2
ownpal = 1

[State 3205]
type = Explod
trigger1 = animelem = 5
anim = 4309
id = 4309
pos = 0,-10
supermove = 1
bindtime = 1000
removetime = 1000
sprpriority = 3
removeongethit = 1
ignorehitpause = 0
ownpal = 1

[State 3205]
type = Explod
trigger1 = animelem = 5
anim = 4307
id = 4307
pos = 0,-10
supermove = 1
bindtime = 1000
removetime = 1000
sprpriority = 3
removeongethit = 1
ignorehitpause = 0
ownpal = 1

[State 3205]
type = Explod
trigger1 = time > 15
trigger1 = time%8 = 0
anim = 4308
id = 4308
pos = -20,0
supermove = 1
sprpriority = 3
ignorehitpause = 0
ownpal = 1

[state hitby]
type = hitby
trigger1 = time > 25
value = SCA,SA,NA,HA
time=1 

[State 3305, 2]
type = palfx
trigger1 = time = 21 
time = 75
add = 184,28,0
mul = 248,168,104
sinadd= 138,118,14,16
color = 0 
invertall = 1                     

[State 117]
type = SprPriority
trigger1 = Time = 8
value = -1

;[State 117]
;type = VelSet
;trigger1 = AnimElem = 1
;x = 2

[State 1701]
type = posadd
trigger1 = animelem = 7
x = 16

[State 295]
type = HitDef
trigger1 = time >= 21
attr = A,NA
damage = 405,0
getpower = 90,30
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 5,10
guard.pausetime = 10,10
sparkno = S740
guard.sparkno = S733
sparkxy = -10,-67
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -9,-6
guard.velocity = -16
id = 10001
palfx.time = 79
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1     
airguard.velocity = -16,-3
air.type = low
air.velocity = -9,-7
air.hittime = 12
fall = 1
air.fall = 1
fall.recover = 0

[State 3205]
type = Explod
trigger1 = movecontact
trigger2 = time > 15
trigger2 = frontedgedist <= 30 
anim = 80
pos = 30,0
;supermove = 1
sprpriority = 2 
ownpal = 1

[State 1701]
type = veladd
trigger1 = animelemtime(6) >= 3
x = 2.3

[State 117]
type = ChangeState
trigger1 = movecontact = 1
trigger2 = time > 15
trigger2 = frontedgedist <= 15
value = 4306
ctrl = 0

[state removeexplod]
type = removeexplod
trigger1 = time >= 85
id = 4309

[state removeexplod]
type = removeexplod
trigger1 = time >= 85
id = 4307

[State 117]
type = ChangeState
trigger1 = time >= 85
value = 0
ctrl = 1
;-----------------------------------------------------------------------------------
;凤之殇 自然发动冲刺
;-----------------------------------------------------------------------------------
[Statedef 4305]
type = S
movetype = A
physics = S
anim = 4302
poweradd = -1000
velset = 0,0
ctrl = 0

[State 1701]
type = pause
trigger1 = time = [10,17]
time = 1

[state Width]
type = Width
trigger1 = animelemtime(7)>=0
trigger1 = animelemtime(12)<=5
edge = 15,-10
player = 15,-10

[State 3625]
type = removeExplod
trigger1 = animelem = 5
ID = 737

[State 3205]
type = Explod
trigger1 = animelem = 5
anim = 4303
pos = 0,10
;supermove = 1
sprpriority = -2 
ownpal = 1

[State 117]
type = AfterImage
trigger1 = animelem = 1,<=4
time = 60
PalBright = 50, 50, 50
PalContrast =  150,150,150
PalAdd = 63, 100, 103
PalMul = .65,.65,.75
Length = 6
FrameGap = 1

[state hitby]
type = nothitby
trigger1 = time = [0,30]
value = SCA
time=1
ignorehitpause = 1

[State 3205]
type = Explod
trigger1 = time = 20
trigger2 = time = 40
anim = 81
pos = 0,0
;supermove = -1
sprpriority = 2
ownpal = 1

[STate 3500]
type = PlaySNd
trigger1 = time = 1
value = 3300,0
channel = 1

[State 3205]
type = Explod
trigger1 = time = 30
trigger2 = time = 50
anim = 81
pos = 0,0
;supermove = 1
sprpriority = 2
ownpal = 1

[State 3205]
type = Explod
trigger1 = animelem = 5
anim = 4309
id = 4309
pos = 0,-10
supermove = 1
bindtime = 1000
removetime = 1000
sprpriority = 3
removeongethit = 1
ignorehitpause = 0
ownpal = 1

[State 3205]
type = Explod
trigger1 = animelem = 5
anim = 4307
id = 4307
pos = 0,-10
supermove = 1
bindtime = 1000
removetime = 1000
sprpriority = 3
removeongethit = 1
ignorehitpause = 0
ownpal = 1

[State 3205]
type = Explod
trigger1 = time > 15
trigger1 = time%8 = 0
anim = 4308
id = 4308
pos = -20,0
supermove = 1
sprpriority = 3
ignorehitpause = 0
ownpal = 1

[state hitby]
type = hitby
trigger1 = time > 30
value = SCA,SA,NA,HA
time=1 

[State 3305, 2]
type = palfx
trigger1 = time = 21 
time = 75
add = 184,28,0
mul = 248,168,104
sinadd= 138,118,14,16 
color = 0 
invertall = 1                     

[State 117]
type = SprPriority
trigger1 = Time = 8
value = -1

;[State 117]
;type = VelSet
;trigger1 = AnimElem = 1
;x = 2

[State 1701]
type = posadd
trigger1 = animelem = 2
x = 2

[State 295]
type = HitDef
trigger1 = time >= 21
attr = A,NA
damage = 405,0
getpower = 90,30
animtype = high
guardflag = 
hitflag = MAF
priority = 7,Hit
pausetime = 5,10
guard.pausetime = 10,10
sparkno = S740
guard.sparkno = S733
sparkxy = -10,-67
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -9,-7
guard.velocity = -16
palfx.time = 79
id = 10001
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1     
airguard.velocity = -16,-3
air.type = low
air.velocity = -9,-7
air.hittime = 12
fall = 1
air.fall = 1
fall.recover = 0

[State 3205]
type = Explod
trigger1 = movecontact
trigger2 = time > 15
trigger2 = frontedgedist <= 15 
anim = 80
pos = 30,0
;supermove = 1
sprpriority = 2
ownpal = 1

[State 1701]
type = veladd
trigger1 = animelemtime(6) >= 0
x = 5.3

[State 117]
type = ChangeState
trigger1 = movecontact = 1
trigger2 = time > 15
trigger2 = frontedgedist <= 30
value = 4306
ctrl = 0

[state removeexplod]
type = removeexplod
trigger1 = time >= 85
id = 4309

[state removeexplod]
type = removeexplod
trigger1 = time >= 85
id = 4307

[State 117]
type = ChangeState
trigger1 = time >= 85
value = 0
ctrl = 1

;*************************************************************************
;凤之殇.极
;*************************************************************************
[Statedef 4350]
type = S
movetype = A
physics = S
anim = 4300
velset = 0,0
ctrl = 0

[state hitby]
type = nothitby
trigger1 = 1
value = SCA
time=1
ignorehitpause = 1

[STate 3205]
type = SuperPause
trigger1 = Animelem = 2
time = 50
movetime = 49
sound = s1,-1
anim = -1
pos = -20,-100

[State 704, 2]
type = PlaySnd
trigger1 = Animelemtime(2) = 7
value = 7600,0

[State 704, 2]
type = PlaySnd
trigger1 = Animelemtime(1) = 2
value = 4300,0

[State 3625]
type = Explod
trigger1 = Animelemtime(2) = 9
anim = 4304
ID = 4304
sprpriority = -2
postype = p1
pos = 3,-60
bindtime = 1
supermove = 1
removeongethit = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 6010
pos = 10,-95
postype = p1
sprpriority = -3
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 6011
pos = 40,-80
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 6011
pos = 0,-80
postype = p1
sprpriority = 3
supermove = 1
bindtime = 1
ownpal = 1

[State 3625]
type = Explod
trigger1 = time = 0
anim = 737
ID = 737
sprpriority = -2
postype = p1
pos = 7,0
bindtime = 1
supermove = 1
removeongethit = 1
removetime = -1
ownpal = 1

[State 3625]
type = Explod
trigger1 = time = 0
anim = 737
ID = 737
sprpriority = 5
postype = p1
pos = 7,0
facing = -1
bindtime = 1
supermove = 1
removeongethit = 1
removetime = -1
ownpal = 1

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 1
value = 800,2
channel = 1

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 2
value = 3000,30

[State 117]
type = ChangeState
triggerall = var(59) != 0
triggerall = p2bodydist x = [-10,150]
triggerall = (p2movetype = H) || (p2movetype = A)
trigger1 = animtime = 0
trigger1 = p2bodydist y = [-80,50]
value = 4352
ctrl = 0

[State 117]
type = ChangeState
trigger1 = var(59) != 0
trigger1 = animtime = 0
value = 4351

[State 3000, end1]
type = changestate
trigger1 = var(59) = 0
trigger1 = ((command = "hold_A")||(command = "hold_C")) && (animtime = 0)
value = 4351

[State 117]
type = ChangeState
trigger1 = var(59) = 0
trigger1 = (animtime = 0) && ((command != "hold_A")&&(command != "hold_C"))
value = 4352
ctrl = 0
;-----------------------------------------------------------------------------------
;凤之殇 蓄力
;-----------------------------------------------------------------------------------
[Statedef 4351]
type = S
movetype = A
physics = S
anim = 4301
velset = 0,0
ctrl = 0

[state hitby]
type = nothitby
trigger1 = time = [0,16]
value = SCA
time=1
ignorehitpause = 1

[State 3660]
type = varrandom
trigger1 = 1
v = 4
range = 90

[State 3660]
type = varrandom
trigger1 = 1
v = 5
range = 20

[State 704, 2]
type = PlaySnd
trigger1 = Time = 0
value = 710,0
channel = 19
volume = 50

[State 704, 4]
type = Explod
trigger1 = Time >= 0
trigger1 =gametime%3=1
sprpriority = -2
anim = ifelse(random<500,720,721)
scale = .7,.2
vel = 0,-.9
id = 1158
pos = var(4)-45,-20-var(5)
postype = P1
supermove = 1
bindtime = 1

[State 704, 4]
type = Explod
trigger1 = Time >= 0
trigger1 =gametime%3=1
sprpriority = 2
anim = 720
scale = .7,.2
vel = 0,-.9
id = 1157
pos = var(4)-45,-20-var(5)
postype = P1
supermove = 1
bindtime = 1

[State 117]
type = ChangeState
trigger1 = var(59) != 0
trigger1 = time >= 15
trigger1 = p2bodydist y = [-80,50]
value = 4352
ctrl = 0

[State 117]
type = ChangeState
trigger1 = ((command != "hold_A")&&(command != "hold_C")) && (time >= 15)
value = 4352
ctrl = 0

[State 117]
type = ChangeState
trigger1 = Time = 200
value = 4355
ctrl = 0
;-----------------------------------------------------------------------------------
;凤之殇 冲刺
;-----------------------------------------------------------------------------------
[Statedef 4352]
type = S
movetype = A
physics = S
anim = 4302
poweradd = -2000
velset = 0,0
juggle = 8
ctrl = 0

[State 1701]
type = pause
trigger1 = time = [10,19]
time = 1

[state Width]
type = Width
trigger1 = animelemtime(7)>=0
trigger1 = animelemtime(12)<=5
edge = 15,-10
player = 15,-10

[State 3625]
type = removeExplod
trigger1 = animelem = 5
ID = 737

[State 3205]
type = Explod
trigger1 = animelem = 5
anim = 4303
pos = 0,10
;supermove = 1
sprpriority = -2
ownpal = 1

[State 3000] ; Shadows
type = Afterimage
trigger1 = animelem = 1
time = 60
PalBright = 0, 0, 0
PalContrast =  128,68,1
PalAdd = 0, 0, 0
PalMul = 1,1,1
Length = 15
FrameGap = 7
Trans = Add1

[state hitby]
type = nothitby
trigger1 = time = [0,25]
value = SCA
time=1
ignorehitpause = 1

[State 3205]
type = Explod
trigger1 = time > 20
trigger1 = time%20 = 0
anim = 81
pos = 0,0
;supermove = -1
sprpriority = 2
ownpal = 1

[STate 3500]
type = PlaySNd
trigger1 = time = 1
value = 3300,0
channel = 1

[State 3205]
type = Explod
trigger1 = time = 10
trigger2 = time = 30
trigger3 = time = 50
anim = 81
pos = 0,0
;supermove = 1
sprpriority = 2
ownpal = 1

[State 3205]
type = Explod
trigger1 = animelem = 5
anim = 4309
id = 4309
pos = 0,-10
supermove = 1
bindtime = 1000
removetime = 1000
sprpriority = 3
removeongethit = 1
ignorehitpause = 1
ownpal = 1

[State 3205]
type = Explod
trigger1 = animelem = 5
anim = 4307
id = 4307
pos = 0,-10
supermove = 1
bindtime = 1000
removetime = 1000
sprpriority = 3
removeongethit = 1
ignorehitpause = 0
ownpal = 1

[State 3205]
type = Explod
trigger1 = time > 15
trigger1 = time%8 = 0
anim = 4308
id = 4308
pos = -20,0
supermove = 1
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[state hitby]
type = hitby
trigger1 = time > 25
value = SCA,SA,NA,HA
time=1 

[State 3305, 2]
type = palfx
trigger1 = time > 20
time = 35
add = 184,28,0
mul = 248,168,104
sinadd= 138,118,14,16
color = 0 
invertall = 1                     

[State 117]
type = SprPriority
trigger1 = Time = 8
value = -1

;[State 117]
;type = VelSet
;trigger1 = AnimElem = 1
;x = 2

[State 1701]
type = posadd
trigger1 = animelem = 7
x = 16

[State 1650, 1]
type = ReversalDef
trigger1 = animelemtime(4) >= 0
trigger1 = animelemtime(5) < 0
reversal.attr = SCA,NA,SA, AP,NP,SP,AA,HP,HA
numhits = 0
pausetime = 10,20
sparkno = S733
hitsound = 6,0
p2stateno = 831

[State 295]
type = HitDef
triggerall = time >= 21
triggerall = time < 90
trigger1 = time%8=0
trigger2 = time = 0
attr = A,NA
damage = 45,0
getpower = 90,30
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 25,25
snap = 20,-10
guard.pausetime = 25,25
sparkno = S82
guard.sparkno = S82
sparkxy = -10,-67
hitsound = S3305,1
guardsound = S150,1
ground.type = low
ground.slidetime = 77
ground.hittime = 79
ground.velocity = -3
guard.velocity = -11
id = 10001
palfx.time = 79
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1     
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 12
air.fall = 1
fall.recover = 0

[State 295]
type = HitDef
trigger1 = time >= 90
attr = A,NA
damage = 205,0
getpower = 90,30
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 5,25
snap = 20,-10
guard.pausetime = 25,25
sparkno = S82
guard.sparkno = S82
sparkxy = -10,-67
hitsound = S3305,1
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -9,-7
guard.velocity = -16
p1stateno = 4306
id = 10001
palfx.time = 79
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1     
airguard.velocity = -16,-3
air.type = low
air.velocity = -9,-7
air.hittime = 12
air.fall = 1
fall = 1
fall.recover = 0

[State 1701]
type = veladd
trigger1 = animelemtime(6) >= 3
x = 2.3

[State 117]
type = ChangeState
trigger1 = time = 121
trigger2 = !movecontact
trigger2 = time > 16
trigger2 = frontedgedist <= 15 
value = 4306
ctrl = 0

;-----------------------------------------------------------------------------------
;凤之殇 自然发动冲刺
;-----------------------------------------------------------------------------------
[Statedef 4355]
type = S
movetype = A
physics = S
anim = 4302
poweradd = -2000
velset = 0,0
ctrl = 0

[State 1701]
type = pause
trigger1 = time = [10,19]
time = 1

[state Width]
type = Width
trigger1 = animelemtime(7)>=0
trigger1 = animelemtime(12)<=5
edge = 15,-10
player = 15,-10

[State 3625]
type = removeExplod
trigger1 = animelem = 5
ID = 737

[State 3205]
type = Explod
trigger1 = animelem = 5
anim = 4303
pos = 0,10
;supermove = 1
sprpriority = -2 
ownpal = 1

[State 117]
type = AfterImage
trigger1 = animelem = 1,<=4
time = 60
PalBright = 50, 50, 50
PalContrast =  150,150,150
PalAdd = 63, 100, 103
PalMul = .65,.65,.75
Length = 6
FrameGap = 1

[state hitby]
type = nothitby
trigger1 = time = [0,30]
value = SCA
time=1
ignorehitpause = 1

[State 3205]
type = Explod
trigger1 = time > 20
trigger1 = time%20 = 0
anim = 81
pos = 0,0
;supermove = -1
sprpriority = 2
ownpal = 1

[STate 3500]
type = PlaySNd
trigger1 = time = 1
value = 3300,0
channel = 1

[State 3205]
type = Explod
trigger1 = time = 10
trigger2 = time = 30
trigger3 = time = 50
anim = 81
pos = 0,0
;supermove = 1
sprpriority = 2
ownpal = 1

[State 3205]
type = Explod
trigger1 = animelem = 5
anim = 4309
id = 4309
pos = 0,-10
supermove = 1
bindtime = 1000
removetime = 1000
sprpriority = 3
removeongethit = 1
ignorehitpause = 0
ownpal = 1

[State 3205]
type = Explod
trigger1 = animelem = 5
anim = 4307
id = 4307
pos = 0,-10
supermove = 1
bindtime = 1000
removetime = 1000
sprpriority = 3
removeongethit = 1
ignorehitpause = 1
ownpal = 1

[State 3205]
type = Explod
trigger1 = time > 15
trigger1 = time%8 = 0
anim = 4308
id = 4308
pos = -20,0
supermove = 1
sprpriority = 3
removeongethit = 1
ignorehitpause = 1
ownpal = 1

[state hitby]
type = hitby
trigger1 = time > 30
value = SCA,SA,NA,HA
time=1 

[State 3305, 2]
type = palfx
trigger1 = time = 21 
time = 75
add = 184,28,0
mul = 248,168,104
sinadd= 138,118,14,16 
color = 0 
invertall = 1                     

[State 117]
type = SprPriority
trigger1 = Time = 8
value = -1

;[State 117]
;type = VelSet
;trigger1 = AnimElem = 1
;x = 2

[State 1701]
type = posadd
trigger1 = animelem = 2
x = 2

[State 1650, 1]
type = ReversalDef
trigger1 = animelemtime(4) >= 0
trigger1 = animelemtime(5) < 0
reversal.attr = SCA,NA,SA, AP,NP,SP,AA,HP,HA
numhits = 0
pausetime = 10,20
sparkno = S733
hitsound = 6,0
p2stateno = 831

[State 295]
type = HitDef
triggerall = time >= 21
triggerall = time < 90
trigger1 = time%8=0
trigger2 = time = 0
attr = A,NA
damage = 45,0
getpower = 90,30
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 25,25
snap = 20,-10
guard.pausetime = 25,25
sparkno = S82
guard.sparkno = S82
sparkxy = -10,-67
hitsound = S3305,1
guardsound = S150,1
ground.type = low
ground.slidetime = 77
ground.hittime = 79
ground.velocity = -9
guard.velocity = -11
id = 10001
palfx.time = 79
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1     
airguard.velocity = -11,-3
air.type = low
air.velocity = -6,-7
air.hittime = 12
air.fall = 1
fall.recover = 0

[State 295]
type = HitDef
trigger1 = time >= 90
attr = A,NA
damage = 205,0
getpower = 90,30
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 5,25
snap = 20,-10
guard.pausetime = 25,25
sparkno = S82
guard.sparkno = S82
sparkxy = -10,-67
hitsound = S3305,1
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -9,-7
guard.velocity = -16
p1stateno = 4306
id = 10001
palfx.time = 79
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1     
airguard.velocity = -16,-3
air.type = low
air.velocity = -9,-7
air.hittime = 12
air.fall = 1
fall = 1
fall.recover = 0

[State 1701]
type = veladd
trigger1 = animelemtime(6) >= 0
x = 5.3

[State 117]
type = ChangeState
trigger1 = time = 121
trigger2 = !movecontact
trigger2 = time > 16
trigger2 = frontedgedist <= 15
value = 4306
ctrl = 0

;---------------------------------------------------------------------------------
;自己被震飞o(s□t)o
;---------------------------------------------------------------------------------
[Statedef 4306]
type = A
movetype = H
physics = N
velset = 0,0
anim = 5051
ctrl = 0

[State 117]
type = changeanim
triggerall = anim != 4610
trigger1 = roundstate = 3
value = 4610

[State 117]
type = lifeadd
trigger1 = time = 0
value = -50

[State 3625]
type = removeExplod
trigger1 = numexplod(737) != 0
trigger1 = time = 0
ID = 737

[State 3625]
type = removeExplod
trigger1 = numexplod(738) != 0
trigger1 = time = 0
ID = 738

[State 3625]
type = removeExplod
trigger1 = time = 0
ID = 4307

[State 3625]
type = removeExplod
trigger1 = time = 0
ID = 4309

[State 3305, 2]
type = palfx
trigger1 = time = 0 
time = 25
add = 184,28,0
mul = 248,168,104
sinadd= 138,118,14,16  
color = 0 
invertall = 1

[State 117]
type = pause
trigger1 = 1
time = 2

[State 117]
type = posadd
trigger1 = time = 0
y = -30

[state hitby]
type = nothitby
trigger1 = 1
value = SCA
time=1
ignorehitpause = 1

[State 399, -2]
type = EnvShake
trigger1 = time = 1
ignorehitpause = 1
persistent = 0
time = 25
freq = 100
ampl = -6
phase = 1

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 1
value = 2200,1

[State 704, 4]
type = Explod
trigger1 = animelem = 1 
sprpriority = 3
anim = 80
pos = 8,-7
postype = P1
supermove = 1

[State 704, 4]
type = Explod
trigger1 = animelem = 2 
sprpriority = 3
anim = 82
pos = 8,-7
postype = P1
supermove = 1

[state hitby]
type = velset
triggerall = anim = 4610
trigger1 = animelem = 2
x = -8
y = -7

[state hitby]
type = velset
triggerall = anim != 4610
trigger1 = animelem = 2
x = -5
y = -7

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = animelemtime(2) >= 0
y = GetHitVar(yaccel)

[State 117]
type = ChangeState
triggerall = anim = 4610
trigger1 = BackEdgeBodyDist <=1
value = 4611

[State 117]
type = ChangeState
triggerall = anim != 4610
trigger1 = vel y >=2
value = 4611
;=============================================================================================================
;凤之殇代码结束
;=============================================================================================================
;=============================================================================================================
;凤之翔代码开始
;=============================================================================================================
;-----------------------------------------------------------------------------------
[Statedef 4400]
type = S
movetype = A
physics = S
anim = 4400
velset = 0,0
poweradd = -1000
ctrl = 0

[state hitby]
type = nothitby
trigger1 = 1
value = SCA
time=1
ignorehitpause = 1

[State 704, 2]
type = PlaySnd
trigger1 = animelem = 2 
value = 3000,20
volume = 50

[State 704, 4]
type = Explod
trigger1 = animelem = 2 
sprpriority = -3
anim = 6000
pos = 0,-95
postype = P1
supermove = 1

[State 704, 4]
type = Explod
trigger1 = animelem = 2 
sprpriority = 3
anim = 6001
pos = 0,-95
postype = P1
supermove = 1

[State 704, 4]
type = superpause
trigger1 = Time = 0
movetime = 40
time = 43
anim = -1

[State 704, 4]
type = posadd
trigger1 = animelem = 3
x = 10



[State 295]
type = HitDef
trigger1 = time = 0
attr = A,HA
damage = 65,30
getpower = 90,30
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 5,5
guard.pausetime = 4,4
sparkno = S734
guard.sparkno = S733
sparkxy = -10,-67
hitsound = S220,10
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -0,-6
guard.velocity = -0
palfx.time = 79
id = 10001
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1     
airguard.velocity = -6,-3
air.type = low
air.velocity = 4,-3
air.hittime = 12
fall = 1
air.fall = 1
fall.recover = 0

[State 704, 4]
type = Explod
trigger1 = animTime = 0
sprpriority = -3
anim = 3365
pos = 0,0
postype = P1
ignorehitpause = 0

[State 117]
type = ChangeState
trigger1 = animTime = 0
value = 4405
ctrl = 0

;凤之翔代码开始（升龙）
;=============================================================================================================
;-----------------------------------------------------------------------------------
[Statedef 4405]
type = A
movetype = A
physics = N
anim = 4405
velset = 0,-11
ctrl = 0

[State 3000] ; Shadows
type = Afterimage
trigger1 = time = 0
time = 40
PalBright = 0, 0, 0
PalContrast =  128,68,1
PalAdd = 0, 0, 0
PalMul = 1,1,1
Length = 25
timegap = 2
FrameGap = 7
Trans = Add1

[State 704, 2]
type = PlaySnd
trigger1 = Time = 0
value = 3305,2
volume = 50

[state hitby]
type = nothitby
trigger1 = time = [0,20]
value = SCA
time=1
ignorehitpause = 1

[State 704, 4]
type = Explod
trigger1 = animelem = 1
sprpriority = 3
anim = 4406
pos = -2,10
postype = P1
ignorehitpause = 0
bindtime = 999

[State 704, 4]
type = Explod
trigger1 = animelem = 1
sprpriority = 3
anim = 4406
pos = -2,10
postype = P1
facing = -1
ignorehitpause = 0
bindtime = 999

[State 295]
type = HitDef
trigger1 = !movehit 
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = !movehit
trigger3 = animelem = 3
trigger4 = animelem = 4
trigger5 = !movehit
trigger5 = animelem = 5
trigger6 = animelem = 6
attr = A,HA
damage = 45,20
getpower = 20,10
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 5,5
guard.pausetime = 6,7
sparkno = S734
guard.sparkno = S733
sparkxy = -10,-67
hitsound = S220,10
guardsound = S150,1
ground.type = low
ground.slidetime = 27
ground.hittime = 27
ground.velocity = ifelse(time<10,2,-2),-6
guard.velocity = ifelse(time<10,2,-15)
palfx.time = 79
id = 10001
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1     
airguard.velocity = ifelse(time<10,2,-2),-5
ground.cornerpush.veloff = -0
air.cornerpush.veloff = -0
guard.cornerpush.veloff = ifelse(time<10,2,-15)
air.type = low
air.velocity = ifelse(time<10,2,-2),-6
air.hittime = 12
fall = 1
air.fall = 1
fall.recover = 0

[State 704, 2]
type = veladd
trigger1 = Time >= 0
y = .3

[State 117]
type = ChangeState
trigger1 = Time >= 30
trigger1 = animelemtime(5) = 2
value = 4409
ctrl = 0

[Statedef 4409]
type = A
movetype = A
physics = N
anim = 4409
ctrl = 0

[State 704, 2]
type = veladd
trigger1 = Time >= 0
y = .3

[State 295]
type = HitDef
trigger1 = animelem = 1
attr = A,HA
damage = 45,20
getpower = 20,10
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 3,3
guard.pausetime = 4,4
sparkno = S734
guard.sparkno = S733
sparkxy = -10,-67
hitsound = S220,10
guardsound = S150,1
ground.type = low
ground.slidetime = 27
ground.hittime = 29
ground.velocity = -3,-6
guard.velocity = -15
ground.cornerpush.veloff = -12
air.cornerpush.veloff = -12
guard.cornerpush.veloff = -12
palfx.time = 79
id = 10001
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1     
airguard.velocity = -5,-6
air.type = low
air.velocity = -3,-6
air.hittime = 12
fall = 1
air.fall = 1

[State 117]
type = ChangeState
trigger1 = pos y >= 0
trigger1 = vel y > 0
value = 1310
ctrl = 0

;-----------------------------------------------------------------------------------
[Statedef 4410]
type = S
movetype = A
physics = S
anim = 4400
velset = 0,0
poweradd = -2000
ctrl = 0

[state hitby]
type = nothitby
trigger1 = 1
value = SCA
time=1
ignorehitpause = 1

[State 704, 2]
type = PlaySnd
trigger1 = animelem = 2 
value = 3000,30
volume = 50

[State 704, 4]
type = Explod
trigger1 = animelem = 2 
sprpriority = -3
anim = 6010
pos = 0,-95
postype = P1
supermove = 1

[State 704, 4]
type = Explod
trigger1 = animelem = 2 
sprpriority = 3
anim = 6011
pos = 0,-95
postype = P1
supermove = 1

[State 704, 4]
type = superpause
trigger1 = Time = 0
movetime = 40
time = 43
anim = -1

[State 704, 4]
type = posadd
trigger1 = animelem = 3
x = 10

[State 295]
type = HitDef
trigger1 = time = 0
attr = A,HA
damage = 65,30
getpower = 90,30
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 5,5
guard.pausetime = 4,4
sparkno = S734
guard.sparkno = S733
sparkxy = -10,-67
hitsound = S220,10
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -0,-6
guard.velocity = -0
palfx.time = 79
id = 10001
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1     
airguard.velocity = -6,-3
air.type = low
air.velocity = 4,-3
air.hittime = 12
fall = 1
air.fall = 1
fall.recover = 0

[State 704, 4]
type = Explod
trigger1 = animTime = 0
sprpriority = -3
anim = 3365
pos = 0,0
postype = P1
ignorehitpause = 0

[State 117]
type = ChangeState
trigger1 = animTime = 0
value = 4412
ctrl = 0

;凤之翔代码开始
;=============================================================================================================
;-----------------------------------------------------------------------------------
[Statedef 4412]
type = A
movetype = A
physics = N
anim = 4405
velset = 0,-10
ctrl = 0

[State 3000] ; Shadows
type = Afterimage
trigger1 = time = 0
time = 60
PalBright = 0, 0, 0
PalContrast =  128,68,1
PalAdd = 0, 0, 0
PalMul = 1,1,1
Length = 25
timegap = 2
FrameGap = 7
Trans = Add1

[State 704, 2]
type = PlaySnd
trigger1 = Time = 0
value = 3305,2
volume = 50

[state hitby]
type = nothitby
trigger1 = time = [0,20]
value = SCA
time=1
ignorehitpause = 1

[State 704, 4]
type = Explod
trigger1 = animelem = 1
sprpriority = 3
anim = 4406
pos = -2,10
postype = P1
ignorehitpause = 0
bindtime = 999

[State 704, 4]
type = Explod
trigger1 = animelem = 1
sprpriority = 3
anim = 4406
pos = -2,10
postype = P1
facing = -1
ignorehitpause = 0
bindtime = 999

[State 295]
type = HitDef
trigger1 = !movehit 
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = !movehit
trigger3 = animelem = 3
trigger4 = animelem = 4
trigger5 = !movehit
trigger5 = animelem = 5
trigger6 = animelem = 6
attr = A,HA
damage = 45,20
getpower = 20,10
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 3,3
guard.pausetime = 4,4
sparkno = S734
guard.sparkno = S733
sparkxy = -10,-67
hitsound = S220,10
guardsound = S150,1
ground.type = low
ground.slidetime = 27
ground.hittime = 27
ground.velocity = ifelse(time<10,2,-0),-4
guard.velocity = ifelse(time<10,2,-2)
palfx.time = 79
id = 10001
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1     
airguard.velocity = ifelse(time<10,2,-2),-4
ground.cornerpush.veloff = -0
air.cornerpush.veloff = -0
guard.cornerpush.veloff = ifelse(time<10,2,-2)
air.type = low
air.velocity = ifelse(time<10,2,-0),-4
air.hittime = 12
fall = 1
air.fall = 1
fall.recover = 0

[State 704, 2]
type = veladd
trigger1 = Time >= 0
y = .3

[State 117]
type = ChangeState
trigger1 = Time >= 35
trigger1 = animelemtime(1) = 3
value = 4415
ctrl = 0

;=============================================================================================================
;-----------------------------------------------------------------------------------
[Statedef 4415]
type = A
movetype = A
physics = N
anim = 4415
ctrl = 0

[State 704, 2]
type = PlaySnd
trigger1 = animelem = 4
value = 3305,2
volume = 50

[state hitby]
type = nothitby
trigger1 = time = [0,20]
value = SCA
time=1
ignorehitpause = 1

[State 704, 4]
type = Explod
trigger1 = animelem = 5
sprpriority = 3
anim = 3360
pos = 0,0
postype = P1
ignorehitpause = 0
bindtime = 30

[State 704, 4]
type = Explod
trigger1 = animelem = 5
sprpriority = -3
anim = 3365
pos = 0,0
postype = P1
ignorehitpause = 0
bindtime = 30

[State 704, 2]
type = veladd
trigger1 = Time >= 0
trigger1 = animelemtime(4) <=3
y = .3

[State 704, 2]
type = posset
trigger1 = animelemTime(4) = 3
y = 0

[State 704, 2]
type = velset
trigger1 = animelemTime(4) = 3
x = 0
y = 0

[State 704, 2]
type = statetypeset
trigger1 = animelemTime(4) = 3
type = s
physics = s

[State 3626, EnvShake]
type = EnvShake
trigger1 = animelem = 5
ignorehitpause = 1
persistent = 0
time = 45
freq = 100
ampl = -7
phase = 1

[State 615]
type = HitDef
persistent = 0
trigger1 = animelem = 5
attr = S, HP
animtype = back
damage = 300,25
priority = 7, Hit
guardflag = HLM
pausetime = 7,7
guard.pausetime = 3,3
guard.ctrltime = 17
guard.sparkno = S733
sparkno = S82
sparkxy = -30,-125
hitsound = S3305,1
guardsound = S150,0
ground.type = high
ground.slidetime = 22
ground.hittime = 22
ground.velocity = -2,-11
guard.velocity = -7
air.velocity = -2,-11
getpower = 30,10
givepower = 10,5
air.juggle = 5
;yaccel = .5
p2stateno = 4935
fall.recover = 0
id = 10001
fall = 1
Palfx.time = 90
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1

[State 615]
type = HitDef
persistent = 0
trigger1 = animelem = 6
attr = S, HP
animtype = back
damage = 300,25
priority = 7, Hit
guardflag = HLM
pausetime = 7,7
guard.pausetime = 3,3
guard.ctrltime = 17
guard.sparkno = S733
sparkno = S82
sparkxy = -30,-75
hitsound = S3305,1
guardsound = S150,0
ground.type = high
ground.slidetime = 22
ground.hittime = 22
ground.velocity = -2,-11
guard.velocity = -7
air.velocity = -2,-11
getpower = 30,10
givepower = 10,5
air.juggle = 5
;yaccel = .5
p2stateno = 4935
fall.recover = 0
id = 10001
fall = 1
Palfx.time = 90
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1

[State 615]
type = HitDef
persistent = 0
trigger1 = animelem = 7
attr = S, HP
animtype = back
damage = 300,25
priority = 7, Hit
guardflag = HLM
pausetime = 7,7
guard.pausetime = 9,9
guard.ctrltime = 17
guard.sparkno = S733
sparkno = S82
sparkxy = -30,-75
hitsound = S3305,1
guardsound = S150,0
ground.type = high
ground.slidetime = 32
ground.hittime = 32
ground.velocity = -2,-11
guard.velocity = -12
ground.cornerpush.veloff = -10
air.cornerpush.veloff = -10
air.velocity = -12,-11
getpower = 30,10
givepower = 10,5
air.juggle = 5
;yaccel = .5
p2stateno = 4935
fall.recover = 0
id = 10001
fall = 1
Palfx.time = 90
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1

[State 117]
type = ChangeState
trigger1 = animTime = 0
value = 12
ctrl = 1

;===================================================================================================
;====================================================================================================

;=======================================================================================================
;噬魂之炎
;=====================================================================================================
[Statedef 4600]
type = S
movetype = A
physics = S
valset = 0,0
poweradd = -3000
anim = 4600
ctrl = 0

[state hitby]
type = nothitby
trigger1 = 1
value = SCA
time=1
ignorehitpause = 1

[State 704, 2]
type = PlaySnd
trigger1 = animelem = 2 
value = 3000,30
volume = 50

[State 704, 2]
type = PlaySnd
trigger1 = animelem = 2 
value = 4600,0

[State 704, 4]
type = Explod
trigger1 = animelem = 2 
sprpriority = -3
anim = 6010
pos = 8,-75
postype = P1
supermove = 1

[State 704, 4]
type = Explod
trigger1 = animelem = 2 
sprpriority = 3
anim = 6011
pos = 30,-55
postype = P1
supermove = 1

[State 704, 4]
type = Explod
trigger1 = animelem = 2 
sprpriority = 3
anim = 6011
pos = -15,-55
postype = P1
supermove = 1

[State 704, 4]
type = superpause
trigger1 = Time = 0
movetime = 15
time = 30
anim = -1

[State 295]
type = HitDef
trigger1 = time = 0
attr = A,HA
damage = 0,0
getpower = 90,30
animtype = high
hitflag = MAF
priority = 7,Hit
pausetime = 0,0
guard.pausetime = 4,4
sparkno = S734
guard.sparkno = S733
sparkxy = -10,-67
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -0,0
guard.velocity = -0
palfx.time = 379
p1stateno = 4601
p2stateno = 4606
id = 10001
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1     
airguard.velocity = -6,-3
air.type = low
air.velocity = 4,-3
air.hittime = 12
fall = 1
air.fall = 1
fall.recover = 0
kill = 0 

[State 117]
type = ChangeState
trigger1 = animTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 4601]
type = S
movetype = A
physics = S
valset = 0,0
anim = 4601
ctrl = 0

[State 3700]
type = varset
trigger1 = time = 0
var(37) = 1

[State 4897, Bgpalfx]
type = Bgpalfx
trigger1 = var(37)<150
trigger1 = 1
invertall = 1
time = 20
add = 10,10,10
mul = 256-var(37)*2,256-var(37)*2,256-var(37)*2
color = 255
ignorehitpause = 1

[State 3630]
type = envcolor
trigger1 = var(37) >= 150
value = 0,0,0
time = 10
under = 1

[State 3700]
type = varadd
trigger1 = var(37)<150
var(37) = 1

[State 704, 4]
type = Explod
trigger1 = animelem = 1
sprpriority = 3
anim = 85
id = 85
removetime = 999
bindtime = 999
pos = 0,0
postype = P1
supermove = 1

[State 704, 4]
type = Explod
trigger1 = animelem = 1
sprpriority = 3
anim = 86
id = 86
removetime = 999
bindtime = 999
pos = 0,0
postype = P1
supermove = 1

[State 704, 4]
type = Explod
trigger1 = animelem = 1
sprpriority = -3
anim = 3365
id = 86
removetime = 999
bindtime = 999
pos = 0,0
postype = P1
supermove = 1

[State 704, 2]
type = PlaySnd
trigger1 = time%40 = 0 
value = 3305,0

[State 1200, Explod]
type = Explod
trigger1 = time%5 = 1
trigger1 = AnimElemtime(1) >= 3
anim = ifelse(random<500,720,721)
id = 720
pos = 160,200
random = 320,30
postype = back
sprpriority = -3
vel = 0,-.5
scale = .7,.2
ignorehitpause = 1
ownpal = 1
supermove = 1
supermovetime = 9999
pausemovetime = 99999
under = 1


[State 1200, Explod]
type = Explod
trigger1 = time%5 = 1
trigger1 = AnimElemtime(1) >= 3
anim = ifelse(random<500,720,721)
id = 720
pos = 160,200
random = 320,30
postype = back
sprpriority = 3
vel = 0,-.5
scale = .7,.2
ignorehitpause = 1
ownpal = 1
supermove = 1
supermovetime = 9999
pausemovetime = 99999
under = 1

[State 117]
type = targetState
trigger1 = Time = 0
value = 4607

[State 117]
type = targetbind
trigger1 = animelemtime(1) >= 0
trigger1 = animelemtime(2) < 0
pos = 17,-61

[State 117]
type = targetbind
trigger1 = animelemtime(2) = [0,6]
pos = 16,-60

[State 117]
type = lifeadd
trigger1 = time%3 =0
value = -1
kill = 0

[State 117]
type = targetlifeadd
trigger1 = time%2 =0
value = -5
kill = 0

[State 117]
type = ChangeState
trigger1 = Time = 300
value = 4610
ctrl = 0

;爆炸震飞自己------------------------------------------------------------------
[Statedef 4610]
type = A
movetype = H
physics = N
velset = 0,0
anim = 5051
ctrl = 0

[State 117]
type = changeanim
triggerall = anim = 5051
trigger1 = roundstate = 3
value = 4610

[state 4610]
type = removeexplod
trigger1 = time = 0
id = 85

[state 4610]
type = removeexplod
trigger1 = time = 0
id = 86

[State 117]
type = pause
trigger1 = 1
time = 2

[State 117]
type = posadd
trigger1 = time = 0
y = -30

[state hitby]
type = nothitby
trigger1 = 1
value = SCA
time=1
ignorehitpause = 1

[State 399, -2]
type = EnvShake
trigger1 = time = 1
ignorehitpause = 1
persistent = 0
time = 25
freq = 100
ampl = -6
phase = 1

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 1
value = 2200,1

[State 704, 4]
type = Explod
trigger1 = animelem = 1 
sprpriority = 3
anim = 80
pos = 8,-7
postype = P1
supermove = 1

[State 704, 4]
type = Explod
trigger1 = animelem = 2 
sprpriority = 3
anim = 82
pos = 8,-7
postype = P1
supermove = 1

[State 117]
type = targetlifeadd
trigger1 = time = 0
value = -700

[State 117]
type = lifeadd
trigger1 = time = 0
value = -150

[State 117]
type = targetState
trigger1 = animelem = 1
value = 4616

[State 117]
type = targetState
trigger1 = animelem = 2
value = 4617

[state hitby]
type = velset
triggerall = anim = 4610
trigger1 = animelem = 2
x = -8
y = -7

[state hitby]
type = velset
triggerall = anim != 4610
trigger1 = animelem = 2
x = -5
y = -7

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = animelemtime(2) >= 0
y = GetHitVar(yaccel)

[State 117]
type = ChangeState
triggerall = anim = 4610
trigger1 = BackEdgeBodyDist <=1
value = 4611

[State 117]
type = ChangeState
triggerall = anim != 4610
trigger1 = vel y >=2
value = 4611

[Statedef 4611]
type = A
movetype = H
physics = N
anim = ifelse(anim=4610,4611,5061)
ctrl = 0

[State 4611]
type = velset
trigger1 = time = 0
trigger1 = anim = 4611
x = 0
y = 0

[State 704, 4]
type = Explod
triggerall = anim = 4611
trigger1 = animelem = 1
sprpriority = -3
anim = 396
id = 396
pos = -15,-50
postype = P1
supermove = 1

[State 399, -2]
type = EnvShake
triggerall = anim = 4611
trigger1 = time = 1
ignorehitpause = 1
persistent = 0
time = 10
freq = 100
ampl = -3
phase = 1

[State 399, -2]
type = playsnd
triggerall = anim = 4611
trigger1 = time = 1
value = 999,2

[State 5000, 7]
type = posadd
triggerall = anim = 4611
trigger1 = time = 0
y = -30

[State 5000, 4] ;Freeze anim
type = nothitby
trigger1 = 1
value = sac

[State 5000, 7]
type = velset
triggerall = anim = 4611
trigger1 = time = 25
y = 1

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = anim != 4611
y = GetHitVar(yaccel)

[State 5000, 7]
type = SelfState
triggerall = anim = 4611
trigger1 = vel y > 0
trigger1 = pos y >= 8
value = 4612

[State 5000, 7]
type = SelfState
triggerall = anim != 4611
trigger1 = vel y > 0
trigger1 = pos y >= 20
value = 5100

[Statedef 4612]
type = S
movetype= H
physics = N
anim = 4612
velset = 0,0
sprpriority = 3

[State 5000, 4] ;Freeze anim
type = nothitby
trigger1 = 1
value = sac

[State 5000, 7]
type = posset
trigger1 = time = 0
y = 0

[State 5000, 7]
type = SelfState
triggerall = animelemtime(6)>80
trigger1 = win
value = 180

[State 5000, 7]
type = Changeanim
triggerall = animelemtime(6)>50
trigger1 = !ALive
value = 5962

[State 5000, 7]
type = SelfState
trigger1 = anim = 5962
value = 5150

;噬魂炎p2动作----------------------------------------------------------------------
[Statedef 4606]
type = S
movetype = H
physics = N
ctrl = 0

[State 117]
type = Changeanim2
trigger1 = Time = 0
value = 4606


[Statedef 4607]
type = S
movetype = H
physics = N
ctrl = 0

[State 117]
type = Changeanim2
trigger1 = Time = 0
value = 4607
;------------------------------------------
[Statedef 4616]
type = A
movetype = H
physics = N
ctrl = 0

[state 4616]
type = lifeset
trigger1 = time = 0
value = 0

[State 117]
type = Changeanim
trigger1 = Time = 0
value = 5030


[Statedef 4617]
type = A
movetype = H
physics = N
velset = -6,-7.5
ctrl = 0

[state 4616]
type = lifeset
trigger1 = time = 0
value = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 117]
type = Changeanim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5050)
value = 5050

[State 117]
type = Changeanim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5051)
value = 5051

[State 117]
type = Changeanim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 5000, 7]
type = changeState
trigger1 = vel y > 1
value = 4618

[Statedef 4618]
type = A
movetype = H
physics = N
ctrl = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 117]
type = Changeanim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5060)
value = 5060

[State 117]
type = Changeanim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5061)
value = 5061

[State 117]
type = Changeanim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5062)
value = 5062

[State 5000, 7]
type = SelfState
trigger1 = vel y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100
;=======================================================================================================
;禁锢の力量(反bt)
;=====================================================================================================
[Statedef 4700]
type = S
movetype = A
physics = S
velset = 0,0
poweradd = 0
facep2 = 1
anim = 4700
ctrl = 0

[state varset]
type = varset
trigger1 = var(2)<100
trigger1 = time = 0
var(2) = 2

[state varset]
type = varset
triggerall = var(58)>=6
trigger1 = time = 0
var(58) = 0

[state varset]
type = varadd
trigger1 = time = 0
var(58) = 1

[state posset]
type = posadd
trigger1 = pos y < 0
y = 5

[state posset]
type = posset
trigger1 = pos y > 0
y = 0

[state hitby]
type = nothitby
trigger1 = 1
value = SCA
time=1
ignorehitpause = 1

[State 704, 2]
type = PlaySnd
trigger1 = animelem = 2 
value = 3000,30
volume = 50

[State 704, 2]
type = PlaySnd
trigger1 = animelem = 2 
value = 4600,0

[State 704, 4]
type = Explod
trigger1 = animelem = 2 
sprpriority = -3
anim = 6010
pos = 8,-75
postype = P1
ownpal = 1
supermove = 1

[State 704, 4]
type = Explod
trigger1 = animelem = 2 
sprpriority = 3
anim = 6011
pos = 30,-55
postype = P1
ownpal = 1
supermove = 1

[State 704, 4]
type = Explod
trigger1 = animelem = 2 
sprpriority = 3
anim = 6011
pos = -15,-55
postype = P1
ownpal = 1
supermove = 1

[State 704, 4]
type = Explod
trigger1 = animelem = 6 
sprpriority = 6
anim = 4506
id = 4506
pos = 0,0
bindtime = 999
removetime = 999
pausemovetime = 999
postype = P1
ownpal = 1
supermove = 1

[State 704, 4]
type = superpause
trigger1 = Time = 0
movetime = 40
time = 40
anim = -1

[State 704, 4]
type = pause
triggerall = time > 40
trigger1 = time%10 = 0 || time%10 = 5
time = 5
movetime = 5
endcmdbuftime = 1

[State 3700]
type = varset
trigger1 = time = 0
var(37) = 1

[State 4897, Bgpalfx]
type = Bgpalfx
triggerall = time >= 37
trigger1 = 1
invertall = 1
time = 20
add = 10,10,10
mul = 256-var(37)*2,256-var(37)*2,256-var(37)*2
color = 255
ignorehitpause = 1

[State 3700]
type = varadd
triggerall = time > 37
trigger1 = var(37)<=128
var(37) = 1

[State 117]
type = ChangeState
trigger1 = animTime = 0
value = 4701

[Statedef 4701]
type = S
movetype = A
physics = S
velset = 0,0
anim = 4701
ctrl = 0

[state posset]
type = posset
trigger1 = pos y != 0
y = 0

[State 704, 4]
type = pause
trigger1 = time%10 = 0 || time%10 = 5
time = 5
movetime = 5
endcmdbuftime = 1

[State 704, 4]
type = nothitby
trigger1 = 1
time = 1
value = SAC

[State 4897, Bgpalfx]
type = Bgpalfx
trigger1 = time = [0,136]
trigger2 = time = [140,250]
invertall = 1
time = 20
add = 10,10,10
mul = 256-var(37)*2,256-var(37)*2,256-var(37)*2
color = 255
ignorehitpause = 1

[State 3630]
type = envcolor
trigger1 = time = [126,637]
value = 0,0,0
time = 10
under = 1

[State 3700]
type = varadd
trigger1 = time <127
trigger1 = var(37)<=128
var(37) = 1

[State 3700]
type = varset
trigger1 = time =137
var(37) = 128

[State 3700]
type = varadd
trigger1 = time >=137
trigger1 = var(37)>0
var(37) = -1

[State 704, 4]
type = Explod
trigger1 = time%15 = 1
sprpriority = -3
anim = ifelse(fvar(10)=1,3365,3609)
id = 3365
bindtime = 999
pos = 0,0
postype = P1
pausemovetime = 999
supermove = 1

[State 704, 2]
type = PlaySnd
trigger1 = time%40 = 0 
value = 3305,0

[State 1200, Explod]
type = Explod
trigger1 = time%5 = 1
trigger1 = AnimElemtime(1) >= 3
anim = ifelse(fvar(10)=1,ifelse(random<500,720,721),ifelse(random<500,1158,1159))
id = 720
pos = 160,200
random = 320,30
postype = back
sprpriority = -3
vel = 0,-.5
scale = .7,.2
ignorehitpause = 1
ownpal = 1
supermove = 1
supermovetime = 9999
pausemovetime = 99999
under = 1

[State 1200, Explod]
type = Explod
trigger1 = time%5 = 1
trigger1 = AnimElemtime(1) >= 3
anim = ifelse(fvar(10)=1,ifelse(random<500,720,721),ifelse(random<500,1158,1159))
id = 720
pos = 160,200
random = 320,30
postype = back
sprpriority = 3
vel = 0,-.5
scale = .7,.2
ignorehitpause = 1
ownpal = 1
supermove = 1
supermovetime = 9999
pausemovetime = 99999
under = 1

[State 117]
type = lifeadd
trigger1 = time%3 =0
value = 10

[State 117]
type = poweradd
trigger1 = time%3 =0
value = 30

[State 1200, Explod]
type = Explod
trigger1 = time = 100
anim = 4708
id = 4708
postype = back
sprpriority = 7
ignorehitpause = 1
ownpal = 1
supermove = 1
bindtime = 999
supermovetime = 999
pausemovetime = 999
under = 1

[State 1200, Explod]
type = Explod
trigger1 = time = 290
anim = 8001
id = 8002
postype = back
sprpriority = -2
ignorehitpause = 1
ownpal = 1
supermove = 1
bindtime = 999
removetime = 999
supermovetime = 999
pausemovetime = 999
under = 1

[State 1200, Explod]
type = Explod
trigger1 = time = 160
anim = 4507
id = 4507
postype = p1
pos = 8,-74
sprpriority = 7
ignorehitpause = 1
ownpal = 1
supermove = 1
bindtime = 999
removetime = 999
supermovetime = 999
pausemovetime = 999
under = 1

[State 1200, Explod]
type = Explod
trigger1 = time = 299
anim = 4508
id = 4508
postype = p1
pos = 8,-74
sprpriority = 7
ignorehitpause = 1
ownpal = 1
supermove = 1
bindtime = 999
supermovetime = 999
pausemovetime = 999
under = 1

[State 1200, Explod]
type = removeExplod
trigger1 = time = 160
id = 4506

[State 1200, Explod]
type = removeExplod
trigger1 = time = 299
id = 4507

[State 117]
type = ChangeState
trigger1 = Time = 299
value = 4705
ctrl = 0

[Statedef 4705]
type = S
movetype = A
physics = S
velset = 0,0
facep2 = 1
anim = 4705
ctrl = 0

[State 3630]
type = envcolor
trigger1 = 1
value = 0,0,0
time = 10
under = 1

[state Width]
type = Width
trigger1 = animelem = 8
player = 30,0

[state Width]
type = Width
trigger1 = animelemtime(9) >= 0
player = 60,0
edge = 30,-15

[State 704, 4]
type = pause
triggerall = time <= 66
trigger1 = time%10 = 0 || time%10 = 5
time = 5
movetime = 5
endcmdbuftime = 1

[State 704, 4]
type = pause
triggerall = time > 66
trigger1 = 1
time = 2
endcmdbuftime = 1

[State 704, 4]
type = nothitby
trigger1 = 1
time = 1
value = SAC

[State 4897, Bgpalfx]
type = Bgpalfx
triggerall = var(37)>0
trigger1 = 1
invertall = 1
time = 10
add = 10,10,10
mul = 256-var(37)*2,256-var(37)*2,256-var(37)*2
color = 255
ignorehitpause = 1

[State 3700]
type = varadd
trigger1 = var(37)>0
var(37) = -1

[State 704, 4]
type = varset
trigger1 = time = 0
var(38) = 0

[State 704, 2]
type = PlaySnd
trigger1 = animelemtime(2) = 1
value = 3950,1

[State 704, 2]
type = PlaySnd
trigger1 = animelemtime(13) = 1
value = 3150,12

[State 704, 2]
type = PlaySnd
trigger1 = animelemtime(14) = 1
value = 4960,0

[State 704, 2]
type = PlaySnd
trigger1 = animelemtime(14) = 3
value = 3305,0

[State 704, 2]
type = PlaySnd
trigger1 = animelemtime(27) = 1
value = 3305,2

[state EnvShake]
type = EnvShake
trigger1 = animelemtime(13) = 3
ampl = -5
freq = 180
time = 60

[State 1200, Explod]
type = Explod
trigger1 = time = 0
anim = 6215
id = 6215
postype = p1
sprpriority = 3
pos = 0,0
ignorehitpause = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999
under = 1

[State 1200, Explod]
type = Explod
trigger1 = time%13 = 0
anim = ifelse(random<500,6212,6213)
id = 6215
postype = p1
sprpriority = 3
pos = 0,0
ignorehitpause = 1
ownpal = 1
supermovetime = 999
pausemovetime = 999
under = 1

[State 1200, Explod]
type = Explod
trigger1 = animelemtime(13) = 0
anim = 4716
id = 4716
postype = p1
sprpriority = 3
pos = 80,-57
ignorehitpause = 0
ownpal = 1
bindtime = 999
under = 1

[State 1200, Explod]
type = removeExplod
trigger1 = animelemtime(31) = 0
id = 8002

[State 1200, Explod]
type = Explod
trigger1 = animelemtime(29) = 0
anim = 4708
id = 4708
postype = back
sprpriority = 7
ignorehitpause = 1
ownpal = 1
supermove = 1
bindtime = 999
supermovetime = 999
pausemovetime = 999
under = 1

[state Projectile]
type = Projectile
triggerall = time%6 = 1
trigger1 = animelemtime(13) >= 0
trigger1 = animelemtime(31) < 0
ProjAnim = 4706
ProjID = 4706
projhitanim = 4706
ProjRemoveTime = 3
offset = 0,0
attr = S,SA
hitflag = MAF
guardflag = 
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 10
damage = 999,999
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)+140)/2,-90
hitsound = S220,0
guardsound = S150,1
pausetime = 3,3
animtype = Hard
guard.hittime = 16
guard.velocity = -4
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -10,-3
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
id = 1000
air.hittime = 14
air.velocity = -10,-2
air.type = High
air.recover = 0
air.juggle = 0
fall.recover = 0
fall = 1
palfx.time = 55
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[state -3,116helper]
type = helper
triggerall = numhelper(4700) <= 1
trigger1 = animelemtime(21) >= 0
trigger1 = animelemtime(32) < 0
stateno = 834
id = 4700
pos = 0,0
postype = p2
ownpal = 1

[state -3,116helper]
type = helper
triggerall = numhelper(835) <= 1
trigger1 = animelemtime(13) >= 0
trigger1 = animelemtime(32) < 0
stateno = 835
id = 835
pos = 0,0
postype = p2
ownpal = 1

[State 117]
type = ChangeState
trigger1 = animTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;===============================================================================
; HITA_UP (initial going up)
[Statedef 6008]
type    = A
movetype= H
physics = N
ctrl = 0

[State 1008, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 1008, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1008, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 6006 ;HITA_FALL

[State 1008, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 6005 ;HITA_UP (transition)
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 6005]
type    = A
movetype= H
physics = N

[State 1005, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 1005, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 1005, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 6006 ;HITA_FALL

;---------------------------------------------------------------------------

; HITA_FALL (knocked up, falling)
[Statedef 6006]
type    = A
movetype= H
physics = N

[State 1006, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 1006, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 1006, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 1006, 4] ;Recover near ground
type = SelfState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 1006, 0fall]
type = HitFallSet
trigger1 = Time = 0
value = 0

[State 1006, 6]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 0)
value = 5100 ;HIT_BOUNCE
;---------------------------------------------------------------------------------
;*********************************************************************************
;&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&
;飞行道具
;&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&
;*********************************************************************************
;------------------------------------------------------------
;防御体
;------------------------------------------------------------
[Statedef 3008]
type    = A
physics = N
movetype= A
anim = 3008
ctrl = 0
velset = 0.1,0
juggle = 8
sprpriority = 4

[STate 3112]
type = HitBy
trigger1 = 1
value = SAC,NP,SP,HP

[STate 3112]
type = HitOverRide
trigger1 = 1
attr = SAC,NP,SP,HP
stateno = 3222

[State 2008, 3]
type = Destroyself
trigger1 = animtime = 0

[Statedef 3056]
type    = A
movetype= I
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
poweradd = 0
sprpriority = -3
anim = 3056

[STate 3112]
type = HitBy
trigger1 = 1
value = SAC,NP,SP,HP

[STate 3112]
type = HitOverRide
trigger1 = 1
attr = SAC,NP,SP,HP
stateno = 3222

[State 3112]
type = Bindtoparent
trigger1 = 1
pos = 0,0

[State 3112]
type = Destroyself
trigger1 = animtime = 0

[Statedef 1319]
type    = A
movetype= I
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
poweradd = 0
sprpriority = -3
anim = 1319

[STate 3112]
type = HitBy
trigger1 = 1
value = SAC,NP,SP,HP

[STate 3112]
type = HitOverRide
trigger1 = 1
attr = SAC,NP,SP,HP
stateno = 3222

[State 3112]
type = Bindtoparent
trigger1 = 1
pos = 0,0

[State 3112]
type = Destroyself
trigger1 = animtime = 0

[Statedef 1349]
type    = A
movetype= I
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
poweradd = 0
sprpriority = -3
anim = 1349

[STate 3112]
type = HitBy
trigger1 = 1
value = SAC,NP,SP,HP

[STate 3112]
type = HitOverRide
trigger1 = 1
attr = SAC,NP,SP,HP
stateno = 3222

[State 3112]
type = Bindtoparent
trigger1 = 1
pos = 0,0

[State 3112]
type = Destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------
;百龙霸光点飘动效果代码
;---------------------------------------------------------------
[StateDef 4506]
type = a
movetype= A
physics = n
anim = 748
juggle  = 4
velset = 0,0
ctrl = 0
sprpriority = 5

[State 181, Randomizer4]
type = VarRandom
trigger1 = 1
v = 37
range = -2,-5
[State 181, Randomizer5]
type = VarRandom
trigger1 = 1
v = 38
range = -4, -10

[State 181, Randomizer5]
type = Varadd
trigger1 = time%2=0
var(3)=1

[State 1000, FireB]
type = Explod
trigger1 = random <= 800
persistent = 1
anim = ifelse(random>500,1156,1157)
id = 12213
postype = p1
pos = -30-3*var(3),-10
random = 35,10
sprpriority = 5
ownpal = 1
vel = var(38),(var(37))
scale = 0.1,0.75
accel = -(var(38))/4,(var(37))/10

[State 181, Randomizer]
type = VarRandom
trigger1 = 1
v = 35
range = -2,-5
[State 181, Randomizer3]
type = VarRandom
trigger1 = 1
v = 36
range = 4, 10
[State 1000, FireB]
type = Explod
trigger1 = random <= 800 
persistent = 1
anim = ifelse(random>500,1158,1159)
id = 12213
postype = p1
pos = 70+3*var(3),-10
random = 35,10
sprpriority = 5
ownpal = 1
vel = var(36),(var(35))
scale = 0.75,0.1
accel = -(var(36))/3,(var(35))/10

[State 0, DestroySelf]
type = DestroySelf
trigger1 = root,stateno != 4501


[StateDef 4507]
type = a
movetype= A
physics = n
anim = 748
juggle  = 4
velset = 0,0
ctrl = 0
sprpriority = 5

[State 181, Randomizer4]
type = VarRandom
trigger1 = 1
v = 37
range = -1,-7
[State 181, Randomizer5]
type = VarRandom
trigger1 = 1
v = 38
range = -2, -10

[State 1000, FireB]
type = Explod
trigger1 = random <= 800
persistent = 1
anim = ifelse(random>500,1156,1157)
id = 12213
postype = p1
pos = -20-3*var(3),-50
random = 35,10
sprpriority = 5
ownpal = 1
vel = var(38),(var(37))
scale = 0.2,0.75
accel = -(var(38))/4,(var(37))/10

[State 181, Randomizer]
type = VarRandom
trigger1 = 1
v = 35
range = -1,-7
[State 181, Randomizer3]
type = VarRandom
trigger1 = 1
v = 36
range = 2, 10
[State 1000, FireB]
type = Explod
trigger1 = random <= 800 
persistent = 1
anim = ifelse(random>500,1158,1159)
id = 12213
postype = p1
pos = -10+3*var(3),-50
random = 35,10
sprpriority = 5
ownpal = 1
vel = var(36),(var(35))
scale = 0.75,0.2
accel = -(var(36))/3,(var(35))/10

[State 0, DestroySelf]
type = DestroySelf
trigger1 = root,stateno != 4501
;------------------------------------------------------------
;小飞龙(百龙霸)
;------------------------------------------------------------
[Statedef 779]
type    = A
physics = N
movetype= A
anim = 779
ctrl = 0
velset = 0,0
juggle = 0
sprpriority = 3

[state 779,playsnd]
type = playsnd
trigger1 = animelem = 2
value = 779,0

[State 1200, Explod]
type = Explod
triggerall = movehit
trigger1 = time = 18
trigger2 = time = 45
trigger3 = time = 60
anim = 736
ID = 736
pos = ifelse(random<333,5,ifelse(random<500,15,25)),ifelse(random<333,-75,ifelse(random<500,-50,-35))
postype = p2
sprpriority = 3

[State 1150]
type = HitDef 
trigger1 = time = 0
accel = 0, 0
attr = S, HP
damage = ifelse(life<=300,20,2),1
animtype = back
getpower = 1,1
givepower = 0
guardflag = MAFP
pausetime = 3,3
sparkno = -1
guard.sparkno = S733
sparkxy = 20, -70
hitsound = S220,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 18
ground.hittime = 18
ground.velocity = 0,-.7
p2stateno = 5020
guard.velocity = 0
airguard.velocity = 0.0     
air.velocity = 0,-1.8
air.fall = 1
kill = 0
fall = 1

[State 2008, 3]
type = Destroyself
trigger1 = animtime = 0

;------------------------------------------------------------
;旋转八卦图(百龙霸)
;------------------------------------------------------------
[Statedef 6206]
type    = A
physics = N
movetype= A
anim = ifelse(root,fvar(10)=0,6206,6205)
ctrl = 0
velset = 0,0
juggle = 0
sprpriority = -3

;----------------------
[State -2]
Type = Varset
Trigger1 = time = 0
fvar(7) = 2500
IgnoreHitPause = 1

;----------------------
[State -2]
Type = VarAdd
Trigger1 = fvar(7) > 0
fvar(7) = -2
IgnoreHitPause = 1

;----------------------
[State -2]
Type = VarAdd
Trigger1 = fvar(1) > 0
fvar(1) = -2.0
IgnoreHitPause = 1

[state bindtoroot]
type = bindtoroot
trigger1 = 1
pos = 5,0

[State 6115]
Type = AssertSpecial
Trigger1 = 1
Flag = Noshadow

[State 6115]
Type = VarAdd
Trigger1 = Time > 10
var(2) = 1

[State 6115, ]
Type = VarSet
Trigger1 = var(2) > 359
var(2) = 0

[State 6115]
Type = VarSet
Trigger1 = Time = 0
fvar(1) = 2500

[State 6115]
Type = Trans
Trigger1 = 1
Trans = Add

[State 6115]
Type = AngleDraw
Trigger1 = (var(2) < 90) || (var(2) = [180,269])
Value = IfElse((var(2)<90),0,-180)
Scale = IfElse(Time<10,2,fvar(7)/fvar(1)),IfElse(Time<10,.4,(fvar(7)/fvar(1))*.25)

[State 6115]
Type = AngleDraw
Trigger1 = (var(2) = [90,179]) || (var(2) = [270,359])
Value = IfElse((var(2)<180),-90,-270)
Scale = (fvar(7)/fvar(1))*.25,(fvar(7)/fvar(1))


[State 2008, 3]
type = Destroyself
trigger1 = root,stateno = 4510
trigger1 = root,time >= 650
trigger2 = root,stateno = 3605
trigger2 = root,animelem = 6
trigger3 = root,stateno = 3253
trigger3 = root,animelem = 89
trigger4 = root,movetype = H
;------------------------------------------------------------
;龙牙咬(道具)
;------------------------------------------------------------
[Statedef 1201]
type    = A
physics = N
movetype= A
anim = ifelse((Parent,fvar(10) = 1),1206,1201)
ctrl = 0
velset = ifelse((Parent,stateno = 1150),7,3),0
juggle = 8
sprpriority = 3



[state 3628,nothitby]
type = nothitby
trigger1 = 1 
value = SCA,SP,AP,HP
time=1
ignorehitpause = 1

[State 100, ARMOR]
type = HitOverride
trigger1 = 1
slot = 2
attr = SCA, AA, AP ,HP
stateno = ifelse(anim = 1206,1207,1202)

[state 100]
type = AssertSpecial
trigger1=1
flag = noshadow 

[State 210, 4]
type = Helper
trigger1 = (Parent,var(31) != 0)
stateno = ifelse(anim = 1206,1207,1202)
id = 3056
pos = ifelse(anim = 1206,15,0),0
ownpal = 1
sprpriority = 3

[State 1200, Explod]
type = Explod
triggerall = parent,var(31) != 2
triggerall = vel x = 3
trigger1 = time >= 1
trigger1 =gametime%6=1
anim = ifelse((anim = 1201),1156,725)
ID = 1156
velocity = -.4,0
scale = .3,1
pos = 25,ifelse(random<300,-35,ifelse(random<500,-75,-55))
sprpriority = 5
supermove = 1

[State 1200, Explod]
type = Explod
triggerall = parent,var(31) != 2
triggerall = anim = 1201
triggerall = vel x = 3
trigger1 = time >= 1
trigger1 =gametime%11=1
anim = 1346
ID = 1346
velocity = -1,0
scale = 1,1.6
pos = 40,-55
sprpriority = 6
supermove = 1

[State 1200, Explod]
type = Explod
triggerall = parent,var(31) != 2
triggerall = vel x = 7
trigger1 = time >= 1
trigger1 =gametime%3=1
anim = ifelse((anim = 1201),1157,726)
ID = 1157
velocity = -.7,0
scale = .3,1
pos = 25,ifelse(random<300,-35,ifelse(random<500,-75,-55))
sprpriority = 5
supermove = 1

[State 1200, Explod]
type = Explod
triggerall = parent,var(31) != 2
triggerall = anim = 1201
triggerall = vel x = 7
trigger1 = time >= 1
trigger1 =gametime%5=1
anim = 1345
ID = 1345
velocity = -1,0
scale = 1,1.6
pos = 40,-55
sprpriority = 6
supermove = 1

[state 3628]
type = parentvarset
trigger1 = movehit
trigger1 = p2statetype = A
fvar(26) = 1

[State -3, 70]
type = Explod
triggerall = anim = 1206
trigger1 = parent,var(31) = 1
ownpal = 1
persistent = 0
pos = 15, -20
postype = p2
anim = 60
sprpriority = 7 ;-5
velocity = 0, 0
ignorehitpause = 1

[State -3, 70]
type = Explod
triggerall = anim = 1206
trigger1 = parent,var(31) = 1
ownpal = 1
persistent = 0
pos = -15, -68
postype = p2
anim = 60
sprpriority = 7 ;-5
velocity = 0, 0
ignorehitpause = 1

[State -3, 70]
type = playsnd
trigger1 = parent,var(31) = 1
persistent = 0
value = S220,ifelse(anim = 1206,10,0)
ignorehitpause = 1

[State -3, 70]
type = Explod
trigger1 = parent,var(31) = 1
ownpal = 1
persistent = 0
pos = 70, -70
anim = 735
sprpriority = 7 ;-5
velocity = 0, 0
ignorehitpause = 1

[State 1150]
type = Projectile
triggerall = anim = 1201
trigger1 = time = 0
ProjAnim = 1315
ProjID = 1315
projhitanim = 6210
projcancelanim = 6210
velocity = ifelse((Parent,stateno = 1150),7,3),0
offset = 0,0
attr = S, SP
damage = ifelse((p2statetype != A),60,90),9
animtype = hard
getpower = 100,50
givepower = 1
guardflag = MAFP
pausetime = 3,16
guard.pausetime = 3,17
sparkno = -1
guard.sparkno = S733
sparkxy = 70, -70
hitsound = S220,-1
guardsound = S150,0
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -8
guard.velocity = -4
id = 10000
airguard.velocity = -4.0     
air.velocity = -2.5,-5.5
air.juggle = 9
air.fall = 1
fall.recover = 0

[State 1150]
type = Projectile
triggerall = anim = 1206
trigger1 = time = 0
ProjAnim = 1315
ProjID = 1315
projhitanim = 6210
projcancelanim = 6210
velocity = ifelse((Parent,stateno = 1150),7,3),0
offset = 0,0
attr = S, SP
damage = ifelse((p2statetype != A),60,90),9
animtype = hard
getpower = 100,50
givepower = 10
guardflag = MAFP
pausetime = 3,16
guard.pausetime = 3,17
sparkno = -1
guard.sparkno = S733
sparkxy = 70, -70
hitsound = S220,-1
guardsound = S150,0
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -8
guard.velocity = -4
p2stateno = ifelse(p2statetype = C,50100,50000)
id = 10001
airguard.velocity = -4.0     
air.velocity = -2.5,-5.5
air.juggle = 9
air.fall = 1
palfx.time = 42
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1

[State -3, 70]
type = varset
trigger1 = projhit10000 = 1
trigger2 = projhit10001 = 1
var(1) = 1
ignorehitpause = 1

[State 2008, 3]
type = Destroyself
triggerall = 1
trigger1 = FrontEdgeDist < -15
trigger2 = (Parent,var(31) != 0)

[Statedef 1207]
type    = A
physics = N
movetype= A
anim = 1207
ctrl = 0
velset = 0.1,0
juggle = 8
sprpriority = 4

[State -3, 70]
type = pause
trigger1 = time%1=1
;trigger1 = parent,var(1) = 1
time=100
ignorehitpause = 1

[State -3, 70]
type = Explod
triggerall = animtime = 0
trigger1 = root,var(31) = 1
ownpal = 1
persistent = 0
pos = -15, -20
postype = p2
anim = 61
sprpriority = 7 ;-5
velocity = 0, 0
ignorehitpause = 1

[State -3, 70]
type = Explod
triggerall = animtime = 0
trigger1 = root,var(31) = 1
ownpal = 1
persistent = 0
pos = 15, -68
postype = p2
anim = 62
sprpriority = 7 ;-5
velocity = 0, 0
ignorehitpause = 1

[State 1100]
type = Helper
trigger1 = 1
trigger1 = numhelper(1319) < 2
stateno = 1319
id = 1319
pos = 0,0
ownpal = 1
sprpriority = 3

[State 2008, 3]
type = Destroyself
trigger1 = animtime = 0

[Statedef 1202]
type    = A
physics = N
movetype= A
anim = 1202
ctrl = 0
velset = 0.1,0
juggle = 8
sprpriority = 4

[State -3, 70]
type = pause
trigger1 = time%1=1
;trigger1 = parent,var(1) = 1
time=100
ignorehitpause = 1

[State 1100]
type = Helper
trigger1 = 1
trigger1 = numhelper(1319) < 2
stateno = 1319
id = 1319
pos = 0,0
ownpal = 1
sprpriority = 3

[State 2008, 3]
type = Destroyself
trigger1 = animtime = 0


;------------------------------------------------------------
;魔龙钢裂拳.空(道具)
;------------------------------------------------------------
[Statedef 3101]
type    = A
physics = N
movetype= A
anim = 3101
ctrl = 0
velset = 5,5
juggle = 2
sprpriority = 2

[State 1200, Explod]
type = Explod
trigger1 = time >= 1
trigger1 =gametime%5=1
anim = 3104
ID = 3104
velocity = -1,-1
scale = .75,.65
pos = -45,-27
postype = p1
sprpriority = 3
supermove = 1

[state 3628,nothitby]
type = nothitby
trigger1 = 1 
value = SCA
time=1
ignorehitpause = 1

[state playsnd]
type = playsnd
trigger1 = time = 0
value = 3000,1

[State 1100]
type = Helper
trigger1 = 1
trigger1 = numhelper(3008) < 2
stateno = 3008
id = 3008
pos = 0,0
ownpal = 1
sprpriority = 3

[State 3000]
type = HitDef
triggerall = movehit <=7
trigger1 = time = 0
attr = S, HP
animtype = back
damage = ifelse((parent,var(29)>1),220,300),25
priority = 7, Hit
guardflag = M
pausetime = 3,3
guard.sparkno = S733
sparkxy = 0,0
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -2,-3.9
air.velocity = -2,-3.9
getpower = 30,10
id = 10000
givepower = 10,5
air.juggle = 2
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
;yaccel = .5
fall.recover = 0
fall = 1

[State Land]
type = ChangeState
trigger1 = NumTarget(10000) > 0
trigger1 = Target(10000),stateno = [5000,5020]
trigger2 = moveguarded
value = 3103
ctrl = 0

[State Land]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3102
ctrl = 0

[Statedef 3102]
type    = A
physics = N
movetype= A
anim = 3102
ctrl = 0
velset = 0,0
juggle = 8
sprpriority = 3

[State 2008, 3]
type = Destroyself
trigger1 = animtime = 0

[Statedef 3103]
type    = A
physics = N
movetype= A
anim = 3103
ctrl = 0
velset = .5,.5
juggle = 8
sprpriority = 3

[State 1200, Explod]
type = Explod
trigger1 = time = [1,7]
trigger1 =gametime%5=1
anim = 3104
ID = 3104
velocity = -1,-1
scale = .65,.55
pos = -17,-30
postype = p1
sprpriority = 3
supermove = 1

[State 3000]
type = HitDef
triggerall = movehit <=7
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
trigger4 = animelem = 4
trigger5 = animelem = 5
attr = S, HP
animtype = back
damage = 2,4
priority = 7, Hit
guardflag = M
pausetime = 2,6
guard.sparkno = S733
sparkxy = 0,0
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -2,-3.9
air.velocity = -2,-3.9
getpower = 30,10
givepower = 5,1
air.juggle = 5
;yaccel = .5
fall.recover = 0
fall = 1

[State 2008, 3]
type = Destroyself
trigger1 = animtime = 0
;------------------------------------------------------------
;魔龙钢裂拳.咬(道具)
;------------------------------------------------------------
[Statedef 3001]
type    = A
physics = N
movetype= A
anim = 3001
ctrl = 0
velset = 5,0
juggle = 8
sprpriority = 3

[state 3628,nothitby]
type = nothitby
trigger1 = 1 
value = SCA
time=1
ignorehitpause = 1

[State 1200, Explod]
type = Explod
trigger1 = time >= 1
trigger1 =gametime%3=1
anim = 3003
ID = 3200
velocity = -1,0
scale = .75,.65
pos = 0,-82
postype = p1
sprpriority = 5
supermove = 1

[state 3268]
type = playsnd
trigger1 = time = 2
value = 3300,0

[State 1100]
type = Helper
trigger1 = 1
trigger1 = numhelper(3056) < 2
stateno = 3056
id = 3056
pos = 0,0
ownpal = 1
sprpriority = 3

[State 1100]
type = Helper
triggerall = movecontact
trigger1 = time = 0
stateno = 3699
id = 3699
pos = 0,0
ownpal = 1
sprpriority = 3

[state veladd]
type = veladd
trigger1 = time > 15
x = .5

[State 3875, 慢镜头]
type = Pause 
triggerall = (GameTime%2) = 0 ;&& roundstate = 2 
trigger1 = time > 15
time = 1 
movetime = 1 
ignorehitpause = 1

[State 399, EnvShake]
type = EnvShake
trigger1 = time > 0
trigger1 = movecontact
ignorehitpause = 1
persistent = 0
time = 15
freq = 150
ampl = -5
phase = 1 

[State 3000]
type = HitDef
triggerall = root,var(50) = 0
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
trigger4 = animelem = 4
trigger5 = animelem = 5
attr = S, HP
animtype = back
damage = 165,45
priority = 7, Hit
guardflag = MA
pausetime = 6,9
guard.pausetime = 9,4
guard.sparkno = S733
sparkxy = -30,-75
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -2,-11
air.velocity = -2,-11
getpower = 30,10
givepower = 3,1
air.juggle = 5
fall.recover = 0
fall = 1

[State 3000]
type = HitDef
triggerall = root,var(50) = 1
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
trigger4 = animelem = 4
trigger5 = animelem = 5
attr = S, HP
animtype = back
damage = 185,45
priority = 7, Hit
guardflag = MA
pausetime = 6,9
guard.pausetime = 9,4
guard.sparkno = S733
sparkxy = -30,-75
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -2,-11
air.velocity = -2,-11
getpower = 30,10
givepower = 3,1
air.juggle = 5
yaccel = .5
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
fall.recover = 0
fall = 1

[State 2008, 3]
type = Destroyself
trigger1 = FrontEdgeDist < -50

[State 5001, 6]
type = ChangeState
trigger1 = movehit
trigger2 = moveguarded
value = 3699
ctrl = 0
;------------------------------------------------------------
;魔龙钢裂拳.冲(道具)
;------------------------------------------------------------
[Statedef 3006]
type    = A
physics = N
movetype= A
anim = 3006
ctrl = 0
velset = 3,0
juggle = 8
sprpriority = 3

[state 3628,nothitby]
type = nothitby
trigger1 = 1 
value = SCA
time=1
ignorehitpause = 1

[State 1200, Explod]
type = Explod
trigger1 = time >= 18
trigger1 =gametime%3=1
anim = 3003
ID = 3200
velocity = -1,0
scale = .75,.65
pos = 0,-82
postype = p1
sprpriority = 5
supermove = 1

[State 399, EnvShake]
type = EnvShake
trigger1 = time >= 18
trigger1 = movecontact
ignorehitpause = 1
persistent = 0
time = 15
freq = 150
ampl = -5
phase = 1

[state 3268]
type = playsnd
trigger1 = time = 13
value = 3300,0

[State 1100]
type = Helper
trigger1 = 1
trigger1 = numhelper(3056) < 2
stateno = 3056
id = 3056
pos = 0,0
ownpal = 1
sprpriority = 3

[State 1100]
type = Helper
triggerall = movecontact
trigger1 = time = 32
stateno = 3699
id = 3699
pos = 0,0
ownpal = 1
sprpriority = 3

[state veladd]
type = veladd
trigger1 = time > 15
x = .5

[state veladd]
type = velset
triggerall = movecontact
trigger1 = time = [16,32]
x = ifelse(FrontEdgeDist < 10,.25,.5)

[state veladd]
type = velset
triggerall = movecontact
trigger1 = time = 32
x = 5.5

[State 3000]
type = HitDef
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
trigger4 = animelem = 5
trigger5 = animelem = 6
trigger6 = animelem = 7
trigger7 = animelem = 8
trigger8 = animelem = 9
attr = S, HA
animtype = back
damage = 6,3
priority = 7, Hit
guardflag = HLMA
pausetime = 3,3
guard.pausetime = 2,2
guard.ctrltime = 17
guard.sparkno = S733
sparkxy = -30,-75
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -7
guard.velocity = -2
air.velocity = -6,-3.0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 30,10
givepower = 3,1
air.juggle = 5
yaccel = .5
fall.recover = 0
fall = 1

[State 3000]
type = HitDef
trigger1 = time <= 29
trigger1 = animelem = 10
attr = S, HA
animtype = back
damage = 70,10
priority = 7, Hit
guardflag = HLMA
pausetime = 3,3
guard.pausetime = 2,2
guard.ctrltime = 17
guard.sparkno = S733
sparkxy = -30,-75
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 12
ground.hittime = 12
ground.velocity = 0
air.velocity = -2,-3.9
getpower = 30,10
givepower = 3,1
air.juggle = 5
;yaccel = .5
p2stateno = 4911
fall.recover = 0
fall = 1

[State 3875, 慢镜头]
type = Pause 
triggerall = (GameTime%2) = 0 ;&& roundstate = 2 
trigger1 = time > 15
time = 1 
movetime = 1 
ignorehitpause = 1 

[State 3875, 慢镜头]
type = Pause 
trigger1 = moveguarded = 1
time = 3
ignorehitpause = 1

[State 3875, 慢镜头]
type = Pause 
trigger1 = movehit = 1
time = 2  
ignorehitpause = 1

[State 3000]
type = HitDef
trigger1 = time <= 32
trigger1 = animelem = 11
attr = S, HP
animtype = back
damage = 200,35
priority = 7, Hit
guardflag = HLM
pausetime = 3,3
guard.pausetime = 2,2
guard.ctrltime = 17
guard.sparkno = S733
sparkxy = -30,-75
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -2,-11
guard.velocity = -1
air.velocity = -2,-11
getpower = 30,10
givepower = 3,1
air.juggle = 5
;yaccel = .5
p2stateno = 4930
fall.recover = 0
fall = 1

[State 2008, 3]
type = Destroyself
trigger1 = FrontEdgeDist < -50
trigger2 = time = [0,14]
trigger2 = parent,stateno != 3005

[Statedef 3699]
type    = A
physics = N
movetype= A
anim = 3002
ctrl = 0
velset = .2,0
juggle = 8
sprpriority = 4

[State 1200, Explod]
type = Explod
trigger1 = time = 0
anim = 3002
ID = 1476
pos = 0,0
postype = p1
sprpriority = 4
bindtime = 999
removetime = 999

[State 2008, 3]
type = removeExplod
trigger1 = animtime = 0
ID = 1476

[State 3000]
type = HitDef
triggerall = movehit <=7
trigger1 = animelem = 1
attr = S, HP
animtype = back
damage = 70,10
priority = 7, Hit
guardflag = M
pausetime = 9,9
guard.pausetime = 2,15
guard.sparkno = S733
sparkxy = -30,-75
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -2,-9.9
air.velocity = -2,-9.9
getpower = 30,10
givepower = 3,1
p2stateno = 4930
air.juggle = 5
;yaccel = .5
fall.recover = 0
fall = 1

[State 2008, 3]
type = Destroyself
trigger1 = animtime = 0

召唤暗龙
[Statedef 3629]
type    = A
physics = N
movetype= A
anim = 780
ctrl = 0
velset = 0,0
sprpriority = -3

[State 3000]
type = HitDef
trigger1 = time = 0
attr = S, HA
animtype = back
damage = 27,4
priority = 7, Hit
guardflag = M
pausetime = 8,28
guard.sparkno = S733
sparkxy = -30,-75
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 12
ground.hittime = 12
ground.velocity = 0
air.velocity = 0,-.9
getpower = 30,10
givepower = 3,1
;yaccel = .5
p2stateno = 5020
fall.recover = 0
fall = 1

[State 2008, 3]
type = Destroyself
trigger1 = animtime = 0

;------------------------------------------------------------
;烈焰冲击.Max(道具)
;------------------------------------------------------------
[Statedef 4006]
type    = A
physics = N
movetype= A
anim = 4006
ctrl = 0
velset = 3,0
juggle = 8
sprpriority = 3

[state 3628,nothitby]
type = nothitby
trigger1 = 1 
value = SCA
time=1
ignorehitpause = 1

[State 1200, Explod]
type = Explod
trigger1 = time >= 1
trigger1 =gametime%6=1
anim = 725
ID = 1156
velocity = -.4,0
scale = .3,1
pos = -25,ifelse(random<300,-35,ifelse(random<500,-75,-55))
sprpriority = 5
supermove = 1

[State 1200, Explod]
type = Explod
trigger1 = time >= 1
trigger1 =gametime%3=1
anim = 726
ID = 1157
velocity = -.7,0
scale = .3,1
pos = -25,ifelse(random<300,-35,ifelse(random<500,-75,-55))
sprpriority = 5
supermove = 1

[State 399, EnvShake]
type = EnvShake
trigger1 = time >= 18
trigger1 = movecontact
ignorehitpause = 1
persistent = 0
time = 15
freq = 150
ampl = -5
phase = 1

[state 3268]
type = playsnd
trigger1 = time = 13
value = 3300,0

[State 1100]
type = Helper
trigger1 = 1
trigger1 = numhelper(3056) < 2
stateno = 3056
id = 3056
pos = 0,0
ownpal = 1
sprpriority = 3

[State 1200, Explod]
type = Explod
trigger1 = numexplod(4309) = 0
anim = 4309
ID = 4309
pos = 0,0
postype = p1
sprpriority = 5
supermove = 1
bindtime = 999
removetime = 70
ignorehitpause = 0
removeongethit = 1

[State 1200, Explod]
type = Explod
trigger1 = numexplod(4308) = 0
anim = 4308
ID = 4308
pos = -10,14
postype = p1
sprpriority = 5
supermove = 1
bindtime = 999
removetime = 70
ignorehitpause = 0
removeongethit = 1

[State 3000]
type = HitDef
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
attr = S, HA
animtype = back
damage = 50,10
priority = 7, Hit
guardflag = HLMA
pausetime = 3,3
guard.pausetime = 2,2
guard.ctrltime = 17
guard.sparkno = S733
sparkno = S82
snap = 70,-30
sparkxy = -30,-75
hitsound = S220,10
guardsound = S150,0
ground.type = high
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -7
guard.velocity = -2
air.velocity = -6,-3.0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 30,10
givepower = 3,1
air.juggle = 5
id = 10001
fall.recover = 0
fall = 1
Palfx.time = 40
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State 3875, 慢镜头]
type = Pause 
triggerall = (GameTime%2) = 0 ;&& roundstate = 2 
trigger1 = time > 15
time = 1 
movetime = 1 
ignorehitpause = 1 

[State 3875, 慢镜头]
type = Pause 
trigger1 = moveguarded = 1
time = 3
ignorehitpause = 1

[State 3875, 慢镜头]
type = Pause 
trigger1 = movehit = 1
time = 2  
ignorehitpause = 1

[State 3875, 慢镜头]
type = changestate
trigger1 = time = 60
trigger2 = FrontEdgeDist < -45
value = 4007  

[State 2008, 3]
type = Destroyself
trigger1 = FrontEdgeDist < -50
trigger2 = time = [0,14]
trigger2 = parent,stateno != 4055

[Statedef 4007]
type    = A
physics = N
movetype= A
anim = 80
ctrl = 0
velset = 0,0
juggle = 8
sprpriority = 3

[state removeexplod]
type = posadd
trigger1 = time = 0
x = 30

[state removeexplod]
type = removeexplod
trigger1 = time = 0
id = 4309

[State 399, EnvShake]
type = EnvShake
trigger1 = time = 0
ignorehitpause = 1
persistent = 0
time = 60
freq = 100
ampl = -6
phase = 1

[State 3875, 慢镜头]
type = Playsnd 
trigger1 = time = 0
value = 4960,0

[State 3000]
type = HitDef
trigger1 = time = 0
attr = S, HA
animtype = back
damage = 160,30
priority = 7, Hit
guardflag = HLMA
pausetime = 3,3
guard.pausetime = 2,2
guard.ctrltime = 17
guard.sparkno = S733
sparkno = S82
sparkxy = -30,-75
hitsound = S220,10
guardsound = S150,0
ground.type = high
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -7
guard.velocity = -2
air.velocity = -6,-3.0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
getpower = 30,10
givepower = 3,1
air.juggle = 5
id = 10001
fall.recover = 0
fall = 1
Palfx.time = 40
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State 2008, 3]
type = Destroyself
trigger1 = animtime = 0
;------------------------------------------------------
;召唤爆炸
;------------------------------------------------------
[Statedef 750]
type    = A
physics = N
movetype= A
anim = 80
ctrl = 0
velset = 0,0
sprpriority = 3

[State 3305, 2]
type = palfx
trigger1 = time = 0 
time = 75
mul = 152,140,270 
sinadd = 55,35,0,30       
add = 70,20,300  
color = 0 
invertall = 1

[State 2008, 3]
type = Destroyself
trigger1 = time >= 70
;------------------------------------------------------
;召唤爆炸
;------------------------------------------------------
[Statedef 751]
type    = A
physics = N
movetype= A
anim = 80
ctrl = 0
velset = 0,0
sprpriority = 3

[state 751]
type = playsnd
trigger1 = time = 0
value = 2200,1

[State 3305, 2]
type = palfx
trigger1 = time = 0 
time = 75
add = 184,28,0
mul = 248,168,104
sinadd= 138,118,14,16  
color = 0 
invertall = 1

[State 2008, 3]
type = Destroyself
trigger1 = time >= 70

;------------------------------------------------------
;召唤光圈
;------------------------------------------------------
[Statedef 7656]
type    = A
physics = N
anim = 7656
ctrl = 0
velset = 0,0
sprpriority = 3

[state var]
type = varadd
trigger1 = 1
var(10) = 6

[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 306-(var(10)), (var(10))

[State 2008, 3]
type = Destroyself
trigger1 = animtime = 0
;---------------------------------------------------------------------------
;掉火花
;---------------------------------------------------------------------------
[Statedef 3660]
type = A
movetype = I
physics = N
velset = 0,0
ctrl = 0
anim = 3660
poweradd = 0
sprpriority = -3

[State 3660]
type = velset
trigger1 = 1
y = 3

[State 3660]
type = varrandom
trigger1 = 1
v = 3
range = 1

[State 3660]
type = varrandom
trigger1 = 1
v = 4
range = 350

[State 3660]
type = varrandom
trigger1 = 1
v = 5
range = 50

[State 3660]
type = varrandom
trigger1 = 1
v = 6
range = 2

[State 3660]
type = velset
trigger1 = time%3 = 0
x = ifelse(var(3)=0,.2,-.2)

[STate 3660]
type = Explod
trigger1 = ishelper(3660)
trigger1 = numexplod(3660) <= 13
trigger1 = pos Y <= -130
anim = 3680
id = 3660
sprpriority = -3
pos = var(4),-20-var(5)
vel = 0,3+var(6)
postype = p1
ignorehitpause = 1
ownpal = 1
supermove = 1
supermovetime = 9999
pausemovetime = 99999
under = 1

[STate 3660]
type = Explod
trigger1 = ishelper(3661)
trigger1 = numexplod(3661) <= 13
trigger1 = pos Y <= -130
anim = 3680
id = 3661
sprpriority = -3
pos = -var(4),-20-var(5)
vel = 0,3+var(6)
postype = p1
ignorehitpause = 1
ownpal = 1
supermove = 1
supermovetime = 9999
pausemovetime = 99999
under = 1

[State 3660]
type = changeanim
triggerall = anim = 3660
trigger1 = pos Y >= -40 || time >= 140
value = 3665

[State 3660]
type = destroyself
trigger1 = pos Y >= 0 && vel Y > -20
trigger2 = time >= 150
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;掉火花1
;---------------------------------------------------------------------------
[Statedef 3665]
type = A
movetype = I
physics = N
velset = 0,0
ctrl = 0
anim = 3660
poweradd = 0
sprpriority = -3

[State 3660]
type = velset
trigger1 = 1
y = 3

[State 3660]
type = varrandom
trigger1 = 1
v = 3
range = 1

[State 3660]
type = varrandom
trigger1 = 1
v = 4
range = 100

[State 3660]
type = varrandom
trigger1 = 1
v = 5
range = 50

[State 3660]
type = varrandom
trigger1 = 1
v = 6
range = 2

[State 3660]
type = velset
trigger1 = time%3 = 0
x = ifelse(var(3)=0,.2,-.2)

[STate 3660]
type = Explod
trigger1 = ishelper(3660)
trigger1 = numexplod(3660) <= 7
trigger1 = pos Y <= -130
anim = 3680
id = 3660
sprpriority = -3
pos = var(4),-20-var(5)
vel = 0,3+var(6)
postype = p1
ignorehitpause = 1
ownpal = 1
under = 1

[STate 3660]
type = Explod
trigger1 = ishelper(3661)
trigger1 = numexplod(3661) <= 7
trigger1 = pos Y <= -130
anim = 3680
id = 3661
sprpriority = -3
pos = -var(4),-20-var(5)
vel = 0,3+var(6)
postype = p1
ignorehitpause = 1
ownpal = 1
under = 1

[State 3660]
type = changeanim
triggerall = anim = 3660
trigger1 = pos Y >= -40 || time >= 140
value = 3665

[State 3660]
type = destroyself
trigger1 = pos Y >= 0 && vel Y > -20
trigger2 = time >= 150
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;升光点                                               
;---------------------------------------------------------------------------
[Statedef 4660]
type = A
movetype = I
physics = N
velset = 0,0
ctrl = 0
anim = 3660
poweradd = 0
sprpriority = 3

[State 3660]
type = velset
trigger1 = 1
y = -.3

[State 3660]
type = varrandom
trigger1 = 1
v = 3
range = 1

[State 3660]
type = varrandom
trigger1 = 1
v = 4
range = 190

[State 3660]
type = varrandom
trigger1 = 1
v = 5
range = 50

[State 3660]
type = varrandom
trigger1 = 1
v = 6
range = -1

[State 3660]
type = velset
trigger1 = time%3 = 0
x = ifelse(var(3)=0,.2,-.2)

[STate 3660]
type = Explod
trigger1 = ishelper(4660)
trigger1 = numexplod(1158) <= 7
;trigger1 = pos Y <= -130
anim = ifelse(random<500,1158,1159)
id = 1158
sprpriority = 7
pos = var(4),-20-var(5)
vel = 0,-.5
scale = .7,.2
postype = p1
ignorehitpause = 1
ownpal = 1
supermove = 1
supermovetime = 9999
pausemovetime = 99999
under = 1

[STate 3660]
type = Explod
trigger1 = ishelper(4661)
trigger1 = numexplod(1159) <= 7
;trigger1 = pos Y <= -130
anim = ifelse(random<500,1158,1159)
id = 1159
sprpriority = 7
pos = -var(4),-20-var(5)
vel = 0,-.5
postype = p1
scale = .7,.2
ignorehitpause = 1
ownpal = 1
supermove = 1
supermovetime = 9999
pausemovetime = 99999
under = 1

[State 3660]
type = destroyself
trigger1 = parent, stateno != [3950,3960]
trigger2 = time >= 70
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;升光点                                               
;---------------------------------------------------------------------------
[Statedef 4665]
type = A
movetype = I
physics = N
velset = 0,0
ctrl = 0
anim = 3660
poweradd = 0
sprpriority = 3

[State 3660]
type = velset
trigger1 = 1
y = -.3

[State 3660]
type = varrandom
trigger1 = 1
v = 3
range = 1

[State 3660]
type = varrandom
trigger1 = 1
v = 4
range = 190

[State 3660]
type = varrandom
trigger1 = 1
v = 5
range = 50

[State 3660]
type = varrandom
trigger1 = 1
v = 6
range = -1

[State 3660]
type = velset
trigger1 = time%3 = 0
x = ifelse(var(3)=0,.2,-.2)

[STate 3660]
type = Explod
trigger1 = ishelper(4660)
trigger1 = numexplod(1158) <= 7
;trigger1 = pos Y <= -130
anim = ifelse(random<500,720,721)
id = 1158
sprpriority = 7
pos = var(4),-20-var(5)
vel = 0,-.5
scale = .7,.2
postype = p1
ignorehitpause = 1
ownpal = 1
supermove = 1
supermovetime = 9999
pausemovetime = 99999
under = 1

[STate 3660]
type = Explod
trigger1 = ishelper(4661)
trigger1 = numexplod(1159) <= 7
;trigger1 = pos Y <= -130
anim = ifelse(random<500,720,721)
id = 1159
sprpriority = 7
pos = -var(4),-20-var(5)
vel = 0,-.5
postype = p1
scale = .7,.2
ignorehitpause = 1
ownpal = 1
supermove = 1
supermovetime = 9999
pausemovetime = 99999
under = 1

[State 3660]
type = destroyself
trigger1 = parent, stateno != [3950,3960]
trigger2 = time >= 70
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;碎衣服（胸罩）                                               
;---------------------------------------------------------------------------
[Statedef 5980]
type = A
movetype = I
physics = N
velset = 0,0
ctrl = 0
anim = 5980
poweradd = 0
sprpriority = 5

[State 190]
type = helper
trigger1 = time = 0
trigger1 = random < 300
id = 5980
stateno = 5980
pos = ifelse(random<500,5,-4),ifelse(random<500,-3,5)
sprpriority = 5
bindtime = 20

[state velset]
type = veladd
trigger1 = time > 10
y = 0.01

[state velset]
type = velset
trigger1 = time >= 20
trigger1 = time%30 =  1
x = ifelse(random<400,.25,-.2)

[State 3660]
type = destroyself
trigger1 = root, movetype != H
trigger2 = root, anim = [5000,5179]

[State 3660]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y >= -10
value = 5985

[Statedef 5985]
type = A
movetype = I
physics = N
velset = 0,0
ctrl = 0
anim = 5985
poweradd = 0
sprpriority = -5

[State 3660]
type = posset
trigger1 = time = 0
y = -10

[State 3660]
type = destroyself
trigger1 = root, movetype != H
trigger2 = root, anim = [5000,5179]

;---------------------------------------------------------------------------
;碎衣服（短裙，内裤）                                               
;---------------------------------------------------------------------------
[Statedef 5981]
type = A
movetype = I
physics = N
velset = 0,0
ctrl = 0
anim = 5981
poweradd = 0
sprpriority = 5

[State 190]
type = helper
trigger1 = time = 0
trigger1 = random < 300
id = 5981
stateno = 5981
pos = ifelse(random<500,5,-4),ifelse(random<500,-3,5)
sprpriority = 5
bindtime = 20

[state velset]
type = veladd
trigger1 = time > 10
y = 0.01

[state velset]
type = velset
trigger1 = time >= 20
trigger1 = time%30 =  1
x = ifelse(random<400,.25,-.2)

[State 3660]
type = destroyself
trigger1 = root, movetype != H
trigger2 = root, anim = [5000,5179]

[State 3660]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y >= -10
value = 5986

[Statedef 5986]
type = A
movetype = I
physics = N
velset = 0,0
ctrl = 0
anim = 5986
poweradd = 0
sprpriority = -5

[State 3660]
type = posset
trigger1 = time = 0
y = -10

[State 3660]
type = destroyself
trigger1 = root, movetype != H
trigger2 = root, anim = [5000,5179]
;*******************************************************
; 投掷技代码
;=======================================================
; Throws
[Statedef 370]
type = S
movetype = A
physics = S
anim = 370
velset = 0
facep2 = 1
ctrl = 0

[State 370, 1]
type = HitDef
trigger1 = Time = 0
attr = S, NT
guardflag =
hitflag = M-
sparkno = -1
sparkxy = 0, 0
priority = 5,dodge
p1stateno = 371
p2stateno = 372
p2facing = 1

[State 370, 2]
type = ChangeState
trigger1 = Time = 1
value = 255
;---------------------------------------------------------------------------
; p1动作----------------------------------
;--------------------------------------------------------------------------
[Statedef 371]
type = S
movetype = A
physics = S
anim = 371
velset = 0
sprpriority = 2
poweradd = 50

[State 371, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 370,0

[State 371, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 2995,53

[State 371, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 600,0
channel = 0

[State 371, 1]
type = width
trigger1 = AnimElem = 4
edge = 0,60

[State 371, 1]
type = Explod
trigger1 = AnimElem = 2
anim = 8040
pos = 25,-75
sprpriority = 2
ownpal = 1
shadow = 0

[State 371, 1]
type = posadd
trigger1 = AnimElem = 2
x = 0

[State 371, 1]
type = posadd
trigger1 = AnimElem = 4
x = -20

[State 371, 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 30,-80

[state 376]
type = playsnd
trigger1 = animelemtime(4) = 1
value = 2995,54

[State 371, 1]
type = TargetBind
trigger1 = AnimElem = 2,>= 0 && AnimElem = 3,< 0
pos = 25,-80

[State 371, 1]
type = TargetBind
trigger1 = AnimElem = 3,>= 0 && AnimElem = 4,< 0
pos = 10,-70

[State 371, 1]
type = TargetBind
trigger1 = AnimElem = 4,>= 0 && AnimElem = 5,< 0
pos = -30,-45

[State 371, 1]
type = TargetBind
trigger1 = AnimElem = 5,>= 0 && AnimElem = 5,< 4
pos = -50,-45

[State 372, 2]
type = TargetLifeAdd
trigger1 = AnimElem = 5
value = -130

[STate 2998]
type = PlaySNd
trigger1 = Animtime = 0
value = 999,2
channel = 1

[State 371, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 373
;---------------------------------------------------------------------------
; p2动作--------------------------------
;-----------------------------------------------------------------------
[Statedef 372]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0
sprpriority = 0

[State 372, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 372

[State 372, 1]
type = ScreenBound
trigger1 = AnimElem = 6,< 4
movecamera = 1,0

[State 372, 1]
type = velset
trigger1 = AnimElem = 6
x = 4
y = -6

[State 372, 1]
type = veladd
trigger1 = AnimElem = 6,> 0
y = .45



[State 372, 2]
type = SelfState
trigger1 = Pos Y >= -15 && Vel Y > 0
value = 5100


[Statedef 373]
type    = S
movetype= A
physics = N
anim = 373

[state 5201]
type = playsnd
triggerall = random < 600
trigger1 = time = 5
value = 200,ifelse(random<500,4,5)

[State 5201, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201, 3]
type = Posadd
trigger1 = Time = 0
x = -6

[State 5201, 3]
type = veladd
triggerall = vel x < 0
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(2) < 0
x = .7

[State 5201, 3]
type = veladd
trigger1 = AnimElemtime(3) >= 4 
y = .45

[State 5201, 3]
type = velSet
trigger1 = AnimElemtime(3) = 4
y = -5
x = -2

[State 117]
type = posadd
trigger1 = AnimElem = 3
x = -14

[State 5201, 4]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, Explod]
type = Explod
trigger1 = Time = 1
anim = 706
ownpal = 1
pos = 0,0
postype = p1
sprpriority = 5
bindtime = 1

[State 29, 4]
type = ChangeState
trigger1 = pos y >= 0
trigger1 = vel y > 0
value = 52
ctrl = 1
;--------------------------------------------------------------------------
; Throws
;-------------------------------------------------------------------------
[Statedef 380]
type = S
movetype = A
physics = S
anim = 370
velset = 0
facep2 = 1
ctrl = 0

[State 370, 1]
type = HitDef
trigger1 = Time = 0
attr = S, NT
guardflag =
hitflag = M-
sparkno = -1
sparkxy = 0, 0
priority = 5,dodge
p1stateno = 376
p2stateno = 379
p2facing = 1

[State 370, 2]
type = ChangeState
trigger1 = Time = 1
value = 225
;---------------------------------------------------------------
;p1动作
;---------------------------------------------------------------
[Statedef 376]
type = S
movetype = a
physics = n
velset = 0,0
ctrl = 0
anim = 376
sprpriority = 3
poweradd = 50

[State 376]
type = SprPriority
trigger1 = animelem = 4
value = 2

[State 376]
type = PosAdd
trigger1 = animelem = 7 && backedgebodydist < 10
x = 10

[State 376]
type = PosAdd
trigger1 = animelem = 8 && backedgebodydist < 15
x = 10

[State 376]
type = PosAdd
trigger1 = animelem = 9 && backedgebodydist <= 25
x = 10

[state 376]
type = playsnd
trigger1 = animelem = 7
value = 2995,54



[State 376]
type = targetbind
trigger1 = animelem = 1
pos = 20,0

[State 376]
type = targetbind
trigger1 = animelem = 5
pos = 40,0

[State 376]
type = targetbind
trigger1 = animelemtime(6) >= 0 && animelemtime(7) < 0
pos = 40,0

[State 376]
type = targetbind
trigger1 = animelemtime(7) >= 0 && animelemtime(8) < 0
pos = 7,-105

[State 376]
type = targetbind
trigger1 = animelemtime(8) >= 0 && animelemtime(9) < 0
pos = 9,-87

[State 376]
type = targetbind
trigger1 = animelem = 9
pos = -42,0

[State 3784]
type = Explod
trigger1 = Animelem = 9 
anim = 395
pos = -40,7
postype = p1
sprpriority = -3
bindtime = 33
ownpal = 1

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 9
value = 999,2
channel = 1

[State 399, LifeAdd]
type = TargetLifeAdd
trigger1 = Animelem = 9
value = -150

[State 376]
type = posadd
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
trigger4 = animelem = 5
x = 15

[State 376]
type = Turn
trigger1 = Animelemtime(5) = 0

[State 376]
type = Explod
trigger1 = animelem = 1
anim = 87
id = 87
pos = 57,-77
sprpriority = 3
ownpal = 1

[STate 376]
type = PlaySnd
trigger1 = Animelem = 1
value = 1,21
channel = 1

[State 376]
type = ChangeState 
Trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;p2动作---------------------------------------
;---------------------------------------------------------------------------
[Statedef 379]
type = S
movetype = H
physics = S
velset = 0,0
ctrl = 0
sprpriority = -2

[State 379]
type = ChangeAnim2
trigger1 = time = 0
value = 379

[State 379]
type = PosSet
trigger1 = time = 0
y = 0

[State 379]
type = PlayerPush
trigger1 = 1
value = 0

[State 379, ChangeState]
type = ChangeState
trigger1 = Animtime = 0
value = 399

[Statedef 399]
type    = A
movetype= H
physics = N
velset = 0,0

[State 399, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 399, EnvShake]
type = EnvShake
trigger1 = Time = 0
time = 15
freq = 100
ampl = -8
phase = 10

[State 815, Anim2]
type = ChangeAnim2
trigger1 = time = 0
value = 399

[State 399, 1]
type = VelAdd
trigger1 = Time >= 0
Y = 0.5

[State 399, 1]
type = VelSet
trigger1 = Time = 5
X = -3.5
Y = -6

[State 399, 9]
type = Selfstate
trigger1 = Pos Y >= 8 && Vel Y > 0
value = 5100

;-------------------------------------------------------------------------a
;-------------------------------------------------------------------------
[Statedef 930]
type = S
movetype = A
physics = S
anim = 370
velset = 0
ctrl = 0
facep2 = 1
juggle = 16

[State 980, 1]
type = VarSet
trigger1 = Time = 0
var(13) = 0

[State 370, 1]
type = HitDef
trigger1 = Time = 0
attr = S, ST
guardflag =
hitflag = M
sparkno = -1
sparkxy = 0, 0
priority = 5,dodge
p1stateno = 920
p2stateno = 925
p2facing = 1

[State 370, 2]
type = ChangeState
trigger1 = Time = 1
value = 0
ctrl = 1
;---------------------------------------------------------------
[Statedef 920]
type = S
movetype = A
physics = S
anim = 920
velset = 0
poweradd = 150
sprpriority = 2

[State 75, 3] ; Shadows
type = Afterimage
trigger1 = Time = 0
time = 54
PalBright = 50, 50, 50
PalContrast =  150,150,150
PalAdd = 63, 100, 103
PalMul = .65,.65,.75
Length = 6
FrameGap = 1
trans = add1 

[State 371, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 2995,54

[State 371, 1]
type = PlaySnd
trigger1 = AnimElem = 10
value = 2995,55

[State 371, 1]
type = PlaySnd
trigger1 = AnimElem = 10
value = 920,0

[State 371, 1]
type = PlaySnd
trigger1 = AnimElem = 17
value = 2995,60

[State 371, 1]
type = PlaySnd
trigger1 = AnimElem = 22
value = 999,2

[State 371, 1]
type = Explod
trigger1 = AnimElem = 10
anim = 734
pos = 0,-10
sprpriority = 3
ownpal = 1
scale = .9,.9
shadow = 0

[State 371, 1]
type = Explod
trigger1 = AnimElem = 22
anim = 734
pos = -6,-10
sprpriority = 3
ownpal = 1
scale = .9,.9
shadow = 0

[State 371, 1]
type = Explod
trigger1 = AnimElemtime(17) >= 0
trigger1 = animelemtime(18) < 0
anim = 932
pos = 0,0
id = 932
bindtime = 1
removetime = 1
sprpriority = 0
shadow = 0

[State 371, 1]
type = Explod
trigger1 = AnimElemtime(18) >= 0
trigger1 = animelemtime(19) < 0
anim = 933
pos = 0,0
id = 933
bindtime = 1
removetime = 1
sprpriority = 0
shadow = 0

[State 371, 1]
type = Explod
trigger1 = AnimElemtime(19) >= 0
trigger1 = animelemtime(20) < 0
anim = 934
pos = 0,0
id = 934
bindtime = 20
removetime = 1
sprpriority = 0
shadow = 0

[State 371, 1]
type = Explod
trigger1 = AnimElemtime(20) >= 0
trigger1 = animelemtime(21) < 0
anim = 935
pos = 0,0
bindtime = 20
id = 935
removetime = 1
sprpriority = 0
shadow = 0

[State 371, 1]
type = Explod
trigger1 = AnimElemtime(10) >= 0
trigger1 = animelemtime(15) < 0
trigger2 = AnimElemtime(16) >= 0
trigger2 = animelemtime(17) < 0
trigger3 = AnimElemtime(24) >= 0
trigger3 = animelemtime(29) < 0
anim = 937
pos = 0,0
bindtime = 20
id = 935
removetime = 1
sprpriority = 0
shadow = 0

[State 371, 1]
type = Explod
trigger1 = AnimElemtime(21) >= 0
trigger1 = animelemtime(22) < 0
anim = 936
pos = 0,0
bindtime = 20
id = 936
removetime = 1
sprpriority = 0
shadow = 0

[State 371, 1]
type = statetypeset
trigger1 = AnimElem= 17
statetype = a
physics = N

[State 371, 1]
type = veladd
trigger1 = AnimElemtime(17)>= 0
trigger1 = AnimElemtime(22)< 0
y = .3

[State 371, 1]
type = velset
trigger1 = AnimElemtime(17) = 0
y = -5

[State 371, 1]
type = velset
trigger1 = AnimElemtime(22) = 0
y = 0

[State 371, 1]
type = posset
trigger1 = AnimElemtime(22) = 0
y = 0

[State 371, 1]
type = TargetBind
trigger1 = AnimElemtime(17) >= 0 && AnimElemtime(18) < 0
pos = 10,-20

[State 371, 1]
type = TargetBind
trigger1 = AnimElemtime(18) >= 0 && AnimElemtime(19) < 0
pos = 0,-35

[State 371, 1]
type = TargetBind
trigger1 = AnimElemtime(19) >= 0 && AnimElemtime(20) < 0
pos = -10,-45

[State 371, 1]
type = TargetBind
trigger1 = AnimElemtime(20) >= 0 && AnimElemtime(21) < 0
pos = -15,-10

[State 371, 1]
type = TargetBind
trigger1 = AnimElemtime(21) >= 0 && AnimElemtime(22) < 0
pos = -15,-20

[State 371, 1]
type = TargetBind
trigger1 = AnimElemtime(22) = 0
pos = 10,-5

[State 399, EnvShake]
type = EnvShake
trigger1 = Animelem = 22
ignorehitpause = 1
persistent = 0
time = 25
freq = 100
ampl = -5
phase = 1

[State 3784]
type = Explod
trigger1 = Animelem = 22
ignorehitpause = 1 
anim = 395
pos = -0,-2
postype = p1
sprpriority = -3
bindtime = 33
ownpal = 1

[State 371, 1]
type = TargetBind
trigger1 = AnimElemtime(1) = 0
pos = 20,0

[State 371, 1]
type = BindtoTarget
trigger1 = AnimElem = 2
pos = 0,10,head

[State 371, 1]
type = BindtoTarget
trigger1 = AnimElem = 7
pos = 0,20,head

[State 371, 1]
type = Targetlifeadd
trigger1 = AnimElem = 10
value = -120

[State 371, 1]
type = Targetlifeadd
trigger1 = AnimElem = 22
value = -100

[State 371, 1]
type = hitadd
trigger1 = AnimElem = 22
value = 1


[State 371, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1


; p2动作--------------------------------
;-----------------------------------------------------------------------
[Statedef 925]
type = S
movetype = H
physics = N
velset = 0,0
ctrl = 0
sprpriority = 1

[State 372, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 925

[State 372, 2]
type = selfState
trigger1 = animtime = 0
value = 5100

;流云擒
;-------------------------------------------------------------------------
[Statedef 960]
type = S
movetype = A
physics = S
anim = 370
velset = 0
ctrl = 0
facep2 = 1

[State 980, 1]
type = VarSet
trigger1 = Time = 0
var(13) = 0

[State 370, 1]
type = HitDef
trigger1 = EnemyNear,p2bodydist x = [-5,50]
trigger1 = Time = 0
attr = S, ST
guardflag =
hitflag = M
sparkno = -1
sparkxy = 0, 0
priority = 5,dodge
p1stateno = 961
p2stateno = 965
p2facing = 1

[State 370, 1]
type = HitDef
trigger1 = EnemyNear,p2bodydist x = [-50,-4]
;trigger1 = EnemyNear,movetype!=H
trigger1 = Time = 0
attr = S, ST
guardflag =
hitflag = M-
sparkno = -1
sparkxy = 0, 0
priority = 5,dodge
p1stateno = 961
p2stateno = 965
p2facing = 1

[State 370, 2]
type = ChangeState
triggerall = var(59) = 0
trigger1 = Time = 1
value = 225
ctrl = 0

[State 370, 2]
type = ChangeState
triggerall = var(59) != 0
trigger1 = Time = 1
value = 225

;---------------------------------------------------------------
[Statedef 961]
type = S
movetype = A
physics = S
anim = 960
velset = 0
poweradd = 150
sprpriority = 2

[state width]
type = Width
trigger1 = time = 0
edge = 80

[State 75, 3] ; Shadows
type = Afterimage
trigger1 = Time = 0
time = 9
PalBright = 50, 50, 50
PalContrast =  150,150,150
PalAdd = 63, 100, 103
PalMul = .65,.65,.75
Length = 6
FrameGap = 1
trans = add1 

[State 371, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 2995,ifelse(random<500,111,57)
channel = 0

[State 371, 1]
type = PlaySnd
triggerall = random<600
trigger1 = AnimElemtime(6) = 3
value = 2995,20
channel = 0

[State 371, 1]
type = TargetBind
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(2) < 0
pos = 30,0

[State 371, 1]
type = BindToTarget
trigger1 = AnimElemtime(2) >= 0 && AnimElemtime(6) < 0
pos = 0,0,hard

[State 371, 1]
type = BindToTarget
trigger1 = AnimElemtime(6) >= 0 && AnimElemtime(9) < 0
pos = -20,0,hard

[State 3784]
type = Explod
trigger1 = Animelem = 2
ignorehitpause = 1 
anim = 732
pos = 0,0
postype = p1
sprpriority = 3
ownpal = 1

[State 371, 1]
type = posset
trigger1 = AnimElem = 9
y = 0

[State 371, 1]
type = posadd
trigger1 = AnimElemtime(9) = 0
x = 30

[State 371, 1]
type = Turn
trigger1 = AnimTime = 0

[State 370, 2]
type = nothitby
trigger1 = AnimTime = 0
value = SAC
time = 30

[State 370, 2]
type = ChangeState
triggerall = var(59) != 0
trigger1 = AnimTime = 0
value = 225

[State 371, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

; p2动作--------------------------------
;-----------------------------------------------------------------------
[Statedef 965]
type = S
movetype = H
physics = N
velset = 0,0
ctrl = 0
sprpriority = 1

[State 372, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 965

[State 372, 2]
type = selfState
trigger1 = animtime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------
[Statedef 980]
type = S
movetype = A
physics = S
anim = 370
velset = 0
facep2 = 1
ctrl = 0

[State 980, 1]
type = VarSet
trigger1 = Time = 0
var(13) = 0

[State 370, 1]
type = HitDef
trigger1 = Time = 0
attr = S, ST
guardflag =
hitflag = M
sparkno = -1
sparkxy = 0, 0
priority = 5,dodge
p1stateno = 970
p2stateno = 971
p2facing = 1

[State 370, 2]
type = ChangeState
triggerall = var(59) = 0
trigger1 = Time = 1
value = 0
ctrl = 1

[State 370, 2]
type = ChangeState
triggerall = var(59) != 0
trigger1 = Time = 1
value = 225
;---------------------------------------------------------------
;--------------------------------------------------------------------------
[Statedef 970]
type = S
movetype = A
physics = S
anim = 970
velset = 0
poweradd = 150
sprpriority = 2

[state posadd]
type = posadd
trigger1 = animtime = 0
y = 20
x = 10

[State 371, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 370,0

[State 371, 1]
type = PlaySnd
trigger1 = AnimElem = 5
value = 2995,53

[State 371, 1]
type = PlaySnd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 8
trigger3 = AnimElem = 11
value = 220,0
channel = 0

[State 371, 1]
type = Explod
trigger1 = AnimElem = 7
anim = 734
pos = 5,-10
sprpriority = 3
ownpal = 1
shadow = 0

[State 371, 1]
type = Explod
trigger1 = AnimElem= 10
anim = 734
pos = -5,-10
sprpriority = 3
ownpal = 1
shadow = 0

[state 970]
type = hitadd
trigger1 = animelem = 5
trigger2 = animelem = 8
trigger3 = animelem = 11
value = 1

[State 371, 1]
type = Explod
trigger1 = AnimElem = 13
anim = 736
pos = 6,-10
sprpriority = 3
ownpal = 1
scale = .9,.9
shadow = 0

[State 371, 1]
type = TargetBind
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(2) < 0
pos = 40,0

[State 371, 1]
type = BindtoTarget
trigger1 = AnimElem = 5
pos = 0,10,head

[State 371, 1]
type = Targetlifeadd
trigger1 = AnimElem = 7
trigger2 = AnimElem = 10
value = -30

[State 371, 1]
type = Targetlifeadd
trigger1 = AnimElem = 11
value = -30

[State 371, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 990
ctrl = 1
;---------------------------------------------------------------------------
[statedef 990]
type = a
anim = 990
movetype = a
physics = n
velset = 1.6,-6
ctrl = 0

[state 990]
type = nothitby
trigger1 = ctrl = 0
value = sac
time = 1

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 3
value = 2995,60
channel = 0

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 4
value = 999,2
channel = 1

[state 990]
type = ctrlset
trigger1 = animelem = 5
value = 1 

[state 990]
type = ctrlset
trigger1 = animelem = 8
value = 0

[state 990]
type = turn
trigger1 = animelem = 5

[state 990]
type = veladd
trigger1 = 1
y = .36

[State 1150]
type = HitDef 
trigger1 = time = 0
accel = 0, 0
attr = S, HP
damage = 60,1
animtype = back
getpower = 1,1
givepower = 0
guardflag = MAFP
pausetime = 7,7
sparkno = S736
snap = 70,40
guard.sparkno = S733
sparkxy = 10, -30
hitsound = S220,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 28
ground.hittime = 28
ground.velocity = -9
guard.velocity = 0
airguard.velocity = 0.0     
air.velocity = 0,-5.8
fall = 1

[State 195, 2]
type = velset
trigger1 = movehit
x = -4
y = -7

[State 195, 2]
type = ChangeState
trigger1 = movehit
value = 50
ctrl = 0

[State 195, 2]
type = ChangeState
trigger1 = pos y >= 20
value = 52
ctrl = 1
; p2动作--------------------------------
;-----------------------------------------------------------------------
[Statedef 971]
type = S
movetype = H
physics = N
velset = 0,0
ctrl = 0
sprpriority = 0

[State 372, 1]
type = turn
trigger1 = animelem = 11

[State 372, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 971

[State 372, 2]
type = selfState
trigger1 = animtime = 0
value = 5000
;--------------------------------------------------------------------------

;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
;代码重载(5900)
;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
;代码重载(5900)
;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
;======================================================================
[Statedef 5900]
type = S
anim = ifelse(fvar(10)=0,0,1)

[State 5900, 61]
type = VarSet
trigger1 = roundno = 1
var(59) = 0

[State 5900, 61]
type = VarSet
trigger1 = roundno = 1
var(58) = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
trigger1 = roundno = 1
fvalue = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
trigger1 = roundno = 1
value = 0
first = 0
last = 36

[State 5900, 3] ;Intro
type = ChangeState
trigger1 = roundno = 1
value = 190


;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150

[State 152, 3]
type = ChangeState
trigger1 = var(59) != 1
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 152, Hi to Lo]
type = StateTypeSet
trigger1 = var(59) != 1
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
trigger1 = var(59) != 1
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 152, 3]
type = ChangeState
trigger1 = var(59) = 1
trigger1 = HitShakeOver
value = 151 + 2*(p2statetype = C)

[State 152, Hi to Lo]
type = StateTypeSet
trigger1 = var(59) = 1
trigger1 = statetype = S && p2statetype = C
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
trigger1 = var(59) = 1
trigger1 = statetype = C && p2statetype = S
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
anim = 150

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 153, Hi to Lo]
type = StateTypeSet
trigger1 = var(59) != 1
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
trigger1 = var(59) != 1
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 153, Hi to Lo]
type = StateTypeSet
trigger1 = var(59) = 1
trigger1 = statetype = S && p2statetype = C
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
trigger1 = var(59) = 1
trigger1 = statetype = C && p2statetype = S
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151

[State 152, 3]
type = ChangeState
trigger1 = var(59) != 1
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 152, Hi to Lo]
type = StateTypeSet
trigger1 = var(59) != 1
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
trigger1 = var(59) != 1
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 152, 3]
type = ChangeState
trigger1 = var(59) = 1
trigger1 = HitShakeOver
value = 151 + 2*(p2statetype = C)

[State 152, Hi to Lo]
type = StateTypeSet
trigger1 = var(59) = 1
trigger1 = statetype = S && p2statetype = C
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
trigger1 = var(59) = 1
trigger1 = statetype = C && p2statetype = S
statetype = S
physics = S

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = 151

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 153, Hi to Lo]
type = StateTypeSet
trigger1 = var(59) != 1
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
trigger1 = var(59) != 1
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 153, Hi to Lo]
type = StateTypeSet
trigger1 = var(59) = 1
trigger1 = statetype = S && p2statetype = C
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
trigger1 = var(59) = 1
trigger1 = statetype = C && p2statetype = S
statetype = S
physics = S

[State 153, 4]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1

;======================================================================

[Statedef 5201]
type    = S
movetype= I
physics = N
anim = 5200

[State 5201, 1] ;Turn if not facing opponent
type = Turn
triggerall = PrevStateNo != 371 
trigger1 = Time = 0
trigger1 = p2dist X < -5

[state 5201]
type = playsnd
triggerall = random < 600
trigger1 = time = 5
value = 200,ifelse(random<500,4,5)

[State 5201, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201, 3]
type = veladd
triggerall = vel x < 0
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(2) < 0
x = .7

[State 5201, 3]
type = veladd
trigger1 = AnimElemtime(4) >= 4 
y = .45

[State 5201, 3]
type = velSet
trigger1 = AnimElemtime(4) = 4
y = -5
x = -2

[State 117]
type = posadd
trigger1 = AnimElem = 4
x = -14

[State 5201, 4]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, 5] ;Blink white
type = PalFX
triggerall = PrevStateNo != 371
trigger1 = Time = 0
time = 3
add = 128,128,128 ;256,256,256

[State 5201, Explod]
type = Explod
trigger1 = Time = 1
anim = 706
ownpal = 1
pos = 0,0
postype = p1
sprpriority = 5
bindtime = 1

[State 29, 4]
type = ChangeState
trigger1 = pos y >= 0
trigger1 = vel y > 0
value = 52
ctrl = 1

;===============
;======================================================================

[Statedef 8500]
type    = A
physics = N
movetype= A
anim = 8500
ctrl = 0
velset = 0,0
sprpriority = 3

[State 3000]
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype = hard
damage = 0,0
priority = 7, Hit
guardflag = MA
pausetime =  12,12
guard.pausetime = 12,21
guard.sparkno = -1
sparkno = -1
sparkxy = -17,-75
hitsound = S-1,0
guardsound = S150,0
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -3,0
air.velocity = -3.5,0
air.juggle = 2
getpower = 0,0
givepower = 0
yaccel = .5
p2stateno = 852
fall.recover = 0


[State 2008, 3]
type = Destroyself
trigger1 = animtime = 0



;***********************************************************************
;AI开启条件(1)
;***********************************************************************
;======================================================================
[Statedef 99991]
ctrl = 0

[State 9999, 0]
type = Turn
trigger1 = facing != parent, facing

[State 9999, 郯狮MwA.I.O_}币]
type = ParentVarSet
triggerall = var(43) != 1
trigger1 = (parent, command = "A")&&(command != "A")
trigger2 = (parent, command = "B")&&(command != "B")
trigger3 = (parent, command = "C")&&(command != "C")
trigger4 = (parent, command = "D")&&(command != "D")
trigger5 = (parent, command = "z")&&(command != "z")
trigger6 = (parent, command = "c")&&(command != "c")
;trigger7 = (parent, command = "justfwd")&&(command != "justfwd")
;trigger8 = (parent, command = "justback")&&(command != "justback")
;trigger9 = (parent, command = "justup")&&(command != "justup")
;trigger10 = (parent, command = "justdown")&&(command != "justdown")
var(59) = 1

[State 9999, 1]
type = VarSet
triggerall = var(43) != 1
trigger1 = parent, command = "A"
trigger2 = parent, command = "B"
trigger3 = parent, command = "C"
trigger4 = parent, command = "D"
trigger5 = parent, command = "z"
trigger6 = parent, command = "c"
;trigger7 = parent, command = "justfwd"
;trigger8 = parent, command = "justback"
;trigger9 = parent, command = "justup"
;trigger10 = parent, command = "justdown"
var(43) = 1

[State AI user]
type = ParentVarSet
;trigger1 = RoundState != 2;一 round 完YrP] ai
trigger1 = var(43) = 1
var(34) = 1

[State 2000, Destroy]                  
type = DestroySelf 
trigger1 = p2life = 0
trigger2 = (Parent,var(59) = 1)
trigger3 = var(43) = 1
;---------------------------------------------------------------------------
;***********************************************************************
;AI移动专用state
;***********************************************************************


[Statedef 25]
type    = S
physics = S
anim = 40
velset = 0,0
ctrl = 0

[State 40, 5]
type = VarSet
triggerall = Time = 0
trigger1 = var(39) != 0
trigger1 = PrevStateNo != 2152
trigger1 = PrevStateNo != 2154
var(39) = 0

[State 40, 5]
type = VarSet
triggerall = Time = 0
trigger1 = PrevStateNo = 2152
trigger2 = PrevStateNo = 2154
var(39) = 1

[State 40, 5]
type = VelSet
triggerall = AnimTime = 0
trigger1 = p2bodydist x>90
trigger2 = PrevStateNo = 2152
trigger3 = PrevStateNo = 2154
x = const(velocity.runjump.fwd.x)

[State 40, 5]
type = VelSet
triggerall = AnimTime = 0
trigger1 = p2bodydist x<50
trigger1 = PrevStateNo != 2152
trigger1 = PrevStateNo != 2154
x = const(velocity.runjump.back.x)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
y = const(velocity.runjump.y)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 26
ctrl = 0

;---------------------------------------------------------------------------
; Jump Up
[Statedef 26]
type    = A
physics = A
ctrl = 0

[State 50, PLAYSND] 
type = PlaySnd
trigger1 = Time = 0
value = 1,3
volume = 60

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 75, 3] ; Shadows
type = Afterimage
triggerall = Time = 0
trigger1 = vel x = const(velocity.runjump.fwd.x)
trigger2 = vel x = const(velocity.runjump.back.x)
time = 24
PalBright = 0, 0, 0
PalContrast =  128,128,128
PalAdd = 0, 0, 0
PalMul = 1,1,1
Length = 10
timegap = 2
FrameGap = 4
trans = add1 

;AI通用----------
[State 100, 5]
type = ChangeState
trigger1 = InGuardDist
value = 132

[State 100, 5]
type = ChangeState
triggerall = (var(55) = [0,4])||(var(55) = [20,24])||(var(55) = [40,45])||(var(55) = [60,65])||(var(55) = [80,85])||(var(55) = [100,106])
trigger1 = var(39) = 0
trigger1 = p2statetype != A
trigger1 = random<700
trigger1 = vel y > 0
trigger1 = p2bodydist x = [-10,90]
trigger1 = p2bodydist y = [-10,100]
value = ifelse(vel x>0,611,ifelse(vel x=0,610,639))

[State 100, 5]
type = ChangeState
triggerall = (var(55) = [0,4])||(var(55) = [20,24])||(var(55) = [40,45])||(var(55) = [60,65])||(var(55) = [80,85])||(var(55) = [100,106])
trigger1 = var(39) = 0
trigger1 = p2bodydist x = [-10,90]
trigger1 = random<700
trigger1 = p2statetype = A
value = ifelse(vel x>0,611,ifelse(vel x=0,610,639))

[State 100, 5]
type = ChangeState
triggerall = (var(55) = [5,7])||(var(55) = [25,28])||(var(55) = [45,48])||(var(55) = [66,69])||(var(55) = [86,89])||(var(55) = [107,110])
trigger1 = var(39) = 0
trigger1 = p2bodydist x = [-10,90]
trigger1 = p2statetype = A
value = 615

[State 100, 5]
type = ChangeState
triggerall = (var(55) = [5,7])||(var(55) = [25,28])||(var(55) = [45,48])||(var(55) = [66,69])||(var(55) = [86,89])||(var(55) = [107,110])
trigger1 = var(39) = 0
trigger1 = p2bodydist x = [-10,90]
trigger1 = p2statetype != A
trigger1 = vel y > 0
value = 615

;AI青龙----------
[State 100, 5]
type = ChangeState
triggerall = fvar(10) = 0
triggerall = var(59) = 1
triggerall = var(39) = 1
trigger1 = power >= 1000
value = 3100

;AI凤凰----------
[State 100, 5]
type = ChangeState
triggerall = fvar(10) = 1
triggerall = var(59) = 1
triggerall = var(39) = 1
trigger1 = power >= 1000
value = 3100

;跑动-------------------------------------------------------------------------
[Statedef 27]
type = S
physics = S
anim = 100
ctrl = 0
sprpriority = 0

[State 100, 1]
type = VelSet
trigger1 = time > 3
x = const(velocity.run.fwd.x)

; Play sound when running
[State 100, 2]
type = PlaySnd
triggerall = Anim = 100
trigger1 = AnimElemtime(3) = 0
trigger2 = AnimElemtime(6) = 0
value = 100,0
volume = 80

[State 100, 4]
type = ChangeState
triggerall = var(59) = 1
trigger1 = time >= 12
trigger1 = P2BodyDist x <= 75
trigger1 = ifelse((P2MoveType = H),(p2stateno = [5100,5150]),1)
trigger1 = random < 30
trigger2 = win
trigger3 = inguarddist
trigger4 = time >= 70
value = 0
ctrl = 1

[State 100, 6]
type = hitby
trigger1 = (var(55) = [80,89])||(var(55) = [100,110])
value = SAC,AA,AP

[State 100, 6]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

;AI青龙----------
[State 100, 5]
type = ChangeState
triggerall = fvar(10) = 0
triggerall = var(59) = 1
trigger1 = P2BodyDist x <= 40
trigger1 = P2MoveType = A
value = 1003

;AI凤凰----------
[State 100, 5]
type = ChangeState
triggerall = fvar(10) = 1
triggerall = var(59) = 1
trigger1 = P2BodyDist x <= 40
trigger1 = P2MoveType = A
value = 1090

;AI通用----------
[State 29, 4]
type = ChangeState
triggerall = anim = 100
triggerall = !inguarddist
triggerall = (var(55) = [0,2])||(var(55) = [20,22])||(var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,83])||(var(55) = [105,110])
trigger1 = enemynear,stateno != [5070,5170]
trigger1 = P2BodyDist x <= 15
value = 225
ctrl = 0

[State 29, 4]
type = ChangeState
triggerall = anim = 100
triggerall = (var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = inguarddist
value = ifelse(random<500,112,ifelse(random<500,116,117))
ctrl = 0

[State 29, 4]
type = ChangeState
trigger1 = anim = 100
trigger1 = P2BodyDist x <= 15
value = ifelse(random<700,ifelse(random<300,25,117),ifelse(random<500,25,116))
ctrl = 0

;前进------------------------------------------------------------------------
[Statedef 28]
type    = S
ctrl = 0
physics = S
sprpriority = 0

[State 20, 2]
type = ctrlSet
trigger1 = ctrl = 0
trigger1 = time>10
value = 1

[State 20, 2]
type = VelSet
trigger1 = p2life != 0
trigger1 = p2bodydist x >= 0
x = const(velocity.walk.fwd.x)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 100, 6]
type = hitby
trigger1 = (var(55) = [80,89])||(var(55) = [100,110])
value = SAC,AA,AP

;AI青龙----------
[State 29, 5]
type = ChangeState
triggerall = fvar(10) = 0
triggerall = var(59) = 1
trigger1 = P2BodyDist x <= 40
trigger1 = P2MoveType = A
value = 1003

;AI凤凰----------
[State 29, 5]
type = ChangeState
triggerall = fvar(10) = 1
triggerall = var(59) = 1
trigger1 = P2BodyDist x <= 40
trigger1 = P2MoveType = A
value = 1090

;AI通用----------
[State 29, 4]
type = ChangeState
triggerall = anim = 20
triggerall = (var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,110])
trigger1 = inguarddist
value = ifelse(random<500,112,ifelse(random<500,116,117))
ctrl = 0

[State 29, 4]
type = ChangeState
trigger1 = anim = 20
trigger1 = P2BodyDist x <= 25
trigger1 = animtime >= 10 
trigger1 = random < 10
value = 29
ctrl = 0

[State 29, 4]
type = ChangeState
triggerall = anim = 20
trigger1 = P2BodyDist x <= 15
trigger2 = P2BodyDist x > 20
trigger2 = time >= 15
trigger2 = random < 100 
value = 0
ctrl = 1

[State 29, 4]
type = ChangeState
trigger1 = anim = 20
trigger1 = P2BodyDist x <= 10
trigger1 = enemynear,anim = 20
value = 370
ctrl = 0

[State 29, 4]
type = ChangeState
triggerall = anim = 20
triggerall = (var(55) = [0,2])||(var(55) = [20,22])||(var(55) = [40,43])||(var(55) = [60,64])||(var(55) = [80,84])||(var(55) = [105,110])
trigger1 = enemynear,stateno != [5070,5170]
trigger1 = P2BodyDist x <= 15
value = 225
ctrl = 0

[State 29, 4]
type = ChangeState
trigger1 = anim = 100
trigger1 = P2BodyDist x <= 15
value = ifelse(random<700,ifelse(random<300,25,117),ifelse(random<500,25,116))
ctrl = 0

;后退----------------------------------------------------------------------
[Statedef 29]
type    = S
physics = S
ctrl = 0
sprpriority = 0

[State 20, 2]
type = ctrlSet
trigger1 = ctrl = 0
trigger1 = time>10
value = 1

[State 29, 2]
type = VelSet
trigger1 = p2bodydist x >= 0
x = const(velocity.walk.back.x)

[State 29, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

[State 100, 4]
type = ChangeState
triggerall = anim = 21
trigger1 = time >= 16
trigger1 = P2BodyDist x <= 75
trigger1 = ifelse((P2MoveType = H),(p2stateno = [5100,5150]),1)
trigger2 = win
trigger3 = inguarddist
trigger4 = time >= 50
value = 0
ctrl = 1

;AI青龙----------
[State 29, 5]
type = ChangeState
triggerall = fvar(10) = 0
triggerall = var(59) = 1
trigger1 = P2BodyDist x <= 40
trigger1 = P2MoveType = A
value = 1003

;AI凤凰----------
[State 29, 5]
type = ChangeState
triggerall = fvar(10) = 1
triggerall = var(59) = 1
trigger1 = P2BodyDist x <= 40
trigger1 = P2MoveType = A
value = 1090

;AI通用----------
[State 29, 4]
type = ChangeState
trigger1 = anim = 21
trigger1 = P2BodyDist x >= 100
trigger1 = animtime >= 10 
trigger1 = random < 10
value = 28
ctrl = 0

[State 29, 4]
type = ChangeState
trigger1 = P2BodyDist x <= 25
trigger1 = time >= 10 
trigger1 = random < 500
value = ifelse(BackEdgeBodyDist<30,116,ifelse(random<500,117,117))
ctrl = 0

[State 29, 4]
type = ChangeState
trigger1 = P2BodyDist x <= 25
trigger1 = time >= 10 
value = 25
ctrl = 0

[State 29, 4]
type = ChangeState
trigger1 = anim = 20
trigger1 = P2BodyDist x <= 10
trigger1 = enemynear,anim = 20
value = 370
ctrl = 0
