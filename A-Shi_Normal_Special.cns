;===========================================================
[Data]
life = 1000
attack = 100
defence = 100
fall.defence_up = 50
liedown.time = 50
airjuggle = 16
sparkno = S735
guard.sparkno = S736
KO.echo = 0
volume = 30
power = 3000
IntPersistIndex = e
FloatPersistIndex = 23,29

[Size]
xscale = 1
yscale = 1
ground.back = 15
ground.front = 15
air.back = 12
air.front = 12
height = 60
attack.dist = 140
proj.attack.dist = 80
proj.doscale = 1
head.pos = 5,-85
mid.pos = 5,-60
shadowoffset = 0
draw.offset = 0,0

[Velocity]
walk.fwd  = 2.6        ;Walk forward
walk.back = -2.45       ;Walk backward
run.fwd  = 4.9,0  
run.back = -4.5,-6  
jump.neu = 0,-9.7       ;Neutral jumping velocity (x, y)
jump.back = -3.1       ;Jump back Speed (x, y)
jump.fwd = 3.2         ;Jump forward Speed (x, y)
runjump.back = -2.95,-9.7 
runjump.fwd = 3.6,-9.7
airjump.neu = 0,-7.5
airjump.back = -2.55
airjump.fwd = 2.5

[Movement]
airjump.num = 0
airjump.height = 35
yaccel = 0.45
stand.friction = 0.8
crouch.friction = 0.8

[Quotes]
victory1 = "You must defeat Tu Shou to stand a chance."
victory2 = "I am winner......................"
;---------------------------------------------------------------------------
;var使用说明
;var(1)   空闲
;var(2)   禁锢の力量启动条件
;var(3)   空闲
;var(4)   ?
;var(5)   空闲
;var(6)   空闲
;var(7)   juggle
;var(8)   开场以及胜利随机动作
;var(9)   防止214手可以无脑当身压制
;var(10)  是否参与某系统游戏包的开关
;var(11)  气功拳等技能的闪光控制（可能会无用）
;var(12)  招式方向指令
;var(13)  招式指令
;var(14)  空闲？暂不明了
;var(15)  214手衍生技能缓冲
;var(17)  进入roundstate = 2 后经过的时间 用于反bt系统
;var(25)  记录敌人的时常战场停留的helper（600time记录一次）
;var(28)  记录敌人是否是开局即不自重（暂无实现）
;var(30)  空中动作击中
;var(35)  记录敌人开局战场停留的helper（当时常helper低于开局helper 会刷新开局helper）
;var(37)  背景渐变参数
;var(38)  反bt触发条件2
;var(39)  魔龙斩空咬ai控制 以及3级能量控制
;var(41)  ai下轻脚控制 可以省略 |替换为攻击方式控制
;var(42)  部分技能的声音套餐控制
;var(47)  记录敌人正面移动动作编号
;var(48)  记录敌人背面移动动作编号
;var(49)  识别对手是否是瞬间无敌移动
;var(50)  霸体识别开关
;var(53)  神战能量值
;var(54)  三局两胜最终局判断
;var(55)  AI攻击方式变换英子(每time%200=0随机一次回合数越靠后随机区间值越大)
;var(56)  ai判断敌人是否是无敌移动技能
;var(57)  AI难度提升英子(记录AI LEVEL数据仅能用于新版)
;var(58)  反bt等级 var(58)越高对方bt级别越高
;var(59)  AI开关
;轩辕诗
;---------------------------------------------------------------------------
;fvar(29)  空闲
;fvar(39)  据对方防御力微调攻击力
;---------------------------------------------------------------------------
;anim 782 2705无用
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; RUN_UP
[Statedef 110]
type    = S
physics = N

[state 830]
type = nothitby
trigger1 = 1
value = sac
time = 5
ignorehitpause=1

[State 110, 0]
type = CtrlSet
trigger1 = Time = 0
value = 0

[State 110, 7]
type = CtrlSet
trigger1 = AnimTime = 0
value = 1

[State 110, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; RUN_DOWN
[Statedef 115]
type    = S
physics = N

[state 830]
type = nothitby
trigger1 = 1
value = sac
time = 5
ignorehitpause=1

[State 110, 0]
type = CtrlSet
trigger1 = Time = 0
value = 0

[State 110, 7]
type = CtrlSet
trigger1 = AnimTime = 0
value = 1

[State 115, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

[StateDef 865]
type = A
movetype = A
physics = A
anim = 865 
ctrl = 0

[state 830]
type = nothitby
trigger1 = 1
value = sac
time = 5
ignorehitpause=1

[state 9500,1]
type = ReversalDef
trigger1 = timemod = 10,0
attr = S,NA
reversal.attr = SA, NA, SA, HA, SP, HP, NP
pausetime = 7,12
hitsound = S167,0
sparkxy = ((p2bodydist x)-40)/4,-15
sparkno = S733
sprpriority = 2
p1stateno = 169

[State Land]
type = selfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52
ctrl = 0

[StateDef 852]
type = S
movetype = U
physics = S
ctrl = 0

[State Land]
type = selfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52
ctrl = 0

[State 810, 2]
type = DestroySelf
trigger1 = time >= 0

[State Land]
type = ChangeState
trigger1 = time >= 0
value = 0
ctrl = 1

[StateDef 850]
type = S
movetype = U
physics = S
anim = 130
velset = 0,0
juggle = 1+var(7) 
ctrl = 0

;AI青龙
[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = power >= 1000
triggerall = p2bodydist y = [-110,-55]
trigger1 = p2life > 350
trigger2 = life < p2life
value = ifelse(power>2000,ifelse(random<500,3410,3250),ifelse(random<500,3400,3200))

;AI凤凰
[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = p2bodydist y = [-210,-55]
trigger1 = p2life > 350
trigger2 = life < p2life
value = ifelse(power>2000,ifelse(random<500,4250,3030),ifelse(random<500,4200,3020))

[State Land]
type = ChangeState
trigger1 = time >= 60
value = 0
ctrl = 1

[StateDef 834]
type = A
movetype = A
physics = N
anim = 1005
velset = 0,0
juggle = 1+var(7) 
ctrl = 0

[state 830]
type = nothitby
trigger1 = 1
value = sac
time = 1

[State 5010, 4] ;Freeze anim
type = ChangeAnim
Trigger1 = p2name = "Evil Ken" || p4name = "Evil Ken"
trigger1 = p2stateno != [3960,4000]
value = 1067

[State 1650, 1]
type = ReversalDef
trigger1 = animelem = 1
reversal.attr = SCA,NA,SA ,AP,NP,SP,HP,HA; SCA,NA,SA
numhits = 0
pausetime = 10,20
sparkno = S733
p2stateno = 9021
hitsound = 6,0

[State 205, 3]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype = light
damage = 999,999
priority = 7, Hit
guardflag = MA
pausetime = 15,15
sparkno = S735
p2stateno = 4617
guard.sparkno = S733
sparkxy = -10,-70
hitsound = S210,0
guardsound = S150,0
ground.type = high
ground.slidetime = 0
ground.hittime = 6
ground.velocity = -3.5
air.velocity = -3.5,-6
guard.velocity = -5.5
getpower = 30,10
givepower = 10
yaccel = .5 

[State 810, 2]
type = DestroySelf
trigger1 = anim = 1005
trigger1 = time >= 2
trigger2 = anim = 1067
trigger2 = time >= 60
trigger3 = movehit

[StateDef 835]
type = A
movetype = A
physics = N
anim = 1005
velset = 0,0
juggle = 1+var(7) 
ctrl = 0

[state 830]
type = nothitby
trigger1 = 1
value = sac
time = 1

[State 5010, 4] ;Freeze anim
type = ChangeAnim
Trigger1 = p2name = "Evil Ken" || p4name = "Evil Ken"
trigger1 = p2stateno != [3960,4000]
value = 1067

[state 9500,1]
type = ReversalDef
trigger1 = timemod = 10,0
attr = S,NA
reversal.attr = SA, NA, SA, HA, SP, HP, NP
pausetime = 0,0
sparkxy = 35,-80
sparkno = -1
sprpriority = 2
p2stateno = 831

[State 810, 2]
type = DestroySelf
trigger1 = anim = 1005
trigger1 = time >= 2
trigger2 = anim = 1067
trigger2 = time >= 60
trigger3 = movehit

[StateDef 845]
type = A
movetype = A
physics = N
anim = 1005
velset = 0,0
juggle = 1+var(7) 
ctrl = 0

[state 830]
type = nothitby
trigger1 = 1
value = sac
time = 10

[State 205, 3]
type = HitDef
trigger1 = root,fvar(10)=0
trigger1 = time = 0
attr = S, NA
animtype = light
damage = 50
priority = 7, Hit
guardflag = MA
pausetime = 13,15
sparkno = S736
guard.sparkno = S733
sparkxy = -10,-70
hitsound = S4040,1
guardsound = S150,0
ground.type = high
ground.slidetime = 0
ground.hittime = 6
ground.velocity = -3.5
air.velocity = -1,-9
guard.velocity = -5.5
id = 845
kill = 0
fall = 1
fall.recover = 0
getpower = 30,10
givepower = 10
palfx.time = 85
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .5 

[State 205, 3]
type = HitDef
trigger1 = root,fvar(10)!=0
trigger1 = time = 0
attr = S, NA
animtype = light
damage = 50
priority = 7, Hit
guardflag = MA
pausetime = 13,15
sparkno = S736
guard.sparkno = S733
sparkxy = -10,-70
hitsound = S3000,1
guardsound = S150,0
ground.type = high
ground.slidetime = 0
ground.hittime = 6
ground.velocity = -3.5
air.velocity = -1,-9
guard.velocity = -5.5
id = 845
kill = 0
fall = 1
fall.recover = 0
getpower = 30,10
givepower = 10
palfx.time = 85
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .5 

[state pause]
type = pause
trigger1 = root,fvar(10)=1
time = 1

[State 810, 2]
type = DestroySelf
trigger1 = anim = 1005
trigger1 = time >= 2
trigger2 = anim = 1067
trigger2 = time >= 60
trigger3 = movehit

[StateDef 830]
movetype = I
physics = N
poweradd = -500
velset = 0,0
juggle = 1+var(7) 
ctrl = 0

[state changeanim]
type = changeanim
trigger1 = time = 0
trigger1 = pos y = 0
value = 750

[state changeanim]
type = changeanim
trigger1 = time = 0
trigger1 = pos y < 0
value = 830

[state statetypeset]
type = statetypeset
trigger1 = anim = 750
trigger1 = time = 0
physics = S
statetype = S

[state statetypeset]
type = statetypeset
trigger1 = anim = 830
trigger1 = time = 0
physics = N
statetype = A

[state posset]
type = posset
trigger1 = anim = [750,751]
trigger1 = pos y != 0
y = 0

[state velset]
type = velset
triggerall = anim = 830
trigger1 = time = 0
y = -5

[state velset]
type = velset
triggerall = anim = 830
trigger1 = time = 13
x = -3

[state velset]
type = velset
triggerall = anim = 830
trigger1 = time = 20
x = -1

[State Gravity]
type = VelAdd
triggerall = anim = 830
trigger1 = vel Y != 0
y = .3

[State 821, 5]
type = velset
triggerall = anim != 830
trigger1 = time = 3
x = 5

[State 821, 5]
type = velset
triggerall = anim != 830
triggerall = enemynear,BackEdgeBodyDist <= 3
trigger1 = time = 6
x = -15

[State 821, 5]
type = Width
trigger1 = animelemtime(2) = 0
player = 15,0
edge = 15

[State 821, 5]
type = Width
trigger1 = animelemtime(2) = 1
player = 30,0
edge = 30

[state 830]
type = nothitby
trigger1 = 1
value = sac
time = 10
ignorehitpause = 1

[State 4810, PalFX]
type = PalFX
trigger1 = Time = 0
time = 5
add = 255,255,255
ignorehitpause = 1

[state 9500,1]
type = Helper
trigger1 = numhelper(835) = 0
trigger1 = timemod = 10,0
pausetime = 0,0
stateno = 835
id = 835
pos = 0,0
postype = p1
ownpal = 1
supermovetime = 99
pausemovetime = 99

[State -2, 1] 
type = Helper
trigger1 = time =2
helpertype	= player
stateno = 163
id = 163
pos = -20,-80
postype = p1
ownpal = 1
supermovetime = 99
pausemovetime = 99
keyctrl = 1
ownpal = 1
size.ground.back = 0
size.ground.front = 0
size.air.back = 0
size.air.front = 0

[State -2, 1] 
type = Helper
trigger1 = time =2
helpertype	= player
stateno = 163
id = 163
pos = -20,10
postype = p1
ownpal = 1
supermovetime = 99
pausemovetime = 99
keyctrl = 1
ownpal = 1
size.ground.back = 0
size.ground.front = 0
size.air.back = 0
size.air.front = 0

[State 3784]
type = Explod
trigger1 = animelem = 1
ignorehitpause = 1 
anim = 741
pos = 76,ifelse(anim=830,-80,ifelse(anim=750,-60,-45))
postype = p1
sprpriority = 3
supermovetime = 99
pausemovetime = 99
ownpal = 1

[State 821, 5]
type = playsnd
trigger1 = time = 0
value = 167,0

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 2995,ifelse(fvar(10)!=1,ifelse(random<500,50,58),ifelse(random<500,151,152))
channel = 0

[State Land]
type = selfState
trigger1 = anim = 830
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52
ctrl = 0

[State Land]
type = selfState
trigger1 = anim != 830
trigger1 = animtime = 0
value = 0
ctrl = 1

[Statedef 831]
movetype= H
physics = N
ctrl = 0

[State 810, 2]
type = HitBy
trigger1 = Time >= 0
value = SCA, AA, AT, AP, SP, HP, NP, NA
time = 10

[State 810, 2]
type = statetypeset
triggerall = Time = 0
trigger1 = vel Y != 0
trigger2 = pos y < 0
statetype = a

[State 810, 2]
type = veladd
trigger1 = statetype = a
trigger1 = vel Y = 0
y = -2

[State 810, 2]
type = veladd
trigger1 = vel Y != 0
y = .2

[State 810, 2]
type = statetypeset
trigger1 = vel Y = 0
statetype = s
physics = s

[State 810, 2]
type = posset
trigger1 = statetype = s
trigger1 = pos y > 0
y = 0

[State 810, 2]
type = DestroySelf
trigger1 = Time >= 0

[State 820, 2]
type = EnvColor 
Trigger1 = Time = 0
time = 1
Value = 250,250,250

[State 810, 2]
type = changeanim
trigger1 = statetype != A
trigger1 = pos y = 0
trigger1 = animtime = 0
trigger1 = time < 12
value = 0

[State 821, 5]
type = SelfState
triggerall = statetype != A
trigger1 = (animtime = 0)||(time >= 120)
trigger2 = anim = 0
trigger2 = time >= 5
value = 0
ctrl = 1

[State 821, 5]
type = SelfState
trigger1 = statetype = A
trigger1 = vel y > 0
trigger1 = pos y >= 0
trigger2 = pos Y > 20
value = 52

;==开局计时器==========================================================
[Statedef 820]
type    = A
movetype= I
anim = 4015
physics = N
velset = 0,0
ctrl = 0

[state bindtoroot]
type = bindtoroot
trigger1 = 1
pos = 0,0
time = 1

[state nothitby]
type = nothitby
trigger1 = 1
value = sac
time=10000

;无限连次数

[state varset]
type = varset
trigger1 = root,movetype != H
trigger2 = enemy,time = [0,1]
var(43) = 0

[state varset]
type = varset
trigger1 = enemy,movehit
trigger1 = var(45)!= enemy,stateno
var(45) = enemy,stateno

[state varset]
type = varset
trigger1 = root,movetype = H 
trigger1 = var(42) = 0
trigger1 = enemy,movehit
trigger1 = var(40) != enemy,stateno
var(40) = enemy,stateno

[state varset]
type = varset
trigger1 = root,movetype = H 
trigger1 = enemy,movehit
trigger1 = root,time = 1
trigger1 = var(42) != 1
var(42) = 1

[state varset]
type = varset
trigger1 = root,movetype != H 
trigger1 = var(42) != 0
trigger2 = var(46) >= 6
var(42) = 0

[state varset]
type = varadd
trigger1 = enemy,time = 1
trigger1 = var(40) != var(45)
var(46) = 1

[state varset]
type = varset
trigger1 = root,movetype != H 
trigger2 = var(46) > 6
var(46) = 0

[state varset]
type = varadd
triggerall = root,Alive
trigger1 = fvar(2) = 1.0
trigger1 = root,movetype = H 
trigger1 = enemy,movehit
trigger1 = root,time = 1
trigger1 = var(43) = 0
trigger1 = var(40) = enemy,stateno
fvar(1) = fvar(1)+var(11)

[state varset]
type = varset
triggerall = fvar(2) != 0.0
triggerall = root,movetype = H
trigger1 = root,stateno = [5900,5999] 
trigger2 = root,stateno = [15000,16999] 
fvar(2) = 0.0

[state varset]
type = varset
triggerall = fvar(2) != 1.0
triggerall = root,movetype != H
trigger1 = root,stateno != [5900,5999] 
trigger1 = root,stateno != [15000,16999] 
fvar(2) = 1.0

[state varset]
type = varset
triggerall = root,movetype != H 
trigger1 = fvar(1)  != 0
trigger2 = fvar(2) = 1.0
fvar(1) = 0

[state varset]
type = varset
trigger1 = root,movetype = H 
trigger1 = enemy,movehit
trigger1 = var(40) = enemy,stateno
var(43) = 1

;记录根人物每次挨打后的受伤值
[state varset]
type = varset
trigger1 = var(10) > root,life
var(11) = var(10) - root,life

[state varset]
type = varadd
triggerall = var(2) < 5
trigger1 = var(10) > root,life
trigger1 = var(11) = [1,990]
var(2) = 1

;记录根人物当前体力值
[state varset]
type = varset
trigger1 = var(10) != root,life
var(10) = root,life

;判断是否接受正常的超大伤害
[state varset]
type = varset
triggerall = root,var(59)!=0
trigger1 = var(11) >= root,lifemax
trigger2 = (root,gethitvar(damage))>(root,lifemax)
var(13) = 1

;敌人无节操回血脱离状况时开启条件
[state varset]
type = null;varset
triggerall = var(1) > 30
triggerall = root,var(59) != 0
trigger1 = root,life<(root,lifemax)*.5
trigger1 = var(21) >= 5
trigger1 = enemy,life>=enemy,lifemax-10
trigger2 = var(22) >= 400
trigger2 = root,life<650
trigger3 = var(22) >= 250
trigger3 = root,life<450
trigger4 = var(22) >= 150
trigger4 = root,life<250
var(13) = 1

;判断对手是否是正常的防御面


;记录敌人当前体力值
[state varset]
type = null;varset
trigger1 = root,movetype = A 
trigger1 = root,time = 1
trigger1 = var(20) != enemy,life
var(20) = enemy,life

[state varset]
type = null;varset
trigger1 = root,HitPauseTime
trigger1 = root,movehit 
trigger1 = enemy,movetype != H
trigger1 = var(20) != enemy,life
var(21) = enemy,life
ignorehitpause=1
pausemovetime = 99

[state varset]
type = null;varadd
trigger1 = var(22) >= 0
trigger1 = root,HitPauseTime
trigger1 = root,movehit 
trigger1 = enemy,movetype != H
trigger1 = numtarget = 0
var(22) = 1

[state varset]
type = null;varadd
trigger1 = var(22) > 0
trigger1 = root,HitPauseTime
trigger1 = root,movehit 
trigger1 = var(20) > var(21) + 20
var(22) = -1

[state varset]
type = null;varset
trigger1 = root,animtime = 0
var(21) = 0

;记录是否进入H结局----------------------------
[State -1]
type = varset
triggerall = root,stateno = 5970
trigger1 = var(19) != 1
var(19) = 1
ignorehitpause=1
;判断是否被对手混线成功----------------------------
[State -1]
type = varadd
triggerall = root,stateno = 80000
trigger1 = root,time = 1
var(59) = 1

[State -1]
type = varset
triggerall = root,stateno = [80000,89999] 
trigger1 = root,time >= 10
var(59) = 0
;-根人物神力解放开关部分-------
[State -1]
type = Parentvarset
triggerall = root,var(59)!=0
triggerall = root,var(57) = [10,11]
triggerall = root,lose
trigger1 = root,palno = 6
trigger2 = root,palno = 12
var(57) = 13
persistent = 0

[State -1]
type = Parentvarset
triggerall = root,var(59)!=0
triggerall = root,var(57) = 13
trigger1 = root,palno = 6
trigger2 = root,palno = 12
var(57) = 12
persistent = 0

[State 810, 2]
type = Parentvarset
triggerall = root,var(59)!=0
triggerall = root,var(57) != 12
triggerall = root,var(57) = [10,11]
triggerall = var(1) < 10
trigger1 = var(57) = 12
trigger2 = root,life=0
trigger3 = root,lose
var(57) = 12

[State 810, 2]
type = Parentvarset
triggerall = root,var(59)!=0
triggerall = root,var(57) != 12
trigger1 = var(13) != 0
var(57) = 12

[State 810, 2]
type = Parentvarset
triggerall = root,var(57) = 12
trigger1 = root,win 
var(57) = 11

[State -2,12]
type = Parentvarset
trigger1 = root,var(57) = 12
trigger1 = root,var(59) != 0
var(59) = 0

[State -1]
type = Parentvarset
triggerall = root,var(59)!=0
triggerall = root,var(57) != 12
triggerall = root,var(57) = 11
trigger1 = root,lose
trigger2 = root,life<=1
var(57) = 12

[State -1]
type = Parentvarset
triggerall = root,var(53) = 0
trigger1 = 1
var(53) = 1
;--根人物神力解放开关结束---------

[State 810, 2]
type = varadd
trigger1 = var(1) < 20
trigger1 = time%60 = 1
trigger1 = roundstate = 2
var(1) = 1

[State 810, 2]
type = null;DestroySelf
trigger1 = var(1) >= 20

;==============================================================
;站立格挡 blocking 
[Statedef 160]
type    = S
movetype= I
physics = S
facep2 = 1
sprpriority = 3
anim = 160
velset = 0,0
ctrl = 0

[state posset]
type = posset
trigger1 = pos y!=0
y = 0

[State 821, 5]
type = Width
trigger1 = time = 0
player = 15,0
edge = 15

[State 821, 5]
type = playsnd
trigger1 = time = 0
value = 220,20

[State 4810, PalFX]
type = PalFX
trigger1 = Time = 0
time = 1
add = 255,255,255
ignorehitpause = 1

[State 3784]
type = Explod
trigger1 = animelem = 1
ignorehitpause = 1 
anim = 740
pos = 27,-61
postype = p1
sprpriority = 5
supermovetime = 99
pausemovetime = 99
ownpal = 1

[State 810, 2]
type = notHitBy
trigger1 = 1
value = SCA
time = 10

[State 821, 5]
type = pause
trigger1 = time = 0
time = 23
movetime = 5

[state changestate]
type = changestate
trigger1 = var(59)!=0
trigger1 = animtime = 0
trigger1 = random<700
trigger1 = p2bodydist x = [-30,35]
value = ifelse(random<500,225,425)

[state changestate]
type = changestate
trigger1 = var(59)!=0
trigger1 = animtime = 0
trigger1 = random<500
trigger1 = p2bodydist x = [-35,75]
value = 410

[State 821, 5]
type = SelfState
trigger1 = animtime = 0
value = 0
ctrl = 1

;蹲下格挡
[Statedef 161]
type    = C
movetype= I
physics = C
facep2 = 1
sprpriority = 3
anim = 161
velset = 0,0
ctrl = 0

[state posset]
type = posset
trigger1 = pos y!=0
y = 0

[State 821, 5]
type = Width
trigger1 = time = 0
player = 15,0
edge = 15

[State 821, 5]
type = playsnd
trigger1 = time = 0
value = 220,20

[State 4810, PalFX]
type = PalFX
trigger1 = Time = 0
time = 1
add = 255,255,255
ignorehitpause = 1

[State 3784]
type = Explod
trigger1 = animelem = 1
ignorehitpause = 1 
anim = 740
pos = 13,-42
postype = p1
sprpriority = 5
supermovetime = 99
pausemovetime = 99
ownpal = 1

[State 810, 2]
type = notHitBy
trigger1 = 1
value = SCA
time = 10

[State 821, 5]
type = pause
trigger1 = time = 0
time = 23
movetime = 3

[state changestate]
type = changestate
trigger1 = var(59)!=0
trigger1 = animtime = 0
trigger1 = random<700
trigger1 = p2bodydist x = [-30,35]
value = ifelse(random<500,225,425)

[state changestate]
type = changestate
trigger1 = var(59)!=0
trigger1 = animtime = 0
trigger1 = random<500
trigger1 = p2bodydist x = [35,75]
value = 410

[State 821, 5]
type = SelfState
trigger1 = animtime = 0
value = 11
ctrl = 1

;反向格挡
[Statedef 162]
type    = C
movetype= I
physics = C
facep2 = 1
poweradd = -500
sprpriority = 3
anim = 162
velset = 0,0
ctrl = 0

[state posset]
type = posset
trigger1 = pos y!=0
y = 0

[State 4810, PalFX]
type = PalFX
trigger1 = Time = 1
time = 5
add = 255,255,255
ignorehitpause = 1

[State 821, 5]
type = Width
trigger1 = time = 0
player = 15,0
edge = 15


[State 821, 5]
type = playsnd
trigger1 = time = 0
value = 220,20

[State 3784]
type = Explod
trigger1 = animelem = 2
ignorehitpause = 1 
anim = 740
pos = 13,-62
postype = p1
sprpriority = 5
supermovetime = 99
pausemovetime = 99
ownpal = 1

[State 810, 2]
type = notHitBy
trigger1 = 1
value = SCA
time = 10

[State 821, 5]
type = pause
trigger1 = time = 0
time = 23
movetime = 8

[state changestate]
type = changestate
trigger1 = var(59)!=0
trigger1 = animtime = 0
trigger1 = random<700
trigger1 = p2bodydist x = [-30,35]
value = ifelse(random<500,225,425)

[state changestate]
type = changestate
trigger1 = var(59)!=0
trigger1 = animtime = 0
trigger1 = random<500
trigger1 = p2bodydist x = [35,75]
value = 410

[State 821, 5]
type = SelfState
trigger1 = animtime = 0
value = 11
ctrl = 1

;防御中滑动
[Statedef 165]
type    = S
movetype= I
facep2 = 1
physics = S
powadd = -500
velset = 0,0
ctrl = 0

[state posset]
type = posset
trigger1 = pos y!=0
y = 0

[State 821, 5]
type = changeanim
trigger1 = time = 1
value = 165

[State 810, 2]
type = velset
trigger1 = time = [0,15]
x = 6

[State 210, 1]
type = PlaySnd
trigger1 = Time = 2
value = 200,ifelse(random<500,7,8)

[State 210, 1]
type = PlaySnd
trigger1 = Time = 2
value = 2000,9

[State 4810, PalFX]
type = PalFX
trigger1 = Time = 1
time = 5
add = 100,100,180
mul = 256,256,256
sinadd = -80,-80,-80,10
invertall = 0
ignorehitpause = 1

[State 810, 2]
type = notHitBy
trigger1 = 1
value = SCA
time = 10

[State 821, 5]
type = pause
trigger1 = time = 0
time = 3

[State 821, 5]
type = pause
trigger1 = time = 1
time = 10
movetime = 10

[State 821, 5]
type = SelfState
triggerall = anim = 165
trigger1 = animtime = 0
value = 0
ctrl = 1

;防御推开（站立）
[StateDef 167]
type = S
movetype = A
physics = S
anim = 750
facep2 = 1
velset = 0,0
ctrl = 0

[State 821, 5]
type = Width
trigger1 = animelemtime(2) = 0
player = 15,0
edge = 15

[State 821, 5]
type = Width
trigger1 = animelemtime(2) = 1
player = 30,0
edge = 30

[State 821, 5]
type = velset
trigger1 = time = 3
x = 5

[State 821, 5]
type = velset
triggerall = enemynear,BackEdgeBodyDist <= 3
trigger1 = time = 6
x = -15

[State -2, 1] 
type = Helper
trigger1 = time =2
helpertype	= player
stateno = 163
id = 163
pos = -20,-60
postype = p1
ownpal = 1
supermovetime = 99
pausemovetime = 99
keyctrl = 1
ownpal = 1
size.ground.back = 0
size.ground.front = 0
size.air.back = 0
size.air.front = 0

[State 3784]
type = Explod
trigger1 = animelem = 1
ignorehitpause = 1 
anim = 741
pos = 76,-60
postype = p1
sprpriority = 3
supermovetime = 99
pausemovetime = 99
ownpal = 1

[State 810, 2]
type = notHitBy
trigger1 = 1
value = SCA
time = 10

[State 821, 5]
type = playsnd
trigger1 = time = 0
value = 167,0

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 2995,ifelse(fvar(10)!=1,ifelse(random<500,50,58),ifelse(random<500,151,152))
channel = 0

[State 821, 5]
type = pause
trigger1 = time = 8
time = 13
movetime = 2

[State Land]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;防御推开（蹲下）
[StateDef 168]
type = C
movetype = A
physics = C
anim = 751
facep2 = 1
velset = 0,0
ctrl = 0

[State 821, 5]
type = Width
trigger1 = animelemtime(2) = 0
player = 15,0
edge = 15

[State 821, 5]
type = Width
trigger1 = animelemtime(2) = 1
player = 30,0
edge = 30

[State 821, 5]
type = velset
trigger1 = time = 3
x = 5

[State 821, 5]
type = velset
triggerall = enemynear,BackEdgeBodyDist <= 3
trigger1 = time = 6
x = -15

[State -2, 1] 
type = Helper
trigger1 = time =2
helpertype	= player
stateno = 163
id = 163
pos = -20,-60
postype = p1
ownpal = 1
supermovetime = 99
pausemovetime = 99
keyctrl = 1
ownpal = 1
size.ground.back = 0
size.ground.front = 0
size.air.back = 0
size.air.front = 0

[State 3784]
type = Explod
trigger1 = animelem = 1
ignorehitpause = 1 
anim = 741
pos = 76,-45
postype = p1
sprpriority = 3
supermovetime = 99
pausemovetime = 99
ownpal = 1

[State 810, 2]
type = notHitBy
trigger1 = 1
value = SCA
time = 10

[State 821, 5]
type = playsnd
trigger1 = time = 0
value = 167,0

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 2995,ifelse(fvar(10)!=1,ifelse(random<500,50,58),ifelse(random<500,151,152))
channel = 0

[State 821, 5]
type = pause
trigger1 = time = 8
time = 13
movetime = 3

[State Land]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1

;防御推开（空中）
[StateDef 169]
type = A
movetype = A
physics = n
anim = 752
facep2 = 1
velset = 0,0
ctrl = 0

[State 821, 5]
type = Width
trigger1 = animelemtime(2) = 0
player = 15,0
edge = 15

[State 821, 5]
type = Width
trigger1 = animelemtime(2) = 1
player = 30,0
edge = 30

[State 821, 5]
type = Statetypeset
trigger1 = animelemtime(2) = 3
physics = A

[State 821, 5]
type = velset
trigger1 = time = 0
y = -1.5

[State 821, 5]
type = velset
trigger1 = time = 3
x = 2.5

[State 821, 5]
type = velset
triggerall = enemynear,BackEdgeBodyDist <= 3
trigger1 = time = 6
x = -15

[State -2, 1] 
type = Helper
trigger1 = time =2
helpertype	= player
stateno = 163
id = 163
pos = -20,-80
postype = p1
ownpal = 1
supermovetime = 99
pausemovetime = 99
keyctrl = 1
ownpal = 1
size.ground.back = 0
size.ground.front = 0
size.air.back = 0
size.air.front = 0

[State -2, 1] 
type = Helper
trigger1 = time =2
helpertype	= player
stateno = 163
id = 163
pos = -20,10
postype = p1
ownpal = 1
supermovetime = 99
pausemovetime = 99
keyctrl = 1
ownpal = 1
size.ground.back = 0
size.ground.front = 0
size.air.back = 0
size.air.front = 0

[State 3784]
type = Explod
trigger1 = animelem = 1
ignorehitpause = 1 
anim = 741
pos = 76,-80
postype = p1
sprpriority = 3
supermovetime = 99
pausemovetime = 99
ownpal = 1


[State 810, 2]
type = notHitBy
trigger1 = 1
value = SCA
time = 10

[State 821, 5]
type = playsnd
trigger1 = time = 0
value = 167,0

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
value = 2995,ifelse(fvar(10)!=1,ifelse(random<500,50,58),ifelse(random<500,151,152))
channel = 0

[State 821, 5]
type = pause
trigger1 = time = 8
time = 13
movetime = 13

;AI通用----------

[State 100, 5]
type = ChangeState
triggerall = animelemtime(4) >= 6
triggerall = (var(55) = [0,4])||(var(55) = [20,24])||(var(55) = [40,45])||(var(55) = [60,65])||(var(55) = [80,85])||(var(55) = [100,106])||(var(55) = [110,116])
triggerall = var(59) != 0 
trigger1 = var(39) = 0
trigger1 = p2statetype != A
trigger1 = random<700
trigger1 = vel y > 0
trigger1 = p2bodydist x = [-10,90]
trigger1 = p2bodydist y = [-10,100]
value = ifelse(vel x>0,611,ifelse(vel x=0,610,639))

[State 100, 5]
type = ChangeState
triggerall = animelemtime(4) >= 6
triggerall = (var(55) = [0,4])||(var(55) = [20,24])||(var(55) = [40,45])||(var(55) = [60,65])||(var(55) = [80,85])||(var(55) = [100,106])||(var(55) = [110,116])
triggerall = var(59) != 0 
trigger1 = var(39) = 0
trigger1 = p2bodydist x = [-10,90]
trigger1 = random<700
trigger1 = p2statetype = A
value = ifelse(vel x>0,611,ifelse(vel x=0,610,639))

[State 100, 5]
type = ChangeState
triggerall = animelemtime(4) >= 6
triggerall = (var(55) = [5,7])||(var(55) = [25,28])||(var(55) = [45,48])||(var(55) = [66,69])||(var(55) = [86,89])||(var(55) = [107,109])||(var(55) = [117,119])
triggerall = var(59) != 0 
trigger1 = var(39) = 0
trigger1 = p2bodydist x = [-10,90]
trigger1 = p2statetype = A
value = 615

[State 100, 5]
type = ChangeState
triggerall = animelemtime(4) >= 6
triggerall = (var(55) = [5,7])||(var(55) = [25,28])||(var(55) = [45,48])||(var(55) = [66,69])||(var(55) = [86,89])||(var(55) = [107,109])||(var(55) = [117,119])
triggerall = var(59) != 0 
trigger1 = var(39) = 0
trigger1 = p2bodydist x = [-10,90]
trigger1 = p2statetype != A
trigger1 = vel y > 0
value = 615

[State Land]
type = ctrlset
trigger1 = animelemtime(4) = 6
value = 1

;推开体
[StateDef 163]
type = S
movetype = A
physics = N
anim = 3008
velset = 20,0
ctrl = 0

[State 821, 5]
type = Width
trigger1 = 1
player = 30,30

[state statetypeset]
type = statetypeset
trigger1 = time = 7
physics = S

[State 810, 2]
type = notHitBy
trigger1 = 1
value = SCA
time = 10

[State 810, 2]
type = DestroySelf
trigger1 = root,stateno != 830
trigger1 = Time >= 13
trigger2 = root,stateno = 830
trigger2 = time >=5
;---------------------------------------------------

;推开体
[StateDef 164]
type = S
movetype = A
physics = N
anim = 3008
velset = 0,0
ctrl = 0

[State 821, 5]
type = Width
trigger1 = 1
player = 30,30

[state statetypeset]
type = bindtoroot
trigger1 = 1
pos = 10,-90

[State 810, 2]
type = notHitBy
trigger1 = 1
value = SCA
time = 10

[State 810, 2]
type = DestroySelf
trigger1 = root,stateno != 3201
trigger1 = root,stateno != 3251
;---------------------------------------------------

; Stand
[Statedef 0]
type = S
physics = S
sprpriority = 0

[state 20]
type = ctrlset 
trigger1 = anim = [180,189]
value = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = fvar(14)
trigger1 = Anim != 5
trigger1 = P2Dist X <0
value = 5

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State -2, def]
type = ctrlSet
triggerall = fvar(14) = 1
trigger1 = time = 0
value = 0

[State 0, Turn]
type = Turn
trigger1 = fvar(14)
trigger1 = P2Dist X <0
trigger1 = Anim != ifelse(fvar(10)=1,1,0)
trigger1 = Anim = 5 && AnimElem = 1


[State 0, CtrlSet]
type = CtrlSet
trigger1 = ctrl = 0
trigger1 = roundstate = 3
value = 1

[State 0, VarSet]
type = VarSet
triggerall = fvar(14)
triggerall = !fvar(1)
trigger1 = time = 0
fv = 1
value = 1

[State 0, 1]
type = ChangeAnim
triggerall = Anim != [180,189]
trigger1 = Anim != ifelse(fvar(10)=1,1,0) && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = ifelse(fvar(10)=1,1,0)

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < 2
trigger2 = Time = 4
x = 0

[State 0, 4] ;Are you dead?
type = ChangeState
triggerall = anim = 0
triggerall = alive
trigger1 = time > 500
trigger1 = animtime = 0
trigger1 = random>700
value = 2

[State 29, 5]
type = ChangeState
triggerall = var(59) = 1
trigger1 = vel x !=0
trigger1 = alive
trigger1 = (prevstateno = 0)||(prevstateno = 20)
trigger1 = time = 0
value = ifelse(vel x>0,28,29)

[State 29, 5]
type = ChangeState
triggerall = var(59) = 1
trigger1 = vel x !=0
trigger1 = alive
trigger1 = (prevstateno = 100)
trigger1 = time = 0
value = 27

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050

; Stand
[Statedef 2]
type = S
physics = S
anim = 4
sprpriority = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050

[State 29, 5]
type = Changeanim
trigger1 = time > 100
trigger1 = anim != 2
trigger1 = animtime = 0
trigger1 = random < 400
value = 2

[State 29, 5]
type = ChangeState
trigger1 = P2Dist X <0
value = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = alive
trigger1 = anim = 2
trigger1 = animtime = 0
value = 0


[Statedef 20]
type    = S
physics = S
sprpriority = 0

[state 20]
type = ctrlset 
trigger1 = anim = [180,189]
value = 0

[State -2, def]
type = ctrlSet
triggerall = fvar(14) = 1
trigger1 = time = 0
value = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = fvar(14)
trigger1 = Anim != 5
trigger1 = P2Dist X <0
value = 5

[State 0, ChangeState]
type = ChangeState
trigger1 = fvar(14)
trigger1 = P2MoveType = A
trigger1 = partner,command = "holdback"
trigger1 = inguarddist
value = 120
ctrl = 1

[State 0, Turn]
type = Turn
trigger1 = fvar(14)
trigger1 = P2Dist X <0
trigger1 = Anim != 0
trigger1 = Anim = 5 && AnimElem = 1

[State 0, CtrlSet]
type = CtrlSet
trigger1 = ctrl = 0
trigger1 = roundstate = 3
value = 1

[State 0, VarSet]
type = VarSet
triggerall = fvar(14)
triggerall = !fvar(1)
trigger1 = time = 0
fv = 1
value = 1

[State 20, 1]
type = VelSet
trigger1 = fvar(14)
trigger1 = partner, command = "holdfwd"
trigger2 = command = "holdfwd"
trigger2 = !fvar(14)
x = const(velocity.walk.fwd.x)

[State 20, 2]
type = VelSet
trigger1 = fvar(14)
trigger1 = partner, command = "holdback"
trigger2 = command = "holdback"
trigger2 = !fvar(14)
x = const(velocity.walk.back.x)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
triggerall = Anim != [180,189]
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

[State 40, 6]
type = ChangeState
triggerall = anim = 20
trigger1 = var(59) != 0 && roundstate = 2  
value = ifelse((random<500 && p2bodydist x<140),28,27)
ctrl = 0

[State 40, 6]
type = ChangeState
triggerall = anim = 29
trigger1 = var(59) != 0 && roundstate = 2  
value = ifelse(random<500,29,25)
ctrl = 0

; Stand to Crouch
[Statedef 10]
type    = C
physics = C
anim = ifelse((anim != [180,189]),10,180)

[state 20]
type = ctrlset 
trigger1 = anim = [180,189]
value = 0

[State 10, 1]
type = VelMul
trigger1 = Time = 0
x = .75

[State 10, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;挑逗
[statedef 195]
type = S
anim = 195
velset = 0,0
ctrl = 0

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 4
value = 2995,ifelse(fvar(10)!=1,60,151)
channel = 0

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 5
value = 999,2
channel = 1

[State 399, EnvShake]
type = EnvShake
trigger1 = animelem = 5
ignorehitpause = 1
persistent = 0
time = 15
freq = 80
ampl = -1
phase = 1

[State 3784]
type = Explod
trigger1 = animelem = 5
ignorehitpause = 1 
anim = 395
pos = -25,-2
postype = p1
sprpriority = -3
bindtime = 33
ownpal = 1

[state 195]
type = ctrlset
trigger1 = animelem = 6
value = 1

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;------------------------------------------------
;胜利winner
;------------------------------------------------
[statedef 180]
type = S
velset = 0,0
ctrl = 0

[State 101, 1]
type = varrandom
trigger1 = Time = 0
v        = 8
range   = 4

[state changestate]
type = changestate
trigger1 = anim = 4612
value = 188
ctrl = 1

[state changestate]
type = changestate
trigger1 = fvar(10) = 1
trigger1 = (anim != [181,189]) && (anim != [580,589])
trigger1 = time =0
value = 580
ctrl = 1

[State 101, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (anim != [181,189]) && (anim != [580,589])
value    = 180

[state changestate]
type = changestate
trigger1 = (anim != [181,189]) && (anim != [580,589])
value = 181+var(8)
ctrl = 1

[State 181, 0]
type = AssertSpecial
trigger1 = time = [0,230]
flag = roundnotover

[state changestate]
type = changestate
trigger1 = fvar(10) = 0
trigger1 = (anim != [181,189]) && (anim != [580,589])
trigger1 = time =0
value = 182
ctrl = 1

;------------------------------
;胜利1 winner1
;------------------------------------------------
[statedef 181]
type = S
anim = ifelse(random<600,181,188)
velset = 0,0
ctrl = 0
keyctrl = -1

[State 191, 1]
type = ctrlset
trigger1 = ifelse(var(59) = 0,!MatchOver,1)
trigger1 = time = 80
value = 1

[State 191, 1]
type = ctrlset
triggerall = NumPartner = 0
trigger1 = ifelse(var(59) = 0,!MatchOver,1)
trigger1 = time > 80
value = 0

[State 201, 1] 
type = PlaySnd
triggerall = anim = 181
trigger1 = animelem = 4
value = 180,0

[State 201, 1] 
type = PlaySnd
triggerall = anim = 181
trigger1 = animelem = 12
value = 180,1

[State 201, 1] 
type = PlaySnd
triggerall = anim = 181
trigger1 = animelem = 21
value = 180,2

[State 201, 1] 
type = PlaySnd
triggerall = anim = 188
trigger1 = animelem = 12
value = 180,5

[State 201, 1] 
type = PlaySnd
triggerall = anim = 188
trigger1 = animelem = 16
value = 180,6

[State 201, 1] 
type = PlaySnd
triggerall = anim = 188
trigger1 = animelem = 23
value = 180,7

[State 201, 1] 
type = PlaySnd
triggerall = anim = 188
trigger1 = animelem = 32
value = 180,8

[State 181, 0]
type = AssertSpecial
trigger1 = time = [0,330]
flag = roundnotover

[State 180, 1]
type = ChangeState
triggerall = var(59) = 0 
triggerall = fvar(21) != 1
trigger1 = MatchOver
trigger1 = time >= 190
value = 189

;----------------------------------------------
;胜利2 winner2
;------------------------------------------------
[statedef 182]
type = S
anim = ifelse(random<400,182,187)
velset = 0,0
ctrl = 0
keyctrl = -1

[State 191, 1]
type = ctrlset
trigger1 = ifelse(var(59) = 0,!MatchOver,1)
trigger1 = time = 120
value = 1

[State 191, 1]
type = ctrlset
triggerall = NumPartner = 0
trigger1 = ifelse(var(59) = 0,!MatchOver,1)
trigger1 = time > 120
value = 0

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = ifelse(fvar(10)=0,6050,6051)
pos = 6,-123
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = anim = 187
trigger1 = AnimElem = 12
anim = ifelse(fvar(10)=1,3365,3609)
pos = 0,0
postype = p1
sprpriority = -2
supermove = 1
bindtime = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = anim = 187
trigger1 = AnimElem = 12
anim = ifelse(fvar(10)=0,7655,7656)
pos = -10,-75
postype = p1
sprpriority = 2
supermove = 1
bindtime = 1
ownpal = 1

[State 201, 1] 
type = PlaySnd
trigger1 = animelem = 3
value = 3000,20

[State 201, 1] 
type = PlaySnd
triggerall = anim = 182
trigger1 = animelem = 13
value = 2995,60

[State 201, 1] 
type = PlaySnd
triggerall = anim = 187
trigger1 = animelem = 12
value = 2995,60

[State 201, 1] 
type = PlaySnd
triggerall = anim = 187
trigger1 = animelem = 12
value = 3305,1

[State 399, EnvShake]
type = EnvShake
triggerall = anim = 182
trigger1 = animelem = 14
ignorehitpause = 1
persistent = 0
time = 20
freq = 100
ampl = -3
phase = 1

[State 3784]
type = Explod
triggerall = anim = 182
trigger1 = animelem = 14
ignorehitpause = 1 
anim = 395
pos = -25,-2
postype = p1
sprpriority = -3
bindtime = 33
ownpal = 1

[STate -2]
type = PlaySNd
triggerall = anim = 182
trigger1 = animelem = 14
value = 999,2
channel = 1

[State 181, 0]
type = AssertSpecial
trigger1 = time = [0,230]
flag = roundnotover

[State 180, 1]
type = ChangeState
triggerall = var(59) = 0 
triggerall = fvar(21) != 1
trigger1 = MatchOver
trigger1 = time >= 190
value = 189

;------------------------------------------
;胜利3 winner3
;------------------------------------------------
[statedef 183]
type = S
anim = 183
velset = 0,0
ctrl = 0
keyctrl = -1

[State 191, 1]
type = ctrlset
trigger1 = ifelse(var(59) = 0,!MatchOver,1)
trigger1 = time = 120
value = 1

[State 191, 1]
type = ctrlset
triggerall = NumPartner = 0
trigger1 = ifelse(var(59) = 0,!MatchOver,1)
trigger1 = time > 120
value = 0

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = ifelse(fvar(10)=0,6050,6051)
pos = 6,-123
postype = p1
sprpriority = 5
supermove = 1
bindtime = 1
ownpal = 1

[State 201, 1] 
type = PlaySnd
trigger1 = animelem = 2
value = 180,0

[State 201, 1] 
type = PlaySnd
trigger1 = animelem = 10
value = 180,1

[State 201, 1] 
type = PlaySnd
trigger1 = animelem = 22
value = 180,10

[State 201, 1] 
type = PlaySnd
trigger1 = animelem = 3
value = 3000,20

[State 181, 0]
type = AssertSpecial
trigger1 = time = [0,230]
flag = roundnotover

[State 180, 1]
type = ChangeState
triggerall = var(59) = 0
triggerall = fvar(21) != 1
trigger1 = MatchOver
trigger1 = time >= 190
value = 189

;----------------------------------------------------
;胜利4 winner4
;------------------------------------------------
[statedef 184]
type = S
anim = 184
velset = 0,0
ctrl = 0
keyctrl = -1

[State 191, 1]
type = ctrlset
trigger1 = ifelse(var(59) = 0,!MatchOver,1)
trigger1 = time = 160
value = 1

[State 191, 1]
type = ctrlset
triggerall = NumPartner = 0
trigger1 = ifelse(var(59) = 0,!MatchOver,1)
trigger1 = time > 160
value = 0

[State 201, 1] 
type = PlaySnd
trigger1 = animelem = 3
value = 180,3

[State 201, 1] 
type = PlaySnd
trigger1 = animelem = 25
value = 180,4

[State 181, 0]
type = AssertSpecial
trigger1 = time = [0,230]
flag = roundnotover

[State 180, 1]
type = ChangeState
triggerall = var(59) = 0 
triggerall = fvar(21) != 1
trigger1 = MatchOver
trigger1 = time >= 190
value = 189

;------------------------------------------------
;胜利5 winner5
;------------------------------------------------
[statedef 185]
type = S
anim = 186
velset = 0,0
ctrl = 0
keyctrl = -1

[State 191, 1]
type = ctrlset
trigger1 = ifelse(var(59) = 0,!MatchOver,1)
trigger1 = time = 160
value = 1

[State 191, 1]
type = ctrlset
triggerall = NumPartner = 0
trigger1 = ifelse(var(59) = 0,!MatchOver,1)
trigger1 = time > 160
value = 0

[State 201, 1] 
type = PlaySnd
trigger1 = animelem = 14
value = 180,8
volume = 70

[State 181, 0]
type = AssertSpecial
trigger1 = time = [0,250]
flag = roundnotover

[State 180, 1]
type = ChangeState
triggerall = var(59) = 0 
triggerall = fvar(21) != 1
trigger1 = MatchOver
trigger1 = time >= 190
value = 189

;------------------------------------------------
;胜利6 winner6噬魂之炎
;------------------------------------------------
[statedef 188]
type = S
velset = 0,0
ctrl = 0
keyctrl = -1

[State 191, 1]
type = ctrlset
trigger1 = ifelse(var(59) = 0,!MatchOver,1)
trigger1 = time = 160
value = 1

[State 191, 1]
type = ctrlset
triggerall = NumPartner = 0
trigger1 = ifelse(var(59) = 0,!MatchOver,1)
trigger1 = time > 160
value = 0

;-------------------------------------------------------
;显示胜利头像及字样
;-------------------------------------------
[Statedef 189]
type = S
ctrl = 0
velset = 0,0
sprpriority = -1

[STate 2998]
type = PlaySNd
trigger1 = time = 0
value = 9000,0

[State 191, 1]
type = ctrlset
trigger1 = time = 90
value = 1

[State 191, 1]
type = varset
trigger1 = time = 0
fvar(21) = 1

[State 191, 1]
type = ctrlset
trigger1 = NumEnemy = 0
trigger1 = time >= 91
value = 0

[State 189 , 0]
type = Explod
trigger1 = time = 0
anim = 10000
pos = 0,0
scale = ((FrontEdgeDist+BackEdgeDist)*1.0/280.0),1
sprpriority = 6
postype = left
removetime = -1

[state 189, nofg]
type = assertspecial
trigger1 = 1
flag = NoFG

[state 189, nofg]
type = assertspecial
trigger1 = 1
flag = nomusic

[State 189, blackandwhite]
type = BGPalFX
trigger1 = time = 0
color = 0
time = 500

[State 181, 0]
type = AssertSpecial
trigger1 = time = [0,230]
flag = roundnotover

[State 240 , 0]
type = Explod
trigger1 = time = 0
anim = 10002
pos = 0,0
sprpriority = 7
postype = left
removetime = -1

[State 240 , 0]
type = Explod
triggerall = time = 0
trigger1 = palno = 3
trigger2 = palno = 4
trigger3 = palno = 5
anim = 8500
pos = 140,36
sprpriority = 6
postype = left
removetime = -1

[State 240 , 0]
type = Explod
triggerall = time = 0
trigger1 = palno = 1
trigger2 = palno = 2
anim = 8501
pos = 140,36
sprpriority = 6
postype = left
removetime = -1

[State 240 , 0]
type = Explod
triggerall = time = 0
trigger1 = palno = 2
trigger2 = palno = 3
anim = 8501
pos = 140,36
sprpriority = 6
postype = left
removetime = -1

[State 240 , 0]
type = Explod
triggerall = time = 0
trigger1 = palno = 6
anim = 8502
pos = 140,36
sprpriority = 6
postype = left
removetime = -1

[State 240 , 0]
type = Explod
triggerall = time = 0
trigger1 = palno = 9
trigger2 = palno = 10
trigger3 = palno = 11
anim = 8503
pos = 140,36
sprpriority = 6
postype = left
removetime = -1

[State 240 , 0]
type = Explod
triggerall = time = 0
trigger1 = palno = 7
trigger2 = palno = 8
anim = 8504
pos = 140,36
sprpriority = 6
postype = left
removetime = -1

[State 240 , 0]
type = Explod
triggerall = time = 0
trigger1 = palno = 12
anim = 8505
pos = 140,36
sprpriority = 6
postype = left
removetime = -1

[State 240 , 0]
type = Explod
trigger1 = time = 0
anim = ifelse(random > 500,9001,9002)
pos = 60,186
sprpriority = 8
postype = left
removetime = -1

[State 184, 0]
type = PlaySnd
trigger1 = time = 0
value = F180,0

[State 184, 1]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1
;-------------------------------------------------------------------------
;亮相
;-------------------------------------------------------------------------
[Statedef 190]
type = S
ctrl = 0
anim = 190
velset = 0,0

[state 830]
type = nothitby
trigger1 = 1
value = sac
time = 5
ignorehitpause=1

[State 101, 1]
type = varrandom
trigger1 = Time = 0
v        = 8
range   = 4

[state 190]
type = changestate
trigger1 = palno = [7,12]
trigger1 = time = 0
value = 590

[state 190]
type = changestate
trigger1 = palno = [1,6]
trigger1 = var(8)<=3
trigger1 = time = 0
value = 191+var(8)

[state 190]
type = changestate
trigger1 = palno = [1,6]
trigger1 = var(8)>=4
trigger1 = time = 0
value = 192+var(8)

;应龙模式
[Statedef 191]
type = S
ctrl = 0
anim = 191
velset = 0,0

[state 830]
type = nothitby
trigger1 = 1
value = sac
time = 5
ignorehitpause=1

[STate 2998]
type = PlaySNd
triggerall = anim = 191
trigger1 = Animelem = 13
value = 190,2

[STate 2998]
type = PlaySNd
triggerall = anim = 191
trigger1 = Animelem = 27
value = 190,3

[STate 2998]
type = PlaySNd
triggerall = anim = 191
trigger1 = Animelem = 30
value = 999,2

[State 399, EnvShake]
type = EnvShake
triggerall = anim = 191
trigger1 = Animelem = 30
ignorehitpause = 1
persistent = 0
time = 20
freq = 100
ampl = -3
phase = 1

[State 3784]
type = Explod
triggerall = anim = 191
trigger1 = Animelem = 30
ignorehitpause = 1 
anim = 395
pos = -25,-2
postype = p1
sprpriority = -3
bindtime = 33
ownpal = 1

[state 190]
type = changeanim
trigger1 = animtime = 0
value = ifelse(fvar(10)=1,1,0)

[State 199]
type = AssertSpecial
trigger1 = Time = [0,230]
flag = Intro

[Statedef 192]
type = S
ctrl = 0
anim = 192
velset = 0,0

[state 830]
type = nothitby
trigger1 = 1
value = sac
time = 5
ignorehitpause=1

[STate 2998]
type = changestate
trigger1 = fvar(10)!=0
value = 191

[state 779,playsnd]
type = playsnd
triggerall = anim = 192
trigger1 = Animelem = 5
trigger2 = Animelem = 7
trigger3 = Animelem = 9
trigger4 = Animelem = 11
trigger5 = Animelem = 13
trigger6 = Animelem = 14
trigger7 = Animelem = 16
trigger8 = Animelem = 18
trigger9 = Animelem = 19
trigger10 = Animelem = 21
trigger11 = Animelem = 23
trigger12 = Animelem = 25
trigger13 = Animelem = 27
value = 779,0

[State 190]
type = Explod
triggerall = anim = 192
trigger1 = Animelem = 6
trigger2 = Animelem = 13
trigger3 = Animelem = 20
anim = 779
pos = -36,9
supermove = 1
sprpriority = 2
bindtime = 1
palfx.time = 38
palfx.add = 184,28,0
palfx.mul = 248,168,104
palfx.sinadd= 138,118,14,16 
ownpal = 0

[State 190]
type = Explod
triggerall = anim = 192
trigger1 = Animelem = 8
trigger2 = Animelem = 15
trigger3 = Animelem = 22
anim = 779
pos = -36,-9
supermove = 1
sprpriority = -2
bindtime = 1
palfx.time = 38
palfx.add = 184,28,0
palfx.mul = 248,168,104
palfx.sinadd= 138,118,14,16 
ownpal = 0

[State 190]
type = Explod
triggerall = anim = 192
trigger1 = Animelem = 10
trigger2 = Animelem = 17
trigger3 = Animelem = 24
anim = 779
pos = 45,9
supermove = 1
sprpriority = 2
bindtime = 1
palfx.time = 38
palfx.add = 184,28,0
palfx.mul = 248,168,104
palfx.sinadd= 138,118,14,16 
ownpal = 0

[State 190]
type = Explod
triggerall = anim = 192
trigger1 = Animelem = 12
trigger2 = Animelem = 19
trigger3 = Animelem = 26
trigger4 = Animelem = 28
anim = 779
pos = 45,-9
supermove = 1
sprpriority = -2
bindtime = 1
palfx.time = 38
palfx.add = 184,28,0
palfx.mul = 248,168,104
palfx.sinadd= 138,118,14,16 
ownpal = 0

[STate 2998]
type = PlaySNd
triggerall = anim = 192
trigger1 = Animelem = 6
value = 2995,100

[STate 2998]
type = PlaySNd
triggerall = anim = 192
trigger1 = animelem = 30
value = 2995,60

[STate 2998]
type = PlaySNd
triggerall = anim = 192
trigger1 = Animelem = 31
value = 999,2

[State 399, EnvShake]
type = EnvShake
triggerall = anim = 192
trigger1 = Animelem = 31
ignorehitpause = 1
persistent = 0
time = 20
freq = 100
ampl = -3
phase = 1

[State 3784]
type = Explod
triggerall = anim = 192
trigger1 = Animelem = 31
ignorehitpause = 1 
anim = 395
pos = -25,-2
postype = p1
sprpriority = -3
bindtime = 33
ownpal = 1

[STate 2998]
type = changeanim
trigger1 = anim != ifelse(fvar(10)=1,1,0)
trigger1 = Animtime = 0
value = ifelse(fvar(10)=1,1,0)

[State 199]
type = AssertSpecial
trigger1 = Time = [0,400]
flag = Intro

[statedef 193]
type = s
ctrl = 0
velset = 0,0
anim = ifelse((random <= 500),193,196)

[state 830]
type = nothitby
trigger1 = 1
value = sac
time = 5
ignorehitpause=1

[STate 193]
type = PlaySNd
trigger1 = anim = 196
trigger1 = Animelem = 2
value = 190,0
channel = 0

[STate 193]
type = PlaySNd
trigger1 = anim = 196
trigger1 = Animelem = 10
value = 190,1
channel = 0

[STate 193]
type = PlaySNd
trigger1 = anim = 193
trigger1 = Animelem = 26
trigger2 = anim = 196
trigger2 = Animelem = 33
value = 2995,60
channel = 0

[STate 193]
type = PlaySNd
triggerall = anim = 193
trigger1 = Animelem = 8
trigger2 = Animelem = 14
value = 193,0

[STate 193]
type = PlaySNd
trigger1 = anim = 193
trigger1 = Animelem = 27
trigger2 = anim = 196
trigger2 = Animelem = 34
value = 999,2

[State 399, EnvShake]
type = EnvShake
trigger1 = anim = 193
trigger1 = animelem = 27
trigger2 = anim = 196
trigger2 = animelem = 34
ignorehitpause = 1
persistent = 0
time = 30
freq = 100
ampl = -3
phase = 1

[State 3784]
type = Explod
trigger1 = anim = 193
trigger1 = animelem = 25
trigger2 = anim = 196
trigger2 = animelem = 34
ignorehitpause = 1 
anim = 395
pos = -25,-2
postype = p1
sprpriority = -3
bindtime = 33
ownpal = 1

[STate 2998]
type = changeanim
trigger1 = anim != ifelse(fvar(10)=1,1,0)
trigger1 = Animtime = 0
value = ifelse(fvar(10)=1,1,0)

[State 199]
type = AssertSpecial
trigger1 = Time = [0,400]
flag = Intro

[statedef 194]
type = s
ctrl = 0
velset = 0,0
anim = 194

[state 830]
type = nothitby
trigger1 = 1
value = sac
time = 5
ignorehitpause=1

[STate 2998]
type = changestate
trigger1 = fvar(10)!=0
value = 196

[STate 2998]
type = PlaySNd
triggerall = anim = 194
trigger1 = Animelemtime(1) = 10
value = 190,4
channel = 0

[STate 2998]
type = PlaySNd
triggerall = anim = 194
trigger1 = Animelem = 20
value = 190,5
channel = 0

[STate 2998]
type = PlaySNd
triggerall = anim = 194
trigger1 = Animelem = 31
value = 190,6
channel = 0

[STate 2998]
type = PlaySNd
triggerall = anim = 194
trigger1 = Animelem = 21
value = 1000,1

[State 3305, 2]
type = palfx
trigger1 = time = [118,163] 
time = 1
add = 184,28,0
mul = 248,168,104
sinadd= 138,118,14,16 
color = 0 
invertall = 1

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 42
value = 2995,60
channel = 0

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 43
value = 999,2

[State 399, EnvShake]
type = EnvShake
triggerall = anim = 194
trigger1 = animelem = 35
trigger2 = animelem = 43
ignorehitpause = 1
time = 30
freq = 100
ampl = -3
phase = 1

[State 3784]
type = Explod
trigger1 = Animelem = 43
ignorehitpause = 1 
anim = 395
pos = -25,-2
postype = p1
sprpriority = -3
bindtime = 33
ownpal = 1

[state 751]
type = playsnd
trigger1 = AnimElem = 35
value = 2200,1

[State 3784]
type = Explod
trigger1 = (Numexplod(750) = 0) && (AnimElem = 35)
ignorehitpause = 1 
anim = 80
id = 750
pos = 0,0
postype = p1
sprpriority = 7
ownpal = 1

[STate 2998]
type = changeanim
trigger1 = anim != ifelse(fvar(10)=1,1,0)
trigger1 = Animtime = 0
value = ifelse(fvar(10)=1,1,0)

[State 199]
type = AssertSpecial
trigger1 = Time = [0,400]
flag = Intro

[statedef 196]
type = s
ctrl = 0
velset = 0,0
anim = ifelse(random<=500,190,198)

[state 830]
type = nothitby
trigger1 = 1
value = sac
time = 5
ignorehitpause=1

[STate 2998]
type = PlaySNd
triggerall = anim = 198
trigger1 = Animelem = 10
value = 190,7
channel = 0

[STate 2998]
type = PlaySNd
triggerall = anim = 198
trigger1 = Animelem = 21
value = 190,8
channel = 0

[STate 2998]
type = PlaySNd
trigger1 = anim = 190
trigger1 = Animelem = 7
trigger2 = anim = 198
trigger2 = animelem = 21
value = 600,5

[STate 2998]
type = PlaySNd
trigger1 = anim = 190
trigger1 = Animelemtime(1) = 25
value = 190,10

[STate 2998]
type = PlaySNd
trigger1 = anim = 190
trigger1 = Animelem = 7
value = 190,3

[State 3305, 2]
type = explod
trigger1 = anim = 190
trigger1 = Animelem = 6
sprpriority = 3
anim = 706
pos = -80

[State 3305, 2]
type = explod
trigger1 = anim = 190
trigger1 = Animelem = 10
trigger2 = anim = 198
trigger2 = animelem = 24
sprpriority = -3
id = 199
pos = 20,-20
anim = 199
vel = -1.5,-4
accel = 0,.25
removetime = 50

[State 3305, 2]
type = explod
trigger1 = anim = 190
trigger1 = Animelem = 4
sprpriority = -3
id = 6105
pos = 0,0
anim = 6105

[STate 2998]
type = changeanim
trigger1 = anim != ifelse(fvar(10)=1,1,0)
trigger1 = Animtime = 0
value = ifelse(fvar(10)=1,1,0)

[State 199]
type = AssertSpecial
trigger1 = Time = [0,400]
flag = Intro

;女魃模式登场
[statedef 590]
type = s
ctrl = 0
velset = 0,0
anim = 590

[State 101, 1]
type = varrandom
trigger1 = Time = 0
v        = 8
range   = 2

[state 830]
type = nothitby
trigger1 = 1
value = sac
time = 5
ignorehitpause=1

[state changestate]
type = changestate
trigger1 = var(8) > 0
trigger1 = time = 0
value = 590+var(8)

[STate 2998]
type = PlaySNd
triggerall = anim = 590
trigger1 = Animelem = 2
value = 590,0
channel = 0

[STate 2998]
type = PlaySNd
triggerall = anim = 590
trigger1 = Animelem = 7
value = 590,1
channel = 0

[STate 2998]
type = PlaySNd
trigger1 = anim = 590
trigger1 = Animelem = 2
value = 3000,1

[STate 2998]
type = PlaySNd
trigger1 = anim = 590
trigger1 = Animelemtime(21) = 0
value = 3305,0

[STate 2998]
type = PlaySNd
trigger1 = anim = 590
trigger1 = Animelem = 23
value = 3300,0

[STate 2998]
type = PlaySNd
trigger1 = anim = 590
trigger1 = Animelem = 26
value = 590,2

[State 3305, 2]
type = explod
trigger1 = anim = 590
trigger1 = Animelem = 2
sprpriority = 5
anim = 3021
pos = -27,11
id = 590
removetime = 9999
bindtime = 9999

[State 3305, 2]
type = removeexplod
trigger1 = anim = 590
trigger1 = Animelem = 21
id = 590

[State 3305, 2]
type = explod
trigger1 = anim = 590
trigger1 = Animelem = 21
sprpriority = -3
id = 3365
pos = -10,0
anim = 3365


[State 3305, 2]
type = explod
triggerall = anim = 590
triggerall = time%5 = 0
trigger1 = Animelemtime(21) >= 0
trigger1 = Animelemtime(26) < 0
sprpriority = ifelse(random<600,-5,4)
id = 6105
pos = -20,-60
random = 80,80
anim = ifelse(random<800,ifelse(random<500,64,65),63)

[STate 2998]
type = changeanim
trigger1 = anim != ifelse(fvar(10)=1,1,0)
trigger1 = Animtime = 0
value = ifelse(fvar(10)=1,1,0)

[State 199]
type = AssertSpecial
trigger1 = Time = [0,400]
flag = Intro

[statedef 591]
type = s
ctrl = 0
velset = 0,0
anim = 591

[state 830]
type = nothitby
trigger1 = 1
value = sac
time = 5
ignorehitpause=1

[STate 2998]
type = PlaySNd
triggerall = anim = 591
trigger1 = Animelem = 7
value = 591,0
channel = 0

[STate 2998]
type = PlaySNd
triggerall = anim = 591
trigger1 = Animelem = 16
value = 591,1
channel = 0

[STate 2998]
type = PlaySNd
trigger1 = anim = 591
trigger1 = Animelem = 6
value = 193,0

[State 3305, 2]
type = explod
trigger1 = anim = 591
trigger1 = Animelem = 6
sprpriority = 5
id = 732
pos = -37,-105
anim = 732

[STate 2998]
type = changeanim
trigger1 = anim != ifelse(fvar(10)=1,1,0)
trigger1 = Animtime = 0
value = ifelse(fvar(10)=1,1,0)

[State 199]
type = AssertSpecial
trigger1 = Time = [0,400]
flag = Intro

[statedef 592]
type = s
ctrl = 0
velset = 0,0
anim = 592

[state 830]
type = nothitby
trigger1 = 1
value = sac
time = 5
ignorehitpause=1

[STate 2998]
type = PlaySNd
triggerall = anim = 592
trigger1 = Animelem = 7
value = 592,0
channel = 0

[STate 2998]
type = PlaySNd
trigger1 = anim = 592
trigger1 = Animelem = 6
value = 193,0

[State 3305, 2]
type = explod
trigger1 = anim = 592
trigger1 = Animelem = 6
sprpriority = 5
id = 732
pos = -37,-105
anim = 732

[STate 2998]
type = changeanim
trigger1 = anim != ifelse(fvar(10)=1,1,0)
trigger1 = Animtime = 0
value = ifelse(fvar(10)=1,1,0)

[State 199]
type = AssertSpecial
trigger1 = Time = [0,400]
flag = Intro

;==================================================================
;女魃模式胜利
[statedef 580]
type = s
ctrl = 0
velset = 0,0
anim = 580

[State 101, 1]
type = varrandom
trigger1 = Time = 0
v        = 8
range   = 1

[State 191, 1]
type = ctrlset
trigger1 = ifelse(var(59) = 0,!MatchOver,1)
trigger1 = time = 80
value = 1

[State 191, 1]
type = ctrlset
triggerall = NumPartner = 0
trigger1 = ifelse(var(59) = 0,!MatchOver,1)
trigger1 = time > 80
value = 0

[state 830]
type = nothitby
trigger1 = 1
value = sac
time = 5
ignorehitpause=1

[state changestate]
type = changestate
trigger1 = var(8) > 0
trigger1 = time = 0
value = 580+var(8)

[STate 2998]
type = PlaySNd
triggerall = anim = 580
trigger1 = Animelem = 10
value = 590,2
volume = 130
channel = 0

[STate 2998]
type = PlaySNd
triggerall = anim = 580
trigger1 = Animelem = 16
value = 580,0
channel = 0

[State 199]
type = AssertSpecial
trigger1 = Time = [0,240]
flag = roundnotover

[State 180, 1]
type = ChangeState
triggerall = var(59) = 0 
triggerall = fvar(21) != 1
trigger1 = MatchOver
trigger1 = time >= 190
value = 189

[statedef 581]
type = s
ctrl = 0
velset = 0,0
anim = 581

[state 830]
type = nothitby
trigger1 = 1
value = sac
time = 5
ignorehitpause=1

[State 191, 1]
type = ctrlset
trigger1 = ifelse(var(59) = 0,!MatchOver,1)
trigger1 = time = 80
value = 1

[State 191, 1]
type = ctrlset
triggerall = NumPartner = 0
trigger1 = ifelse(var(59) = 0,!MatchOver,1)
trigger1 = time > 80
value = 0

[STate 2998]
type = PlaySNd
triggerall = anim = 581
trigger1 = Animelem = 7
value = 590,2
volume = 130
channel = 0

[STate 2998]
type = PlaySNd
triggerall = anim = 581
trigger1 = Animelem = 9
value = 193,0
channel = 0

[STate 2998]
type = PlaySNd
triggerall = anim = 581
trigger1 = Animelem = 11
value = 4600,0
channel = 0

[State 3305, 2]
type = explod
trigger1 = anim = 581
trigger1 = time = 224
sprpriority = 5
anim = 586
pos = 0,-65
id = 581
removetime = 9999
bindtime = 9999

[State 704, 4]
type = Explod
trigger1 = anim = 581
trigger1 = time = 224
sprpriority = 3
anim = 86
id = 86
removetime = 9999
bindtime = 9999
pos = 0,0
postype = P1
supermove = 1

[State 704, 4]
type = Explod
trigger1 = anim = 581
trigger1 = time = 224
sprpriority = -3
anim = 3365
id = 86
removetime = 9999
bindtime = 9999
pos = 0,0
postype = P1
supermove = 1

[State 704, 2]
type = PlaySnd
trigger1 = time>224
trigger1 = time%40 = 0 
value = 3305,0

[STate 2998]
type = PlaySNd
trigger1 = anim = 581
trigger1 = Animelem = 18
value = 3000,1

[State 199]
type = AssertSpecial
trigger1 = Time = [0,400]
flag = roundnotover

[State 180, 1]
type = ChangeState
triggerall = var(59) = 0 
triggerall = fvar(21) != 1
trigger1 = MatchOver
trigger1 = time >= 290
value = 189
;---------------------------------------------------------------------------
; Jump Start
[Statedef 40]
type    = S
physics = S
ctrl = 0

[State 40, 6]
type = ChangeState
triggerall = var(59) != 0 && roundstate = 2  
triggerall = fvar(10) = 0
triggerall = (var(55) = [10,11])||(var(55) = [20,22])||(var(55) = [40,43])||(var(55) = [60,64])||(var(55) = [80,86])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = Time = 0
value = 25
ctrl = 0

[State 40, 6]
type = ChangeState
triggerall = var(59) != 0 && roundstate = 2  
triggerall = fvar(10) != 0
triggerall = (var(55) = [10,11])||(var(55) = [20,22])||(var(55) = [44,43])||(var(55) = [6,64])||(var(55) = [80,86])||(var(55) = [102,109])||(var(55) = [112,119])
trigger1 = Time = 0
value = 25
ctrl = 0

[State 40, 6]
type = ChangeState
triggerall = var(59) != 0 && roundstate = 2  
trigger1 = Time = 0
value = 0
ctrl = 1

[State 40, changeanim]
type = changeanim
trigger1 = Time = 0
value = ifelse((anim != [180,189]),40,180)

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 1]
type = VarSet
trigger1 = Time = 0
fvar(8) = 0

[State 40, 2]
type = VarSet
trigger1 = fvar(14)
trigger1 = partner, command = "holdfwd"
trigger2 = !fvar(14)
trigger2 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = fvar(14)
trigger1 = partner, command = "holdback"
trigger2 = !fvar(14)
trigger2 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, AI]
type = VarSet
triggerall = var(59) = 1
trigger1 = time = 0
trigger1 = p2bodydist x > 0
fvar(8) = 4

[State 40, 5]
type = VarSet
triggerall = fvar(8) != [4,7]
trigger1 = !fvar(14)
trigger1 = Command = "holdfwd"
trigger2 = fvar(14)
trigger2 = partner, Command = "holdfwd"
fvar(8) = 1

[State 40, 5]
type = VarSet
triggerall = fvar(8) != [4,7]
trigger1 = !fvar(14)
trigger1 = Command != "holdfwd"
trigger1 = Command != "holdback"
trigger2 = fvar(14)
trigger2 = partner, Command != "holdfwd"
trigger2 = partner,Command != "holdback"
fvar(8) = 2

[State 40, 6]
type = VarSet
triggerall = fvar(8) != [4,7]
trigger1 = !fvar(14)
trigger1 = Command = "holdback"
trigger2 = fvar(14)
trigger2 = partner,Command = "holdback"
fvar(8) = 2

[State 40, 7]
type = VarSet
triggerall = Time =0
trigger1 = !fvar(14)
trigger1 = Command = "longjump"
trigger1 = Command = "holdfwd"
trigger2 = fvar(14)
trigger2 = partner, Command = "longjump"
trigger2 = partner, Command = "holdfwd"
trigger3 = PrevStateNo = 100 ;RUN_FWD
fvar(8) = 4

[State 40, 8]
type = VarSet
triggerall = Time = 0
trigger1 = !fvar(14)
trigger1 = Command = "holdback"
trigger1 = Command = "longjump"
trigger2 = fvar(14)
trigger2 = partner, Command = "holdback"
trigger2 = partner, Command = "longjump"
fvar(8) = 5

[State 40, 8]
type = VarSet
triggerall = Time = 0
trigger1 = !fvar(14)
trigger1 = Command != "holdfwd"
trigger1 = Command != "holdback"
trigger1 = Command = "longjump"
trigger2 = fvar(14)
trigger2 = partner,Command != "holdfwd"
trigger2 = partner, Command != "holdback"
trigger2 = partner, Command = "longjump"
fvar(8) = 6

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = fvar(8) = 4
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = fvar(8) = 5
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.back.x)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = fvar(8) = 6
trigger1 = sysvar(1) = 1
y = const(velocity.runjump.y)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Jump Up
[Statedef 50]
type    = A
physics = A

[State 40, 10]
type = VarSet
triggerall = Time = 0
trigger1 = !fvar(14)
trigger1 = Command != "holdup"
trigger2 = fvar(14)
trigger2 = partner,Command != "holdup"
fvar(8) = 7

[State 40, 5]
type = VelSet
triggerall = Time = 0
trigger1 = fvar(8) = 7
y = -6

[State 50, CTRL LIMITTER] ;Can't attack after recovery
type = ctrlset
trigger1 = Time = 0
trigger1 = prevstateno = 5040
trigger1 = prevstateno = 5210
value = 0

[State 50, PLAYSND] 
type = PlaySnd
triggerall = fvar(8) = [1,3]
trigger1 = Time = 0
value = 1,3
volume = 60

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
triggerall = fvar(8) = [1,3]
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

[State 75, 2] ; Play sound when jumping (Shadow)
type = PlaySnd
trigger1 = fvar(8) = [4,6]
triggerall = Time = 0
trigger1 = fvar(14) = 1
trigger1 = partner,Command = "holdup"
trigger2 = fvar(14) = 0
trigger2 = Command = "holdup"
value = 1,4
volume = 10

[State 75, 3] ; Shadows
type = Afterimage
triggerall = Time = 0
trigger1 = fvar(8) = [4,6]
time = 24
PalBright = 0, 0, 0
PalContrast =  128,128,128
PalAdd = 0, 0, 0
PalMul = 1,1,1
Length = 10
timegap = 2
FrameGap = 4
trans = add1 

[State 75, 10]
type = ChangeAnim
triggerall = fvar(8)=[4,6]
triggerall = Time = 0
triggerall = Vel X = 0
trigger1 = fvar(14) = 1
trigger1 = partner,Command = "holdup"
trigger2 = fvar(14) = 0
trigger2 = Command = "holdup"
value = 41

[State 75, 11] ;Short
type = ChangeAnim
trigger1 = (fvar(8)=7)
trigger1 = Time = 0
trigger1 = Vel X = 0
value = ifelse(SelfAnimExist(2042),2042,41)

[State 75, 12]
type = ChangeAnim
triggerall = fvar(8)=[4,6]
triggerall = Time = 0
triggerall = Vel X > 0
trigger1 = fvar(14) = 1
trigger1 = partner,Command = "holdup"
trigger2 = fvar(14) = 0
trigger2 = Command = "holdup"
value = 42

[State 201, 13] ;Short
type = ChangeAnim
triggerall = (fvar(8)=7)
trigger1 = Time = 0
trigger1 = Vel X > 0
value = ifelse(SelfAnimExist(2042),2042,42)

[State 201, 14]
type = ChangeAnim
triggerall = fvar(8)=[4,6]
triggerall = Time = 0
triggerall = Vel X < 0
trigger1 = fvar(14) = 1
trigger1 = partner,Command = "holdup"
trigger2 = fvar(14) = 0
trigger2 = Command = "holdup"
value = 43

[State 201, 15] ;Short
type = ChangeAnim
triggerall = (fvar(8)=7)
trigger1 = Time = 0
trigger1 = Vel X < 0
value = ifelse(SelfAnimExist(2042),2042,43)


;---------------------------------------
;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
ctrl = 0
facep2 = 1
anim = 47

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = !fvar(14)
trigger1 = Time = 1
value = 1

[State 0, VarSet]
type = VarSet
triggerall = fvar(14)
triggerall = !fvar(1)
trigger1 = Time = 1
fv = 1
value = 1

[State 52, 4]
type = ChangeState
triggerall = var(59) = 1
trigger1 = p2movetype != A
trigger1 = p2bodydist X <= 65
trigger1 = AnimTime = 0
value = 410

[state 52]
type = changestate
triggerall = var(59) = 1
triggerall = P2movetype = A
trigger1 = random <= 750
trigger1 = animtime=0
trigger1 = p2bodydist X <= 50
value = 1000


[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------

;---------------------------------------------------------------------------
;-------------------------------------------------------------------


; RUN_FWD
[Statedef 100]
type = S
physics = S
sprpriority = 0

[State 0, CtrlSet]
type = CtrlSet
triggerall = !fvar(14)
trigger1 = ctrl = 0
trigger1 = roundstate = 3
value = 1

[State -2, def]
type = ctrlSet
triggerall = fvar(14) = 0
trigger1 = ctrl = 0
value = 1

[State 0, VarSet]
type = VarSet
triggerall = fvar(14)
trigger1 = fvar(1) = 0
fv = 1
value = 1

[State 100, 1]
type = VelSet
trigger1 = time > 3
trigger2 = time > 3
trigger2 = var(59) = 1
;trigger2 = p2life != 0
;trigger2 = p2bodydist x >= 75
x = const(velocity.run.fwd.x)

; Play sound when running
[State 100, 2]
type = PlaySnd
triggerall = Anim = 100
trigger1 = AnimElemtime(3) = 0
trigger2 = AnimElemtime(6) = 0
value = 100,0
volume = 80

[State 100, 4]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 100 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 100

[State 100,3]
type = ChangeState
triggerall = var(59) = 0
trigger1 = !fvar(14) 
trigger1 = Command != "holdfwd" && Time >= 10
trigger2 = fvar(14) 
trigger2 = partner,Command != "holdfwd" && Time >= 10
value = 101
ctrl = 1

[State 100, 4]
type = ChangeState
triggerall = var(59) = 0
trigger1 = command = "holdup"
trigger1 = !fvar(14) 
trigger2 = fvar(14)
trigger2 = partner,command = "holdup"
value = 40

[State 100, 4]
type = ChangeState
triggerall = var(59) = 0
trigger1 = command != "holdfwd"
trigger1 = !fvar(14) 
trigger2 = fvar(14)
trigger2 = partner,command != "holdfwd"
value = 101

[State 100, 5]
type = ChangeState
triggerall = var(59) = 1
trigger1 = P2BodyDist x <= 40
trigger1 = P2MoveType = A
value = ifelse(fvar(10)!=1,1003,1090)

[State 100, 4]
type = ChangeState
triggerall = time >= 12
trigger1 = var(59) = 1
trigger1 = InGuardDist
trigger1 = ifelse((P2MoveType = H),(p2stateno = [5100,5150]),1)
value = 101
ctrl = 1

[State 100, 6]
type = AssertSpecial
trigger1 = 1
flag = NoWalk
;------------------------------------
; Run end to Stand
[Statedef 101]
type = S
physics = S
ctrl = ifelse(fvar(14),0,1)

[State 101, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = anim != 101
value    = 101

[State 101, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------
; Run end to Stand
[Statedef 105]
type = a
physics = N
velset = 0,0
ctrl = ifelse(fvar(14),0,1)

[State 101, 1]
type = ChangeAnim
trigger1 = Time = 0
value    = 105

[State 101, 1]
type = velset
trigger1 = Time = 0
y = -4
x = -4

[State 101, 1]
type = velset
trigger1 = animelem = 4
x = 0

[State 101, 1]
type = posset
trigger1 = pos y > 0
trigger2 = animelem = 4
y = 0

[State 101, 1]
type = posadd
trigger1 = animelem = 5
x = -10

[State 101, 1]
type = posadd
trigger1 = animelem = 4
trigger2 = animelem = 7
x = -26

[State 101, 1]
type = veladd
trigger1 = animelemtime(1) >= 0
trigger1 = animelemtime(4) <0
y = .40

[State 101, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;回避
[Statedef 112]
type = S
movetype = I
physics = N
anim = 112
poweradd = 20
facep2 = 1
velset = 0,0
ctrl = 0

[State 116]
type = HitBy
trigger1 = time >= 0
value = SCA, NT, ST, HT
time = 1

[State 116]
type = notHitBy
triggerall = time >= 0
trigger1 = (enemy,numhelper > 0) && (EnemyNear,statetype != L)
trigger2 = (enemy,numproj > 0) && (EnemyNear,statetype != L)
trigger3 = p2bodydist x > 5
trigger4 = (var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
value = sac
time = 1

[State 1300,AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 15
length = 5
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = 1,1,1
timegap = 2
trans = add1

[State 210, 1]
type = PlaySnd
triggerall = fvar(10) = 0
trigger1 = Time = 5
trigger1 = Random < 500
value = 112,0
channel = 0

[State 116]
type = SprPriority
trigger1 = Time = 8
value = -1

[State 116]
type = PlayerPush
trigger1 = Time < 24
value = 0

[State 112]
type = PlayerPush
trigger1 = Time >= 24
value = 1

;AI公用
[State -1]
type = ChangeState
value = ifelse(enemy, vel x > 0,117,ifelse(random<500,ifelse(random<500,112,116),ifelse(random<400,112,117)))
triggerall = var(59) != 0 && roundstate = 2 
triggerall = animtime =0 
triggerall = (var(55) = [80,81])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = statetype != A
triggerall = p2bodydist x < 80
trigger1 = (enemy,numhelper > 20) && (EnemyNear,statetype != L)
trigger2 = (enemy,numproj > 20) && (EnemyNear,statetype != L)

[State -1]
type = ChangeState
value = 113
triggerall = var(59) != 0 && roundstate = 2 
triggerall = time =[15,30] 
triggerall = (var(55) = [10,13])||(var(55) = [20,24])||(var(55) = [40,45])||(var(55) = [60,66])||(var(55) = [80,88])
triggerall = statetype != A
triggerall = p2bodydist x = [0,ifelse(fvar(10)=0,110,118)]
trigger1 = EnemyNear,HitDefAttr = SC,NA,SA,HA
trigger2 = (enemy,numhelper > var(35)) && (EnemyNear,statetype != L) 
trigger3 = (enemy,numproj > 0) && (EnemyNear,statetype != L)

[State -1]
type = ChangeState
value = 113
triggerall = var(59) != 0 && roundstate = 2 
triggerall = time =[15,30] 
triggerall = (var(55) = [100,108])||(var(55) = [110,118])
triggerall = statetype != A
triggerall = p2bodydist x = [0,ifelse(fvar(10)=0,110,100)]
triggerall = p2statetype != A
trigger1 = EnemyNear,HitDefAttr = SC,NA

;AI青龙
[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = p2bodydist X = [-30,30]
triggerall = animtime =0
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = random<360
triggerall = p2statetype != A
trigger1 = p2stateno = [0,160]
trigger2 = P2movetype = A
value = ifelse(random<500 && numenemy=1,960,930)

[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 11)||(var(55) = [20,21])||(var(55) = [40,42])||(var(55) = [60,64])||(var(55) = [80,87])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = animtime =0
trigger1 = p2stateno = [0,160]
trigger1 = p2bodydist X = [-5,5]
value = ifelse(random<500,370,380)

[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = p2stateno = [0,152] 
triggerall = animtime =0
triggerall = (var(55) = 11)||(var(55) = [20,21])||(var(55) = [40,42])||(var(55) = [60,64])||(var(55) = [80,87])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = (enemy,numhelper > var(35)) && (EnemyNear,statetype != L) 
trigger2 = (enemy,numproj > 0) && (EnemyNear,statetype != L)
value = ifelse(random <300,117,116)

[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = p2stateno = [5000,5300]
triggerall =  (var(55) = 11)||(var(55) = [20,21])||(var(55) = [40,42])||(var(55) = [60,64])||(var(55) = [80,87])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = animtime =0
trigger1 = (enemy,numhelper > var(35)) && (EnemyNear,statetype != L) 
trigger2 = (enemy,numproj > 0) && (EnemyNear,statetype != L)
value = ifelse(random <300,117,116)

[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 41)||(var(55) = [60,61])||(var(55) = [80,82])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = P2movetype = A
triggerall = power >= 1000
trigger1 = animtime =0 
trigger1 = p2bodydist X = [55,120]
value = ifelse(power<3000,3000,3010)

[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 41)||(var(55) = [60,61])||(var(55) = [80,82])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = P2movetype = A
triggerall = power >= 2000
trigger1 = animtime =0 
trigger1 = p2bodydist X = [-45,54]
value = ifelse(power<3000,ifelse(random<=400,3410,3650),3010)

[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall =  (var(55) = 21)||(var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,84])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = P2movetype = A
trigger1 = random <= 750
trigger1 = animtime =0 
trigger1 = p2bodydist X =[-35,50]
value = 1000  

;AI凤凰
[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall =  (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = p2bodydist X = [-30,30]
triggerall = animtime =0
triggerall = random<360
triggerall = p2statetype != A
trigger1 = p2stateno = [0,160]
trigger2 = P2movetype = A
value = ifelse(random<500 && numenemy=1,960,980)

[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 11)||(var(55) = [20,21])||(var(55) = [40,42])||(var(55) = [60,64])||(var(55) = [80,87])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = animtime =0
trigger1 = p2stateno = [0,160]
trigger1 = p2bodydist X = [-5,5]
value = ifelse(random<500,370,380)

[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = p2stateno = [0,152] 
triggerall = (var(55) = 11)||(var(55) = [20,21])||(var(55) = [40,42])||(var(55) = [60,64])||(var(55) = [80,87])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = animtime =0
trigger1 = (enemy,numhelper > var(35)) && (EnemyNear,statetype != L) 
trigger2 = (enemy,numproj > 0) && (EnemyNear,statetype != L)
value = ifelse(random <300,117,116)

[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = p2stateno = [5000,5300]
triggerall =  (var(55) = 11)||(var(55) = [20,21])||(var(55) = [40,42])||(var(55) = [60,64])||(var(55) = [80,87])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = animtime =0
trigger1 = (enemy,numhelper > var(35)) && (EnemyNear,statetype != L) 
trigger2 = (enemy,numproj > 0) && (EnemyNear,statetype != L)
value = ifelse(random <300,117,116)

[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 41)||(var(55) = [60,61])||(var(55) = [80,82])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = P2movetype = A
triggerall = power >= 1000
trigger1 = animtime =0 
trigger1 = p2bodydist X = [55,120]
value = 4200

[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 41)||(var(55) = [60,61])||(var(55) = [80,82])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = P2movetype = A
triggerall = power >= 2000
trigger1 = animtime =0 
trigger1 = p2bodydist X = [-45,54]
value = 4250

[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 21)||(var(55) = [40,41])||(var(55) = [60,63])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = P2movetype = A
trigger1 = random <= 750
trigger1 = animtime =0 
trigger1 = p2bodydist X =[-35,50]
value = 1080

[State 112]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;回避攻击
[Statedef 113]
type = S
movetype = A
physics = S
anim = ifelse(fvar(10)!=1,114,113)
poweradd = 10
velset = 0,0
ctrl = 0

[state posadd]
type = nothitby
trigger1 = animelemtime(1) >= 0
trigger1 = animelemtime(3) < 2
value = sac
time = 1

[state posadd]
type = posadd
triggerall = anim = 113
trigger1 = animelem = 2
trigger2 = animtime = 0
x = 10

[state posadd]
type = Width
triggerall = anim = 114
trigger1 = animelemtime(1) >= 0
trigger1 = animelemtime(4) < 0
player = -25,10

[state posadd]
type = posadd
triggerall = anim = 114
trigger1 = animelem = 1
x = 28

[state posadd]
type = posadd
triggerall = anim = 114
trigger1 = animelem = 2
trigger2 = animelem = 3
x = 5

[state posadd]
type = posadd
triggerall = anim = 114
trigger1 = animelem = 5
x = 10

[state posadd]
type = posadd
triggerall = anim = 114
trigger1 = animelem = 6
x = -19

[state posadd]
type = posadd
triggerall = anim = 114
trigger1 = animelem = 7
x = -32

[state 225, 1]
type = playsnd
trigger1 = animelem = 2
trigger1 = random >650
channel = 0
value = 2995,ifelse(fvar(10)!=1,ifelse(random >500,51,52),ifelse(random<500,151,152))

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 600,1
volume = 160

[state hitdef]
type = HitDef
triggerall = anim = 113
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
persistent = 0
attr = S, NA
animtype  = high
damage    = 65
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,20,10)
givepower = 5
guardflag = M
pausetime = 12,13 
guard.pausetime = 12,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-70)/2,ifelse((p2statetype = C),-45,-60)
hitsound   = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 22
ground.hittime  = 23
ground.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-6.5
air.cornerpush = 1
air.animtype = Back
air.fall = 0
fall = 0 
fall.recover = 0
yaccel = .45 

[state hitdef]
type = HitDef
triggerall = anim = 114
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
persistent = 0
attr = S, NA
animtype  = high
damage    = 65
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,20,10)
givepower = 5
guardflag = M
pausetime = 12,13 
guard.pausetime = 12,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,ifelse((p2statetype = C),-65,-70)
hitsound   = S220,0
guardsound = S150,1
ground.type = high
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-6.5
air.cornerpush = 1
air.animtype = Back
air.fall = 0
fall = 0 
fall.recover = 0
yaccel = .45 

;AI青龙
[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [60,62])||(var(55) = [80,84])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = p2movetype = A
trigger1 = p2bodydist X < 55
value = ifelse(random>500,2150,ifelse(p2stateno>3000,2150,1003))

[State 255, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = (var(55) = [60,61])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = fvar(10) = 0
triggerall = life <= 250
triggerall = power >= 3000
trigger1 = random <= 750
trigger1 = movehit >=2
trigger1 = p2bodydist X > 0
value = 4500 

[State 255, 5]
type = ChangeState
triggerall = var(59) = 1 
triggerall = (var(55) = 40)||(var(55) = [60,61])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = fvar(10) = 0
trigger1 = random > 500
trigger1 = moveguarded
trigger1 = p2bodydist X > 0
value = 1100 

[State 255, 6]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = random > 350
trigger1 = movecontact
trigger1 = p2bodydist X > 0
value = 1200 

[State 255, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life <=500
triggerall = (var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = random <= 750
trigger1 = movehit
trigger1 = p2bodydist X > 0
value = 1003 

[State 255, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall =  (var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = life >500
trigger1 = random <= 750
trigger1 = movehit >=2
trigger1 = p2bodydist X > 0
value = 1000 

[State 255, 7]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movehit
trigger1 = p2bodydist X > 0
value = 1100 

;AI凤凰
[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [80,82])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = p2movetype = A
trigger1 = p2bodydist X < 35
value = ifelse(random>500,2150,ifelse(p2stateno>3000,2150,1090))

[State 255, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [80,82])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = life <= 250
triggerall = power >= 3000
trigger1 = random <= 750
trigger1 = movehit >=2
trigger1 = p2bodydist X > 0
value = 4600 

[State 255, 5]
type = ChangeState
triggerall = var(59) = 1 
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = random > 500
trigger1 = moveguarded
trigger1 = p2bodydist X > 0
value = 1100 

[State 255, 6]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 40)||(var(55) = [60,61])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = random > 500
trigger1 = movecontact
trigger1 = p2bodydist X > 0
value = 1200 

[State 255, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 41)||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = life <=500
trigger1 = random <= 750
trigger1 = movehit
trigger1 = p2bodydist X > 0
value = 1090 

[State 255, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = life >500
trigger1 = random <= 750
trigger1 = movehit >=2
trigger1 = p2bodydist X > 0
value = 1080 

[State 255, 7]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movehit
trigger1 = p2bodydist X > 0
value = 1100 

[State 112]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;前回避
[Statedef 116]
type = S
movetype = I
physics = N
anim = 116
poweradd = 20
facep2 = 1
velset = 0,0
ctrl = 0

[State 116, 70]
type = Explod
trigger1 = animelem = 2
ownpal = 1
postype = P1
facing = -1
pos = -20, 0
anim = 706
sprpriority = 7 ;-5
ignorehitpause = 1

[State 210, 1]
type = PlaySnd
trigger1 = Time = 3
trigger1 = Random < 550
volume = ifelse(fvar(10)!=1,-10,50)
value = 112,ifelse(fvar(10)!=1,0,10)
channel = 0

[State 210, 1]
type = PlaySnd
trigger1 = animelem = 5
volume = -10
value = 40,0

[State 116]
type = HitBy
triggerall = var(55) = [0,99]
trigger1 = animelemtime(1)>=0
trigger1 = animelemtime(8)<5
value = SCA, NT, ST, HT
time = 1

[State 116]
type = notHitBy
triggerall = var(55) = [0,99]
triggerall = animelemtime(1)>=0
triggerall = animelemtime(8)<5
trigger1 = p2bodydist x > 5
trigger2 = (enemy,numhelper > 0) && (EnemyNear,statetype != L)
trigger3 = (enemy,numproj > 0) && (EnemyNear,statetype != L)
value = sac
time = 1

[State 116]
type = notHitBy
trigger1 = (var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
value = sac
time = 1

[State 116]
type = AfterImage
trigger1 = Time = 9
time = 15
PalBright = 0, 0, 0
PalContrast =  250,250,250
PalAdd = 0, 0, 0
PalMul = 1,1,1
Length = 6
FrameGap = 2

[State 116]
type = SprPriority
trigger1 = Time = 8
value = -1

[state 116]
type = velset
trigger1 = AnimElem = 2
x=5

[state 116]
type = posadd
trigger1 = AnimElem = 2
x=20

[State 116]
type = Velset
trigger1 = AnimElem = 4
x = 2.8

[State 116]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 116]
type = PlayerPush
trigger1 = animelemtime(1)>=0
trigger1 = animelemtime(8)<3
value = 0

[State 116]
type = PlayerPush
trigger1 = animelemtime(8)=[3,5]
value = 1

;手控青龙
[state 116]
type = changestate
triggerall = var(59) != 1
triggerall = fvar(10) = 0
triggerall = (var(13) = [101,115])
trigger1 = animelemtime(8) =[4,5]
value = 1000
ctrl = 0

[state 116]
type = changestate
triggerall = var(59) != 1
triggerall = fvar(10) = 0
triggerall = (var(13) = [121,135])
trigger1 = animelemtime(8) =[4,5]
value = 1003
ctrl = 0

;手控凤凰
[state 116]
type = changestate
triggerall = var(59) != 1
triggerall = fvar(10) = 1
triggerall = (var(13) = [101,115])
trigger1 = animelemtime(8) =[4,5]
value = 1080
ctrl = 0

[state 116]
type = changestate
triggerall = var(59) != 1
triggerall = fvar(10) = 1
triggerall = (var(13) = [121,135])
trigger1 = animelemtime(8) =[4,5]
value = 1090
ctrl = 0

;手控通用后回避
[state 116]
type = changestate
triggerall = var(59) != 1
triggerall = command ="Avoid" && command = "holdback"
trigger1 = animelemtime(8) =[4,5]
value = 117
ctrl = 0

;AI公用
[State -1]
type = ChangeState
value = ifelse(random<500,228,428)
triggerall = var(59) != 0 && roundstate = 2 
triggerall = animelemtime(8) =[4,5] 
triggerall = (var(55) = [60,64])||(var(55) = [80,87])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = statetype != A
triggerall = p2bodydist x = [-60,40]
trigger1 = 1

[State -1]
type = ChangeState
value = ifelse(enemy, vel x > 0,117,ifelse(random<500,ifelse(random<500,112,116),ifelse(random<400,112,117)))
triggerall = var(59) != 0 && roundstate = 2 
triggerall = animtime =0 
triggerall = (var(55) = [60,63])||(var(55) = [80,86])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = statetype != A
triggerall = p2bodydist x < 80
trigger1 = (enemy,numhelper > 20) && (EnemyNear,statetype != L)
trigger2 = (enemy,numproj > 20) && (EnemyNear,statetype != L)

;AI青龙
[state 116]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [80,81])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = P2movetype = A
triggerall = animelemtime(8) =[4,5]
trigger1 = p2bodydist X = (29,85]
trigger1 = random <= 500
trigger2 = p2bodydist x = [-50,29]
value = 2150  

[state 116]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [81,82])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = P2movetype = A
triggerall = animelemtime(8) =[4,5]
trigger1 = p2bodydist X = [-50,29]
value = 1000

[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = p2bodydist X = [-30,30]
triggerall = animtime =0
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = p2statetype != A
trigger1 = p2stateno = [0,160]
trigger2 = P2movetype = A
value = ifelse(random<500 && numenemy=1,960,930)

[state 116]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 11)||(var(55) = [20,21])||(var(55) = [40,42])||(var(55) = [60,64])||(var(55) = [80,87])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = animelemtime(8) =[4,5]
trigger1 = p2stateno = [0,160]
trigger1 = p2bodydist X = [-5,5]
value = ifelse(random<500,370,380)

[state 116]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [80,81])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = animelemtime(8) =[4,5]
trigger1 = (enemy,numhelper > var(35)) && (EnemyNear,statetype != L) 
trigger2 = (enemy,numproj > 0) && (EnemyNear,statetype != L) 
value = 112

[state 116]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = P2movetype = I
triggerall = animelemtime(8) =[4,5]
triggerall = p2stateno = [1000,4999]
triggerall = p2bodydist X = [0,70]
trigger1 = (enemy,numhelper > var(35)) && (EnemyNear,statetype != L) 
trigger2 = (enemy,numproj > 0) && (EnemyNear,statetype != L) 
value = 117

[state 116]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [80,82])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = P2movetype = A
triggerall = p2statetype = A
triggerall = animelemtime(8) =[4,5]
trigger1 = p2bodydist X = [0,60]
value = 1003

;AI凤凰
[state 116]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = P2movetype = A
triggerall = animelemtime(8) =[4,5]
trigger1 = p2bodydist X = (29,85]
trigger1 = random <= 500
trigger2 = p2bodydist x = [-50,29]
value = 2150  

[state 116]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = P2movetype = A
triggerall = animelemtime(8) =[4,5]
trigger1 = p2bodydist X = [-50,29]
value = 1080

[state 112]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = p2bodydist X = [-30,30]
triggerall = animtime =0
triggerall = (var(55) = 41)||(var(55) = [60,61])||(var(55) = [80,82])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = p2statetype != A
trigger1 = p2stateno = [0,160]
trigger2 = P2movetype = A
value = ifelse(random<500 && numenemy=1,960,980)

[state 116]
type = changestate
triggerall = var(59) = 1
triggerall = (var(55) = [80,82])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = fvar(10) = 1
triggerall = animelemtime(8) =[4,5]
trigger1 = p2stateno = [0,160]
trigger1 = p2bodydist X = [-5,5]
value = ifelse(random<500,370,380)

[state 116]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [80,82])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = animelemtime(8) =[4,5]
trigger1 = (enemy,numhelper > var(35)) && (EnemyNear,statetype != L) 
trigger2 = (enemy,numproj > 0) && (EnemyNear,statetype != L)
value = 112

[state 116]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = P2movetype = I
triggerall = animelemtime(8) =[4,5]
triggerall = p2stateno = [1000,4999]
triggerall = p2bodydist X = [0,70]
trigger1 = (enemy,numhelper > var(35)) && (EnemyNear,statetype != L) 
trigger2 = (enemy,numproj > 0) && (EnemyNear,statetype != L)
value = 117

[state 116]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [80,82])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = P2movetype = A
triggerall = p2statetype = A
triggerall = animelemtime(8) =[4,5]
trigger1 = p2bodydist X = [0,60]
value = 1090

[State 116]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;后回避
[Statedef 117]
type = S
movetype = I
physics = N
anim = 117
poweradd = 20
facep2 = 1
velset = 0,0
ctrl = 0

[State 210, 1]
type = PlaySnd
triggerall = fvar(10) = 0
trigger1 = Time = 2
trigger1 = Random < 550
volume = -10
value = 112,0
channel = 0

[State 117]
type = HitBy
trigger1 = animelemtime(1) >= 0
trigger1 = animelemtime(6) <= 2
value = SCA, NT, ST, HT
time = 1

[State 116]
type = notHitBy
triggerall = animelemtime(1) >= 0
triggerall = animelemtime(6) <= 2
trigger1 = (enemy,numhelper > 0) && (EnemyNear,statetype != L)
trigger2 = (enemy,numproj > 0) && (EnemyNear,statetype != L)
trigger3 = p2bodydist x > 5
value = sac
time = 1

[State 116]
type = notHitBy
trigger1 = (var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
value = sac
time = 1

[State 117]
type = AfterImage
trigger1 = animelem = 3
time = 19
PalBright = 0, 0, 0
PalContrast =  250,250,250
PalAdd = 10,10,25
PalMul = .65,.65,.75
Length = 26
FrameGap = 6
trans = add1

[State 117]
type = SprPriority
trigger1 = Time = 8
value = -1

[State 117]
type = VelSet
trigger1 = AnimElem = 1
x = -2

[State 117]
type = VelSet
trigger1 = AnimElem = 3
x = -7

[State 117]
type = VelSet
trigger1 = AnimElem = 4
x = -7

[State 117]
type = VelSet
trigger1 = AnimElem = 5
x = -2

[State 117,7]
type = VelSet
trigger1 = AnimElem = 6
x = 0

[State 117,6]
type = PlayerPush
trigger1 = Time < 24
value = 0

[State 117,5]
type = PlayerPush
trigger1 = Time >= 24
value = 1

;AI公用
[State -1]
type = ChangeState
value = ifelse(enemy, vel x > 0,117,ifelse(random<500,ifelse(random<500,112,116),ifelse(random<400,112,117)))
triggerall = var(59) != 0 && roundstate = 2 
triggerall = animtime =0 
triggerall = (var(55) = [80,81])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = statetype != A
triggerall = p2bodydist x < 80
trigger1 = (enemy,numhelper > 20) && (EnemyNear,statetype != L)
trigger2 = (enemy,numproj > 20) && (EnemyNear,statetype != L)

;AI青龙
[state 117,4]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [80,82])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = animelemtime(6) >= 2
trigger1 = (enemy,numhelper > var(35)) && (EnemyNear,statetype != L) 
trigger2 = (enemy,numproj > 0) && (EnemyNear,statetype != L) 
value = 112

[state 117,3]
type = changestate
triggerall = var(59) = 1
triggerall = (var(55) = 41)||(var(55) = [60,61])||(var(55) = [80,82])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = fvar(10) = 0
trigger1 = AnimTime = 0
trigger1 = p2stateno = [5100,5122]
trigger1 = p2bodydist x > 65
value = ifelse(random>400,1150,ifelse(random>500,1100,1200))

;AI凤凰
[state 117,2]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [80,82])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = animelemtime(6) >= 2
trigger1 = (enemy,numhelper > var(35)) && (EnemyNear,statetype != L) 
trigger2 = (enemy,numproj > 0) && (EnemyNear,statetype != L)
value = 112

[state 117,a]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 41)||(var(55) = [60,61])||(var(55) = [80,82])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = AnimTime = 0
trigger1 = p2stateno = [5100,5122]
trigger1 = p2bodydist x > 65
value = ifelse(random>400,1150,ifelse(random>500,1100,1200))

[State 117]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 站立 轻拳
[Statedef 210]
type = S
movetype = A
physics = S
anim = 210
velset = 0,0
juggle = 8+var(7)
poweradd = ifelse(fvar(10)!=1,5,2)
ctrl = 0

[State 210, 1]
type = PlaySnd
trigger1 = Time = 0
trigger1 = Random < 750
value = 2995,ifelse(fvar(10)!=1,50,150)
channel = 0

[State 210, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,0

[State 210, 3]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 2
attr = S, NA
air.animtype = back
animtype = light
damage = 30
priority = 7, Hit
guardflag = MA
pausetime = 8,8
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-40)/2,-75
hitsound = S210,0
guardsound = S150,0
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -3.5
air.velocity = -3.5,-6
getpower = ifelse(fvar(10)!=1,30,15),ifelse(fvar(10)!=1,10,5)
givepower = 1
air.juggle = 10
fall = 0 
yaccel = .5

[State 210, 3]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 2
attr = S, NA
air.animtype = back
animtype = light
damage = 30
priority = 7, Hit
guardflag = MA
pausetime = 8,8
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-40)/2,-75
hitsound = S210,0
guardsound = S150,0
p2stateno = ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -3.5
air.velocity = -3.5,-6
getpower = ifelse(fvar(10)!=1,30,15),ifelse(fvar(10)!=1,10,5)
givepower = 1
air.juggle = 10
fall = 0 
yaccel = .5

[State 210, 5]
type = varset
trigger1 = time = 0
var(45) = 1

;AI青龙
[State 210, 5]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 40)||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact 
trigger1 = random <= 300
trigger1 = p2bodydist X > 0
value = 1100

[State 210, 5]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 40)||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact 
trigger1 = random > 300
trigger1 = p2bodydist X > 0
value = 2150

;AI凤凰
[State 210, 5]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 40)||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact 
trigger1 = random <= 300
trigger1 = p2bodydist X > 0
value = 1100

[State 210, 5]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 40)||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact 
trigger1 = random > 300
trigger1 = p2bodydist X > 0
value = 2150

[state 3]
type = changestate
trigger1 = animtime = 0
value = 0;站立
ctrl = 1

;站立 重拳
[Statedef 220]
type = s
movetype = a
physics = s
anim = 220
poweradd = ifelse(fvar(10)!=1,30,15)
juggle = 8+var(7)
velset = 0
ctrl = 0

[state 220, 1]
type = playsnd
trigger1 = AnimElem = 3
trigger1 = random >250
value = 2995,ifelse(fvar(10)!=1,(ifelse(random<500,51,52)),(ifelse(random >500,151,152)))
channel = 0

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 600,1
volume = 160

[State 210, 2]
type = velset
trigger1 = animelem = 2
x = 6

[state hitdef]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
persistent = 0
attr = S, NA
animtype  = high
damage    = 90
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = M
pausetime = 12,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-70)/2,-75
hitsound   = S220,0
guardsound = S150,1
ground.type = High
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-6.5
air.cornerpush = 1
air.animtype = Back
air.juggle = 10
fall = 0 
fall.recover = 0 
yaccel = .5

[state hitdef]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
persistent = 0
attr = S, NA
animtype  = high
damage    = 90
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = M
pausetime = 12,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-70)/2,-75
hitsound   = S220,0
guardsound = S150,1
p2stateno = ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.type = High
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-6.5
air.cornerpush = 1
air.animtype = Back
air.juggle = 10
fall = 0 
fall.recover = 0 
yaccel = .5

[state 3]
type = changestate
trigger1 = animtime = 0
value = 0;站立
ctrl = 1

;站立 轻脚
[Statedef 235]
type = S
movetype = A
physics = S
anim = ifelse(fvar(10)!=1,236,235)
velset = 0,0
poweradd = ifelse(fvar(10)!=1,10,5)
juggle = 8+var(7)
ctrl = 0

[State 205, 1]
type = PlaySnd
trigger1 = Time = 0
trigger1 = Random < 750
value = 2995,ifelse(fvar(10)!=1,50,150)
channel = 0

[State 205, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,0

[State 205, 3]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 3
attr = S, NA
air.animtype = back
animtype = light
damage = 40
priority = 7, Hit
guardflag = MA
pausetime = 10,10
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-40)/2,-70
hitsound = S210,0
guardsound = S150,0
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -3.5
air.velocity = -3.5,-6
guard.velocity = -5.5
getpower = ifelse(fvar(10)!=1,30,15),ifelse(fvar(10)!=1,10,5)
givepower = 1
fall = 0 
yaccel = .5 

[State 205, 3]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 3
attr = S, NA
air.animtype = back
animtype = light
damage = 40
priority = 7, Hit
guardflag = MA
pausetime = 10,10
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-40)/2,-70
hitsound = S210,0
guardsound = S150,0
ground.type = high
ground.slidetime = 9
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.hittime = 9
ground.velocity = -3.5
air.velocity = -3.5,-6
guard.velocity = -5.5
getpower = ifelse(fvar(10)!=1,30,15),ifelse(fvar(10)!=1,10,5)
givepower = 1
fall = 0 
yaccel = .5 

[State 205, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;站立 重脚
[statedef 245]
type = s
movetype = A
physics = s
anim = ifelse(fvar(10)!=1,246,245)
velset = 0,0
poweradd = ifelse(fvar(10)!=1,30,15)
juggle = 8+var(7)
ctrl = 0

[state 255, 1]
type = playsnd
trigger1 = animelem = 3
trigger1 = random >250
channel = 0
value = 2995,ifelse(fvar(10)!=1,(ifelse(random<500,51,52)),(ifelse(random >500,151,152)))

[State 40, NOTHITBY]
type = hitby
trigger1 = time = [5,12]
value = SCA, SA, HA, AP,SP,HP,AT,ST,HT

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 2000,9
volume = 100

[state hitdef]
type = HitDef
triggerall = var(50) = 0
triggerall = anim = 245
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
persistent = 0
attr = S, NA
animtype  = high
damage    = 90
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = M
pausetime = 12,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-80)/2,ifelse((anim = 246),-75,-95)
hitsound   = S210,3
guardsound = S150,1
ground.type = High
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -13
ground.cornerpush = 1
air.velocity = -3,-6.5
air.cornerpush = 1
air.animtype = Back
fall.recover = 0
yaccel = .5

[state hitdef]
type = HitDef
triggerall = var(50) = 0
triggerall = anim = 246
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
persistent = 0
attr = S, NA
animtype  = high
damage    = 90
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = M
pausetime = 12,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-80)/2,ifelse((anim = 246),-75,-95)
hitsound   = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-6.5
air.cornerpush = 1
air.animtype = Back
fall.recover = 0
yaccel = .5

[state hitdef]
type = HitDef
triggerall = var(50) = 1
triggerall = anim = 245
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
persistent = 0
attr = S, NA
animtype  = high
damage    = 90
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = M
pausetime = 12,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-80)/2,ifelse((anim = 246),-75,-95)
hitsound   = S210,3
guardsound = S150,1
ground.type = High
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -13
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.cornerpush = 1
air.velocity = -3,-6.5
air.cornerpush = 1
air.animtype = Back
fall.recover = 0
yaccel = .5

[state hitdef]
type = HitDef
triggerall = var(50) = 1
triggerall = anim = 246
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
persistent = 0
attr = S, NA
animtype  = high
damage    = 90
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = M
pausetime = 12,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-80)/2,ifelse((anim = 246),-75,-95)
hitsound   = S210,3
guardsound = S150,1
ground.type = low
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-6.5
air.cornerpush = 1
air.animtype = Back
fall.recover = 0
yaccel = .5

[state 2]
type = changestate
trigger1 = animtime = 0
value = 0;站立
ctrl = 1

;站立 重脚(近)
[Statedef 255]
type = s
movetype = a
physics = s
anim = ifelse(fvar(10)!=1,255,250)
poweradd = ifelse(fvar(10)!=1,30,15)
velset = 0
facep2 = 1
juggle = 8+var(7)
ctrl = 0

[state hitby]
type = hitby
trigger1 = p2bodydist x > 5
value = SCA,AP,SA,NA,HA
time=1

[state 255, 1]
type = playsnd
trigger1 = time = 0
trigger1 = random >250
channel = 0
value = 2995,ifelse(fvar(10)!=1,(ifelse(random<500,51,52)),(ifelse(random >500,151,152)))

[State 210, 2]
type = PlaySnd
trigger1 = Time = 0
value = 2000,9
volume = 100

[state hitdef]
type = HitDef
triggerall = var(50) = 0
trigger1 = anim = 255
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
persistent = 0
attr = S, NA
animtype  = high
damage    = 85
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,20,10)
givepower = 5
guardflag = M
pausetime = 12,13 
guard.pausetime = 12,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,ifelse((p2statetype = C),-55,-100)
hitsound   = S210,3
guardsound = S150,1
ground.type = high
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-6.5
air.cornerpush = 1
air.animtype = Back
air.fall = 0
fall = 0 
fall.recover = 0
yaccel = .45 

[state hitdef]
type = HitDef
triggerall = var(50) = 0
trigger1 = anim = 250
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
persistent = 0
attr = S, NA
animtype  = high
damage    = 85
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,20,10)
givepower = 5
guardflag = M
pausetime = 12,13 
guard.pausetime = 12,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,ifelse((p2statetype = C),-65,ifelse((p2statetype = S),-100,-120))
hitsound   = S210,3
guardsound = S150,1
ground.type = high
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-6.5
air.cornerpush = 1
air.animtype = Back
air.fall = 0
fall = 0 
fall.recover = 0
yaccel = .45 

[state hitdef]
type = HitDef
triggerall = var(50) = 1
trigger1 = anim = 255
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
persistent = 0
attr = S, NA
animtype  = high
damage    = 85
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,20,10)
givepower = 5
guardflag = M
pausetime = 12,13 
guard.pausetime = 12,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,ifelse((p2statetype = C),-55,-100)
hitsound   = S210,3
guardsound = S150,1
ground.type = high
ground.slidetime = 19
ground.hittime  = 19
ground.velocity = -7
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.cornerpush = 1
air.velocity = -3,-6.5
air.cornerpush = 1
air.animtype = Back
air.fall = 0
fall = 0 
fall.recover = 0
yaccel = .45 

[state hitdef]
type = HitDef
triggerall = var(50) = 1
trigger1 = anim = 250
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
persistent = 0
attr = S, NA
animtype  = high
damage    = 85
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,20,10)
givepower = 5
guardflag = M
pausetime = 12,13 
guard.pausetime = 12,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,ifelse((p2statetype = C),-65,ifelse((p2statetype = S),-100,-120))
hitsound   = S210,3
guardsound = S150,1
ground.type = high
ground.slidetime = 19
ground.hittime  = 19
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-6.5
air.cornerpush = 1
air.animtype = Back
air.fall = 0
fall = 0 
fall.recover = 0
yaccel = .45 

;AI青龙
[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [80,82])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = p2movetype = A
trigger1 = p2bodydist X < 55
value = ifelse(random>500,2150,ifelse(p2stateno>3000,2150,1003))

[State 255, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = (var(55) = [80,81])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = fvar(10) = 0
triggerall = life <= 250
triggerall = power >= 3000
trigger1 = random <= 750
trigger1 = movehit >=2
trigger1 = p2bodydist X > 0
value = 4500 

[State 255, 5]
type = ChangeState
triggerall = var(59) = 1 
triggerall = (var(55) = 40)||(var(55) = [60,61])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = fvar(10) = 0
trigger1 = random > 500
trigger1 = moveguarded
trigger1 = p2bodydist X > 0
value = 1100 

[State 255, 6]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = random > 350
trigger1 = movecontact
trigger1 = p2bodydist X > 0
value = 1200 

[State 255, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life <=500
triggerall = (var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = random <= 750
trigger1 = movehit
trigger1 = p2bodydist X > 0
value = 1003 

[State 255, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall =  (var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = life >500
trigger1 = random <= 750
trigger1 = movehit >=2
trigger1 = p2bodydist X > 0
value = 1000 

[State 255, 7]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movehit
trigger1 = p2bodydist X > 0
value = 1100 

;AI凤凰
[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [80,82])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = p2movetype = A
trigger1 = p2bodydist X < 35
value = ifelse(random>500,2150,ifelse(p2stateno>3000,2150,1090))

[State 255, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [80,82])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = life <= 250
triggerall = power >= 3000
trigger1 = random <= 750
trigger1 = movehit >=2
trigger1 = p2bodydist X > 0
value = 4600 

[State 255, 5]
type = ChangeState
triggerall = var(59) = 1 
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = random > 500
trigger1 = moveguarded
trigger1 = p2bodydist X > 0
value = 1100 

[State 255, 6]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 40)||(var(55) = [60,61])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = random > 500
trigger1 = movecontact
trigger1 = p2bodydist X > 0
value = 1200 

[State 255, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 41)||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = life <=500
trigger1 = random <= 750
trigger1 = movehit
trigger1 = p2bodydist X > 0
value = 1090 

[State 255, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = life >500
trigger1 = random <= 750
trigger1 = movehit >=2
trigger1 = p2bodydist X > 0
value = 1080 

[State 255, 7]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movehit
trigger1 = p2bodydist X > 0
value = 1100 

[state 3]
type = changestate
trigger1 = animtime = 0
value = 0;站立
ctrl = 1

;站立 轻拳(近)
; Standing light punch
[Statedef 215]
type = S
movetype = A
physics = S
anim = 215
velset = 0,0
juggle = 8
poweradd = ifelse(fvar(10)!=1,10,5)
ctrl = 0

[State 215, 1]
type = PlaySnd
trigger1 = Time = 0
trigger1 = Random < 750
value = 2995,ifelse(fvar(10)!=1,50,150)
channel = 0

[State 215, 2]
type = PlaySnd
trigger1 = Time = 2
value = 600,0

[State 215, 3]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 2
attr = S, NA
air.animtype = back
animtype = light
damage = 25
priority = 7, Hit
guardflag = MA
pausetime = 8,8
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-40)/2,-75
hitsound = S210,0
guardsound = S150,0
ground.type = high
ground.slidetime = 10
ground.hittime = 10
ground.velocity = -3.9
ground.cornerpush.veloff = -3.5
air.velocity = -3.5,-6
guard.velocity = -4.5
getpower = ifelse(fvar(10)!=1,30,15),ifelse(fvar(10)!=1,10,5)
givepower = 1
air.juggle = 10
fall = 0 
yaccel = .5

[State 215, 3]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 2
attr = S, NA
air.animtype = back
animtype = light
damage = 25
priority = 7, Hit
guardflag = MA
pausetime = 8,8
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-40)/2,-75
hitsound = S210,0
guardsound = S150,0
ground.type = high
ground.slidetime = 10
ground.hittime = 10
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.velocity = -3.9
ground.cornerpush.veloff = -3.5
air.velocity = -3.5,-6
guard.velocity = -4.5
getpower = ifelse(fvar(10)!=1,30,15),ifelse(fvar(10)!=1,10,5)
givepower = 1
air.juggle = 10
fall = 0 
yaccel = .5

;AI青龙
[State 215, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,43])||(var(55) = [60,64])||(var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = random < 500
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X <= 50
value = 410

[State 215, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = random < 499
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = (0,35)
value = 215  

[State 215, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = (var(55) = 20)||(var(55) = [40,43])||(var(55) = [60,64])||(var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = fvar(10) = 0
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X <= 35
value = 225 

;AI凤凰
[State 215, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,42])||(var(55) = [60,64])||(var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = random < 500
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X <= 50
value = 410

[State 215, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = random < 500
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = (0,35)
value = 215  

[State 215, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X <= 35
value = 225 

[State 215, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;站立 重拳(近)
[Statedef 225]
type = s
movetype = a
physics = s
facep2 = 1
anim = ifelse(fvar(10)=1,226,225)
poweradd = ifelse(fvar(10)!=1,30,15)
velset = 0
juggle = 8+var(7)
ctrl = 0

[state hitby]
type = hitby
trigger1 = p2bodydist x > 5
trigger1 = time = [0,7]
value = SCA,AP,SA,NA,HA
time=1

[state hitby]
type = nothitby
trigger1 = time = [0,10]
trigger1 = prevstateno = [160,162]
trigger2 = time = [0,10]
trigger2 = p2stateno = 965
trigger3 = enemy,numhelper>var(35)
value = SCA
time=1
ignorehitpause=1

[state 225, 1]
type = playsnd
trigger1 = time = 0
trigger1 = random >250
channel = 0
value = 2995,ifelse(fvar(10)!=1,(ifelse(random<500,51,52)),(ifelse(random >500,151,152)))

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 600,1
volume = 160

[state hitdef]
type = HitDef
triggerall = var(50) = 0
triggerall = anim = 225
triggerall = !movecontact
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
persistent = 0
attr = S, NA
hitflag = MAF
animtype  = hard
air.animtype  = back
damage    = 80
getpower = ifelse(fvar(10)!=1,80,40),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = MA
pausetime = 12,13
sparkno = S736
guard.pausetime = 12,17
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,-65
hitsound   = S220,0
guardsound = S150,1
ground.type = hard
ground.slidetime = 17
ground.hittime  = 19
ground.velocity = -8
guard.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-8
air.cornerpush = 1
air.fall = 0
fall = 0
yaccel = .5

[state hitdef]
type = HitDef
triggerall = var(50) = 0
triggerall = anim = 225
triggerall = !movecontact
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 4
persistent = 0
attr = S, NA
hitflag = MAF
animtype  = hard
air.animtype  = back
damage    = 100
getpower = ifelse(fvar(10)!=1,80,40),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = MA
pausetime = 12,13
sparkno = S736
guard.pausetime = 12,17
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,-105
hitsound   = S220,0
guardsound = S150,1
ground.type = hard
ground.slidetime = 17
ground.hittime  = 19
ground.velocity = -8
guard.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-8
air.cornerpush = 1
air.fall = 0
fall = 0
yaccel = .5

[state hitdef]
type = HitDef
triggerall = var(50) = 0
triggerall = anim = 226
triggerall = !movecontact
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
persistent = 0
attr = S, NA
hitflag = MAF
animtype  = hard
air.animtype  = back
damage    = 80
getpower = ifelse(fvar(10)!=1,80,40),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = MA
pausetime = 12,13
sparkno = S736
guard.pausetime = 12,17
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-65
hitsound   = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 19
ground.hittime  = 23
ground.velocity = -8
guard.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-8
air.cornerpush = 1
air.fall = 0
fall = 0
yaccel = .5

[state hitdef]
type = HitDef
triggerall = var(50) = 0
triggerall = anim = 226
triggerall = !movecontact
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 4
trigger2 = animelem = 5
persistent = 0
attr = S, NA
hitflag = MAF
animtype  = hard
air.animtype  = back
damage    = 100
getpower = ifelse(fvar(10)!=1,80,40),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = MA
pausetime = 12,13
sparkno = S736
guard.pausetime = 12,17
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,-105
hitsound   = S220,0
guardsound = S150,1
ground.type = hard
ground.slidetime = 17
ground.hittime  = 19
ground.velocity = -8
guard.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-8
air.cornerpush = 1
air.fall = 0
fall = 0
yaccel = .5

[state hitdef]
type = HitDef
triggerall = var(50) = 1
triggerall = anim = 225
triggerall = !movecontact
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
persistent = 0
attr = S, NA
hitflag = MAF
animtype  = hard
air.animtype  = back
damage    = 80
getpower = ifelse(fvar(10)!=1,80,40),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = MA
pausetime = 12,13
sparkno = S736
guard.pausetime = 12,17
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,-65
hitsound   = S220,0
guardsound = S150,1
ground.type = hard
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.slidetime = 17
ground.hittime  = 19
ground.velocity = -8
guard.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-8
air.cornerpush = 1
air.fall = 0
fall = 0
yaccel = .5

[state hitdef]
type = HitDef
triggerall = var(50) = 1
triggerall = anim = 225
triggerall = !movecontact
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 4
persistent = 0
attr = S, NA
hitflag = MAF
animtype  = hard
air.animtype  = back
damage    = 100
getpower = ifelse(fvar(10)!=1,80,40),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = MA
pausetime = 12,13
sparkno = S736
guard.pausetime = 12,17
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,-105
hitsound   = S220,0
guardsound = S150,1
ground.type = hard
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.slidetime = 17
ground.hittime  = 19
ground.velocity = -8
guard.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-8
air.cornerpush = 1
air.fall = 0
fall = 0
yaccel = .5

[state hitdef]
type = HitDef
triggerall = var(50) = 1
triggerall = anim = 226
triggerall = !movecontact
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
persistent = 0
attr = S, NA
hitflag = MAF
animtype  = hard
air.animtype  = back
damage    = 80
getpower = ifelse(fvar(10)!=1,80,40),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = MA
pausetime = 12,13
sparkno = S736
guard.pausetime = 12,17
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-65
hitsound   = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 19
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.hittime  = 23
ground.velocity = -8
guard.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-8
air.cornerpush = 1
air.fall = 0
fall = 0
yaccel = .5

[state hitdef]
type = HitDef
triggerall = var(50) = 1
triggerall = anim = 226
triggerall = !movecontact
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 4
trigger2 = animelem = 5
persistent = 0
attr = S, NA
hitflag = MAF
animtype  = hard
air.animtype  = back
damage    = 100
getpower = ifelse(fvar(10)!=1,80,40),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = MA
pausetime = 12,13
sparkno = S736
guard.pausetime = 12,17
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,-105
hitsound   = S220,0
guardsound = S150,1
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.type = hard
ground.slidetime = 17
ground.hittime  = 19
ground.velocity = -8
guard.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-8
air.cornerpush = 1
air.fall = 0
fall = 0
yaccel = .5

;AI青龙
[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [60,63])||(var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = p2stateno > 3000
triggerall = p2stateno != [5000,5300]
triggerall = p2movetype = I
triggerall = p2bodydist X < 35
trigger1 = prevstateno != [160,162]
trigger2 = prevstateno = [160,162]
trigger2 = time >= 5
value = 2150

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [60,62])||(var(55) = [80,84])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = p2movetype = A
triggerall = p2bodydist X < 55
trigger1 = prevstateno != [160,162]
trigger2 = prevstateno = [160,162]
trigger2 = time >= 5
value = ifelse(random>500,2150,ifelse(p2stateno>3000,2150,1003))

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life <= 300
triggerall = power >= 3000
triggerall = (var(55) = [60,62])||(var(55) = [80,84])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movehit
trigger1 = p2bodydist X < 70
value = 4500

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [25,26])||(var(55) = [45,67])||(var(55) = [65,67])
trigger1 = random<400
trigger1 = movecontact
trigger1 = p2statetype != A 
trigger1 = p2bodydist X = [-20,55]
value = ifelse(random>=500,ifelse(random<500,1950,1700),1250)

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = power >= 1000
triggerall = life<p2life
triggerall = (var(55) = [60,63])||(var(55) = [80,85])||(var(55) = [103,109])||(var(55) = [113,119])
trigger1 = random < 400
trigger1 = movehit
trigger1 = p2statetype != A 
trigger1 = p2bodydist X < 70
value = ifelse(power>=2000,ifelse((random<500)&&(FrontEdgeDist<90),1805,3650),ifelse(random<500,2150,3600))

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = power >= 1000
triggerall = (var(55) = [60,63])||(var(55) = [80,85])||(var(55) = [103,109])||(var(55) = [113,119])
trigger1 = movehit
trigger1 = p2statetype != A 
trigger1 = p2bodydist X < 70
value = ifelse(power>=2000,ifelse(FrontEdgeDist<90,1805,3010),ifelse(random<500,1805,3005))

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [60,63])||(var(55) = [80,85])||(var(55) = [100,107])||(var(55) = [110,117])
trigger1 = random<600
trigger1 = movehit
trigger1 = p2statetype != A 
trigger1 = p2bodydist X = [-20,55]
value = ifelse((random>=500)&&(p2bodydist x<10),280,1805)

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life <400
triggerall = p2statetype != A
triggerall = (var(55) = 40)||(var(55) = [60,61])||(var(55) = [80,83])||(var(55) = [105,109])||(var(55) = [115,119])
trigger1 = random < 400
trigger1 = movehit 
trigger1 = p2bodydist X < 70
value = ifelse(random<300,ifelse(random<500,1950,1805),1515)

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = p2statetype != A 
triggerall = (var(55) = 40)||(var(55) = [60,63])||(var(55) = [80,85])||(var(55) = [100,108])||(var(55) = [110,118])
trigger1 = random < 400
trigger1 = movehit
trigger1 = p2bodydist X <= 75
value = ifelse(random<300,ifelse(random<500,1950,1000),1003)

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = p2statetype != A
triggerall = (var(55) = 40)||(var(55) = [60,63])||(var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movehit 
trigger1 = p2bodydist X <= 75
value = ifelse(random<600,1805,1515)  

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 40)||(var(55) = [60,63])||(var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact || moveguarded
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = [0,70]
value = ifelse(random>650,1805,ifelse(random>500,280,260))

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 40)||(var(55) = [60,63])||(var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movehit 
trigger1 = p2statetype != A 
trigger1 = p2bodydist X = [-20,70]
value = ifelse(random>750,900,ifelse(random>500,280,260))

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,63])||(var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = animtime = 0
trigger1 = movecontact || moveguarded
trigger1 = p2statetype = S 
trigger1 = p2bodydist X = [0,65]
value = 410        

;AI凤凰
[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 3000
triggerall = p2statetype != A
triggerall = life<=300
triggerall = p2life >=120
triggerall = (var(55) = 60)||(var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = prevstateno = 2403
trigger1 = movehit = 1
trigger1 = p2bodydist x < 40
value = ifelse(p2life>=400,4600,ifelse(p2life>=300,ifelse(random<500,3030,4350),ifelse(random<500,3020,4300)))

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 3000
triggerall = p2statetype != A
triggerall = life<=300
triggerall = p2life >=120
triggerall = (var(55) = 60)||(var(55) = [80,82])||(var(55) = [100,103])||(var(55) = [110,115])
triggerall =  random<500
trigger1 = movehit = 1
trigger1 = p2bodydist x < 40
value = ifelse(p2life>=400,4600,ifelse(p2life>=300,ifelse(random<500,4050,3550),ifelse(random<500,4000,3500)))

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [60,63])||(var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = p2stateno > 3000
triggerall = p2stateno != [5000,5300]
triggerall = p2movetype = I
triggerall = p2bodydist X < 35
trigger1 = prevstateno != [160,162]
trigger2 = prevstateno = [160,162]
trigger2 = time >= 8
value = 2150

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [60,63])||(var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = p2movetype = A
triggerall = p2bodydist X < 55
trigger1 = prevstateno != [160,162]
trigger2 = prevstateno = [160,162]
trigger2 = time >= 8
value = ifelse(random>500,2150,ifelse(p2stateno>3000,2150,1080))

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life <= 300
triggerall = power >= 3000
triggerall = (var(55) = [60,62])||(var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = p2statetype != A
trigger1 = movehit
trigger1 = p2bodydist X = [-20,35]
value = 4600

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = (var(55) = [25,26])||(var(55) = [45,47])||(var(55) = [65,68])
trigger1 = random<400
trigger1 = movecontact
trigger1 = p2statetype != A 
trigger1 = p2bodydist X = [-20,55]
value = ifelse(random>=500,1950,1250)

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = (var(55) = 40)||(var(55) = [60,63])||(var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movehit
trigger1 = p2statetype != A 
trigger1 = p2bodydist X = [-20,55]
value = ifelse(power>=2000,4300,3020)

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life <400
triggerall = (var(55) = [40,41])||(var(55) = [60,63])||(var(55) = [80,85])||(var(55) = [103,109])||(var(55) = [113,119])
trigger1 = random<400
trigger1 = movehit 
trigger1 = p2bodydist X = [-20,55]
value = 2400 

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,85])||(var(55) = [103,109])||(var(55) = [113,119])
trigger1 = movehit
trigger1 = p2bodydist X <= 55
value = ifelse(random<600,2400,1600)

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [25,26])||(var(55) = [45,47])||(var(55) = [65,69])
trigger1 = movehit
trigger1 = p2bodydist X <= 55
value = ifelse(random<600,1775,1090)

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = random < 400
trigger1 = movehit 
trigger1 = p2bodydist X <= 45
value = ifelse(random<600,1785,1080)  

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 40)||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact || moveguarded
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = [-10,70]
value = ifelse(random>750,2400,ifelse(random>500,280,260))

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movehit 
trigger1 = p2statetype != A 
trigger1 = p2bodydist X = [-10,70]
value = ifelse(random>750,900,ifelse(random>500,280,260))

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = animtime = 0
trigger1 = movecontact || moveguarded
trigger1 = p2statetype = S 
trigger1 = p2bodydist X = [0,65]
value = 410        

[state 3]
type = changestate
trigger1 = animtime = 0
value = 0;站立
ctrl = 1

;站立 轻脚(近)
[Statedef 205]
type = S
movetype = A
physics = S
anim = 205
velset = 0,0
juggle = 8+var(7)
poweradd = ifelse(fvar(10)!=1,10,5)
ctrl = 0

[State 205, 1]
type = PlaySnd
trigger1 = Time = 0
trigger1 = Random < 750
value = 2995,ifelse(fvar(10)!=1,50,150)
channel = 0

[State 205, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,0

[State 205, 3]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 3
attr = S, NA
air.animtype = back
animtype = light
damage = 40
priority = 7, Hit
guardflag = MA
pausetime = 10,10
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-40)/2,-70
hitsound = S210,0
guardsound = S150,0
ground.type = low
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -3.5
air.velocity = -3.5,-7
guard.velocity = -5.5
getpower = ifelse(fvar(10)!=1,30,15),ifelse(fvar(10)!=1,10,5)
givepower = 1
air.juggle = 10
yaccel = .5

[State 205, 3]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 3
attr = S, NA
air.animtype = back
animtype = light
damage = 40
priority = 7, Hit
guardflag = MA
pausetime = 10,10
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-40)/2,-70
hitsound = S210,0
guardsound = S150,0
ground.type = low
ground.slidetime = 9
ground.hittime = 9
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.velocity = -3.5
air.velocity = -3.5,-7
guard.velocity = -5.5
getpower = ifelse(fvar(10)!=1,30,15),ifelse(fvar(10)!=1,10,5)
givepower = 1
air.juggle = 10
yaccel = .5

;AI青龙
[State 205, 11]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X <= 35
value = 225

[State 205, 12]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X < 60
value = 410  

;AI凤凰
[State 205, 13]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X <= 35
value = 225

[State 205, 14]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X < 60
value = 410  

[State 205, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 12

;超重
[Statedef 295]
type = S
movetype = A
physics = S
velset = 0,0
juggle = 10
ctrl = 0
poweradd = ifelse(fvar(10)!=1,40,20)
sprpriority = 2
anim = 295

[State 295]
type = AfterImage
trigger1 = prevstateno = [55,56]
trigger1 = Time = 0 && Vel X!= 0
time = 20
length = 8
trans = add1

[State 295]
type = varSet
triggerall = var(30) = 0
trigger1 = Movecontact
var(30) = 1

[STate 295]
type = PlaySNd
trigger1 = Animelem = 2 && fvar(28) = 0
value = 2995,ifelse(fvar(10)!=1,(ifelse(random<500,51,52)),(ifelse(random >500,151,152)))
channel = 0
persistent = 0

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 600,1
volume = 230

[State 210, 2]
type = posadd
trigger1 = animelem = 1
x = 15

[State 295]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = A,NA
damage = 115,0
getpower = ifelse(fvar(10)!=1,90,45),ifelse(fvar(10)!=1,30,15)
air.animtype = back
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 12,13
guard.pausetime = 11,11
sparkno = S736
guard.sparkno = S731
sparkxy = ((p2bodydist x)-80)/2,-67
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 27
ground.hittime = 29
ground.cornerpush.veloff = -5
guard.cornerpush.veloff = -17
ground.velocity = -3,-6
guard.velocity = -11
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 15
fall = 1
air.fall = 1
air.juggle = 10
fall.recover = 0

[State 295]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0

[State 295, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;下 轻拳
[Statedef 400]
type = C
movetype = A
physics = C
anim = 400
velset = 0,0
juggle = 8+var(7)
poweradd = ifelse(fvar(10)!=1,5,2)
ctrl = 0

[State 400, 1]
type = PlaySnd
trigger1 = Time = 0
trigger1 = Random < 650
value = 2995,ifelse(fvar(10)!=1,50,150)
channel = 0

[State 400, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,0

[State 400, 3]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 2
attr = S, NA
air.animtype = back
animtype = light
damage = 25
priority = 7, Hit
guardflag = MA
pausetime = 10,10
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-70)/2,-40
hitsound = S210,0
guardsound = S150,0
ground.type = low
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -3.5
air.velocity = -3.5,-6
air.juggle = 10
getpower = ifelse(fvar(10)!=1,30,15),ifelse(fvar(10)!=1,10,5)
givepower = 1
yaccel = .5

[State 400, 3]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 2
attr = S, NA
air.animtype = back
animtype = light
damage = 25
priority = 7, Hit
guardflag = MA
pausetime = 10,10
sparkno = S735
guard.sparkno = S732
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
sparkxy = ((p2bodydist x)-70)/2,-40
hitsound = S210,0
guardsound = S150,0
ground.type = low
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -3.5
air.velocity = -3.5,-6
air.juggle = 10
getpower = ifelse(fvar(10)!=1,30,15),ifelse(fvar(10)!=1,10,5)
givepower = 1
yaccel = .5

;AI青龙


[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [60,62])||(var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = p2movetype = A
trigger1 = p2bodydist X < 35
value = ifelse(random>500,2150,1003)

[State 400, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = random < 300
trigger1 = movecontact || moveguarded
trigger1 = p2statetype = S 
trigger1 = p2bodydist X = [0,35]
value = ifelse(random>500,260,410)

[State 400, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = random<200
trigger1 = movecontact || moveguarded
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = [0,35]
value = ifelse(random>500,260,280) 

[State 400, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
trigger1 = movecontact 
trigger1 = animtime = 0
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = [0,35]
value = ifelse(random>500,225,425)

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = moveguarded
trigger1 = p2bodydist X = (35,55)
value = 260

[State 400, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = random<200
trigger1 = movehit
trigger1 = p2bodydist X =[0,28]
value = ifelse(random>500,425,ifelse(random<500,280,260))

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = var(5) = 1
trigger1 = movecontact
trigger1 = p2bodydist X = [0,55]
value = ifelse(random >= 500,400,410)

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = random < 500
trigger1 = var(5) = 1
trigger1 = movecontact
trigger1 = p2bodydist X > 55
value = 260

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = (55,70)
value = 420

[State 400, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = !movecontact
trigger1 = animtime = 0
value = ifelse(random>500,112,ifelse(random<500,117,116)) 

[State 400, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
trigger1 = !movecontact
trigger1 = animtime = 0
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = [0,35]
value = ifelse(random>500,225,425) 

;AI凤凰

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = p2movetype = A
trigger1 = p2bodydist X < 35
value = ifelse(random>500,2150,1090)

[State 400, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
trigger1 = movecontact
trigger1 = animtime = 0
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = [0,35]
value = ifelse(random>500,225,425)   

[State 400, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = random<500
trigger1 = movecontact || moveguarded
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = [0,35]
value = ifelse(random>500,260,280)  

[State 400, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = random<500
trigger1 = movecontact || moveguarded
trigger1 = p2statetype = S 
trigger1 = p2bodydist X = [0,35]
value = ifelse(random>500,260,410)

[State 400, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movehit
trigger1 = p2bodydist X =[0,28]
value = ifelse(random>500,425,ifelse(random<500,280,260))

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = (35,55)
value = 260

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = random<500
trigger1 = var(5) = 1
trigger1 = movecontact
trigger1 = p2bodydist X = [0,55]
value = ifelse(random >= 500,400,410)

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = random<500
trigger1 = var(5) = 1
trigger1 = movecontact
trigger1 = p2bodydist X > 55
value = 260

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = (55,70)
value = 420

[State 400, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = !movecontact
trigger1 = animtime = 0
value = ifelse(random>500,112,ifelse(random<500,117,116)) 

[State 400, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
trigger1 = !movecontact
trigger1 = animtime = 0
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = [0,35]
value = ifelse(random>500,225,425) 

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;下 重拳
[Statedef 425]
type = C
movetype = a
physics = C
anim = ifelse(fvar(10)!=1,425,435)
poweradd = ifelse(fvar(10)!=1,30,15)
velset = 0
juggle = 8+var(7)
ctrl = 0

[state hitby]
type = hitby
trigger1 = p2bodydist x > 5
value = SCA,AP,SA,NA,HA
time=1

[state hitby]
type = nothitby
trigger1 = time = [0,10]
trigger1 = prevstateno = [160,162]
value = SCA
time=1
ignorehitpause=1

[state 425]
type = playsnd
trigger1 = time =0
value = 2995,ifelse(fvar(10)!=1,(ifelse(random<500,51,52)),(ifelse(random >500,151,152)))
channel = 0

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 600,1
volume = 180

[state hitdef]
type = HitDef
triggerall = var(50) = 0
triggerall = (p2stateno != [5020,5040])  
triggerall = p2stateno != [154,155]
trigger1 = animelem = 3
persistent = 0
attr = S, NA
animtype  = hard
damage    = 85
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = M
pausetime = 12,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,ifelse(fvar(10)!=1,-66,-51)
hitsound   = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 19
ground.hittime  = 21
ground.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-8
air.cornerpush = 1
air.animtype = Back
fall.recover = 0
yaccel = .5

[state hitdef]
type = HitDef
triggerall = var(50) = 0
triggerall = anim = 425
triggerall = !MoveContact
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 4
trigger2 = (p2stateno != [5020,5040])  
trigger2 = p2stateno != [154,155]
trigger2 = animelem = 5
persistent = 0
attr = S, NA
animtype  = high
damage    = 90
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = M
pausetime = 12,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-110
hitsound   = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -8
ground.cornerpush = 1
air.velocity = -3,-7
air.cornerpush = 1
air.animtype = Back
air.juggle = 10
fall.recover = 0
yaccel = .5

[state hitdef]
type = HitDef
triggerall = var(50) = 1
triggerall = (p2stateno != [5020,5040])  
triggerall = p2stateno != [154,155]
trigger1 = animelem = 3
persistent = 0
attr = S, NA
animtype  = hard
damage    = 85
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = M
pausetime = 12,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,ifelse(fvar(10)!=1,-66,-51)
hitsound   = S220,0
guardsound = S150,1
ground.type = low
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.slidetime = 19
ground.hittime  = 21
ground.velocity = -7
ground.cornerpush = 1
air.velocity = -3,-8
air.cornerpush = 1
air.animtype = Back
fall.recover = 0
yaccel = .5

[state hitdef]
type = HitDef
triggerall = var(50) = 1
triggerall = anim = 425
triggerall = !MoveContact
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 4
trigger2 = (p2stateno != [5020,5040])  
trigger2 = p2stateno != [154,155]
trigger2 = animelem = 5
persistent = 0
attr = S, NA
animtype  = high
damage    = 90
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
guardflag = M
pausetime = 12,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-110
hitsound   = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 9
ground.hittime  = 9
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.velocity = -8
ground.cornerpush = 1
air.velocity = -3,-7
air.cornerpush = 1
air.animtype = Back
air.juggle = 10
fall.recover = 0
yaccel = .5

;AI青龙
[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [60,62])||(var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = p2movetype = A
triggerall = p2bodydist X < 55
trigger1 = prevstateno != [160,162]
trigger2 = prevstateno = [160,162]
trigger2 = time >= 8
value = ifelse(random>500,2150,ifelse(p2stateno>3000,2150,1003))

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = (var(55) = [25,26])||(var(55) = [45,47])||(var(55) = [65,68])
trigger1 = random<400
trigger1 = movecontact
trigger1 = p2statetype != A 
trigger1 = p2bodydist X = [-20,55]
value = ifelse(random>=500,1700,1250)

[State 425, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = random < 400
trigger1 = movehit
trigger1 = p2bodydist X < 70
value = ifelse(random<500,280,ifelse(random<500,1515,1805)) 

[State 425, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = random < 500
trigger1 = movecontact || moveguarded
trigger1 = p2bodydist X < 70
value = ifelse(random<500,1805,ifelse(random<500,260,900)) 

[State 425, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact || moveguarded
trigger1 = p2bodydist X < 70
value = ifelse(random<500,1150,ifelse(random<500,ifelse(random<400,1950,1200),1515)) 

;AI凤凰
[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 3000
triggerall = p2statetype != A
triggerall = life<=300
triggerall = p2life >=120
triggerall = (var(55) = 60)||(var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = prevstateno = 2403
trigger1 = movehit = 1
trigger1 = p2bodydist x < 40
value = ifelse(p2life>=400,4600,ifelse(p2life>=300,ifelse(random<500,4350,4050),ifelse(random<500,4300,4000)))

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 3000
triggerall = p2statetype != A
triggerall = life<=300
triggerall = p2life >=120
triggerall = (var(55) = 60)||(var(55) = [80,82])||(var(55) = [100,103])||(var(55) = [110,115])
triggerall =  random<500
trigger1 = movehit = 1
trigger1 = p2bodydist x < 40
value = ifelse(p2life>=400,4600,ifelse(p2life>=300,ifelse(random<500,4250,4410),ifelse(random<500,4200,4400)))

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [60,62])||(var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = p2movetype = A
triggerall = p2bodydist X < 55
trigger1 = prevstateno != [160,162]
trigger2 = prevstateno = [160,162]
trigger2 = time >= 8
value = ifelse(random>500,2150,ifelse(p2stateno>3000,2150,1080))

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = (var(55) = [20,27])||(var(55) = [45,47])||(var(55) = [65,69])
trigger1 = random<400
trigger1 = movecontact
trigger1 = p2statetype != A 
trigger1 = p2bodydist X = [-20,55]
value = ifelse(random>=500,1720,1250)

[State 425, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = random < 700
trigger1 = movecontact || moveguarded
trigger1 = p2bodydist X < 70
value = ifelse(random<500,280,ifelse(random<500,2400,900)) 

[State 425, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact || moveguarded
trigger1 = p2bodydist X < 70
value = ifelse(random<500,1150,ifelse(random<500,ifelse(random<500,1950,1200),2400)) 

[state 3]
type = changestate
trigger1 = animtime = 0
value = 11
ctrl = 1

;下 重脚
[Statedef 420]
type = C
movetype = A
physics = C
juggle = 15
velset = 0,0
ctrl = 0
poweradd = ifelse(fvar(10)!=1,30,15)
juggle = 13
sprpriority = 2
anim = ifelse(fvar(10)!=1,421,420)

[STate 420]
type = PlaySnd
triggerall = fvar(10) != 1
trigger1 = Animelem = 2
trigger1 = random < 400
value = 2000,11
channel = 0

[STate 420]
type = PlaySnd
triggerall = fvar(10) = 1
trigger1 = Animelem = 2
trigger1 = random < 400
value = 2995,ifelse(random<500,151,152)
channel = 0

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 2
value = 600,5
volume = 160

[State 210, 2]
type = posadd
triggerall = anim = 421
trigger1 = animelem = 1
trigger2 = animelem = 2
trigger3 = animelem = 3
x = 13

[State 420,1]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 2
attr = C,NA
damage = 85,0
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,20,10)
animtype = hard
guardflag = L
hitflag = MAF
priority = 5,Hit
pausetime = 12,13
guard.pausetime = 12,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,ifelse(anim=421,-40,-20)
hitsound = S210,3
guardsound = S150,1
ground.type = Trip
ground.slidetime = 15
ground.hittime = 20
ground.velocity = -3,-4
airguard.velocity = -2.3,-4
guard.velocity = -9
air.type = low
air.velocity = -2.4,-5
air.hittime = 10
fall = 1
air.fall = 1
fall.recover = 0
;down.velocity = -3,-5
;down.bounce = 1

[State 420,1]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 2
attr = C,NA
damage = 85,0
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,20,10)
animtype = hard
guardflag = L
hitflag = MAF
priority = 5,Hit
pausetime = 12,13
guard.pausetime = 12,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,ifelse(anim=421,-40,-20)
hitsound = S210,3
guardsound = S150,1
ground.type = Trip
ground.slidetime = 15
ground.hittime = 20
ground.velocity = -3,-4
airguard.velocity = -2.3,-4
guard.velocity = -9
air.type = low
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.velocity = -2.4,-5
air.hittime = 10
fall = 1
air.fall = 1
fall.recover = 0
;down.velocity = -3,-5
;down.bounce = 1

;AI青龙
[State 420, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = random < 500
trigger1 = movecontact || moveguarded
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = (0,70)
value = 900

[State 410, 4]
type = ChangeState
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = fvar(10) = 0
triggerall = var(59) = 1
trigger1 = Random <= 500
trigger1 = moveguarded
trigger1 = p2bodydist X = (65,80)
value = 1350

[State 420, 4]
type = ChangeState
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = var(59) = 1
trigger1 = random < 500
trigger1 = moveguarded
trigger1 = p2bodydist X = (0,70)
value = 1650

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = moveguarded
trigger1 = p2bodydist X = (55,70)
value = 1702

;AI凤凰

[State 410, 4]
type = ChangeState
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = fvar(10) = 1
triggerall = var(59) = 1
trigger1 = Random <= 500
trigger1 = moveguarded
trigger1 = p2bodydist X = (65,80)
value = ifelse(random<500,2150,1350)

[State 420, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact || moveguarded
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = (0,70)
value = 2150

[State 420, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])
trigger1 = movecontact || moveguarded
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = (0,70)
value = 900

[State 420, 4]
type = ChangeState
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = var(59) = 1
trigger1 = Random <= 500
trigger1 = movehit 
trigger1 = p2bodydist X = (0,70)
value = 1650

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = (55,70)
value = 1150

[State 420]
type = ChangeState 
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;下 轻脚
[Statedef 410]
type    = C
movetype= A
physics = C
juggle = 8+var(7)
poweradd= ifelse(fvar(10)!=1,5,2)
ctrl = 0
anim = 410
facep2 = 1
velset = 0,0

[state hitby]
type = hitby
trigger1 = p2bodydist x > 5
value = SCA,AP,SA,NA,HA
time=1

[State 410, 1]
type = PlaySnd
trigger1 = random <=710
trigger1 = Time = 1
channel = 0
value = 2995,ifelse(fvar(10)!=1,50,150)

[State 410, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,0

[State 410, 2]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 3
attr = C, NA
damage    = 18
air.animtype = back
animtype = light
getpower = ifelse(fvar(10)!=1,30,15),ifelse(fvar(10)!=1,10,5)
guardflag = LA
pausetime = 10,10
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-50)/2, 0
hitsound   = S210,0
guardsound = S150,0
ground.type = Low
ground.slidetime = 11
ground.hittime  = 11
ground.velocity = -3.5
air.type = High
air.velocity = -1.4,-3

[State 410, 2]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 3
attr = C, NA
damage    = 18
air.animtype = back
animtype = light
getpower = ifelse(fvar(10)!=1,30,15),ifelse(fvar(10)!=1,10,5)
guardflag = LA
pausetime = 10,10
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-50)/2, 0
hitsound   = S210,0
guardsound = S150,0
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.type = Low
ground.slidetime = 11
ground.hittime  = 11
ground.velocity = -3.5
air.type = High
air.velocity = -1.4,-3

;AI青龙
[State 410, 4]
type = varset
triggerall = var(59) = 1
triggerall = fvar(10) = 0
trigger1 = !movecontact
trigger1 = p2stateno = [0,200] 
trigger1 = var(41)<=0
var(41)=1

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = time = 0
triggerall = (var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = (target,stateno = 4990)||(target,stateno = 4996)
value = ifelse(random<500,245,1510)

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = p2stateno > 3000
trigger1 = p2movetype = I
trigger1 = p2bodydist X = [-50,50]
value = 2150

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = power >= 1000
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = p2statetype != A && p2life >= 80
trigger1 = life < p2life
trigger1 = movehit
trigger1 = p2bodydist X = (30,60)
trigger2 = random < 300
trigger2 = p2statetype != A && p2life >= 80
trigger2 = movehit
trigger2 = p2bodydist X = (30,60)
trigger3 = p2movetype = A
trigger3 = p2bodydist X = [-50,50]
value = 3000

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = power < 1000
trigger1 = p2movetype = A
trigger1 = p2bodydist X = [-50,50]
value = ifelse(p2stateno>3000,2150,1003)

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [80,82])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = life <= 300
triggerall = power >= 3000
trigger1 = movehit
trigger1 = random <= 750
trigger1 = p2bodydist X > 50
value = 4500

[State 410,27]
type = ChangeState
value = ifelse(var(41)=1,1100,410)
triggerall = Var(59) = 1 
triggerall = fvar(10) = 0
triggerall = (var(55) = [25,26])||(var(55) = [45,47])||(var(55) = [65,69])
triggerall = p2life != 0
triggerall = time >= 8
trigger1 = p2movetype != A
trigger1 = P2statetype = S
trigger1 = P2BodyDist X = [35,55]
trigger2 = p2movetype != A
trigger2 = p2stateno != [5100,5170]
trigger2 = p2BodyDist x = [35,55]

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact
trigger1 = p2bodydist X = [0,55]
value = ifelse(random >= 500,400,410)

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = var(5) = 1
trigger1 = movecontact
trigger1 = p2bodydist X > 55
value = 260

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = life >= 400
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = [5,20]
value = 400

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = [21,30]
value = ifelse((p2statetype = s),260,ifelse(random<700,1900,280))   

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = [0,20]
value = 225

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = life > 300
triggerall = power >= 3000
trigger1 = p2statetype != A && p2life > 330
trigger1 = movehit
trigger1 = p2bodydist X = (30,60)
value = ifelse(random < 500,2150,4250)

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = fvar(10) = 0
trigger1 = random > 450
trigger1 = movehit 
trigger1 = p2bodydist X = (50,55)
value = 420

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])
triggerall = movecontact || moveguarded
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = (30,70)
value = ifelse(random>500,900,260)   

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [100,109])||(var(55) = [110,119])
triggerall = movecontact || moveguarded
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = (30,70)
value = ifelse(random>500,ifelse(random<300,900,420),ifelse(random<300,260,420))   

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = random <= 450
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = (30,60)
value = 1100

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = (30,45]
value = ifelse(random>700,2150,ifelse((random>500 && p2statetype = S),280,260))

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = (44,65]
value = ifelse(random>300,260,2150)

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X > 60
value = 1150  

[State 400, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = !movecontact
trigger1 = animtime = 0
value = ifelse(random>500,112,ifelse(random<500,117,116))  

;AI凤凰
[State 410, 4]
type = varset
triggerall = var(59) = 1
triggerall = fvar(10) = 1
trigger1 = !movecontact
trigger1 = p2stateno = [0,200] 
trigger1 = var(41)<=0
var(41)=1

[State 410,27]
type = ChangeState
value = ifelse(var(41)=1,1100,410)
triggerall = Var(59) = 1 
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = p2life != 0
triggerall = time >= 8
trigger1 = p2movetype != A
trigger1 = P2statetype = S
trigger1 = P2BodyDist X = [35,65]
trigger2 = p2movetype != A
trigger2 = p2stateno != [5100,5170]
trigger2 = p2BodyDist x = [35,55]

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact
trigger1 = p2bodydist X = [0,55]
value = ifelse(random >= 500,400,410)

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = var(5) = 1
trigger1 = movecontact
trigger1 = p2bodydist X > 55
value = ifelse(random<500,1710,260)

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [80,85])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = p2stateno > 3000
trigger1 = p2movetype = I
trigger1 = p2bodydist X = [-50,50]
value = 2150

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = power < 1000
trigger1 = p2movetype = A
trigger1 = p2bodydist X = [-50,50]
value = ifelse(p2stateno>3000,2150,1080)

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = life <= 300
triggerall = power >= 3000
triggerall = p2statetype != A
trigger1 = movehit 
trigger1 = random <= 750
trigger1 = p2bodydist X <= 30
value = 4600

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = life >= 400
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = [5,20]
value = 400

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = [21,30]
value = ifelse((p2statetype = s),260,ifelse(random<700,1900,280))  

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = [0,20]
value = 225

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = life > 300
triggerall = power >= 3000
trigger1 = p2statetype != A && p2life > 330
trigger1 = movehit
trigger1 = p2bodydist X = (30,60)
value = ifelse(random < 500,2150,425)

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = p2statetype != A && p2life >= 80
trigger1 = life < p2life
trigger1 = movehit
trigger1 = p2bodydist X = (30,60)
trigger2 = random < 300
trigger2 = p2statetype != A && p2life >= 80
trigger2 = movehit
trigger2 = p2bodydist X = (30,60)
trigger3 = p2movetype = A
trigger3 = p2bodydist X = [-50,50]
value = 425

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = random > 450
trigger1 = movehit 
trigger1 = p2bodydist X = (50,55)
value = 420

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])
triggerall = movecontact || moveguarded
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = (30,70)
value = ifelse(random>500,900,260)   

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [100,109])||(var(55) = [110,119])
triggerall = movecontact || moveguarded
trigger1 = p2statetype = C 
trigger1 = p2bodydist X = (30,70)
value = ifelse(random>500,ifelse(random<300,900,420),ifelse(random<300,260,420))   
  

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = random <= 450
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = (30,60)
value = 1100

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = (30,45]
value = ifelse(random>700,2150,ifelse((random>500 && p2statetype = S),280,260))

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X = (44,65]
value = ifelse(random>300,260,2150)

[State 410, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = 20)||(var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X > 60
value = 1150 

[State 400, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = !movecontact
trigger1 = animtime = 0
value = ifelse(random>500,112,ifelse(random<500,117,116))  

[State 410, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;外门肘打
[Statedef 280]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
poweradd = ifelse(fvar(10)!=1,60,35)
juggle = 0+var(7)
sprpriority = 2
anim = 280

[STate 280]
type = PlaySnd
trigger1 = Animelem = 2
trigger1 = random < 700
value = 2995,ifelse(fvar(10)!=1,54,150)
channel = 0

[STate 280]
type = PlaySnd
triggerall = fvar(10)!=1
trigger1 = Animelem = 7
trigger1 = random < 700
value = 2000,11
channel = 0

[STate 280]
type = PlaySnd
triggerall = fvar(10)=1
trigger1 = Animelem = 7
trigger1 = random < 700
value = 2995,153
channel = 0

[State 900, 2]
type = PlaySnd
trigger1 = Animelem = 2
trigger2 = Animelem = 6
value = 600,1
volume = 250

[state 900]
type = posadd
trigger1 = Animelem = 3
trigger2 = Animelem = 4
trigger3 = Animelem = 5
trigger4 = Animelem = 6
x = 17

[state 900]
type = posadd
trigger1 = Animelem = 11
trigger2 = Animelem = 12
x = -20 

[State 900,1]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
attr = A,NA
damage = 30,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 10,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-95
hitsound = S220,0
guardsound = S150,1
ground.type = high
ground.slidetime = 15
ground.hittime = 13
ground.velocity = -9
airguard.velocity = -6,-3
air.type = low
air.juggle = 5
air.velocity = -4,-3
air.hittime = 15
air.fall = 1
fall.recover = 0

[State 900,1]
type = HitDef
triggerall = var(50) = 0
triggerall = (p2stateno != [5020,5040])  
triggerall = p2stateno != [154,155]
trigger1 = animelem = 6
trigger2 = animelem = 8
attr = A,NA
damage = ifelse((animelem=8),70,20),0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 10,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,ifelse((animelem=8),-50,-70)
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 23
ground.hittime = 23
ground.velocity = -6
airguard.velocity = -3,-5
air.type = low
air.juggle = 5
air.velocity = -3,-5
air.hittime = 15
air.fall=1
fall.recover = 0

[State 900,1]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
attr = A,NA
damage = 30,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 10,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-95
hitsound = S220,0
guardsound = S150,1
ground.type = high
ground.slidetime = 15
ground.hittime = 13
ground.velocity = -9
airguard.velocity = -6,-3
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.type = low
air.juggle = 5
air.velocity = -4,-3
air.hittime = 15
air.fall = 1
fall.recover = 0

[State 900,1]
type = HitDef
triggerall = var(50) = 1
triggerall = (p2stateno != [5020,5040])  
triggerall = p2stateno != [154,155]
trigger1 = animelem = 6
trigger2 = animelem = 8
attr = A,NA
damage = ifelse((animelem=8),70,20),0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 10,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,ifelse((animelem=8),-50,-70)
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 23
ground.hittime = 23
ground.velocity = -6
airguard.velocity = -3,-5
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.type = low
air.juggle = 5
air.velocity = -3,-5
air.hittime = 15
air.fall=1
fall.recover = 0

;AI青龙
[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life > 300
triggerall = power >= 3000
triggerall = time > 25
trigger1 = p2statetype != A && p2life > 300
trigger1 = movehit
trigger1 = p2bodydist X >= 0
value = ifelse(random < 500,ifelse(random<500,1805,2150),3600)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = power >= 1000
triggerall = random < 500
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = p2statetype != A && p2life > 180
trigger1 = life < p2life
trigger1 = movehit
trigger1 = p2bodydist X >= 0
trigger2 = random < 300
trigger2 = p2statetype != A && p2life > 180
trigger2 = movehit
trigger2 = p2bodydist X >= 0
value = ifelse(random<500,ifelse(random<500,1950,1805),2150)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = power >= 1000
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = p2statetype != A && p2life > 180
trigger1 = life < p2life
trigger1 = movehit
trigger1 = p2bodydist X >= 0
trigger2 = random < 300
trigger2 = p2statetype != A && p2life > 180
trigger2 = movehit
trigger2 = p2bodydist X >= 0
value = ifelse(power >= 2000, 3410, 3400)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = movehit 
trigger1 = p2bodydist X >= 45
value = 1650

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = p2statetype = S
triggerall = time > 25
trigger1 = moveguarded
trigger1 = AnimTime = 0 
trigger1 = p2bodydist X >= 5
value = 410  

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life <500
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = movehit 
trigger1 = p2bodydist X <= 20
value = ifelse(random<500,ifelse(random<500,1515,1950),ifelse(random<600,1800,1003)) 

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life >500
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = movehit 
trigger1 = p2bodydist X <= 20
value = ifelse(random<500,1515,ifelse(random<400,1800,1600))

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = movecontact || moveguarded
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = random > 700
trigger1 = p2bodydist X > 0
value = 1100

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = movecontact || moveguarded
triggerall = time > 25
trigger1 = random < 300
trigger1 = p2bodydist X > 0
value = 1702

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = movecontact 
trigger1 = p2bodydist X = (20,60]
value = ifelse(random<400,1800,2150)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life >400
triggerall = movehit
triggerall = time > 25
triggerall = p2statetype != A 
trigger1 = p2bodydist X > 20
value = 2250

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life >400
triggerall = movehit
triggerall = time > 25
triggerall = p2statetype != A 
trigger1 = random > 700
trigger1 = p2bodydist X > 35
value = 1100

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life >400
triggerall = movehit
triggerall = time > 25 
trigger1 = random < 300
trigger1 = p2bodydist X > 35
value = 1700 

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life >400
triggerall = time > 25
trigger1 = movecontact || movehit || moveguarded
trigger1 = random > 800
trigger1 = p2bodydist X > 0
value = 1200

;AI凤凰
[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life > 300
triggerall = power >= 3000
triggerall = time > 25
trigger1 = p2statetype != A && p2life > 300
trigger1 = movehit
trigger1 = p2bodydist X >= 0
value = ifelse(random < 500,ifelse(random<500,1775,2150),4400)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = random < 500
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = p2statetype != A && p2life > 180
trigger1 = life < p2life
trigger1 = movehit
trigger1 = p2bodydist X >= 0
trigger2 = random < 300
trigger2 = p2statetype != A && p2life > 180
trigger2 = movehit
trigger2 = p2bodydist X >= 0
value = ifelse(random<500,1775,2150)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = p2statetype != A && p2life > 180
trigger1 = life < p2life
trigger1 = movehit
trigger1 = p2bodydist X >= 0
trigger2 = random < 300
trigger2 = p2statetype != A && p2life > 180
trigger2 = movehit
trigger2 = p2bodydist X >= 0
value = ifelse(power >= 2000, 4250, 4200)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = movehit 
trigger1 = p2bodydist X >= 45
value = 1650

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = p2statetype = S
triggerall = time > 25
trigger1 = moveguarded
trigger1 = AnimTime = 0 
trigger1 = p2bodydist X >= 5
value = 410  

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life <500
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = movehit 
trigger1 = p2bodydist X <= 20
value = ifelse(random<500,1720,ifelse(random<400,1775,2400)) 

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >500
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = movehit 
trigger1 = p2bodydist X <= 20
value = ifelse(random<500,1950,ifelse(random<400,1775,1080))

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = movecontact || moveguarded
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = random > 700
trigger1 = p2bodydist X > 0
value = 1100

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = movecontact || moveguarded
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = random < 300
trigger1 = p2bodydist X > 0
value = 1720

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = time > 25
triggerall = p2statetype != A
trigger1 = movecontact 
trigger1 = p2bodydist X = (20,60]
value = ifelse(random<400,1775,2150)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >400
triggerall = movehit
triggerall = time > 25
triggerall = p2statetype != A 
trigger1 = p2bodydist X > 20
value = 2250

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >400
triggerall = movehit
triggerall = time > 25
triggerall = p2statetype != A 
trigger1 = random > 700
trigger1 = p2bodydist X > 35
value = 1100

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >400
triggerall = movehit
triggerall = p2statetype != A
triggerall = time > 25 
trigger1 = random < 300
trigger1 = p2bodydist X > 35
value = 2400 

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >400
triggerall = time > 25
trigger1 = movecontact || movehit || moveguarded
trigger1 = random > 800
trigger1 = p2bodydist X > 0
value = 1200

[State 900]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;前B
[Statedef 260]
type = C
movetype = A
physics = C
velset = 0,0
ctrl = 0
poweradd = ifelse(fvar(10)!=1,60,30)
juggle = 0+var(7)
sprpriority = 2
anim = 260

[STate 900]
type = PlaySnd
trigger1 = Animelem = 1
value = 1,1
channel = 1

[State 900, 2]
type = PlaySnd
triggerall = random <= 400
trigger1 = Time = 0
value = 2995,ifelse(fvar(10)!=1,54,150)
channel = 0

[State 900, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,1
volume = 180

[state 900]
type = velset
trigger1 = animelem = 2
x = 5.5

[state 900]
type = velset
trigger1 = animelem = 3
x = 3.5

[state 900]
type = velset
trigger1 = animelem = 4
x = 3

[State 900,1]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 2
attr = A,NA
damage = 10,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
guardflag = L
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 10,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-50
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 19
ground.hittime = 21
ground.velocity = -6
airguard.velocity = -6,-3
air.type = low
air.juggle = 5
air.velocity = -3,-3
air.hittime = 15
fall.recovertime = 10

[State 900,1]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 2
attr = A,NA
damage = 10,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
guardflag = L
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 10,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-50
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 19
ground.hittime = 21
ground.velocity = -6
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
airguard.velocity = -6,-3
air.type = low
air.juggle = 5
air.velocity = -3,-3
air.hittime = 15
fall.recovertime = 10

[State 900]
type = ChangeState
trigger1 = AnimTime = 0
value = 265

[Statedef 265]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
poweradd = 0
juggle = 0+var(7)
sprpriority = 2
anim = 265

[State 900, 2]
type = PlaySnd
triggerall = random <= 400
trigger1 = Animelem = 3
value = 2995,ifelse(fvar(10)!=1,55,153)
channel = 0

[State 900, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 600,1
volume = 180

[state 900]
type = velset
trigger1 = animelem = 1
x = 0  

[state 900]
type = velset
trigger1 = animelem = 2
x = 3

[state 900]
type = velset
trigger1 = animelem = 2
x = 6

[state 900]
type = velset
trigger1 = animelem = 4
x = 2  

[state 900]
type = velset
trigger1 = animelem = 5
x = 0

[State 900,1]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
attr = A,NA
damage = 50,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 10,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-50
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -6
airguard.velocity = -6,-3
ground.cornerpush.veloff = -13
air.type = low
air.juggle = 5
air.velocity = -3,-3
air.hittime = 15
fall.recovertime = 10

[State 900,1]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
attr = A,NA
damage = 50,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 10,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-50
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -6
airguard.velocity = -6,-3
ground.cornerpush.veloff = -13
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.type = low
air.juggle = 5
air.velocity = -3,-3
air.hittime = 15
fall.recovertime = 10

;AI青龙
[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = life > 300
triggerall = power >= 3000
trigger1 = p2statetype != A && p2life > 300
trigger1 = movehit
trigger1 = p2bodydist X >= 0
value = ifelse(random < 500,ifelse(random<500,1805,2150),4500)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = power >= 1000
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = p2statetype != A && p2life > 180
trigger1 = life < p2life
trigger1 = movehit
trigger1 = p2bodydist X >= 0
trigger2 = random < 300
trigger2 = p2statetype != A && p2life > 180
trigger2 = movehit
trigger2 = p2bodydist X >= 0
value = ifelse((var(55) = [6,13]),1805,2150)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = power >= 1000
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = p2statetype != A && p2life > 180
trigger1 = life < p2life
trigger1 = movehit
trigger1 = p2bodydist X >= 0
trigger2 = random < 300
trigger2 = p2statetype != A && p2life > 180
trigger2 = movehit
trigger2 = p2bodydist X >= 0
value = ifelse(power >= 2000, 3650, 3600)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = movehit 
trigger1 = p2bodydist X >= 45
value = 1650

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = p2statetype = S
trigger1 = moveguarded
trigger1 = AnimTime = 0 
trigger1 = p2bodydist X >= 5
value = 410  

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life <500
triggerall = p2statetype != A
trigger1 = movehit 
trigger1 = p2bodydist X <= 20
value = ifelse(random<500,1510,ifelse(random<400,ifelse(random<500,1950,1805),1003))

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life >500
triggerall = p2statetype != A
trigger1 = movehit 
trigger1 = p2bodydist X <= 20
value = ifelse(random<500,1510,ifelse(random<400,1805,1600))

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = movecontact || moveguarded
trigger1 = random > 700
trigger1 = p2bodydist X > 0
value = 1100

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = movecontact || moveguarded
trigger1 = random < 300
trigger1 = p2bodydist X > 0
value = 1702

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = p2statetype != A
trigger1 = (var(55) = [25,26])||(var(55) = [45,47])||(var(55) = [65,68])
trigger1 = movecontact 
trigger1 = p2bodydist X = (20,60]
value = ifelse(random<500,1800,2150)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life >400
triggerall = movehit
trigger1 = (var(55) = [25,26])||(var(55) = [45,47])||(var(55) = [65,68])
trigger1 = p2bodydist X > 35
value = 1100

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life >400
triggerall = movehit
triggerall = p2statetype != A 
trigger1 = (var(55) = [25,26])||(var(55) = [45,47])||(var(55) = [65,68])
trigger1 = p2bodydist X > 35
value = ifelse(random<500,1700,1950) 

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life >400
triggerall = p2statetype != A
trigger1 = movecontact || movehit || moveguarded
trigger1 = (var(55) = [25,26])||(var(55) = [45,47])||(var(55) = [65,68])
trigger1 = p2bodydist X > 0
value = 1200

;AI凤凰
[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = life > 300
triggerall = power >= 3000
trigger1 = p2statetype != A && p2life > 300
trigger1 = movehit
trigger1 = p2bodydist X <= 30
value = ifelse(random < 500,ifelse(random<500,1775,2150),4600)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = p2statetype != A && p2life > 180
trigger1 = life < p2life
trigger1 = movehit
trigger1 = p2bodydist X >= 0
trigger2 = random < 300
trigger2 = p2statetype != A && p2life > 180
trigger2 = movehit
trigger2 = p2bodydist X >= 0
value = ifelse((var(55) = [6,13]),1775,2150)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = p2statetype != A && p2life > 180
trigger1 = life < p2life
trigger1 = movehit
trigger1 = p2bodydist X >= 0
trigger2 = random < 300
trigger2 = p2statetype != A && p2life > 180
trigger2 = movehit
trigger2 = p2bodydist X >= 0
value = ifelse(power >= 2000, 4250, 4200)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [25,26])||(var(55) = [45,47])||(var(55) = [65,68])
trigger1 = movehit 
trigger1 = p2bodydist X >= 45
value = 1650

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = p2statetype = S
trigger1 = moveguarded
trigger1 = AnimTime = 0 
trigger1 = p2bodydist X >= 5
value = 410  

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life <500
triggerall = p2statetype != A
trigger1 = movehit 
trigger1 = p2bodydist X <= 20
value = ifelse(random<500,1510,ifelse(random<400,1775,1080))

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >500
triggerall = p2statetype != A
trigger1 = movehit 
trigger1 = p2bodydist X <= 20
value = ifelse(random<500,1510,ifelse(random<400,1775,1090))

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = movecontact || moveguarded
trigger1 = random > 700
trigger1 = p2bodydist X > 0
value = 1100

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = movecontact || moveguarded
trigger1 = random < 300
trigger1 = p2bodydist X > 0
value = 2400

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = p2statetype != A
trigger1 = (var(55) = [25,26])||(var(55) = [45,47])||(var(55) = [65,68])
trigger1 = movecontact 
trigger1 = p2bodydist X = (20,60]
value = ifelse(random<500,1775,2150)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >400
triggerall = movehit
trigger1 = random < 500
trigger1 = (var(55) = [25,26])||(var(55) = [45,47])||(var(55) = [65,68])
trigger1 = p2bodydist X > 35
value = 1100

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >400
triggerall = movehit
triggerall = p2statetype != A 
trigger1 = random < 500
trigger1 = (var(55) = [25,26])||(var(55) = [45,47])||(var(55) = [65,68])
trigger1 = p2bodydist X > 35
value = 1720 

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >400
triggerall = p2statetype != A
trigger1 = movecontact || movehit || moveguarded
trigger1 = (var(55) = [25,26])||(var(55) = [45,47])||(var(55) = [65,68])
trigger1 = p2bodydist X > 0
value = 1200

[State 900]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;前B
[Statedef 270]
type = C
movetype = A
physics = C
velset = 0,0
ctrl = 0
poweradd = ifelse(fvar(10)!=1,60,30)
juggle = 0+var(7)
sprpriority = 2
anim = 260

[STate 900]
type = PlaySnd
trigger1 = Animelem = 1
value = 1,1
channel = 1

[State 900, 2]
type = PlaySnd
triggerall = random <= 400
trigger1 = Time = 0
value = 2995,ifelse(fvar(10)!=1,54,150)
channel = 0

[State 900, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,1
volume = 180

[state 900]
type = velset
trigger1 = animelem = 2
x = 5.5

[state 900]
type = velset
trigger1 = animelem = 3
x = 3.5

[state 900]
type = velset
trigger1 = animelem = 4
x = 3

[State 900,1]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 2
attr = A,NA
damage = 15,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
guardflag = L
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 10,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-50
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 19
ground.hittime = 21
ground.velocity = -6
airguard.velocity = -6,-3
air.type = low
air.juggle = 5
air.velocity = -3,-3
air.hittime = 15
fall.recovertime = 10

[State 900,1]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 2
attr = A,NA
damage = 15,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
guardflag = L
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 10,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-50
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 19
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.hittime = 21
ground.velocity = -6
airguard.velocity = -6,-3
air.type = low
air.juggle = 5
air.velocity = -3,-3
air.hittime = 15
fall.recovertime = 10

[State 900]
type = ChangeState
trigger1 = AnimTime = 0
value = 275

[Statedef 275]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
poweradd = 0
juggle = 0+var(7)
sprpriority = 2
anim = 265

[State 900, 2]
type = PlaySnd
triggerall = random <= 400
trigger1 = Animelem = 3
value = 2995,ifelse(fvar(10)!=1,55,153)
channel = 0

[State 900, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 600,1
volume = 180

[state 900]
type = velset
trigger1 = animelem = 1
x = 0  

[state 900]
type = velset
trigger1 = animelem = 2
x = 3

[state 900]
type = velset
trigger1 = animelem = 2
x = 6

[state 900]
type = velset
trigger1 = animelem = 4
x = 2  

[state 900]
type = velset
trigger1 = animelem = 5
x = 0

[State 900,1]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
attr = A,NA
damage = 75,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 10,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-50
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -6
airguard.velocity = -6,-3
ground.cornerpush.veloff = -13
air.type = low
air.juggle = 5
air.velocity = -3,-3
air.hittime = 15
fall.recovertime = 10

[State 900,1]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
attr = A,NA
damage = 75,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 10,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-50
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -6
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
airguard.velocity = -6,-3
ground.cornerpush.veloff = -13
air.type = low
air.juggle = 5
air.velocity = -3,-3
air.hittime = 15
fall.recovertime = 10

[State 900]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;前 A
[Statedef 900]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
poweradd = ifelse(fvar(10)!=1,60,30)
juggle = 0+var(7)
sprpriority = 2
anim = 900

[State 821, 5]
type = Width
trigger1 = animelemtime(1) >= 0
trigger1 = animelemtime(5) <= 0
player = 5,0
edge = 5

[State 821, 5]
type = Width
trigger1 = animelemtime(5) >= 0
trigger1 = animelemtime(11) <= 0
player = 10,0
edge = 10

[STate 900]
type = PlaySnd
trigger1 = Animelem = 5
value = 2995,ifelse(fvar(10)!=1,ifelse(random<500,54,55),153)
channel = 0

[State 900, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,1 

[State 900, 2]
type = posadd
trigger1 = Animelem = 1
x = 8

[State 900, 2]
type = posadd
trigger1 = Animelem = 2
trigger2 = Animelem = 5
x = 4 


[State 900, 2]
type = posadd
trigger1 = Animelem = 6
trigger2 = Animelem = 7
trigger3 = Animelem = 8
trigger4 = Animelem = 9
x = 10 

[State 900, 2]
type = posadd
trigger1 = Animelem = 12
x = -10

[State 900, 2]
type = posadd
trigger1 = Animelem = 13
x = -10

[State 900,1]
type = HitDef
triggerall = var(50) = 0
triggerall = (p2stateno != [5020,5040])  
triggerall = p2stateno != [154,155]
trigger1 = animelem = 6
trigger2 = animelem = 7
attr = A,NA
damage = 35,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 14,14
guard.pausetime = 14,14
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,ifelse((animelem=7),-40,-60)
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 25
ground.hittime = 27
ground.velocity = ifelse((animelem=6),-5,-9)
guard.velocity = ifelse((animelem=6),-5.5,-11.5)
airguard.velocity = -6,-3
ground.cornerpush.veloff = ifelse((animelem=6),-6,-13)
guard.cornerpush.veloff = ifelse((animelem=6),-7,-13.5)
air.type = low
air.juggle = 5
air.velocity = -3,-3
air.hittime = 15
fall.recovertime = 10

[State 900,1]
type = HitDef
triggerall = var(50) = 1
triggerall = (p2stateno != [5020,5040])  
triggerall = p2stateno != [154,155]
trigger1 = animelem = 6
trigger2 = animelem = 7
attr = A,NA
damage = 35,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 14,14
guard.pausetime = 14,14
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,ifelse((animelem=7),-40,-60)
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 25
ground.hittime = 27
ground.velocity = ifelse((animelem=6),-5,-9)
guard.velocity = ifelse((animelem=6),-5.5,-10.5)
airguard.velocity = -6,-3
ground.cornerpush.veloff = ifelse((animelem=6),-6,-13)
guard.cornerpush.veloff = ifelse((animelem=6),-7,-13.5)
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.type = low
air.juggle = 5
air.velocity = -3,-3
air.hittime = 15
fall.recovertime = 10

;AI青龙
[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life > 300
triggerall = power >= 3000
triggerall = random > 500
triggerall = (var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,84])||(var(55) = [102,106])||(var(55) = [112,116])
trigger1 = p2statetype != A && p2life > 300
trigger1 = movehit
trigger1 = p2bodydist X >= 0
value = ifelse(random < 500,ifelse(random<500,2150,1950),3400)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = power >= 1000
triggerall = random < 400
triggerall = (var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,84])||(var(55) = [102,106])||(var(55) = [112,116])
trigger1 = p2statetype != A && p2life > 180
trigger1 = life < p2life
trigger1 = movehit
trigger1 = p2bodydist X >= 0
trigger2 = random < 300
trigger2 = p2statetype != A && p2life > 180
trigger2 = movehit
trigger2 = p2bodydist X >= 0
value = ifelse(random<500,1805,2150)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = power >= 1000
triggerall = random > 500
triggerall = (var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,84])||(var(55) = [102,106])||(var(55) = [112,116])
trigger1 = p2statetype != A && p2life > 180
trigger1 = life < p2life
trigger1 = movehit
trigger1 = p2bodydist X >= 0
trigger2 = random < 300
trigger2 = p2statetype != A && p2life > 180
trigger2 = movehit
trigger2 = p2bodydist X >= 0
value = ifelse(power >= 2000, 3250, 3000)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = random > 500
triggerall = (var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,84])||(var(55) = [102,106])||(var(55) = [112,116])
trigger1 = movehit 
trigger1 = p2bodydist X >= 45
value = 1650

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life <500
triggerall = p2statetype != A
triggerall = random > 500
triggerall = (var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,84])||(var(55) = [102,106])||(var(55) = [112,116])
trigger1 = movehit 
trigger1 = p2bodydist X <= 20
value = ifelse(random<650,1950,1003) 

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life >500
triggerall = p2statetype != A
triggerall = random > 500
triggerall = (var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,84])||(var(55) = [103,106])||(var(55) = [113,116])
trigger1 = movehit 
trigger1 = p2bodydist X <= 20
value = ifelse(random<650,1515,1000) 

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = movecontact || moveguarded
triggerall = (var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,84])||(var(55) = [103,105])||(var(55) = [113,116])
trigger1 = random > 700
trigger1 = p2bodydist X > 0
value = ifelse(random<400,1100,1950)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = movecontact || moveguarded
triggerall = random < 700
triggerall = (var(55) = [44,45])||(var(55) = [64,65])||(var(55) = [84,85])||(var(55) = [104,109])||(var(55) = [114,119])
trigger1 = p2bodydist X > 0
value = 1702

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = random < 700
triggerall = (var(55) = [44,45])||(var(55) = [64,65])||(var(55) = [84,85])||(var(55) = [104,109])||(var(55) = [114,119])
trigger1 = movecontact 
trigger1 = p2bodydist X = (20,60]
value = ifelse(random<500,1950,2150)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life >400
triggerall = movehit 
triggerall = (var(55) = [44,45])||(var(55) = [64,65])||(var(55) = [84,85])||(var(55) = [104,109])||(var(55) = [114,119])
trigger1 = p2bodydist X > 20
value = 2250

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life >400
triggerall = movehit 
triggerall = (var(55) = [42,44])||(var(55) = [64,64])||(var(55) = [82,85])||(var(55) = [103,107])||(var(55) = [113,117])
trigger1 = p2bodydist X > 35
value = 1100

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life >400
triggerall = movehit 
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])
trigger1 = p2bodydist X > 35
value = 1700 

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = life >400
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,107])||(var(55) = [110,117])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X > 0
value = 1200

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = p2statetype = S
trigger1 = moveguarded
trigger1 = AnimTime = 0 
trigger1 = p2bodydist X >= 5
value = 410  

;AI凤凰
[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life > 300
triggerall = power >= 3000
triggerall = random > 500
triggerall = (var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,84])||(var(55) = [102,106])||(var(55) = [112,116])
trigger1 = p2statetype != A && p2life > 300
trigger1 = movehit
trigger1 = p2bodydist X >= 0
value = ifelse(random < 500,2150,4200)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = random < 400
triggerall = (var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,84])||(var(55) = [102,106])||(var(55) = [112,116])
trigger1 = p2statetype != A && p2life > 180
trigger1 = life < p2life
trigger1 = movehit
trigger1 = p2bodydist X >= 0
trigger2 = random < 300
trigger2 = p2statetype != A && p2life > 180
trigger2 = movehit
trigger2 = p2bodydist X >= 0
value = ifelse(random<500,2150,ifelse(random<500,1720,1950))

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = random > 500
triggerall = (var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,84])||(var(55) = [102,106])||(var(55) = [112,116])
trigger1 = p2statetype != A && p2life > 180
trigger1 = life < p2life
trigger1 = movehit
trigger1 = p2bodydist X >= 0
trigger2 = random < 300
trigger2 = p2statetype != A && p2life > 180
trigger2 = movehit
trigger2 = p2bodydist X >= 0
value = ifelse(power >= 2000, 4350, 4300)

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = random > 500
triggerall = (var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,84])||(var(55) = [102,106])||(var(55) = [112,116])
trigger1 = movehit 
trigger1 = p2bodydist X >= 45
value = 1650

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life <500
triggerall = p2statetype != A
triggerall = random > 500
triggerall = (var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,84])||(var(55) = [102,106])||(var(55) = [112,116])
trigger1 = movehit 
trigger1 = p2bodydist X <= 20
value = 1090 

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >500
triggerall = p2statetype != A
triggerall = random > 500
triggerall = (var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,84])||(var(55) = [103,106])||(var(55) = [113,116])
trigger1 = movehit 
trigger1 = p2bodydist X <= 20
value = 1080 

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = movecontact || moveguarded
triggerall = (var(55) = [40,42])||(var(55) = [60,63])||(var(55) = [80,84])||(var(55) = [103,105])||(var(55) = [113,116])
trigger1 = random > 700
trigger1 = p2bodydist X > 0
value = 1100

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = movecontact || moveguarded
triggerall = random > 700
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [103,105])||(var(55) = [113,115])
trigger1 = p2bodydist X > 0
value = 2400

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = random < 700
triggerall = (var(55) = [44,45])||(var(55) = [64,65])||(var(55) = [84,85])||(var(55) = [104,109])||(var(55) = [114,119])
trigger1 = movecontact 
trigger1 = p2bodydist X = (20,60]
value = 2150

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >400
triggerall = movehit 
triggerall = (var(55) = [44,45])||(var(55) = [64,65])||(var(55) = [84,85])||(var(55) = [104,109])||(var(55) = [114,119])
trigger1 = p2bodydist X > 20
value = 2250

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >400
triggerall = movehit 
triggerall = (var(55) = [42,44])||(var(55) = [64,64])||(var(55) = [82,85])||(var(55) = [103,107])||(var(55) = [113,117])
trigger1 = p2bodydist X > 35
value = 1100

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >400
triggerall = p2statetype != A
triggerall = movehit 
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])
trigger1 = p2bodydist X > 35
value = 1950 

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = life >400
triggerall = (var(55) = [40,41])||(var(55) = [60,62])||(var(55) = [80,83])||(var(55) = [100,107])||(var(55) = [110,117])
trigger1 = movecontact || movehit || moveguarded
trigger1 = p2bodydist X > 0
value = 1200

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = p2statetype = S
trigger1 = moveguarded
trigger1 = AnimTime = 0 
trigger1 = p2bodydist X >= 5
value = 410  

[State 900]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;跳 轻拳
[Statedef 600]
type = A
movetype = A
physics = A
juggle = 15
ctrl = 0
poweradd = ifelse(fvar(10)!=1,20,10)
sprpriority = 2
anim = 600

[State 600]
type = AfterImage
trigger1 = prevstateno = [55,56]
trigger1 = Time = 0 && Vel X!= 0
time = 20
length = 8
trans = add1

[State 600]
type = varSet
triggerall = var(30) = 0
trigger1 = Movecontact
var(30) = 1

[STate 600]
type = PlaySNd
trigger1 = Animelem = 2
trigger1 = random < 500
value = 2995,ifelse(fvar(10)!=1,50,150)
channel = 0
persistent = 0

[State 600, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,0

[State 600,1]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 1
attr = A,NA
damage = 40,0
getpower = ifelse(fvar(10)!=1,30,15),ifelse(fvar(10)!=1,10,5)
animtype = light
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-45)/2,-50
hitsound = S210,0
guardsound = S150,0
ground.type = low
ground.slidetime = 7
ground.hittime = 9
ground.velocity = -3
ground.cornerpush.veloff = -3
guard.cornerpush.veloff = -3
airguard.velocity = -4,-3
air.type = low
air.velocity = -3.5,-5.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 600,1]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 1
attr = A,NA
damage = 40,0
getpower = ifelse(fvar(10)!=1,30,15),ifelse(fvar(10)!=1,10,5)
animtype = light
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-45)/2,-50
hitsound = S210,0
guardsound = S150,0
ground.type = low
ground.slidetime = 7
ground.hittime = 9
ground.velocity = -3
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.cornerpush.veloff = -3
guard.cornerpush.veloff = -3
airguard.velocity = -4,-3
air.type = low
air.velocity = -3.5,-5.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 600,4]
type = PlaySnd
trigger1 = animelem = 2
value = S1,0
persistent = 0

[State 600, 4]
type = ChangeState
triggerall = power >= 1000
trigger1 = var(59) = 1
trigger1 = movehit
value = 3100

;跳 重拳
[Statedef 615]
type = A
movetype = A
physics = A
juggle = 15
ctrl = 0
poweradd = ifelse(fvar(10)!=1,50,25)
sprpriority = 2
anim = 615

[State 615]
type = AfterImage
trigger1 = prevstateno = [55,56]
trigger1 = Time = 0 && Vel X!= 0
time = 20
length = 8
trans = add1

[State 615]
type = varSet
triggerall = var(30) = 0
trigger1 = Movecontact
var(30) = 1

[STate 615]
type = PlaySNd
trigger1 = Animelem = 2 && fvar(28) = 0
value = 2995,ifelse(fvar(10)!=1,51,ifelse(random<500,151,152))
channel = 0
persistent = 0

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 600,1
volume = 180

[State 615]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = A,NA
damage = 90,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,20,10)
animtype = high
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,13
guard.pausetime = 13,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-45)/2,-30
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 13
ground.hittime = 13
ground.velocity = -6
ground.cornerpush.veloff = -7
guard.cornerpush.veloff = -8
airguard.velocity = -6,-3
air.type = low
air.velocity = -3.5,-6.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 615]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = A,NA
damage = 90,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,20,10)
animtype = high
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,13
guard.pausetime = 13,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-45)/2,-30
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 13
ground.hittime = 13
ground.velocity = -6
ground.cornerpush.veloff = -7
guard.cornerpush.veloff = -8
airguard.velocity = -6,-3
air.type = low
air.velocity = -3.5,-6.7
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 615]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0

;跳 轻脚
[Statedef 605]
type = A
movetype = A
physics = A
juggle = 15
ctrl = 0
poweradd = ifelse(fvar(10)!=1,20,10)
sprpriority = 2
anim = 605

[State 605]
type = AfterImage
trigger1 = prevstateno = [55,56]
trigger1 = Time = 0 && Vel X!= 0
time = 20
length = 8
trans = add1

[State 605]
type = varSet
triggerall = var(30) = 0
trigger1 = Movecontact
var(30) = 1

[STate 605]
type = PlaySNd
trigger1 = Animelem = 2 && random <= 500
value = 2995,ifelse(fvar(10)!=1,55,150)
channel = 0
persistent = 0

[State 605, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,0

[State 605]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = A,NA
damage = 50,0
getpower = ifelse(fvar(10)!=1,20,10),ifelse(fvar(10)!=1,10,5)
animtype = light
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-50)/2,-45
hitsound = S210,0
guardsound = S150,0
ground.type = low
ground.slidetime = 7
ground.hittime = 9
ground.velocity = -3
ground.cornerpush.veloff = -3
guard.cornerpush.veloff = -3
airguard.velocity = -4,-3
air.type = low
air.velocity = -3.5,-5.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 605]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = A,NA
damage = 50,0
getpower = ifelse(fvar(10)!=1,20,10),ifelse(fvar(10)!=1,10,5)
animtype = light
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-50)/2,-45
hitsound = S210,0
guardsound = S150,0
ground.type = low
ground.slidetime = 7
ground.hittime = 9
ground.velocity = -3
ground.cornerpush.veloff = -3
guard.cornerpush.veloff = -3
airguard.velocity = -4,-3
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.type = low
air.velocity = -3.5,-5.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 605]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0

[State 605, 4]
type = ChangeState
triggerall = power >= 1000
trigger1 = var(59) = 1
trigger1 = movehit
value = 3100

;跳 轻脚
[Statedef 606]
type = A
movetype = A
physics = A
juggle = 15
ctrl = 0
poweradd = ifelse(fvar(10)!=1,20,10)
sprpriority = 2
anim = ifelse(fvar(10)!=1,606,605)

[State 605]
type = AfterImage
trigger1 = prevstateno = [55,56]
trigger1 = Time = 0 && Vel X!= 0
time = 20
length = 8
trans = add1

[State 605]
type = varSet
triggerall = var(30) = 0
trigger1 = Movecontact
var(30) = 1

[STate 605]
type = PlaySNd
trigger1 = (Animelem = 2) && (random <= 500)
value = 2995,ifelse(fvar(10)!=1,55,150)
channel = 0
persistent = 0

[State 605, 2]
type = PlaySnd
trigger1 = Time = 0
value = 600,0

[State 605]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = A,NA
damage = 50,0
getpower = ifelse(fvar(10)!=1,20,10),ifelse(fvar(10)!=1,10,5)
animtype = light
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-40)/2,ifelse((animelem!=2),-20,-55)
hitsound = S210,0
guardsound = S150,0
ground.type = low
ground.slidetime = 7
ground.hittime = 9
ground.velocity = -3
airguard.velocity = -4,-3
ground.cornerpush.veloff = -3
guard.cornerpush.veloff = -3
air.type = low
air.velocity = -3.5,-6.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 605]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = A,NA
damage = 50,0
getpower = ifelse(fvar(10)!=1,20,10),ifelse(fvar(10)!=1,10,5)
animtype = light
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
guard.pausetime = 10,10
sparkno = S735
guard.sparkno = S732
sparkxy = ((p2bodydist x)-40)/2,ifelse((animelem!=2),-20,-55)
hitsound = S210,0
guardsound = S150,0
ground.type = low
ground.slidetime = 7
ground.hittime = 9
ground.velocity = -3
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
airguard.velocity = -4,-3
ground.cornerpush.veloff = -3
guard.cornerpush.veloff = -3
air.type = low
air.velocity = -3.5,-6.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 605]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0

[State 605, 4]
type = ChangeState
triggerall = power >= 1000
trigger1 = var(59) = 1
trigger1 = movehit
value = 3100

;跳 重脚
[Statedef 610]
type = A
movetype = A
physics = A
juggle = 15
ctrl = 0
poweradd = ifelse(fvar(10)!=1,60,30)
sprpriority = 2
anim = ifelse(fvar(10)!=1,610,612)

[State 610]
type = AfterImage
trigger1 = prevstateno = [55,56]
trigger1 = Time = 0 && Vel X!= 0
time = 20
length = 8
trans = add1

[State 610]
type = varSet
triggerall = var(30) = 0
trigger1 = Movecontact
var(30) = 1

[STate 610]
type = PlaySNd
trigger1 = Animelem = 2 && fvar(28) = 0
value = 2995,ifelse(fvar(10)!=1,(ifelse(random<500,51,52)),(ifelse(random >500,151,152)))
channel = 0
persistent = 0

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 600,1
volume = 200

[State 610]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
attr = A,NA
damage = 85,0
getpower = ifelse(fvar(10)!=1,40,20),ifelse(fvar(10)!=1,10,10)
animtype = high
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,13
guard.pausetime = 15,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,ifelse(fvar(10)!=1,-26,-70)
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 13
ground.hittime = 13
ground.velocity = -6
ground.cornerpush.veloff = -7
guard.cornerpush.veloff = -8
airguard.velocity = -6,-3
air.type = low
air.velocity = -3.5,-6.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 610]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
attr = A,NA
damage = 85,0
getpower = ifelse(fvar(10)!=1,40,20),ifelse(fvar(10)!=1,10,10)
animtype = high
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,13
guard.pausetime = 15,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,ifelse(fvar(10)!=1,-26,-70)
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 13
ground.hittime = 13
ground.velocity = -6
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
ground.cornerpush.veloff = -7
guard.cornerpush.veloff = -8
airguard.velocity = -6,-3
air.type = low
air.velocity = -3.5,-6.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 610]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0

[State 605, 4]
type = ChangeState
triggerall = var(59) != 0
triggerall = (var(55) = [60,61])||(var(55) = [80,82])||(var(55) = [100,102])||(var(55) = [110,112])
triggerall = movecontact
trigger1 = p2bodydist y > 10
trigger1 = p2statetype != A
trigger2 = p2bodydist y > 50
trigger2 = p2statetype = A
value = 950

;跳 重脚
[Statedef 645]
type = A
movetype = A
physics = A
juggle = 15
ctrl = 0
poweradd = ifelse(fvar(10)!=1,60,30)
sprpriority = 2
anim = 645

[State 610]
type = AfterImage
trigger1 = prevstateno = [55,56]
trigger1 = Time = 0 && Vel X!= 0
time = 20
length = 8
trans = add1

[State 610]
type = varSet
triggerall = var(30) = 0
trigger1 = Movecontact
var(30) = 1

[STate 610]
type = PlaySNd
trigger1 = Animelem = 2 && fvar(28) = 0
value = 2995,ifelse(fvar(10)!=1,(ifelse(random<500,51,52)),(ifelse(random >500,151,152)))
channel = 0
persistent = 0

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 600,1
volume = 200

[State 610]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = A,NA
damage = 85,0
getpower = ifelse(fvar(10)!=1,40,20),ifelse(fvar(10)!=1,10,5)
animtype = mid
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,13
guard.pausetime = 15,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-27
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 13
ground.hittime = 13
ground.velocity = -4,3.5
airguard.velocity = -4,3
ground.cornerpush.veloff = -7
guard.cornerpush.veloff = -8
air.type = low
air.velocity = -3.5,-6.7
air.hittime = 15
yaccel = .5
fall = 1

[State 610]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = A,NA
damage = 85,0
getpower = ifelse(fvar(10)!=1,40,20),ifelse(fvar(10)!=1,10,5)
animtype = mid
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,13
guard.pausetime = 15,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-27
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 13
ground.hittime = 13
ground.velocity = -4,3.5
airguard.velocity = -4,3
ground.cornerpush.veloff = -7
guard.cornerpush.veloff = -8
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.type = low
air.velocity = -3.5,-6.7
air.hittime = 15
yaccel = .5
fall = 1

[State 610]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0

;跳 重脚
[Statedef 639]
type = A
movetype = A
physics = A
juggle = 15
ctrl = 0
poweradd = ifelse(fvar(10)!=1,60,30)
sprpriority = 2
anim = 639

[State 610]
type = AfterImage
trigger1 = prevstateno = [55,56]
trigger1 = Time = 0 && Vel X!= 0
time = 20
length = 8
trans = add1

[State 639]
type = varSet
triggerall = var(30) = 0
trigger1 = Movecontact
var(30) = 1

[STate 639]
type = PlaySNd
trigger1 = Animelem = 2 && fvar(28) = 0
value = 2995,ifelse(fvar(10)!=1,(ifelse(random<500,51,52)),(ifelse(random >500,151,152)))
channel = 0
persistent = 0

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 600,1
volume = 200

[State 639]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 2
attr = A,NA
damage = 85,0
getpower = ifelse(fvar(10)!=1,40,20),ifelse(fvar(10)!=1,10,5)
animtype = high
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,13
guard.pausetime = 12,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-27
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 13
ground.hittime = 13
ground.velocity = -6
airguard.velocity = -6,-3
ground.cornerpush.veloff = -7
guard.cornerpush.veloff = -8
air.type = low
air.velocity = -3.5,-6.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 639]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 2
attr = A,NA
damage = 85,0
getpower = ifelse(fvar(10)!=1,40,20),ifelse(fvar(10)!=1,10,5)
animtype = high
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,13
guard.pausetime = 12,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-27
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 13
ground.hittime = 13
ground.velocity = -6
airguard.velocity = -6,-3
ground.cornerpush.veloff = -7
guard.cornerpush.veloff = -8
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.type = low
air.velocity = -3.5,-6.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 639]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0

;跳 重脚
[Statedef 611]
type = A
movetype = A
physics = A
juggle = 15
ctrl = 0
poweradd = ifelse(fvar(10)!=1,60,30)
sprpriority = 2
anim = 611

[State 611]
type = AfterImage
trigger1 = prevstateno = [55,56]
trigger1 = Time = 0 && Vel X!= 0
time = 20
length = 8
trans = add1

[State 611]
type = varSet
triggerall = var(30) = 0
trigger1 = Movecontact
var(30) = 1

[STate 611]
type = PlaySNd
trigger1 = Animelem = 2 && fvar(28) = 0
value = 2995,ifelse(fvar(10)!=1,(ifelse(random<500,51,52)),(ifelse(random >500,151,152)))
channel = 0
persistent = 0

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 600,1
volume = 200

[State 611]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
attr = A,NA
damage = 85,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = high
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 12,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-72
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 13
ground.hittime = 13
ground.velocity = -6
airguard.velocity = -6,-3
air.type = low
air.velocity = -3.5,-6.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 611]
type = HitDef
triggerall = var(50) = 0
triggerall = !movecontact
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 4
attr = A,NA
damage = 85,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = mid
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 12,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-70
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 13
ground.hittime = 13
ground.velocity = -6
airguard.velocity = -6,-3
ground.cornerpush.veloff = -7
guard.cornerpush.veloff = -8
air.type = low
air.velocity = -3.5,-5.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 611]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
attr = A,NA
damage = 85,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = high
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 12,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-72
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 13
ground.hittime = 13
ground.velocity = -6
airguard.velocity = -6,-3
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.type = low
air.velocity = -3.5,-6.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 611]
type = HitDef
triggerall = var(50) = 1
triggerall = !movecontact
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 4
attr = A,NA
damage = 85,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = mid
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,15
guard.pausetime = 12,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-70
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 13
ground.hittime = 13
ground.velocity = -6
airguard.velocity = -6,-3
ground.cornerpush.veloff = -7
guard.cornerpush.veloff = -8
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.type = low
air.velocity = -3.5,-5.7
air.hittime = 15
yaccel = .5
fall.recovertime = 10

[State 611]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0

;跳 超重
[Statedef 690]
type = A
movetype = A
physics = A
juggle = 15
ctrl = 0
poweradd = ifelse(fvar(10)!=1,60,30)
sprpriority = 2
anim = 690

[State 690]
type = AfterImage
trigger1 = prevstateno = [55,56]
trigger1 = Time = 0 && Vel X!= 0
time = 20
length = 8
trans = add1

[State 690]
type = varSet
triggerall = var(30) = 0
trigger1 = Movecontact
var(30) = 1

[STate 690]
type = PlaySNd
trigger1 = Animelem = 2 && fvar(28) = 0
value = 2995,ifelse(fvar(10)!=1,(ifelse(random<500,51,52)),(ifelse(random >500,151,152)))
channel = 0
persistent = 0

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 600,1
volume = 250

[State 690]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 3
attr = A,NA
damage = 115,0
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,20,10)
animtype = high
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 12,13
guard.pausetime = 12,17
sparkno = S736
guard.sparkno = S731
sparkxy = ((p2bodydist x)-60)/2,-37
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 7
ground.hittime = 9
ground.velocity = -5,-3.5
airguard.velocity = -5,-3.5
ground.cornerpush.veloff = -12
guard.cornerpush.veloff = -11
air.type = low
air.velocity = -3.5,-3
air.hittime = 15
fall = 1
air.fall = 1
yaccel = .35
fall.recover = 0

[State 690]
type = PlaySnd
trigger1 = animelem = 3
value = S1,0

[Statedef 665]
type = S
movetype = A
physics = S
juggle = 15
ctrl = 0
velset = 0,0
poweradd = ifelse(fvar(10)!=1,50,25)
sprpriority = 2
anim = 2153

[State 690]
type = AfterImage
trigger1 = prevstateno = [55,56]
trigger1 = Time = 0 && Vel X!= 0
time = 20
length = 8
trans = add1

[STate 665]
type = posadd
trigger1 = Animelem = 2 
trigger2 = Animelem = 3
trigger3 = Animelem = 5
x = 10

[STate 665]
type = null
trigger1 = Animelem = 3 
x = 8

[STate 665]
type = PlaySNd
trigger1 = Animelem = 6 && fvar(28) = 0
value = 2995,ifelse(fvar(10)!=1,51,153)
channel = 0
persistent = 0

[State 665, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 600,1
volume = 250

[State 665]
type = HitDef
trigger1 = time = 0
attr = A,NA
damage = 85,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 17,17
guard.pausetime = 17,17
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-30)/2,-57
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 24
ground.hittime = 24
ground.velocity = -13
airguard.velocity = -6,-3
ground.cornerpush.veloff = -15
guard.cornerpush.veloff = -15
air.type = low
air.velocity = -3,-3
air.hittime = 15

[state changestate]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;跳 ↓A
[Statedef 650]
type = A
movetype = A
physics = A
juggle = 15
ctrl = 0
poweradd = ifelse(fvar(10)!=1,60,30)
sprpriority = 2
anim = 650

[STate 690]
type = PlaySNd
trigger1 = Animelem = 2 && fvar(28) = 0
value = 2995,ifelse(fvar(10)!=1,(ifelse(random<500,51,52)),(ifelse(random >500,151,152)))
channel = 0
persistent = 0

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 3
value = 600,1
volume = 250

[State 665]
type = HitDef
trigger1 = time = 0
attr = A,NA
damage = 85,0
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,10,5)
animtype = hard
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 13,13
guard.pausetime = 13,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-40
hitsound = S200,0
guardsound = S150,1
ground.type = low
ground.slidetime = 27
ground.hittime = 27
ground.velocity = -9
airguard.velocity = -6,-3
ground.cornerpush.veloff = -15
guard.cornerpush.veloff = -15
id = 650
air.type = low
air.velocity = -4,9
air.hittime = 15
air.fall = 1
fall.recover = 0

[state changestate]
type = changestate
trigger1 = target(650),stateno = 5020
value = 651


;跳 ↓A(反弹)
[Statedef 651]
type = A
movetype = A
physics = A
ctrl = 0
velset = 0,-3
sprpriority = 2
anim = 651

[state playsnd]
type = playsnd
trigger1 = time = 5
value = 0,0

暴气
[statedef 700]
type = s
movetype = I
physics = s
anim = 700
ctrl = 0

[state varset]
type = varset
trigger1 = time = 0
var(40) = 1000

[state poweradd]
type = poweradd
trigger1 = time = 6
value = -1000

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 5
value = 2995,60
channel = 0

[STate 3150]
type = PlaySNd
trigger1 = Animelem = 5
value = 700,0
channel = 1

[State 3000]
type = Explod
trigger1 = Animelem = 6
anim = 705
pos = 0,0
Pausemovetime = 99 
sprpriority = 2
bindtime = 1
ownpal = 1

[State 399, EnvShake]
type = EnvShake
trigger1 = animelem = 6
ignorehitpause = 1
persistent = 0
time = 15
freq = 100
ampl = -4
phase = 1

[state changestate]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1
;=*************************************************************
;加气
[Statedef 710]
type = S
movetype = I
physics = S
ctrl = 0
velset = 0,0
sprpriority = 1
anim = 710

[State 704, 1]
type = PowerAdd
trigger1 = power < 3000
trigger1 = Time >= 1
value = 6

[State 704, 2]
type = PlaySnd
triggerall = var(4) = [51,75]
trigger1 = Time = 5
value = 710,0
channel = 0
volume = 90

[State 704, 2]
type = PlaySnd
triggerall = var(4) = [0,50]
trigger1 = Time = 5
value = 710,1
channel = 0

[State 704, 2]
type = PlaySnd
trigger1 = Time = 5
value = 710,0
channel = 19
volume = 0

[State 704, 3]
type = PlaySnd
trigger1 = Time = 5
value = 5,4
channel = 20
volume = 50

[State 704, 4]
type = Explod
trigger1 = Time = 4
sprpriority = 2
anim = 737
id = 706
pos= 7,0
postype = P1
bindtime = 1
removeongethit = 1
removetime = -1
ownpal = 1

[State 3660]
type = varrandom
trigger1 = 1
v = 4
range = 90

[State 3660]
type = varrandom
trigger1 = 1
v = 5
range = 20

[State 704, 4]
type = Explod
trigger1 = Time >= 10
trigger1 =gametime%3=1
sprpriority = -2
anim = ifelse(random<500,720,721)
scale = .7,.2
vel = 0,-.9
id = 1158
pos = var(4)-35,-20-var(5)
postype = P1
bindtime = 1
ownpal = 1

[State 704, 4]
type = Explod
trigger1 = Time >= 10
trigger1 =gametime%3=1
sprpriority = 2
anim = ifelse(random<500,720,721)
scale = .7,.2
vel = 0,-.9
id = 1157
pos = var(4)-35,-20-var(5)
postype = P1
bindtime = 1
ownpal = 1

[State 704, 4]
type = Explod
trigger1 = Time = 4
sprpriority = -2
anim = 737
id = 707
pos= -7,0
facing = -1
postype = P1
bindtime = 1
removeongethit = 1
removetime = -1
ownpal = 1

[State 250, 4]
type = ChangeState
triggerall = var(59) = 1
trigger1 = p2stateno != [5030,5162]
trigger2 = power >= 3000
value = 715
ctrl = 0

[State 705, 4]
type = ChangeState
triggerall = var(59) != 1
trigger1 = power >= 3000
trigger2 = command != "hold_Z"
value = 715
ctrl = 0

;+++++++++++++++++++++++++++++++++++++++++++
; 加气结束
[Statedef 715]
type = S
movetype = I
physics = S
anim = 715
ctrl = 0

[State 705, 1]
type = StopSnd
trigger1 = Time = 0
channel = 19
value = 5,3

[State 705, 2]
type = StopSnd
trigger1 = Time = 0
channel = 0
value = 5,4

[STate 3150]
type = PlaySNd
trigger1 = power >= 3000
trigger1 = time = 0
value = 700,0
channel = 1

[State 704, 1]
type = PowerAdd
;trigger1 = power < 3000
trigger1 = Time >= 1
value = 6

[State 704, 4]
type = Explod
trigger1 = power >= 3000
trigger1 = Time = 0
ignorehitpause = 1
anim = 705
id = 705
pos= 0,0
postype = P1
supermove = 10
sprpriority = 2
removeongethit = 1
ownpal = 1

[State 399, EnvShake]
type = EnvShake
trigger1 = power >= 3000
trigger1 = time = 0
ignorehitpause = 1
persistent = 0
time = 15
freq = 100
ampl = -4
phase = 1

[State 250, 4]
type = ChangeState
triggerall = var(59) = 1
trigger1 = p2stateno != [5030,5162]
trigger2 = power >= 3000
value = 0
ctrl = 1

[State 705, 4]
type = ChangeState
triggerall = var(59) != 1
trigger1 = command != "hold_Z"
value = 0
ctrl = 1

[State 705, 4]
type = ChangeState
triggerall = var(59) != 1
triggerall = animtime = 0
trigger1 = power >= 3000
value = 0
ctrl = 1

;碎额破
[StateDef 950]
type = A
movetype = A
physics = N
anim = 950
velset = 0,0
poweradd = ifelse(fvar(10)!=1,80,40)
sprpriority = 3
facep2 = 1
juggle = 7 
ctrl = 0

[STate 3150]
type = PlaySNd
trigger1 = time = 3
value = 2000,9
channel = 1
volume = 250

[STate 3150]
type = PlaySNd
trigger1 = time = 2
value = 200,4
channel = 0
volume = 60

[State 600]
type = velSet
trigger1 = animelem = 1
x = 1
y = -1

[State 600]
type = velSet
trigger1 = animelem = 3
x = 1
y = 1

[State 600]
type = velSet
trigger1 = animelem = 4
x = 7
y = 7

[State 615]
type = HitDef
triggerall = var(50) = 0
triggerall = p2bodydist y >= 70
trigger1 = animelem = 2
attr = A,NA
damage = 55,0
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,20,10)
animtype = high
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 9,9
guard.pausetime = 13,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-30
hitsound = S220,0
guardsound = S150,1
ground.type = high
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -6
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 15
fall.recovertime = 10
air.fall = 1

[State 615]
type = HitDef
triggerall = var(50) = 0
triggerall = p2bodydist y < 70
trigger1 = animelem = 2
attr = A,NA
damage = 55,0
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,20,10)
animtype = high
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 9,9
guard.pausetime = 13,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-30
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -6
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 15
fall.recovertime = 10
air.fall = 1

[State 615]
type = HitDef
triggerall = var(50) = 1
triggerall = p2bodydist y >= 70
trigger1 = animelem = 2
attr = A,NA
damage = 55,0
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,20,10)
animtype = high
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 9,9
guard.pausetime = 13,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-30
hitsound = S220,0
guardsound = S150,1
ground.type = high
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -6
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 15
fall.recovertime = 10
air.fall = 1

[State 615]
type = HitDef
triggerall = var(50) = 1
triggerall = p2bodydist y < 70
trigger1 = animelem = 2
attr = A,NA
damage = 55,0
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,20,10)
animtype = high
air.animtype  = back
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 9,9
guard.pausetime = 13,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-30
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 16
ground.hittime = 16
ground.velocity = -6
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 15
fall.recovertime = 10
air.fall = 1

[State Land]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 955
ctrl = 0

[StateDef 955]
type = S
movetype = A
physics = S
anim = 955
poweradd = 0
sprpriority = 3
facep2 = 1
juggle = 7 
ctrl = 0

[state 955]
type = MakeDust
trigger1 = time = 1
pos = -10,0

[STate 3150]
type = PlaySNd
trigger1 = time = 0
value = 40,0
volume = 255

[state posset]
type = posset
trigger1 = 1
y = 0

[state posset]
type = posadd
trigger1 = time = 0
x = 10

[state posset]
type = velset
trigger1 = 1
y = 0

[State Land]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1

;破天之光 低
[StateDef 1000]
type = S
movetype = A
physics = S
anim = 1000
velset = 0,0
poweradd = ifelse(fvar(10)!=1,150,70)
facep2 = 1
juggle = 7 + var(7)
sprpriority = 1
ctrl = 0

[State 1200, Explod]
type = Explod
trigger1 =animelem = 4
anim = 1051
ID = 1051
bindtime = 999
pausemove = 1
removetime = 30
velocity = 0,0
scale = 1,1
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 3
anim = 6211
ID = 6211
velocity = 0,0
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State AI reset]
type = VarSet
trigger1 = Time = 0
var(4) = 0

[State VarSet]
type = VarSet
trigger1 = Time = 0
sysvar(0) = 0

[State VarSet]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State Slow]
type = ChangeAnim
trigger1 = SysVar(0)
trigger1 = AnimElem = 1,2
persistent = 0
value = Anim
elem = 2

[State Step Front]
type = PosAdd
trigger1 = AnimElem = 3,0
x = 10

[State Voice]
type = PlaySnd
trigger1 = Time = 0
value = 2995,ifelse(random<650,60,95)
channel = 1

[State Snd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 105,0
channel = 2

[State velset]
type = velset
trigger1 = AnimElem = 4
x = 1.5

[state nothitby]
type = nothitby
trigger1 = time >=0
value = SCA
time=1
ignorehitpause = 1

[state Projectile]
type = Projectile
triggerall = var(50) = 0
triggerall = p2stateno != [120,154]
trigger1 = animelem = 4
ProjAnim = 1005
ProjID = 1005
projhitanim = 1005
ProjRemoveTime = 4
offset = 0,0
attr = S,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 115,18
sparkno = S736
guard.sparkno = S733
sparkxy = 40,-70
hitsound = S220,0
guardsound = S150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 16
guard.velocity = -4
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -4,-6
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
id = 1000
air.hittime = 14
air.velocity = -4,-7
air.type = High
air.recover = 0
air.juggle = 12
fall.recover = 0
fall = 1
palfx.time = 55
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[state Projectile]
type = hitdef
triggerall = var(50) = 0
triggerall = p2stateno = [120,154]
trigger1 = animelem = 4
attr = S,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 125,18
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-70
hitsound = S220,0
guardsound = S150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 16
guard.velocity = -9
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -4,-6
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
id = 1000
air.hittime = 14
air.velocity = -4,-7
air.type = High
air.recover = 0
air.juggle = 9
fall.recover = 0
fall = 1
palfx.time = 55
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[state Projectile]
type = Projectile
triggerall = var(50) = 1
triggerall = p2stateno != [120,154]
trigger1 = animelem = 4
ProjAnim = 1005
ProjID = 1005
projhitanim = 1005
ProjRemoveTime = 4
offset = 0,0
attr = S,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 115,18
sparkno = S736
guard.sparkno = S733
sparkxy = 40,-70
hitsound = S220,0
guardsound = S150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 16
guard.velocity = -4
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -4,-6
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
id = 1000
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.hittime = 14
air.velocity = -4,-7
air.type = High
air.recover = 0
air.juggle = 12
fall.recover = 0
fall = 1
palfx.time = 55
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[state Projectile]
type = hitdef
triggerall = var(50) = 1
triggerall = p2stateno = [120,154]
trigger1 = animelem = 4
attr = S,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 125,18
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-70
hitsound = S220,0
guardsound = S150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 16
guard.velocity = -9
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -4,-6
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
id = 1000
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.hittime = 14
air.velocity = -4,-7
air.type = High
air.recover = 0
air.juggle = 9
fall.recover = 0
fall = 1
palfx.time = 55
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[State MoveHit]
type = VarSet
trigger1 = MoveContact
sysvar(1) = 1

[State 1000, 3]
type = ChangeState
trigger1 = projcontact1005 = 1
value = 1050
ctrl = 0

[State Jump]
type = ChangeState
trigger1 = AnimTime = 0
value = 1001
ctrl = 0

[Statedef 1050]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 105
velset = 1,0
anim = 1002
juggle  = 10
ctrl = 0
sprpriority = 2

[State Snd]
type = PlaySnd
trigger1 = time = 0
value = 4040,2

[State 1200, Explod]
type = Explod
trigger1 =time = 0
anim = 6212
ID = 6212
velocity = 0,0
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = numTarget(1000)>0
anim = 6215
ID = 6215
pos = 0,0
postype = p2
bindtime = 100
sprpriority = 3
persistent = 0
ownpal = 1

[state 1000]
type = nothitby
trigger1 = 1
time = 1
value = SAC
ignorehitpause=1

[state Projectile]
type = hitdef
trigger1 = time = 0
trigger1 = p2movetype != H
attr = S,SP
hitflag = MAF
guardflag = M
getpower = 60,30
givepower = 5
damage    = 125, 35
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-70
hitsound   = s220,1
guardsound = s150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 14
guard.velocity = -10.5
guard.slidetime = 6
ground.hittime = 14
ground.velocity = -4,-6
ground.slidetime = 12
ground.type = High
guard.cornerpush.veloff = -15
air.juggle = 9
air.hittime = 14
air.velocity = -4,-6
air.type = High
air.recover = 0
fall=1
palfx.time = 55
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
fall.recover = 0

[State 1000, 3]
type = ChangeState
trigger1 =  time >(Target(1000),GetHitVar(hittime))-2
value = 1001
ctrl = 0

[StateDef 1001]
type = A
movetype = A
physics = N
anim = 1001
velset = 0,0
juggle = 10 
sprpriority = 1
ctrl = 0

[State 1200, Explod]
type = Explod
trigger1 =time = 0
anim = 1052
ID = 1052
velocity = 0,0
scale = 1,1
pos = 0,0
bindtime = 999
pausemovetime = 100
removetime = 30
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 2
anim = 1053
ID = 1053
velocity = 0,0
scale = 1,1
pos = 0,0
pausemovetime = 100
removetime = 30
bindtime = 999
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State Snd]
type = PlaySnd
trigger1 =animelem = 2
value = 4040,2

[State 1200, Explod]
type = Explod
trigger1 =animelem = 3
anim = 1054
ID = 1054
velocity = 0,0
scale = 1,1
pos = 10,0
pausemove = 1
vel = .2,-.5
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = removeExplod
trigger1 =1
ID = 1051
ignorehitpause = 1

[State 1200, Explod]
type = removeExplod
trigger1 =animelem = 2
ID = 1052
ignorehitpause = 1

[State 1200, Explod]
type = removeExplod
trigger1 =animelem = 3
ID = 1053
ignorehitpause = 1

[State 1200, Explod]
type = removeExplod
trigger1 =animelem = 4
ID = 1054
ignorehitpause = 1

[state velset]
type = velset
trigger1 = animelem = 1
y = -5.5

[state velset]
type = velset
trigger1 = animelem = 2
y = -4.5

[state velset]
type = velset
trigger1 = time = [0,10]
x = 2

[state velset]
type = velset
trigger1 = time >10 
x = 0.5

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 10
y = const(movement.yaccel)

[state nothitby]
type = nothitby
trigger1 = time >=0 && time < 10
value = SCA
time=1
ignorehitpause = 1

[State 1200, Explod]
type = Explod
trigger1 = time <= 19
trigger1 =gametime%6=1
anim = 1055
ID = 1055
velocity = 0,.4
scale = 1,1
pos = 25,-90
sprpriority = 2
supermove = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 1
anim = 6213
ID = 6213
velocity = 0,0
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 2
anim = 6214
ID = 6214
velocity = 0,0
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State HitDef]
type = HitDef  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 1
attr = A,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 30,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-100
hitsound = S220,0
guardsound = S150,1
pausetime = 12,12
animtype = Up
guard.hittime = 14
guard.velocity = -9
guard.slidetime = 14
ground.hittime = 14
ground.velocity = -4,-8
ground.slidetime = 14
ground.type = High
ground.cornerpush.veloff = -9
air.hittime = 14
air.velocity = -4,-7.5
air.type = High
air.recover = 0
fall.recover = 0
air.juggle = 15
fall = 1
id = 1002
palfx.time = 85
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .43

[State HitDef]
type = HitDef
trigger1 = !movecontact
trigger1 = (p2stateno != [5050,5060])  
trigger1 = AnimElem = 2
attr = A,SA
hitflag = MAF
guardflag = M
getpower = 70,30
givepower = 5
damage = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-100
hitsound = S220,0
guardsound = S150,1
pausetime = 12,12
animtype = Up
guard.hittime = 16
guard.velocity = -9
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -4,-8
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -9
air.hittime = 14
air.velocity = -4,-8
air.type = High
air.recover = 0
air.juggle = 10
fall.recover = 0
id = 1002
fall = 1
palfx.time = 85
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .43

[State 1200, Explod]
type = Explod
trigger1 = numTarget(1002)>0
anim = 6215
ID = 6215
pos = 0,0
postype = p2
bindtime = 100
sprpriority = 3
ownpal = 1
persistent = 0

[State Land]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1002
ctrl = 0

;破天之光 高
[StateDef 1003]
type = S
movetype = A
physics = S
anim = 1003
velset = 0,0
poweradd = ifelse(fvar(10)!=1,150,70)
facep2 = 1
juggle = 7 
sprpriority = 1
ctrl = 0

[State 1200, Explod]
type = Explod
trigger1 =animelem = 4
anim = 1051
ID = 1051
bindtime = 999
pausemove = 1
velocity = 0,0
removetime = 30
scale = 1,1
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 3
anim = 6211
ID = 6211
velocity = 0,0
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 3784]
type = Explod
trigger1 = Animelem = 3 
anim = 1045
id = 1045
pos = -25,0
postype = p1
sprpriority = 4
bindtime = 30
ownpal = 1
removetime = 20
ownpal = 1

[State 1003, VelSet]
type = VarSet
trigger1 = time = 0
var(6)=0

[State AI reset]
type = VarSet
trigger1 = Time = 0
var(4) = 0

[State VarSet]
type = VarSet
trigger1 = Time = 0
sysvar(0) = 0

[State VarSet]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State Slow]
type = ChangeAnim
trigger1 = SysVar(0)
trigger1 = AnimElem = 1,2
persistent = 0
value = Anim
elem = 1

[State Step Front]
type = PosAdd
trigger1 = AnimElem = 3,0
x = 10

[State Voice]
type = PlaySnd
trigger1 = Time = 0
value = 2995,ifelse(random<350,60,95)
channel = 1

[State Voice]
type = PlaySnd
trigger1 = Time = 5
value = 1000,0
channel = 1

[State Snd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 105,0
channel = 2

[state nothitby]
type = nothitby
trigger1 = time >=0
value = SCA
time=1
ignorehitpause = 1

[state Projectile]
type = Projectile
triggerall = var(50) = 0
triggerall = p2stateno != [120,154]
trigger1 = AnimElem = 4
ProjAnim = 1006
ProjID = 1006
projhitanim = 1006
ProjRemoveTime = 4
offset = 0,0
attr = S,SP
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 120,20
sparkno = S736
guard.sparkno = S733
sparkxy = 55,-67
hitsound = S220,0
guardsound = S150,1
pausetime = 15,15
animtype = Hard
guard.hittime = 14
guard.velocity = -4
guard.slidetime = 14
ground.hittime = 23
ground.velocity = -10,0
ground.slidetime = 23
ground.type = High
air.hittime = 14
id = 1003
air.juggle = 8
air.velocity = -4,-5
air.type = High
air.recover = 0
air.fall=1
fall.recover = 0
palfx.time = 45
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[state Projectile]
type = hitdef
triggerall = var(50) = 0
triggerall = p2stateno = [120,154]
trigger1 = AnimElem = 4
attr = S,SP
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 120,20
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-50-(AnimElem=3)*20
hitsound = S220,0
guardsound = S150,1
pausetime = 15,15
animtype = Hard
guard.hittime = 16
guard.velocity = -9
guard.slidetime = 16
ground.hittime = 14
ground.velocity = -10,0
ground.slidetime = 14
ground.type = High
ground.cornerpush.veloff = -13
air.hittime = 14
id = 1003
air.juggle = 8
air.velocity = -4,-5
air.type = High
air.recover = 0
air.fall=1
fall.recover = 0
palfx.time = 45
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[state Projectile]
type = Projectile
triggerall = var(50) = 1
triggerall = p2stateno != [120,154]
trigger1 = AnimElem = 4
ProjAnim = 1006
ProjID = 1006
projhitanim = 1006
ProjRemoveTime = 4
offset = 0,0
attr = S,SP
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 120,20
sparkno = S736
guard.sparkno = S733
sparkxy = 55,-67
hitsound = S220,0
guardsound = S150,1
pausetime = 15,15
animtype = Hard
guard.hittime = 14
guard.velocity = -4
guard.slidetime = 14
ground.hittime = 23
ground.velocity = -10,0
ground.slidetime = 23
ground.type = High
air.hittime = 14
id = 1003
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.juggle = 8
air.velocity = -4,-5
air.type = High
air.recover = 0
air.fall=1
fall.recover = 0
palfx.time = 45
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[state Projectile]
type = hitdef
triggerall = var(50) = 1
triggerall = p2stateno = [120,154]
trigger1 = AnimElem = 4
attr = S,SP
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 120,20
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-50-(AnimElem=3)*20
hitsound = S220,0
guardsound = S150,1
pausetime = 15,15
animtype = Hard
guard.hittime = 16
guard.velocity = -9
guard.slidetime = 16
ground.hittime = 14
ground.velocity = -10,0
ground.slidetime = 14
ground.type = High
ground.cornerpush.veloff = -13
air.hittime = 14
id = 1003
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.juggle = 8
air.velocity = -4,-5
air.type = High
air.recover = 0
air.fall=1
fall.recover = 0
palfx.time = 45
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[State MoveHit]
type = VarSet
trigger1 = MoveContact
sysvar(1) = 1

[State 1000, 3]
type = ChangeState
trigger1 = projcontact1006 = 1
value = 1055
ctrl = 0

[State Jump]
type = ChangeState
trigger1 = AnimTime = 0
value = 1004
ctrl = 0

[Statedef 1055]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 105
velset = 1,0
anim = 1002
juggle  = 10
ctrl = 0
sprpriority = 2

[State Snd]
type = PlaySnd
trigger1 =time = 0
value = 4040,2

[State 1200, Explod]
type = Explod
trigger1 =time = 0
anim = 6212
ID = 6212
velocity = 0,0
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = numTarget(1003)>0
anim = 6215
ID = 6215
pos = 0,0
postype = p2
bindtime = 100
sprpriority = 3
persistent = 0
ownpal = 1

[state 1000]
type = nothitby
trigger1 = 1
time = 1
value = SAC
ignorehitpause=1

[state Projectile]
type = hitdef
trigger1 = time = 0
trigger1 = p2movetype != H
attr = S,SP
hitflag = MAF
guardflag = M
getpower = 60,30
givepower = 5
damage    = 125, 35
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-70
hitsound   = s220,1
guardsound = s150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 14
guard.velocity = -10.5
guard.slidetime = 6
ground.hittime = 14
ground.velocity = -4,-6
ground.slidetime = 12
ground.type = High
guard.cornerpush.veloff = -15
air.juggle = 9
air.hittime = 14
air.velocity = -4,-6
air.type = High
air.recover = 0
palfx.time = 45
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
fall=1
fall.recover = 0

[State 1000, 3]
type = ChangeState
trigger1 =  time >(Target(1003),GetHitVar(hittime))-2
value = 1004
ctrl = 0

[StateDef 1004]
type = A
movetype = A
physics = N
anim = 1004
juggle = 10
velset = 0,0
sprpriority = 1
ctrl = 0

[State Snd]
type = PlaySnd
trigger1 =animelem = 2
value = 4040,2

[State 3875, 慢镜头]
type = Pause 
triggerall = Target(1003),statetype != A
triggerall = !movehit
triggerall = var(6) = 1
triggerall = (GameTime%2) = 0
trigger1 = time = [0,35]
time = 1 
movetime = 1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 1
anim = 6213
ID = 6213
velocity = 0,0
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 2
anim = 6214
ID = 6214
velocity = 0,0
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1003, VelSet]
type = VarSet
triggerall = time = 0
trigger1 = Target(1003),movetype = H
var(6)=1 

[State 3784]
type = Explod
trigger1 = time = 0 
anim = 1050
pos = -25,0
postype = p1
pausemovetime = 100
sprpriority = 4
bindtime = 20
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 =time = 0
anim = 1052
ID = 1052
velocity = 0,0
scale = 1,1
pos = 0,0
bindtime = 999
removetime = 30
pausemovetime = 100
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 2
anim = 1053
ID = 1053
velocity = 0,0
scale = 1,1
pos = 0,0
pausemovetime = 100
removetime = 30
bindtime = 999
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 3
anim = 1054
ID = 1054
velocity = 0,0
scale = 1,1
pos = 10,0
pausemove = 1
vel = .2,-.5
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = removeExplod
trigger1 =1
ID = 1045
ignorehitpause = 1

[State 1200, Explod]
type = removeExplod
trigger1 =1
ID = 1051
ignorehitpause = 1

[State 1200, Explod]
type = removeExplod
trigger1 =animelem = 2
ID = 1052
ignorehitpause = 1

[State 1200, Explod]
type = removeExplod
trigger1 =animelem = 3
ID = 1053
ignorehitpause = 1

[State 1200, Explod]
type = removeExplod
trigger1 =animelem = 4
ID = 1054
ignorehitpause = 1

[state velset]
type = velset
trigger1 = animelem = 1
y = -8.5

[state velset]
type = varset
trigger1 = movehit 
var(7) = 15

[State 1004, VelSet]
type = Velset
trigger1 = Time = [0,13]
x = 3.5

[State 1004, VelSet]
type = Velset
trigger1 = Time = [14,25]
x = 2

[State 1004, VelSet]
type = VelSet
trigger1 = Time >25 
x = 1

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 20
y = .35

[State Gravity]
type = VelAdd
trigger1 = animelem = 3,>3
y = .4

[state nothitby]
type = nothitby
trigger1 = time >=0 && time < 16
value = SCA
time=1
ignorehitpause = 1

[State HitDef]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
trigger2 = var(6)!=1
attr = A,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 65,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-90
hitsound = S220,0
guardsound = S150,1
pausetime = 12,12
animtype = Up
guard.hittime = 16
guard.velocity = -9
guard.slidetime = 16
ground.hittime = 5
ground.velocity = -4,-9
ground.slidetime = 12
ground.type = High
ground.cornerpush.veloff = -8
air.hittime = 5
air.velocity = -4,-8.5
air.type = High
air.juggle = 14
air.recover = 0
id = 1004
fall = 1
fall.recover = 0
palfx.time = 85
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .4

[State 1200, Explod]
type = Explod
trigger1 = numTarget(1004)>0
anim = 6215
ID = 6215
pos = 0,0
postype = p2
bindtime = 100
sprpriority = 3
persistent = 0
ownpal = 1

[State 1004, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1002

[Statedef 1002]
type = S
movetype = A
physics = S
anim = 3
velset = 0,0

[State 1002, 2]
type = posset
trigger1 = Time = 0
y = 0

;AI青龙
[State 1002, 4]
type = ChangeState
triggerall = life >= 500
trigger1 = AnimTime = 0
trigger1 = fvar(10) = 0
trigger1 = var(59) = 1
trigger1 = p2movetype = A
trigger1 = p2bodydist X = (0,50)
value = 1000 

[State 1002, 4]
type = ChangeState
triggerall = life <500
trigger1 = var(59) = 1
trigger1 = fvar(10) = 0
trigger1 = AnimTime = 0
trigger1 = p2movetype = A
trigger1 = p2bodydist X = (0,50)
value = 1003 

;AI凤凰
[State 1002, 4]
type = ChangeState
triggerall = life >= 500
trigger1 = AnimTime = 0
trigger1 = fvar(10) = 1
trigger1 = var(59) = 1
trigger1 = p2movetype = A
trigger1 = p2bodydist X = (0,50)
value = 1080 

[State 1002, 4]
type = ChangeState
triggerall = life <500
trigger1 = fvar(10) = 1
trigger1 = var(59) = 1
trigger1 = AnimTime = 0
trigger1 = p2movetype = A
trigger1 = p2bodydist X = (0,50)
value = 1090 

[State 1002, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

[Statedef 1012]
type = S
physics = S
anim = 1
velset = 0,0
ctrl = ifelse((fvar(14)=1),0,1)

[state varset]
type = varset
trigger1 = fvar(14) = 1
trigger1 = fvar(1) = 0
fvar(1) = 1

[State 1002, 2]
type = posset
trigger1 = Time = 0
y = 0

[State 1002, 2]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = p2bodydist x < -12
value = 0
ctrl = 1

[Statedef 1013]
type = S
physics = S
anim = 1
velset = 0,0
ctrl = 0

[State 1002, 2]
type = posset
trigger1 = Time = 0
y = 0

[State 1002, 2]
type = ctrlset
triggerall = fvar(14) = 0
trigger1 = Time = 30
value = 1

[State 1002, 2]
type = varset
triggerall = fvar(14) = 1
trigger1 = Time = 30
fvar(1) = 1

[State 1002, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;--------------------------------------------------------------
;凤岚 低
[StateDef 1080]
type = S
movetype = A
physics = S
anim = 1080
velset = 0,0
poweradd = ifelse(fvar(10)!=1,150,70)
facep2 = 1
juggle = 7 + var(7)
sprpriority = 1
ctrl = 0

[State 1200, Explod]
type = Explod
trigger1 =animelem = 3
anim = 1086
ID = 1086
bindtime = 999
pausemove = 1
removetime = 30
velocity = 0,0
scale = 1,1
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State AI reset]
type = VarSet
trigger1 = Time = 0
var(4) = 0

[State VarSet]
type = VarSet
trigger1 = Time = 0
sysvar(0) = 0

[State VarSet]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State Slow]
type = ChangeAnim
trigger1 = SysVar(0)
trigger1 = AnimElem = 1,2
persistent = 0
value = Anim
elem = 2

[State Step Front]
type = PosAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
x = 15

[State Voice]
type = PlaySnd
trigger1 = Time = 0
value = 1080,0
channel = 1

[State Snd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 105,0
channel = 2

[State velset]
type = velset
trigger1 = AnimElem = 4
x = 1.5

[state nothitby]
type = nothitby
trigger1 = time >=0
value = SCA
time=1
ignorehitpause = 1

[state Projectile]
type = Projectile
triggerall = var(50) = 0
triggerall = p2stateno != [120,154]
trigger1 = animelem = 4
ProjAnim = 1005
ProjID = 1005
projhitanim = 1005
ProjRemoveTime = 4
offset = 0,0
attr = S,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 135,18
sparkno = S736
guard.sparkno = S733
sparkxy = 40,-70
hitsound = S220,10
guardsound = S150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 16
guard.velocity = -4
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -4,-6
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
id = 10001
air.hittime = 14
air.velocity = -4,-7
air.type = High
air.recover = 0
air.juggle = 12
fall.recover = 0
fall = 1
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[state Projectile]
type = hitdef
triggerall = var(50) = 0
triggerall = p2stateno = [120,154]
trigger1 = animelem = 4
attr = S,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 135,18
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-70
hitsound = S220,10
guardsound = S150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 16
guard.velocity = -9
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -4,-6
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
id = 10001
air.hittime = 14
air.velocity = -4,-7
air.type = High
air.recover = 0
air.juggle = 9
fall.recover = 0
fall = 1
palfx.time = 42
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[state Projectile]
type = Projectile
triggerall = var(50) = 1
triggerall = p2stateno != [120,154]
trigger1 = animelem = 4
ProjAnim = 1005
ProjID = 1005
projhitanim = 1005
ProjRemoveTime = 4
offset = 0,0
attr = S,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 135,18
sparkno = S736
guard.sparkno = S733
sparkxy = 40,-70
hitsound = S220,10
guardsound = S150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 16
guard.velocity = -4
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -4,-6
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
id = 10001
air.hittime = 14
air.velocity = -4,-7
air.type = High
air.recover = 0
air.juggle = 12
fall.recover = 0
fall = 1
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[state Projectile]
type = hitdef
triggerall = var(50) = 1
triggerall = p2stateno = [120,154]
trigger1 = animelem = 4
attr = S,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 135,18
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-70
hitsound = S220,10
guardsound = S150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 16
guard.velocity = -9
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -4,-6
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
id = 10001
air.hittime = 14
air.velocity = -4,-7
air.type = High
air.recover = 0
air.juggle = 9
fall.recover = 0
fall = 1
palfx.time = 42
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State MoveHit]
type = VarSet
trigger1 = MoveContact
sysvar(1) = 1

[State 1000, 3]
type = ChangeState
trigger1 = projcontact1005 = 1
value = 1082
ctrl = 0

[State Jump]
type = ChangeState
trigger1 = AnimTime = 0
value = 1082
ctrl = 0

[Statedef 1082]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 105
velset = 1,0
anim = 1002
juggle  = 10
ctrl = 0
sprpriority = 2

[State Snd]
type = PlaySnd
trigger1 = time = 0
value = 3000,1

[state 1000]
type = nothitby
trigger1 = 1
time = 1
value = SAC
ignorehitpause=1

[state Projectile]
type = hitdef
trigger1 = time = 0
trigger1 = p2movetype != H
attr = S,SP
hitflag = MAF
guardflag = M
getpower = 60,30
givepower = 5
damage    = 125, 35
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-70
hitsound   = s220,1
guardsound = s150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 14
guard.velocity = -10.5
guard.slidetime = 6
ground.hittime = 14
ground.velocity = -4,-6
ground.slidetime = 12
ground.type = High
guard.cornerpush.veloff = -15
air.juggle = 9
air.hittime = 14
air.velocity = -4,-6
air.type = High
air.recover = 0
id = 10001
fall=1
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
fall.recover = 0

[State 1000, 3]
type = ChangeState
trigger1 =  time >(Target(10001),GetHitVar(hittime))-2
value = 1085
ctrl = 0

[StateDef 1085]
type = A
movetype = A
physics = N
anim = 1085
velset = 0,0
juggle = 10 
sprpriority = 1
ctrl = 0

[State 1200, Explod]
type = Explod
trigger1 =time = 0
anim = 1087
ID = 1087
velocity = 0,0
scale = 1,1
pos = 0,0
bindtime = 999
pausemovetime = 100
removetime = 30
sprpriority = 3
removeongethit = 1
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 2
anim = 1088
ID = 1088
velocity = 0,0
scale = 1,1
pos = 0,0
pausemovetime = 100
removetime = 30
bindtime = 999
sprpriority = 3
removeongethit = 1
ignorehitpause = 1
ownpal = 1

[State Snd]
type = PlaySnd
trigger1 =animelem = 2
value = 3000,1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 3
anim = 1089
ID = 1089
velocity = 0,0
scale = 1,1
pos = -10,0
pausemove = 1
sprpriority = 3
removeongethit = 1
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = removeExplod
trigger1 =1
ID = 1086
ignorehitpause = 1

[State 1200, Explod]
type = removeExplod
trigger1 =animelem = 2
ID = 1087
ignorehitpause = 1

[State 1200, Explod]
type = removeExplod
trigger1 =animelem = 3
ID = 1088
ignorehitpause = 1

[State 1200, Explod]
type = removeExplod
trigger1 =animelem = 4
ID = 1089
ignorehitpause = 1

[state velset]
type = velset
trigger1 = animelem = 1
y = -7

[state velset]
type = velset
trigger1 = animelem = 3
x = -1.6

[state velset]
type = velset
trigger1 = animelem = 4 
x = -2.2

[state velset]
type = velset
trigger1 = animelem = 8 
x = -1

[state velset]
type = velset
trigger1 = animelem = 9 
x = -0.5

[State Gravity]
type = VelAdd
trigger1 = animelemtime(5)<0
trigger1 = Pos Y < 10
y = .30

[State Gravity]
type = VelAdd
trigger1 = animelemtime(5)>=0
trigger1 = Pos Y < 10
y = .23

[state nothitby]
type = nothitby
trigger1 = time >=0 && time < 10
value = SCA
time=1
ignorehitpause = 1

[State 1200, Explod]
type = Explod
trigger1 = time <= 19
trigger1 =gametime%6=1
anim = 1055
ID = 1055
velocity = 0,.4
scale = 1,1
pos = 25,-90
sprpriority = 2
supermove = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = time%10 = 1
trigger1 =animelemtime(1) >= 1
trigger1 =animelemtime(7) < 0
anim = 65
velocity = 0,0
pos = 20,-50
random = -20,-30
sprpriority = 3
ignorehitpause = 1
ownpal = 1


[State HitDef]
type = HitDef  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = A,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 130,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-100
hitsound = S220,10
guardsound = S150,1
pausetime = 12,12
animtype = Up
guard.hittime = 14
guard.velocity = -9
guard.slidetime = 14
ground.hittime = 14
ground.velocity = -4,-8
ground.slidetime = 14
ground.type = High
ground.cornerpush.veloff = -9
air.hittime = 14
air.velocity = -4,-7.5
air.type = High
air.recover = 0
fall.recover = 0
air.juggle = 15
fall = 1
id = 10001
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .43

[State 1200, Explod]
type = Explod
trigger1 = numTarget(1002)>0
anim = 6215
ID = 6215
pos = 0,0
postype = p2
bindtime = 100
sprpriority = 3
ownpal = 1
persistent = 0

[State Land]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1002
ctrl = 0



;--------------------------------------------------------------
;凤岚 高
[StateDef 1090]
type = S
movetype = A
physics = S
anim = 1090
velset = 0,0
poweradd = ifelse(fvar(10)!=1,150,70)
facep2 = 1
juggle = 7 + var(7)
sprpriority = 1
ctrl = 0

[State 1200, Explod]
type = Explod
trigger1 =animelem = 3
anim = 1086
ID = 1086
bindtime = 999
pausemove = 1
removetime = 30
velocity = 0,0
scale = 1,1
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State AI reset]
type = VarSet
trigger1 = Time = 0
var(4) = 0

[State VarSet]
type = VarSet
trigger1 = Time = 0
sysvar(0) = 0

[State VarSet]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State Slow]
type = ChangeAnim
trigger1 = SysVar(0)
trigger1 = AnimElem = 1,2
persistent = 0
value = Anim
elem = 2

[State Step Front]
type = PosAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
x = 15

[State Voice]
type = PlaySnd
trigger1 = Time = 0
value = 1080,0
channel = 1

[State Snd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 105,0
channel = 2

[State velset]
type = velset
trigger1 = AnimElem = 4
x = 1.5

[state nothitby]
type = nothitby
trigger1 = time >=0
value = SCA
time=1
ignorehitpause = 1

[state Projectile]
type = Projectile
triggerall = var(50) = 0
triggerall = p2stateno != [120,154]
trigger1 = animelem = 4
ProjAnim = 1005
ProjID = 1005
projhitanim = 1005
ProjRemoveTime = 4
offset = 0,0
attr = S,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 135,18
sparkno = S736
guard.sparkno = S733
sparkxy = 40,-70
hitsound = S220,10
guardsound = S150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 16
guard.velocity = -4
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -4,-6
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
id = 10001
air.hittime = 14
air.velocity = -4,-7
air.type = High
air.recover = 0
air.juggle = 12
fall.recover = 0
fall = 1
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[state Projectile]
type = hitdef
triggerall = var(50) = 0
triggerall = p2stateno = [120,154]
trigger1 = animelem = 4
attr = S,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 135,18
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-70
hitsound = S220,10
guardsound = S150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 16
guard.velocity = -9
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -4,-6
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
id = 10001
air.hittime = 14
air.velocity = -4,-7
air.type = High
air.recover = 0
air.juggle = 9
fall.recover = 0
fall = 1
palfx.time = 42
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[state Projectile]
type = Projectile
triggerall = var(50) = 1
triggerall = p2stateno != [120,154]
trigger1 = animelem = 4
ProjAnim = 1005
ProjID = 1005
projhitanim = 1005
ProjRemoveTime = 4
offset = 0,0
attr = S,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 135,18
sparkno = S736
guard.sparkno = S733
sparkxy = 40,-70
hitsound = S220,10
guardsound = S150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 16
guard.velocity = -4
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -4,-6
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
id = 10001
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.hittime = 14
air.velocity = -4,-7
air.type = High
air.recover = 0
air.juggle = 12
fall.recover = 0
fall = 1
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[state Projectile]
type = hitdef
triggerall = var(50) = 1
triggerall = p2stateno = [120,154]
trigger1 = animelem = 4
attr = S,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 135,18
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-70
hitsound = S220,10
guardsound = S150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 16
guard.velocity = -9
guard.slidetime = 16
ground.hittime = 16
ground.velocity = -4,-6
ground.slidetime = 16
ground.type = High
ground.cornerpush.veloff = -13
id = 10001
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.hittime = 14
air.velocity = -4,-7
air.type = High
air.recover = 0
air.juggle = 9
fall.recover = 0
fall = 1
palfx.time = 42
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State MoveHit]
type = VarSet
trigger1 = MoveContact
sysvar(1) = 1

[State 1000, 3]
type = ChangeState
trigger1 = projcontact1005 = 1
value = 1092
ctrl = 0

[State Jump]
type = ChangeState
trigger1 = AnimTime = 0
value = 1092
ctrl = 0

[Statedef 1092]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 105
velset = 1,0
anim = 1002
juggle  = 10
ctrl = 0
sprpriority = 2

[State Snd]
type = PlaySnd
trigger1 = time = 0
value = 3000,1

[state 1000]
type = nothitby
trigger1 = 1
time = 1
value = SAC
ignorehitpause=1

[state Projectile]
type = hitdef
trigger1 = time = 0
trigger1 = p2movetype != H
attr = S,SP
hitflag = MAF
guardflag = M
getpower = 60,30
givepower = 5
damage    = 125, 35
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-70
hitsound   = s220,1
guardsound = s150,1
pausetime = 13,13
animtype = Hard
guard.hittime = 14
guard.velocity = -10.5
guard.slidetime = 6
ground.hittime = 14
ground.velocity = -4,-6
ground.slidetime = 12
ground.type = High
guard.cornerpush.veloff = -15
air.juggle = 9
air.hittime = 14
air.velocity = -4,-6
air.type = High
air.recover = 0
id = 10001
fall=1
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
fall.recover = 0

[State 1000, 3]
type = ChangeState
trigger1 =  time >(Target(10001),GetHitVar(hittime))-2
value = 1095
ctrl = 0

[StateDef 1095]
type = A
movetype = A
physics = N
anim = 1095
velset = 0,0
juggle = 10 
sprpriority = 1
ctrl = 0

[State 1200, Explod]
type = Explod
trigger1 =time = 0
anim = 1087
ID = 1087
velocity = 0,0
scale = 1,1
pos = 0,0
bindtime = 999
pausemovetime = 100
removetime = 30
sprpriority = 3
removeongethit = 1
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 2
anim = 1088
ID = 1088
velocity = 0,0
scale = 1,1
pos = 0,0
pausemovetime = 100
removetime = 30
bindtime = 999
sprpriority = 3
removeongethit = 1
ignorehitpause = 1
ownpal = 1

[State Snd]
type = PlaySnd
trigger1 =animelem = 2
value = 3000,1

[State 1200, Explod]
type = Explod
trigger1 =animelem = 3
anim = 1089
ID = 1089
velocity = 0,0
scale = 1,1
pos = -10,0
pausemove = 1
sprpriority = 3
removeongethit = 1
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = removeExplod
trigger1 =1
ID = 1086
ignorehitpause = 1

[State 1200, Explod]
type = removeExplod
trigger1 =animelem = 2
ID = 1087
ignorehitpause = 1

[State 1200, Explod]
type = removeExplod
trigger1 =animelem = 3
ID = 1088
ignorehitpause = 1

[State 1200, Explod]
type = removeExplod
trigger1 =animelem = 4
ID = 1089
ignorehitpause = 1

[state velset]
type = velset
trigger1 = animelem = 1
y = -8

[state velset]
type = velset
trigger1 = animelem = 3
x = -1.6

[state velset]
type = velset
trigger1 = animelem = 8 
x = -1.3

[state velset]
type = velset
trigger1 = animelem = 9 
x = -.70

[state velset]
type = velset
trigger1 = animelem = 4 
x = -2.2

[State Gravity]
type = VelAdd
trigger1 = animelemtime(5)<0
trigger1 = Pos Y < 10
y = .30

[State Gravity]
type = VelAdd
trigger1 = animelemtime(5)>=0
trigger1 = Pos Y < 10
y = .25

[state nothitby]
type = nothitby
trigger1 = time >=0 && time < 10
value = SCA
time=1
ignorehitpause = 1

[State 1200, Explod]
type = Explod
trigger1 = time <= 19
trigger1 =gametime%6=1
anim = 1055
ID = 1055
velocity = 0,.4
scale = 1,1
pos = 25,-90
sprpriority = 2
supermove = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 = time%10 = 1
trigger1 =animelemtime(1) >= 1
trigger1 =animelemtime(7) < 0
anim = 65
velocity = 0,0
pos = 20,-50
random = -20,-30
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State HitDef]
type = HitDef  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = A,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 130,10
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,-100
hitsound = S220,10
guardsound = S150,1
pausetime = 12,12
animtype = Up
guard.hittime = 14
guard.velocity = -9
guard.slidetime = 14
ground.hittime = 14
ground.velocity = -4,-8
ground.slidetime = 14
ground.type = High
ground.cornerpush.veloff = -9
air.hittime = 14
air.velocity = -4,-7.5
air.type = High
air.recover = 0
fall.recover = 0
air.juggle = 15
fall = 1
id = 10001
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .43

[State Land]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1002
ctrl = 0



;-------------------------------------------------------------
;气动拳 3
[Statedef 1100]
type = S
movetype = A
physics = S
anim = 1100
velset = 0,0
poweradd = ifelse(fvar(10)!=1,100,50)
ctrl = 0

[State 1100, 1]
type = Posadd
trigger1 = Time = 0
x = 12

[STate 1100]
type = hitby
trigger1 = 1
value = SAC,NA,SA,HP,NP,SP,HA

[State 1100, 1]
type = PlaySnd
trigger1 = Time = 0
trigger1 = Random < 750
volume = 50
value = 5,1
channel = 0

[State 1100, 2]
type = PlaySnd
trigger1 = Time = 0
value = 2995,ifelse(fvar(10)!=1,ifelse(random<500,50,53),153)

[State 1100]
type = Helper
trigger1 = animelem = 2,>= 0 && animelem = 6,<= 0
trigger1 = numhelper(3111) < 2
stateno = 1612
id = 3111
pos = 0,0
postype = p1
ownpal = 1
sprpriority = 3

[State 1100]
type = Helper
trigger1 = animelem = 7,>= 0 && animelem = 10,<= 0
trigger1 = numhelper(3111) < 2
stateno = 1611
id = 3111
pos = 0,0
postype = p1
ownpal = 1
sprpriority = 3

[State 1100, 3]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5030,5040])  
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
attr = S, SP
animtype = high
damage = 20,5
priority = 7, Hit
guardflag = MA
pausetime = 7,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-75
hitsound = S200,0
guardsound = S150,1
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -4.5
air.velocity = -3.5,-6
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,20,10)
givepower = 5
yaccel = .5
air.fall = 1
air.recover = 0
fall.recover = 0

[State 1100, 3]
type = HitDef
triggerall = var(50) = 0
trigger1 = (p2stateno != [5030,5040])  
trigger1 = AnimElem = 9
trigger2 = AnimElem = 10
trigger3 = AnimElem = 11
attr = S, SP
animtype = high
damage = 25,6
priority = 7, Hit
guardflag = MA
pausetime = 7,7
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-60
hitsound = S200,0
guardsound = S150,1
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -5.5
air.velocity = -3.5,-6
air.juggle = 8
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,20,10)
givepower = 5
yaccel = .5
air.fall = 1
air.recover = 0
fall.recover = 0

[State 1100, 3]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5030,5040])  
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
trigger3 = AnimElem = 5
attr = S, SP
animtype = high
damage = 20,5
priority = 7, Hit
guardflag = MA
pausetime = 7,15
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-75
hitsound = S200,0
guardsound = S150,1
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -4.5
air.velocity = -3.5,-6
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,20,10)
givepower = 5
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
yaccel = .5
air.fall = 1
air.recover = 0
fall.recover = 0

[State 1100, 3]
type = HitDef
triggerall = var(50) = 1
trigger1 = (p2stateno != [5030,5040])  
trigger1 = AnimElem = 9
trigger2 = AnimElem = 10
trigger3 = AnimElem = 11
attr = S, SP
animtype = high
damage = 25,6
priority = 7, Hit
guardflag = MA
pausetime = 7,7
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-50)/2,-60
hitsound = S200,0
guardsound = S150,1
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -5.5
air.velocity = -3.5,-6
air.juggle = 8
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,20,10)
givepower = 5
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
yaccel = .5
air.fall = 1
air.recover = 0
fall.recover = 0

;AI青龙
[state 1100]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = movehit || movecontact || moveguarded
trigger1 = p2movetype != A 
trigger1 = p2BodyDist X > 65
trigger1 = animtime = 0
value = ifelse(random>700,1350,ifelse(random<300,1702,ifelse(random>500,1150,116)))

[state 1100]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = movehit || movecontact || moveguarded
triggerall = random < 200
trigger1 = power >= 1000 
trigger1 = p2BodyDist X > 65
trigger1 = animtime = 0
value = 3400

[state 1200]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = movehit || movecontact || moveguarded
trigger1 = p2BodyDist X > 65
trigger1 = animtime = 0
value = 116

;AI凤凰
[state 1100]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = movehit || movecontact || moveguarded
trigger1 = p2movetype != A 
trigger1 = p2BodyDist X > 65
trigger1 = animtime = 0
value = ifelse(random>700,1350,ifelse(random<300,2400,ifelse(random>500,1150,116)))

[state 1100]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = movehit || movecontact || moveguarded
triggerall = random < 200
trigger1 = power >= 1000 
trigger1 = p2BodyDist X > 65
trigger1 = animtime = 0
value = ifelse(random<500,4300,4200)

[state 1200]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = movehit || movecontact || moveguarded
trigger1 = p2BodyDist X > 65
trigger1 = animtime = 0
value = 116

[State 210, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

[Statedef 1612]
type    = A
movetype= I
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
poweradd = 0
sprpriority = -3
anim = 3112

[STate 3112]
type = HitBy
trigger1 = 1
value = SAC,NP,SP,HP

[STate 3112]
type = HitOverRide
trigger1 = 1
attr = SAC,NP,SP,HP
stateno = 3222

[State 3112]
type = Bindtoparent
trigger1 = 1
pos = 0,0

[State 3112]
type = Destroyself
trigger1 = root,stateno != 1100
trigger2 = root,animelem = 10,>= 0 && root,stateno = 1100


[Statedef 1611]
type    = A
movetype= I
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
poweradd = 0
sprpriority = -3
anim = 3111

[STate 3111]
type = HitBy
trigger1 = 1
value = SAC,NP,SP,HP

[STate 3111]
type = HitOverRide
trigger1 = 1
attr = SAC,NP,SP,HP
stateno = 3222

[State 3111]
type = Bindtoparent
trigger1 = 1
pos = 0,0

[State 3111]
type = Destroyself
trigger1 = root,stateno != 1100
trigger2 = root,animelem = 10,>= 0 && root,stateno = 1100

;气动拳 2
[Statedef 1150]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
anim = ifelse((fvar(10)=1),1205,1150)
poweradd = ifelse(fvar(10)!=1,120,60)
sprpriority = 2

[State 1150]
type = PalFx
trigger1 = timemod = 3,0
trigger1 = time <= 13
trigger1 = var(11) = 1 && var(32) = 1
add = 255,255,255
time = 2

;------------------
[state 1200]
type = varset
trigger1 = (animelemtime(1) >= 0) && (animelemtime(5) < 0)
var(31) = 0

[state 1200]
type = varset
trigger1 = (animelemtime(1) >= 0) && (animelemtime(5) < 0)
fvar(15) = 0

[STate 1150]
type = PlaySNd
trigger1 = Animelem = 5 
value = 800,0
channel = 0

[STate 1150]
type = PlaySNd
triggerall = fvar(10) = 0
trigger1 = Animelem = 3 
value = 300,0
channel = 1

[STate 1150]
type = PlaySNd
triggerall = fvar(10) = 1
trigger1 = Animelem = 5 
value = 300,ifelse(random<400,1,2)
channel = 1

[State 1150]
type = Width
trigger1 = Animelem = 7,>= 0 && animelem = 14,<= 0
value = 15,0

[State 1100]
type = Helper
trigger1 = ifelse((fvar(10)=1),(Animelem = 6),(Animelem = 5)) 
stateno = 1201
id = 1201
pos = -2,ifelse((fvar(10)=1),-10,-1)
ownpal = 1
sprpriority = 3

;AI青龙
[state 1150]
type = changestate
triggerall = var(59) = 1 
triggerall = fvar(10) = 0
triggerall = statetype !=A
trigger1 = animtime = 0
trigger1 = p2movetype = A
trigger1 = p2bodydist X < 55
value = 1003

[state 1150]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = statetype = A 
trigger1 = p2BodyDist X > 65
trigger1 = animtime = 0
value = 1702

[state 1150]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = statetype = A 
trigger1 = p2BodyDist X <= 65
trigger1 = p2statetype = S
trigger1 = p2movetype != A
trigger1 = animtime = 0
value = 410

[state 1150]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = statetype = A
trigger1 = random > 700 
trigger1 = p2BodyDist X <= 70
trigger1 = p2statetype = C
trigger1 = p2movetype != A
trigger1 = animtime = 0
value = 201

[state 1150]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = statetype = A
trigger1 = random < 300 
trigger1 = p2BodyDist X <= 70
trigger1 = p2statetype = C
trigger1 = p2movetype != A
trigger1 = animtime = 0
value = 900

;AI凤凰
[state 1150]
type = changestate
triggerall = var(59) = 1 
triggerall = fvar(10) = 1
triggerall = statetype !=A
trigger1 = animtime = 0
trigger1 = p2movetype = A
trigger1 = p2bodydist X < 55
value = 1090

[state 1150]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = statetype = A 
trigger1 = p2BodyDist X > 65
trigger1 = animtime = 0
value = 2400

[state 1150]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = statetype = A 
trigger1 = p2BodyDist X <= 65
trigger1 = p2statetype = S
trigger1 = p2movetype != A
trigger1 = animtime = 0
value = 410

[state 1150]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = statetype = A
trigger1 = random > 700 
trigger1 = p2BodyDist X <= 70
trigger1 = p2statetype = C
trigger1 = p2movetype != A
trigger1 = animtime = 0
value = 201

[state 1150]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = statetype = A
trigger1 = random < 300 
trigger1 = p2BodyDist X <= 70
trigger1 = p2statetype = C
trigger1 = p2movetype != A
trigger1 = animtime = 0
value = 900

[State 1150]
type = ChangeState 
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;气动拳 1
[Statedef 1200]
type = S
movetype = A
physics = S
juggle = 15
velset = 0,0
ctrl = 0
anim = ifelse((fvar(10)=1),1205,1150)
poweradd = ifelse(fvar(10)!=1,120,60)
sprpriority = 2

[State 1200]
type = PalFx
trigger1 = timemod = 3,0
trigger1 = time <= 13
trigger1 = var(11) = 1 && var(32) = 1
add = 255,255,255
time = 2

;------------------
[state 1200]
type = varset
trigger1 = (animelemtime(1) >= 0) && (animelemtime(5) < 0)
var(31) = 0

[state 1200]
type = varset
trigger1 = (animelemtime(1) >= 0) && (animelemtime(5) < 0)
fvar(15) = 0

[STate 1200]
type = PlaySNd
trigger1 = Animelem = 5 
value = 800,0
channel = 0

[STate 1150]
type = PlaySNd
triggerall = fvar(10) = 0
trigger1 = Animelem = 3 
value = 300,0
channel = 1

[STate 1150]
type = PlaySNd
triggerall = fvar(10) = 1
trigger1 = Animelem = 5 
value = 300,ifelse(random<400,1,2)
channel = 1

[State 1200]
type = posadd
trigger1 = AnimTime = 0
trigger2 = Time = 0
x = 10

[State 1200]
type = Width
trigger1 = Animelem = 7,>= 0 && animelem = 14,<= 0
value = 15,0

[State 1100]
type = Helper
trigger1 = ifelse((fvar(10)=1),(Animelem = 6),(Animelem = 5))
stateno = 1201
id = 1201
pos = -2,ifelse((fvar(10)=1),-10,-1)
ownpal = 1
sprpriority = 3

;AI青龙
[State 1200, 4]
type = ChangeState
triggerall = life >= 500
triggerall = fvar(10)=0
triggerall = var(59) = 1 
trigger1 = AnimTime = 0
trigger1 = p2movetype = A
trigger1 = p2bodydist X = (0,50)
value = 1000 

[State 1200, 4]
type = ChangeState
triggerall = life <500
triggerall = fvar(10)=0
triggerall = var(59) = 1 
trigger1 = AnimTime = 0
trigger1 = p2movetype = A
trigger1 = p2bodydist X = (0,50)
value = 1003

[state 1200]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10)=0
triggerall = statetype = A 
trigger1 = p2BodyDist X > 65
trigger1 = animtime = 0
value = 1702

[state 1200]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10)=0
triggerall = statetype = A 
trigger1 = p2BodyDist X <= 65
trigger1 = p2statetype = S
trigger1 = p2movetype != A
trigger1 = animtime = 0
value = 410

[state 1200]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10)=0
triggerall = statetype = A
trigger1 = random > 700 
trigger1 = p2BodyDist X <= 70
trigger1 = p2statetype = C
trigger1 = p2movetype != A
trigger1 = animtime = 0
value = 201

[state 1200]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10)=0
triggerall = statetype = A
trigger1 = random < 300 
trigger1 = p2BodyDist X <= 70
trigger1 = p2statetype = C
trigger1 = p2movetype != A
trigger1 = animtime = 0
value = 900

;AI凤凰
[State 1200, 4]
type = ChangeState
triggerall = life >= 500
triggerall = fvar(10)=1
triggerall = var(59) = 1 
trigger1 = AnimTime = 0
trigger1 = p2movetype = A
trigger1 = p2bodydist X = (0,50)
value = 1080 

[State 1200, 4]
type = ChangeState
triggerall = life <500
triggerall = fvar(10)=1
triggerall = var(59) = 1 
trigger1 = AnimTime = 0
trigger1 = p2movetype = A
trigger1 = p2bodydist X = (0,50)
value = 1090

[state 1200]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10)=1
triggerall = statetype = A 
trigger1 = p2BodyDist X > 65
trigger1 = animtime = 0
value = 2400

[state 1200]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10)=1
triggerall = statetype = A 
trigger1 = p2BodyDist X <= 65
trigger1 = p2statetype = S
trigger1 = p2movetype != A
trigger1 = animtime = 0
value = 410

[state 1200]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10)=1
triggerall = statetype = A
trigger1 = random > 700 
trigger1 = p2BodyDist X <= 70
trigger1 = p2statetype = C
trigger1 = p2movetype != A
trigger1 = animtime = 0
value = 201

[state 1200]
type = changestate
triggerall = var(59) = 1
triggerall = fvar(10)=1
triggerall = statetype = A
trigger1 = random < 300 
trigger1 = p2BodyDist X <= 70
trigger1 = p2statetype = C
trigger1 = p2movetype != A
trigger1 = animtime = 0
value = 900

[State 1200]
type = ChangeState 
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;闪光天雷击(短)
[statedef 1250]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
poweradd = ifelse(fvar(10)!=1,90,45)
sprpriority = 3
anim = 1250

[State 900, 2]
type = PlaySnd
triggerall = random <= 600
trigger1 = time = 2
value = 2995,ifelse(fvar(10)!=1,54,ifelse(random<500,151,152))
channel = 0

[state nothitby]
type = nothitby
trigger1 = time >=0
value = SCA, NA,SA,NT,ST,NP,NP,SP,HP
time = 10
ignorehitpause = 1

[State Jump]
type = posadd
trigger1 = Time = 0
trigger2 = animelem = 2
trigger3 = AnimTime = 0
x = 10

[State Jump]
type = ChangeState
trigger1 = AnimTime = 0
value = 1300
ctrl = 0

[StateDef 1300]
type = A
movetype = A
physics = N
anim = 1300
velset = 0.0
ctrl = 0

[state playsnd]
type = playsnd
trigger1 = animelem = 4
value = 600,1
volume = 160

[State 1305, 2]
type = playsnd
trigger1 = animelem = 4
value = 2500,0
channel = 0

[State 1300, 2]
type = veladd
trigger1 = animelem = 1, <= 2
y = -2.7 
x = 0.7

[State 1300, 2]
type = veladd
trigger1 = animelem = 3, >= 3
y = 0 
x = 0

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = const(movement.yaccel)

[state hitdef]
type = hitdef
triggerall = fvar(10)=0
trigger1 = (p2stateno != [5020,5040])
trigger1 = animelem = 5
trigger2 = animelem = 6
attr = A,NA
damage = 40,10
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
animtype = high
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
sparkno = S736
guard.pausetime = 10,10
guard.sparkno = S731
sparkxy = ((p2bodydist x)-60)/2,-65
hitsound = S220,0
guardsound = S150,0
ground.type = low
ground.slidetime = 19
ground.hittime = 23
ground.velocity = -6
guard.velocity = -8
guard.cornerpush.veloff = -12
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 15
id=1300
fall.recover = 0
palfx.time = 55
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15

[state hitdef]
type = hitdef
triggerall = fvar(10)=1
trigger1 = (p2stateno != [5020,5040])
trigger1 = animelem = 5
trigger2 = animelem = 6
attr = A,NA
damage = 40,10
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
animtype = high
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
sparkno = S736
guard.pausetime = 10,10
guard.sparkno = S731
sparkxy = ((p2bodydist x)-60)/2,-65
hitsound = S220,10
guardsound = S150,0
ground.type = low
ground.slidetime = 19
ground.hittime = 23
ground.velocity = -6
guard.velocity = -8
guard.cornerpush.veloff = -12
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 15
id=10001
fall.recover = 0
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1

[State 1200, Explod]
type = Explod
trigger1 = numTarget(1300)>0
anim = 6215
ID = 6215
pos = 0,0
postype = p2
bindtime = 100
sprpriority = 3
persistent = 0
ownpal = 1

[state hitdef]
type = hitdef
triggerall = fvar(10)=0
trigger1 = animelem = 7
attr = A,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 60,10
sparkno = S736
guard.sparkno = S731
sparkxy = 10,-20
hitsound = S220,0
guardsound = S150,0
pausetime = 12,12
animtype = Up
guard.hittime = 23
guard.velocity = -4
guard.slidetime = 19
guard.velocity = -12
guard.cornerpush.veloff = -15
ground.hittime = 23
ground.velocity = -2,-5.5
ground.slidetime = 19
ground.type = High
air.hittime = 14
air.velocity = -4,-6
air.type = High
air.recover = 0
air.juggle = 8
fall.recover = 0
id=1000
fall = 1
palfx.time = 55
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[state hitdef]
type = hitdef
triggerall = fvar(10)=1
trigger1 = animelem = 7
attr = A,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 60,10
sparkno = S736
guard.sparkno = S731
sparkxy = 10,-20
hitsound = S220,10
guardsound = S150,0
pausetime = 12,12
animtype = Up
guard.hittime = 23
guard.velocity = -4
guard.slidetime = 19
guard.velocity = -12
guard.cornerpush.veloff = -15
ground.hittime = 23
ground.velocity = -2,-5.5
ground.slidetime = 19
ground.type = High
air.hittime = 14
air.velocity = -4,-6
air.type = High
air.recover = 0
air.juggle = 8
fall.recover = 0
id=10001
fall = 1
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State Land]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 1310
ctrl = 0

;闪光天雷击(长)
[statedef 1350]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
poweradd = ifelse(fvar(10)!=1,90,45)
sprpriority = 3
anim = 1250

[State 900, 2]
type = PlaySnd
triggerall = random <= 600
trigger1 = time = 2
value = 2995,ifelse(fvar(10)!=1,54,ifelse(random<500,151,152))
channel = 0

[state nothitby]
type = nothitby
trigger1 = time >=0
value = SCA, NA,SA,NT,ST,NP,NP,SP,HP
time = 10
ignorehitpause = 1

[State Jump]
type = ChangeState
trigger1 = AnimTime = 0
value = 1305
ctrl = 0

[StateDef 1305]
type = A
movetype = A
physics = N
anim = 1350
juggle = 10
velset = 0.0
ctrl = 0

[state playsnd]
type = playsnd
trigger1 = animelem = 3
value = 600,1
volume = 160

[State 1305, 2]
type = veladd
trigger1 = animelem = 1, <= 2
y = -3.5 
x = 1.5

[State 1305, 2]
type = veladd
trigger1 = animelem = 3, >= 3
y = 0.2 
x = 0

[State 1305, 2]
type = playsnd
trigger1 = animelem = 4
value = 2500,0
channel = 0 

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = const(movement.yaccel)

[state hitdef]
type = hitdef
triggerall = fvar(10) = 0
trigger1 = (p2stateno != [5020,5040])
trigger1 = animelem = 5
trigger2 = animelem = 6
attr = A,NA
damage = 80,0
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
animtype = high
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
guard.pausetime = 10,10
guard.sparkno = S731
sparkno = S736
sparkxy = ((p2bodydist x)-60)/2,-65
hitsound = S220,0
guardsound = S150,0
ground.type = low
ground.slidetime = 19
ground.hittime = 23
ground.velocity = -6
guard.velocity = -8
guard.cornerpush.veloff = -12
airguard.velocity = -6,-3
air.type = low
id = 1306
palfx.time = 55
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
air.velocity = -4,-3
air.fall = 1
fall.recover = 0

[state hitdef]
type = hitdef
triggerall = fvar(10) = 1
trigger1 = (p2stateno != [5020,5040])
trigger1 = animelem = 5
trigger2 = animelem = 6
attr = A,NA
damage = 80,0
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
animtype = high
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
guard.pausetime = 10,10
guard.sparkno = S731
sparkno = S736
sparkxy = ((p2bodydist x)-60)/2,-65
hitsound = S220,10
guardsound = S150,0
ground.type = low
ground.slidetime = 19
ground.hittime = 23
ground.velocity = -6
guard.velocity = -8
guard.cornerpush.veloff = -12
airguard.velocity = -6,-3
air.type = low
id=10001
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
air.velocity = -4,-3
air.fall = 1
fall.recover = 0

[State 1200, Explod]
type = Explod
trigger1 = numTarget(1306)>0
trigger2 = numTarget(1305)>0
anim = 6215
ID = 6215
pos = 0,0
postype = p2
bindtime = 100
sprpriority = 3
persistent = 0
ownpal = 1

[state hitdef]
type = hitdef
triggerall = fvar(10) = 0
trigger1 = animelem = 7
attr = A,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 70,10
sparkno = S736
guard.sparkno = S731
sparkxy = 10,-20
hitsound = S220,0
guardsound = S150,0
pausetime = 12,12
animtype = Up
guard.hittime = 23
guard.velocity = -4
guard.slidetime = 19
ground.hittime = 23
ground.velocity = -2,-6
guard.velocity = -12
guard.cornerpush.veloff = -17
ground.slidetime = 19
ground.type = High
air.hittime = 14
air.velocity = -4,-6
air.type = High
air.recover = 0
fall.recover = 0
fall = 1
id = 1305
palfx.time = 55
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15
yaccel = .35

[state hitdef]
type = hitdef
triggerall = fvar(10) = 1
trigger1 = animelem = 7
attr = A,SA
hitflag = MAF
guardflag = M
getpower = ifelse(fvar(10)!=1,50,25),ifelse(fvar(10)!=1,30,15)
givepower = 5
damage = 70,10
sparkno = S736
guard.sparkno = S731
sparkxy = 10,-20
hitsound = S220,10
guardsound = S150,0
pausetime = 12,12
animtype = Up
guard.hittime = 23
guard.velocity = -4
guard.slidetime = 19
ground.hittime = 23
ground.velocity = -2,-6
guard.velocity = -12
guard.cornerpush.veloff = -17
ground.slidetime = 19
ground.type = High
air.hittime = 14
air.velocity = -4,-6
air.type = High
air.recover = 0
fall.recover = 0
fall = 1
id=10001
fall = 1
palfx.time = 52
Palfx.add = 210,10,-200
Palfx.mul = 200,200,200
Palfx.sinadd = 60,40,50,20
Palfx.color = 0
palfx.invertall = 1
yaccel = .35

[State Land]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 1310
ctrl = 0

[StateDef 1310]
type = S
movetype = A
physics = S
anim = 1310
velset = 0,0
ctrl = 0

[state posset]
type = posset
trigger1 = 1
y = 0

[State Jump]
type = ChangeState
trigger1 = animtime = 0
value = 12;站立
ctrl = 1

;倒旋(低)
[statedef 1400]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
poweradd = ifelse(fvar(10)!=1,100,50)
sprpriority = 1
juggle= 7+var(7)
anim = 1400

[state 1395]
type = nothitby
trigger1 = 1
value = sac
time = 1

[state playsnd]
type = posadd
trigger1 = animelem = 2
x = 15

[State 1650, 1]
type = ReversalDef
trigger1 = animelem = 1
trigger2 = animelem = 2 
reversal.attr = SCA,NA,SA, AP,NP,SP,AA,HP,HA
hitflag = MAFPD
numhits = 0
persistent = 0
pausetime = 16,21
sparkno = S731
hitsound = S150,1
p1stateno = 1401
p2stateno = 831

[State Jump]
type = ChangeState
trigger1 = animtime = 0
value = 1405
ctrl = 0

[statedef 1401]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
poweradd = ifelse(fvar(10)!=1,100,50)
sprpriority = 1
juggle= 7+var(7)
anim = 1401

[State 3784]
type = Explod
trigger1 = animelemtime(2) = 2
ignorehitpause = 1 
persistent = 0
anim = 1500
pos = 0,0
supermove = 1
pausemovetime = 100
postype = p1
sprpriority = 2
bindtime = 33
ownpal = 1

[State 399, -2]
type = EnvShake
trigger1 = animelemtime(6) = 2
ignorehitpause = 1
persistent = 0
time = 20
freq = 100
ampl = -3
phase = 1

[State 3784]
type = Explod
trigger1 = animelemtime(6) = 2
ignorehitpause = 1 
anim = 395
pos = -25,-2
supermove = 1
pausemovetime = 100
postype = p1
sprpriority = -3
bindtime = 33
ownpal = 1

[STate 1395]
type = PlaySNd
trigger1 = animelemtime(2) = 2
value = 2995,151
volume = 70

[STate 1395]
type = PlaySNd
trigger1 = animelemtime(2) = 2
value = 999,2
volume = 170

[State 3875, 慢镜头]
type = Pause 
trigger1 = animelem = 2
time = 40
movetime = 40
ignorehitpause = 1

[State 900, 2]
type = PlaySnd
triggerall = random <= 600
trigger1 = Animelem = 3
value = 2995,55
channel = 0

[state nothitby]
type = nothitby
trigger1 = time >=0
value = SCA, NA,SA,NT,ST,NP,NP,SP,HP
time = 1
ignorehitpause = 1

[State Jump]
type = ChangeState
trigger1 = AnimTime = 0
value = 1405
ctrl = 0

;倒旋(起)
[StateDef 1405]
type = A
movetype = A
physics = N
anim = 1405
velset = 0,0
ctrl = 0

[state playsnd]
type = playsnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = 600,1
volume = 60

[state 1436]
type = velset
trigger1 = animelem = 1
x = .7
y = -7

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = .4

[state hitdef]
type = hitdef
trigger1 = animelem = 1
attr = S,SA
damage = 55,20
getpower = 30,30
air.animtype = back
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 9,9
guard.pausetime = 12,12
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-40)/2,-70
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -5
airguard.velocity = -5,-7
guard.velocity = -5
air.type = low
air.velocity = -2,-6
air.hittime = 15
air.juggle = 8
fall.recover = 0
air.fall = 1
yaccel = .35

[state hitdef]
type = hitdef
trigger1 = animelem = 2
attr = S,SA
damage = 55,20
getpower = 30,30
air.animtype = back
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 15,15
guard.pausetime = 15,15
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-50)/2,-70
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -2,-7.5
airguard.velocity = -5,-7
guard.velocity = -23
air.type = low
air.velocity = -2,-6
air.hittime = 15
air.juggle = 8
fall.recover = 0
fall = 1
yaccel = .35

[state hitdef]
type = hitdef
trigger1 = animelem = 3
attr = S,SA
damage = 35,20
getpower = 50,30
air.animtype = back
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 18,18
guard.pausetime = 18,18
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-60)/2,-90
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 23
ground.hittime = 25
ground.velocity = -2,-7.5
guard.velocity = -18
airguard.velocity = -5,-7
air.type = low
air.velocity = -2,-6
air.hittime = 12
air.juggle = 8
fall.recover = 0
fall = 1
yaccel = .35

[State Land]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 1416
ctrl = 0

;倒旋(高)
[statedef 1410]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
poweradd = ifelse(fvar(10)!=1,100,50)
sprpriority = 3
juggle= 7+var(7)
anim = 1410

[State 900, 2]
type = PlaySnd
triggerall = random <= 600
trigger1 = Animelem = 3
value = 2995,151
channel = 0

[state nothitby]
type = nothitby
trigger1 = time >=0
value = SCA, NA,SA,NT,ST,NP,NP,SP,HP
time = 1
ignorehitpause = 1

[State 1650, 1]
type = ReversalDef
trigger1 = animelem = 1 
trigger2 = animelem = 2
reversal.attr = SCA,NA,SA, AP,NP,SP,AA,HP,HA
hitflag = MAFPD
numhits = 0
persistent = 0
pausetime = 16,21
sparkno = S731
hitsound = S150,1
p1stateno = 1411
p2stateno = 831

[State HitDef]
type = HitDef
triggerall = !movehit
trigger1 = animelem = 3
attr = S,SA
damage = 90,20
getpower = ifelse(fvar(10)!=1,65,36),ifelse(fvar(10)!=1,30,15)
air.animtype = back
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 6,6
guard.pausetime = 4,4
guard.sparkno = S733
sparkno = S736
sparkxy = -20,ifelse((animelem = 5),-80,-65)
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -1,-7.5
airguard.velocity = -1,-7
guard.velocity = -10
air.type = low
air.velocity = -1,-7
air.hittime = 15
fall.recover = 0
fall = 1
yaccel = .35

[State Jump]
type = ChangeState
trigger1 = AnimTime = 0
value = 1415
ctrl = 0

[statedef 1411]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
poweradd = ifelse(fvar(10)!=1,100,50)
sprpriority = 1
juggle= 7+var(7)
anim = 1401

[State 3784]
type = Explod
trigger1 = animelemtime(2) = 2
ignorehitpause = 1 
persistent = 0
anim = 1500
pos = 0,0
supermove = 1
pausemovetime = 100
postype = p1
sprpriority = 2
bindtime = 33
ownpal = 1

[State 399, -2]
type = EnvShake
trigger1 = animelemtime(6) = 2
ignorehitpause = 1
persistent = 0
time = 20
freq = 100
ampl = -3
phase = 1

[State 3784]
type = Explod
trigger1 = animelemtime(6) = 2
ignorehitpause = 1 
anim = 395
pos = -25,-2
supermove = 1
pausemovetime = 100
postype = p1
sprpriority = -3
bindtime = 33
ownpal = 1

[STate 1395]
type = PlaySNd
trigger1 = animelemtime(2) = 2
value = 2995,152

[STate 1395]
type = PlaySNd
trigger1 = animelemtime(2) = 2
value = 999,2
volume = 170

[State 3875, 慢镜头]
type = Pause 
trigger1 = animelem = 2
time = 40
movetime = 40
ignorehitpause = 1

[State 900, 2]
type = PlaySnd
triggerall = random <= 600
trigger1 = Animelem = 3
value = 2995,55
channel = 0

[state nothitby]
type = nothitby
trigger1 = time >=0
value = SCA, NA,SA,NT,ST,NP,NP,SP,HP
time = 1
ignorehitpause = 1

[State Jump]
type = ChangeState
trigger1 = AnimTime = 0
value = 1415
ctrl = 0

;倒旋(高起)
[StateDef 1415]
type = A
movetype = A
physics = N
anim = 1405
velset = 0,0
ctrl = 0

[state playsnd]
type = playsnd
trigger1 = animelem = 1
trigger2 = animelem = 3
value = 600,1
volume = 60

[state 1436]
type = velset
trigger1 = animelem = 1
x = 1.2
y = -7.5

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = .4

[state hitdef]
type = hitdef
trigger1 = animelem = 1
attr = S,SA
damage = 30,10
getpower = ifelse(fvar(10)!=1,60,36),ifelse(fvar(10)!=1,30,15)
air.animtype = back
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 9,9
guard.pausetime = 9,9
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-40)/2,-90
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -3,-7.5
airguard.velocity = -3,-7
guard.velocity = -15
air.type = low
air.velocity = -2,-6
air.hittime = 12
air.juggle = 8
fall.recover = 0
fall = 1
yaccel = .35

[state hitdef]
type = hitdef
trigger1 = animelem = 2
attr = S,SA
damage = 30,10
getpower = ifelse(fvar(10)!=1,60,36),ifelse(fvar(10)!=1,30,15)
air.animtype = back
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 15,15
guard.pausetime = 15,15
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-50)/2,-90
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 23
ground.hittime = 28
ground.velocity = -3,-7.5
airguard.velocity = -3,-7
guard.velocity = -23
air.type = low
air.velocity = -2,-6
air.hittime = 12
air.juggle = 8
fall.recover = 0
fall = 1
yaccel = .35

[state hitdef]
type = hitdef
trigger1 = animelem = 3
attr = S,SA
damage = 30,10
getpower = ifelse(fvar(10)!=1,60,36),ifelse(fvar(10)!=1,30,15)
air.animtype = back
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 18,18
guard.pausetime = 18,18
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-60)/2,-90
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -8,-7.5
airguard.velocity = -3,-7
guard.velocity = -12
air.type = low
air.velocity = -2,-6
air.hittime = 15
air.juggle = 8
fall.recover = 0
fall = 1
yaccel = .35

[State Land]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 1416
ctrl = 0

;倒旋(落)
[statedef 1416]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 1416

[state posset]
type = posset
trigger1 = time = 0
y = 0

[state posset]
type = playsnd
trigger1 = time = 0
value = 100,0

[State Land]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1
;**********************************************************************
;碎石踢(近)
[StateDef 1510]
type = A
movetype = A
physics = N
anim = 1510
poweradd = ifelse(fvar(10)!=1,100,50)
juggle = 9
velset = 0,0
ctrl = 0

[State 4100, Explod]
type = Explod
trigger1 = AnimElemtime(2) = 1
anim = 706
facing = -1
ownpal = 1
pos = 10,0
postype = p1
sprpriority = 5
bindtime = 1

[state 1510,playsnd]
type = playsnd
trigger1 = AnimElemtime(2) = 1
value = 40,0

[state 1510,playsnd]
type = playsnd
trigger1 = AnimElemtime(6) = 1
value = 100,0

[State 399, EnvShake]
type = EnvShake
trigger1 = movecontact
ignorehitpause = 1
persistent = 0
time = 10
freq = 100
ampl = -2
phase = 1

[state 1436]
type = posadd
trigger1 = animelem = 4
x = 1

[state 1436]
type = posadd
trigger1 = animelem = 5
x = 11

[state 1436]
type = posadd
trigger1 = animelem = 6
x = 15

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 5
value = 2995,51
channel = 0

[state 1436]
type = posadd
trigger1 = animelem = 3
x = 11

[state 1436]
type = posadd
trigger1 = animelem = 8
x = 11

[state 1436]
type = posadd
trigger1 = animelem = 10
x = 2

[state 1436]
type = velset
trigger1 = animelem = 3
y = -1
x = 9

[state 1436]
type = posset
trigger1 = animelem = 6
y = 0

[state 1436]
type = velset
trigger1 = animelem = 6
y = 0
x = 0

[state 1436]
type = veladd
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
y = .25

[state hitdef]
type = hitdef
triggerall = p2stateno != [5020,5040]
trigger1 = time = 0
attr = S,NA
damage = 100,25
getpower = ifelse(fvar(10)!=1,60,36),ifelse(fvar(10)!=1,30,15)
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
guard.pausetime = 10,13
guard.sparkno = S733
sparkno = S736
sparkxy = (p2bodydist x)/6-20,-78
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 19
ground.hittime = 23
ground.velocity = -6,-5
guard.velocity = -13
airguard.velocity = -6,-4.5
guard.cornerpush.veloff = -17
air.type = low
air.velocity = -4,-4
air.hittime = 15
air.juggle = 8
fall.recover = 0
fall = 1
yaccel = .35

[State Land]
type = ChangeState
trigger1 = animtime = 0
value = 0;站立
ctrl = 1
;**********************************************************************
;碎石踢(远)
[StateDef 1515]
type = A
movetype = A
physics = N
anim = 1515
juggle = 9
poweradd = ifelse(fvar(10)!=1,100,50)
velset = 0,0
ctrl = 0

[State 4100, Explod]
type = Explod
trigger1 = AnimElemtime(2) = 1
anim = 706
facing = -1
ownpal = 1
pos = 10,0
postype = p1
sprpriority = 5
bindtime = 1

[state 1510,playsnd]
type = playsnd
trigger1 = AnimElemtime(2) = 1
value = 40,0

[state 1510,playsnd]
type = playsnd
trigger1 = AnimElemtime(6) = 1
value = 100,0

[State 399, EnvShake]
type = EnvShake
trigger1 = movecontact
ignorehitpause = 1
persistent = 0
time = 15
freq = 100
ampl = -2
phase = 1

[state 1436]
type = posadd
trigger1 = animelem = 4
x = 1

[state 1436]
type = posadd
trigger1 = animelem = 5
x = 11

[state 1436]
type = posadd
trigger1 = animelem = 6
x = 15

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 5
value = 2995,51
channel = 0

[state 1436]
type = posadd
trigger1 = animelem = 3
x = 11

[state 1436]
type = posadd
trigger1 = animelem = 8
x = 11

[state 1436]
type = posadd
trigger1 = animelem = 10
x = 2

[state 1436]
type = velset
trigger1 = animelem = 3
y = -1
x = 9

[state 1436]
type = posset
trigger1 = animelem = 6
y = 0

[state 1436]
type = velset
trigger1 = animelem = 6
y = 0
x = 0

[state 1436]
type = veladd
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
y = .25

[state hitdef]
type = hitdef
triggerall = p2stateno != [5020,5040]
trigger1 = time = 0
attr = S,NA
damage = 115,35
getpower = ifelse(fvar(10)!=1,60,36),ifelse(fvar(10)!=1,30,15)
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
guard.pausetime = 10,16
guard.sparkno = S733
sparkno = S736
sparkxy = (p2bodydist x)/6-20,-78
hitsound = S220,0
guardsound = S150,1
ground.type = low
ground.slidetime = 19
ground.hittime = 23
ground.velocity = -6,-5
airguard.velocity = -6,-4.5
guard.velocity = -13
guard.cornerpush.veloff = -17
air.type = low
air.velocity = -4,-4
air.hittime = 15
air.juggle = 8
fall.recover = 0
fall = 1
yaccel = .35

[State Land]
type = ChangeState
trigger1 = animtime = 0
value = 0;站立
ctrl = 1
;**********************************************************************
;碎铁拳(近)
[StateDef 1600]
type = s
movetype = A
physics = s
anim = 1600
poweradd = ifelse(fvar(10)!=1,100,50)
velset = 0,0
juggle = var(7)
ctrl = 0

[state 1600]
type = posadd
trigger1 = animelem = 5 
x = 10

[state 1600]
type = velset
trigger1 = animelemtime(5) >= 0
trigger1 = animelemtime(7) < 0  
x = 8

[state 1600]
type = velset
trigger1 = animelem = 7 
x = 0

[State 399, EnvShake]
type = EnvShake
;trigger1 = time = 0
trigger1 = movecontact
ignorehitpause = 1
persistent = 0
time = 15
freq = 100
ampl = -4
phase = 1

[state 1650]
type = playsnd
trigger1 = animelem = 3
value = 2000,9

[state 1650]
type = playsnd
triggerall = fvar(10) = 0
trigger1 = animelem = 4
value = 2000,10

[state 1650]
type = playsnd
triggerall = fvar(10) = 1
trigger1 = animelem = 4
value = 2995,ifelse(random<500,150,153)

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = const(movement.yaccel)

[State 3200]
type = HitDef
trigger1 = (p2stateno != [5020,5040])
trigger1 = animelem = 7
attr = S, NA
animtype = hard
damage = 100,20
priority = 7, Hit
guardflag = MA
pausetime = 12,12
guard.pausetime = 12,17
sparkno = S736
guard.sparkno = S731
sparkxy = ((p2bodydist x)-54)/2,-65
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 19
ground.hittime = 23
ground.velocity = -9,-6
air.velocity = -6.5,-6
air.juggle = 7
guard.velocity = -11
guard.cornerpush.veloff = -15
getpower = ifelse(fvar(10)!=1,60,36),ifelse(fvar(10)!=1,30,15)
givepower = 5
fall=1
fall.recover = 0
yaccel = .5

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;**********************************************************************
;碎铁拳(远)
[StateDef 1650]
type = s
movetype = A
physics = s
anim = 1650
poweradd = ifelse(fvar(10)!=1,100,50)
velset = 0,0
ctrl = 0

[state 1650]
type = playsnd
trigger1 = animelem = 3
value = 2000,9

[state 1650]
type = playsnd
triggerall = fvar(10) = 0
trigger1 = animelem = 4
value = 2000,10

[state 1650]
type = playsnd
triggerall = fvar(10) = 1
trigger1 = animelem = 4
value = 2995,ifelse(random<500,152,153)

[state 1600]
type = posadd
trigger1 = animelem = 5 
x = 10

[state 1600]
type = velset
trigger1 = animelemtime(5) >= 0
trigger1 = animelemtime(7) < 0  
x = 10

[state 1600]
type = velset
trigger1 = animelem = 7 
x = 0

[State 399, EnvShake]
type = EnvShake
;trigger1 = time = 0
trigger1 = movecontact
ignorehitpause = 1
persistent = 0
time = 15
freq = 100
ampl = -5
phase = 1

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = const(movement.yaccel)

[State 3200]
type = HitDef 
trigger1 = animelem = 7
attr = S, NA
animtype = hard
damage = 120,25
priority = 7, Hit
guardflag = MA
pausetime =  7,7
guard.pausetime = 12,21
sparkno = S736
guard.sparkno = S731
sparkxy = ((p2bodydist x)-54)/2,-65
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 19
ground.hittime = 23
ground.velocity = -9,-6
air.velocity = -7.5,-6
guard.velocity = -11
guard.cornerpush.veloff = -15
getpower = ifelse(fvar(10)!=1,60,36),ifelse(fvar(10)!=1,30,15)
givepower = 5
fall=1
fall.recover = 0
yaccel = .5

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1
;**********************************************************************
;逆霞回旋铲(无彩)
[StateDef 1700]
type = A
movetype = A
physics = N
anim = 1700
velset = 0,0
juggle = 9
powadd = ifelse(fvar(10)!=1,100,50)
ctrl = 0


[State 1702, 2]
type = velset
trigger1 = animelem = 2
y = -4.1
x = 3

[State 1702, 2]
type = velset
trigger1 = animelemtime(5)=0
x = 3
y = 0

[State 1702, 2]
type = velset
trigger1 = animelemtime(5)=2
x = 2

[State 1702, 2]
type = velset
trigger1 = animelemtime(5)=4
x = 1

[State 1702, 2]
type = velset
trigger1 = animelem = 8
x = 3.5 

[State 1702, 2]
type = velset
trigger1 = animelem = 9
x = 6.5 

[State Gravity]
type = VelAdd
;triggerall = animelem != 5
trigger1 = Pos Y < 0
y = .3

[State Gravity]
type = posset
trigger1 = Pos Y > 0
y = 0

[state hitdef]
type = hitdef
trigger1 = animelem = 3
trigger2 = animelem = 4
attr = S,SA
damage = 20,10
getpower = ifelse(fvar(10)!=1,60,36),ifelse(fvar(10)!=1,30,15)
animtype = hard
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 11,15
guard.pausetime = 12,15
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-40)/2,-50
hitsound = S220,0
guardsound = S150,0
ground.type = low
ground.slidetime = 17
ground.hittime = 19
guard.velocity = -7
ground.velocity = -6
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 15
air.fall = 1
fall.recover = 0

[state hitdef]
type = hitdef
trigger1 = animelem = 6
attr = S,SA
damage = 40,10
getpower = ifelse(fvar(10)!=1,60,36),ifelse(fvar(10)!=1,30,15)
animtype = hard
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 11,15
guard.pausetime = 12,15
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-40)/2,-70
hitsound = S220,0
guardsound = S150,0
ground.type = hight
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -6
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 15
air.fall = 1
fall.recover = 0

[State HitDef]
type = HitDef
trigger1 = AnimElem = 9
attr = S,SA
damage = 80,10
getpower = ifelse(fvar(10)!=1,60,36),ifelse(fvar(10)!=1,30,15)
givepower = 5
animtype = hard
guardflag = MA
hitflag = MAFP
priority = 5,Hit
pausetime = 11,12
guard.pausetime = 12,12
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-40)/2,-30
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 20
ground.hittime = 30
ground.velocity = -3,-1
guard.velocity = -10
airguard.velocity = -5.2,-4
air.type = High
air.velocity = -5,-4
air.hittime = 12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = (1.3*-6)
guard.cornerpush.veloff = -17
airguard.cornerpush.veloff = (1.3*-6)
fall = 1
air.fall = 1
fall.recover = 0

[State Land]
type = ChangeState
trigger1 = animelemtime(9)>=8
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 1707
ctrl = 0

;逆霞回旋铲
[StateDef 1702]
type = A
movetype = A
physics = N
anim = 1700
velset = 0,0
powadd = ifelse(fvar(10)!=1,100,50)
ctrl = 0

[State 1702, 1]
type = posadd
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
x = 2

[State 1702, 2]
type = velset
trigger1 = animelem = 2
y = -4.1
x = 3

[State 1702, 2]
type = velset
trigger1 = animelemtime(5)=0
x = 3
y = 0

[State 1702, 2]
type = velset
trigger1 = animelemtime(5)=2
x = 2

[State 1702, 2]
type = velset
trigger1 = animelemtime(5)=4
x = 1

[State 1702, 2]
type = velset
trigger1 = animelem = 8
x = 3.5 

[State 1702, 2]
type = velset
trigger1 = animelem = 9
x = 6.5 

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = .3

[State Gravity]
type = posset
trigger1 = Pos Y > 0
y = 0

[state hitdef]
type = hitdef
trigger1 = animelem = 3
trigger2 = animelem = 4
trigger3 = animelem = 9
attr = S,SA
damage = 30,5
getpower = ifelse(fvar(10)!=1,60,36),ifelse(fvar(10)!=1,30,15)
animtype = hard
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
guard.pausetime = 10,10
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-40)/2,-50
hitsound = S220,0
guardsound = S150,0
ground.type = low
ground.slidetime = 17
ground.hittime = 19
guard.velocity = -11
ground.velocity = -6
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 12
air.fall = 1
fall.recover = 0

[state hitdef]
type = hitdef
trigger1 = animelem = 6
attr = S,SA
damage = 30,5
getpower = ifelse(fvar(10)!=1,60,36),ifelse(fvar(10)!=1,30,15)
animtype = hard
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
guard.pausetime = 10,10
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-40)/2,-90
hitsound = S220,0
guardsound = S150,0
ground.type = hight
ground.slidetime = 17
ground.hittime = 19
guard.velocity = -11
ground.velocity = -6
airguard.velocity = -6,-3
air.type = low
air.velocity = -4,-3
air.hittime = 12
air.fall=1
fall.recover = 0

[State Land]
type = ChangeState
trigger1 = animelemtime(9)>=7
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 1701
ctrl = 0

[StateDef 1701]
type = S
movetype = A
physics = S
anim = 1701
velset = 0,0
ctrl = 0

[State 1701]
type = posset
trigger1 = Time = 0
y = 0

[state hitby]
type = hitby
trigger1 = time >= 0
value = SCA,AP,SA,NA,HA
time=1

[State 1701]
type = posadd
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
x = 2

[State 1701]
type = veladd
trigger1 = time = [0,30]
x = 1.3

[State -3, Width 1]
type = Width
trigger1 = 1
player = 20,-20

[State HitDef]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
trigger3 = AnimElem = 3
trigger4 = AnimElem = 4
trigger5 = AnimElem = 5
attr = S,NA
animtype = Heavy
damage = 20,5
priority = 7, Hit
guardflag = MA
pausetime = 12,12
guard.pausetime = 12,12
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-40)/2,-25
hitsound = S210,0
guardsound = S150,0
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -2.5
guard.velocity = ifelse(p2bodydist x <= 10 ,-13 ,-3)
air.velocity = -2.5,-3
getpower = 30,15
givepower = 5
fall = 1
fall.recover = 0
yaccel = .5

[State HitDef]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 6
attr = S,NA
animtype = Heavy
damage = 100,5
priority = 7, Hit
guardflag = MA
pausetime = 12,12
guard.pausetime = 12,12
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-25
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -2.5,-6
guard.velocity = ifelse(p2bodydist x <= 10 ,-13 ,-3)
air.velocity = -6,-10
getpower = 30,15
givepower = 5
fall = 1
yaccel = .5
fall.recover = 0

[State HitDef]
type = HitDef
triggerall = !Movehit||SysVar(0)
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 7
trigger2 = AnimElem = 8
trigger3 = AnimElem = 9
attr = S,NA
animtype = Heavy
damage = 100,5
priority = 7, Hit
guardflag = MA
pausetime = 12,12
guard.pausetime = 12,14
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-25
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -2.5
guard.velocity = ifelse(p2bodydist x <= 10 ,-13 ,-3)
air.velocity = -6,-10
getpower = 30,15
givepower = 5
fall = 1
yaccel = .5
fall.recover = 0

[State HitDef]
type = HitDef
triggerall = !Movehit||SysVar(0)
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 10
attr = S,NA
animtype = Heavy
damage = 100,5
priority = 7, Hit
guardflag = MA
pausetime = 12,12
guard.pausetime = 12,27
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-25
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 9
ground.hittime = 9
guard.velocity = ifelse(p2bodydist x <= 10 ,-13 ,-3)
guard.cornerpush.veloff = -17
ground.velocity = -2.5
air.velocity = -6,-10
getpower = 30,15
givepower = 5
fall = 1
yaccel = .5
fall.recover = 0

[State 1701]
type = ChangeState
trigger1 = AnimTime = 0
value = 1706
ctrl = 0

[StateDef 1706]
type = S
movetype = A
physics = S
anim = 1706
velset = 0,0
ctrl = 0

[State -3, Width 1]
type = Width
trigger1 = 1
player = 15,0

[State 1706]
type = posset
trigger1 = Time = 0
y = 0

[state 1706]
type = velset
trigger1 = animelem = 1
x = 5

[State 1706, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


[StateDef 1707]
type = S
movetype = A
physics = S
anim = 1707
velset = 6,0
ctrl = 0

[State 1706]
type = posset
trigger1 = Time = 0
y = 0

[state 1706]
type = ctrlset
triggerall = fvar(14) = 0
trigger1 = animelem = 3
value = 1

[state 1706]
type = varset
triggerall = fvar(14) = 1
trigger1 = animelem = 3
fvar(1) = 1

[State 1706, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;**********************************************
;天魔连环破第一式(轻)
;**********************************************
[StateDef 1710]
type = A
movetype = A
physics = N
anim = 1710
poweradd = ifelse(fvar(10)!=1,100,50)
facep2 = 1
velset = 3,-3
sprpriority = 3
juggle = 9+var(7)
ctrl = 0

[state statetypeset]
type = veladd
trigger1 = animelemtime(1)>=0
trigger1 = animelemtime(5)<0
y = .4

[state statetypeset]
type = statetypeset
trigger1 = animelemtime(5)=0
statetype = S
physics = S

[state statetypeset]
type = velset
trigger1 = animelemtime(5)=0
y = 0

[state statetypeset]
type = posset
trigger1 = animelemtime(5)=0
y = 0

[state statetypeset]
type = posadd
trigger1 = animelem=8
trigger2 = animelem=9
trigger3 = animelem=10
x = 10

[state 1650]
type = playsnd
trigger1 = animelem = 4
value = 2995,151

[state 1650]
type = playsnd
trigger1 = animelem = 5
value = 47,0

[state 1650]
type = playsnd
trigger1 = animelem = 10
value = 2995,152

[State 1800, Explod]
type = Explod
trigger1 = AnimElemtime(4) = 3
anim = 706
pos = 5,5
postype = p1
facing = -1
sprpriority = 5
bindtime = 1
ownpal = 1

[State HitDef]
type = HitDef
trigger1 = AnimElem = 5
attr = S,NA
animtype = Heavy
damage = 30,5
priority = 7, Hit
guardflag = MA
pausetime = 11,11
guard.pausetime = 11,11
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-90
hitsound = S210,3
guardsound = S150,0
ground.type = high
ground.slidetime = 27
ground.hittime = 27
guard.velocity = ifelse(p2bodydist x <= 10 ,-13 ,-3)
guard.cornerpush.veloff = -17
ground.cornerpush.veloff = -15
air.cornerpush.veloff = -10
ground.velocity = -7.5
air.velocity = -6,-6
getpower = 30,15
givepower = 5
air.fall = 1
yaccel = .5
fall.recover = 0

[State HitDef]
type = HitDef
trigger1 = AnimElem = 11
attr = S,NA
animtype = Heavy
damage = 80,5
priority = 7, Hit
guardflag = MA
pausetime = 13,13
guard.pausetime = 13,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-70
hitsound = S210,3
guardsound = S150,0
ground.type = low
ground.slidetime = 25
ground.hittime = 25
guard.velocity = ifelse(p2bodydist x <= 10 ,-13 ,-3)
guard.cornerpush.veloff = -17
ground.cornerpush.veloff = -15
air.cornerpush.veloff = -10
ground.velocity = -12.5
air.velocity = -6,-6
getpower = 30,15
givepower = 5
air.fall = 1
yaccel = .5
fall.recover = 0

[state 3200,varset]
type = varset
trigger1 = time=0
var(23) = 0

[state 3200,varset]
type = varset
triggerall = time=[27,40]
trigger1 = (command = "B")||(var(13) = [82,85])
trigger2 = (var(13) = [42,47])||(command = "D")
var(23) = 1
ignorehitpause=1

[State 1706, 4]
type = ChangeState
triggerall = AnimelemTime(13) = 3
trigger1 = var(23) = 1
trigger2 = var(59) = 1
value = 1715
ctrl = 0

[State 1706, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1
;**********************************************
;天魔连环破第二式(轻)
;**********************************************
[StateDef 1715]
type = S
movetype = A
physics = S
anim = 1715
poweradd = ifelse(fvar(10)!=1,100,50)
facep2 = 1
velset = 0,0
sprpriority = -3
juggle = 9+var(7)
ctrl = 0

[state statetypeset]
type = posadd
trigger1 = animelem=1
x = 10

[state statetypeset]
type = velset
trigger1 = AnimElem = 3
x = 13

[state 1650]
type = playsnd
trigger1 = animelem = 2
value = 2995,150

[State HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S,NA
animtype = Heavy
damage = 100,5
priority = 7, Hit
guardflag = MA
pausetime = 16,16
guard.pausetime = 16,16
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-70
hitsound = S210,3
guardsound = S150,0
ground.type = low
ground.slidetime = 30
ground.hittime = 30
guard.velocity = ifelse(p2bodydist x <= 10 ,-13 ,-3)
guard.cornerpush.veloff = -17
ground.cornerpush.veloff = -15
air.cornerpush.veloff = -10
ground.velocity = -2.5,-6
air.velocity = -6,-6
getpower = 30,15
givepower = 5
fall = 1
yaccel = .5
fall.recover = 0

[State 1706, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;**********************************************
;天魔连环破第一式(重)
;**********************************************
[StateDef 1720]
type = A
movetype = A
physics = N
anim = 1720
poweradd = ifelse(fvar(10)!=1,100,50)
facep2 = 1
velset = 4,-3
sprpriority = 3
juggle = 0
ctrl = 0

[state statetypeset]
type = veladd
trigger1 = animelemtime(1)>=0
trigger1 = animelemtime(5)<0
y = .4

[state statetypeset]
type = statetypeset
trigger1 = animelemtime(5)=0
statetype = S
physics = S

[state statetypeset]
type = velset
trigger1 = animelemtime(5)=0
y = 0

[state statetypeset]
type = posset
trigger1 = animelemtime(5)=0
y = 0

[state statetypeset]
type = posadd
trigger1 = animelem=8
trigger2 = animelem=9
trigger3 = animelem=10
x = 10

[state 1650]
type = playsnd
trigger1 = animelem = 4
value = 2995,151

[state 1650]
type = playsnd
trigger1 = animelem = 5
value = 47,0

[state 1650]
type = playsnd
trigger1 = animelem = 10
value = 2995,152

[State 1800, Explod]
type = Explod
trigger1 = AnimElemtime(4) = 3
anim = 706
pos = 5,5
postype = p1
facing = -1
sprpriority = 5
bindtime = 1
ownpal = 1

[State HitDef]
type = HitDef
trigger1 = AnimElem = 5
attr = S,NA
animtype = Heavy
damage = 30,5
priority = 7, Hit
guardflag = MA
pausetime = 11,11
guard.pausetime = 11,11
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-90
hitsound = S210,3
guardsound = S150,0
ground.type = high
ground.slidetime = 27
ground.hittime = 27
guard.velocity = ifelse(p2bodydist x <= 10 ,-13 ,-3)
guard.cornerpush.veloff = -17
ground.cornerpush.veloff = -15
air.cornerpush.veloff = -10
ground.velocity = -7.5
air.velocity = -6,-6
getpower = 30,15
givepower = 5
air.fall = 1
yaccel = .5
fall.recover = 0

[State HitDef]
type = HitDef
trigger1 = AnimElem = 11
attr = S,NA
animtype = Heavy
damage = 80,5
priority = 7, Hit
guardflag = MA
pausetime = 13,13
guard.pausetime = 13,13
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-70
hitsound = S210,3
guardsound = S150,0
ground.type = low
ground.slidetime = 25
ground.hittime = 25
guard.velocity = ifelse(p2bodydist x <= 10 ,-13 ,-3)
guard.cornerpush.veloff = -17
ground.cornerpush.veloff = -15
air.cornerpush.veloff = -10
ground.velocity = -12.5
air.velocity = -6,-6
getpower = 30,15
givepower = 5
air.fall = 1
yaccel = .5
fall.recover = 0

[state 3200,varset]
type = varset
trigger1 = time=0
var(23) = 0

[state 3200,varset]
type = varset
triggerall = time=[37,48]
trigger1 = (command = "B")||(var(13) = [82,85])
trigger2 = (var(13) = [42,47])||(command = "D")
var(23) = 1
ignorehitpause=1

[State 1706, 4]
type = ChangeState
triggerall = AnimelemTime(13) = 3
trigger1 = var(23) = 1
trigger2 = var(59) = 1
value = 1725
ctrl = 0

[State 1706, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1
;**********************************************
;天魔连环破第二式(重)
;**********************************************
[StateDef 1725]
type = S
movetype = A
physics = S
anim = 1725
poweradd = ifelse(fvar(10)!=1,100,50)
facep2 = 1
velset = 0,0
sprpriority = -3
juggle = 2+var(7)
ctrl = 0

[state statetypeset]
type = posadd
trigger1 = animelem=1
x = 10

[state statetypeset]
type = velset
trigger1 = AnimElem = 3
x = 13

[state 1650]
type = playsnd
trigger1 = animelem = 2
value = 2995,150

[State HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S,NA
animtype = Heavy
damage = 100,5
priority = 7, Hit
guardflag = MA
pausetime = 16,16
guard.pausetime = 16,16
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-70
hitsound = S210,3
guardsound = S150,0
ground.type = low
ground.slidetime = 30
ground.hittime = 30
p2stateno = 4990
guard.velocity = ifelse(p2bodydist x <= 10 ,-13 ,-3)
guard.cornerpush.veloff = -17
ground.cornerpush.veloff = -15
air.cornerpush.veloff = -10
ground.velocity = -2.5,-8
air.velocity = -3,-8
getpower = 30,15
givepower = 5
fall = 1
yaccel = .4
fall.recover = 0

[State 1706, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1
;**********************************************
;魔炎烈脚(轻)第一式
;**********************************************
[StateDef 1900]
type = S
movetype = A
physics = S
anim = 1900
poweradd = ifelse(fvar(10)!=1,100,50)
facep2 = 1
velset = 0,0
sprpriority = -3
juggle = 9+var(7)
ctrl = 0

[state 1900]
type = statetypeset
trigger1 = animelem = 3
physics = S
statetype = s

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 4
trigger2 = Animelem = 7
value = 2995,ifelse(fvar(10)!=1,50,150)
channel = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 3
value = 47,0
volume = 100

[state 1650]
type = velset
trigger1 = animelem = 1
x=7.6

[state 1650]
type = posadd
trigger1 = animelem = 5
trigger2 = animelem = 6
x=7

[state 1650]
type = posadd
trigger1 = animelem = 7
x=15

[state 1650]
type = velset
trigger1 = animelem = 3
x=0
y = 0

[State 3200]
type = HitDef
trigger1 = animelem = 6 
attr = S, SA
air.animtype  = back
animtype = hard
damage = 20,10
priority = 7, Hit
guardflag = MA
pausetime =  9,9
guard.pausetime = 9,9
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-60)/2,-35
hitsound = S210,3
guardsound = S150,0
ground.type = low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -3,0
guard.velocity = -3
air.velocity = -2.5,-4
guard.cornerpush.veloff = -5
air.juggle = 2
getpower = 0,0
forcestand = 1
givepower = 0
yaccel = .45
air.fall = 1
fall.recover = 0

[State 3200]
type = HitDef
trigger1 = animelem = 9 
attr = S, SA
air.animtype  = back
animtype = hard
damage = 40,10
priority = 7, Hit
guardflag = MA
pausetime =  9,9
guard.pausetime = 9,9
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-40)/2,-85
hitsound = S210,3
guardsound = S150,0
ground.type = high
ground.slidetime = 23
ground.hittime = 23
ground.velocity = -7,0
guard.velocity = -9
guard.cornerpush.veloff = -9
air.velocity = -2.5,-7
air.juggle = 2
getpower = 0,0
givepower = 0
air.fall = 1
yaccel = .45
fall.recover = 0

[state 1900]
type = varset
trigger1 = time = 0
var(13) = 0

[state 1900]
type = varset
trigger1 = time = 0
var(23) = 0



[state 1900]
type = varset
triggerall = time = [7,37]
trigger1 = command = "B"
trigger2 = command = "D"
var(23) = 1

[state 1900]
type = varset
triggerall = time = [7,37]
trigger1 = var(13) = [641,647]
var(23) = 2

[State 3200, 4]
type = ChangeState
triggerall = var(23) = 1
trigger1 = animelemtime(10) >= 3
trigger2 = animelem = 11
trigger3 = animelem = 12
value = 1905

[State 3200, 4]
type = ChangeState
triggerall = var(23) = 2
trigger1 = animelemtime(10) >= 3
trigger2 = animelem = 11
trigger3 = animelem = 12
value = 1970

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1



;**********************************************************************
;龙裂踢(近)
[StateDef 1905]
type = A
movetype = A
physics = S
anim = 1905
velset = 0,0
ctrl = 0

[state 1650]
type = posadd
trigger1 = time = 0
x=0

[state 1650]
type = velset
trigger1 = animelem = 2
x=7

[state 1650]
type = velset
trigger1 = animelem = 5
x=0

[state 1900]
type = statetypeset
trigger1 = animelem = 3
physics = S
statetype = s

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 3
value = 2995,ifelse(fvar(10)!=1,54,152)
channel = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 3
value = 600,1
channel = 1
volume = 160

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 3
value = 47,0
volume = 160

[State 3200]
type = HitDef
trigger1 = time = 0 
attr = S, SA
animtype = hard
damage = ifelse((p2stateno = [5000,5010]),40,70),10
priority = 7, Hit
guardflag = MA
pausetime =  19,19
guard.pausetime = 21,21
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-60)/2,-85
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -1.5,-8
guard.velocity = -8
guard.cornerpush.veloff = -15
air.velocity = -1.5,-7.5
air.juggle = 2
p2stateno = 4990
getpower = 0,0
givepower = 5
yaccel = .4
fall = 1
fall.recover = 0

[state 1900]
type = varset
trigger1 = time = 0
var(13) = 0

[state 1900]
type = varset
trigger1 = time = 0
var(23) = 0

[state 1900]
type = varset
triggerall = time = [20,37]
trigger1 = command = "B"
trigger2 = command = "D"
var(23) = 1

[State Land]
type = ChangeState
triggerall = var(23) = 1
trigger1 = animelemtime(9) >= 3
trigger1 = animelemtime(10) < 3
value = 1910

[State Land]
type = ChangeState
trigger1 = animtime = 0
value = 0;站立
ctrl = 1
;**********************************************************************
;倒勾脚(近)
[StateDef 1910]
type = S
movetype = A
physics = S
anim = 1910
velset = 0,0
ctrl = 0

[state 1650]
type = nothitby
trigger1 = animelemtime(1) >= 0
trigger1 = animelemtime(6) < 0
value = SAC

[state 1650]
type = statetypeset
trigger1 = animelem = 4
physics = N
statetype = A

[state 1650]
type = velset
trigger1 = animelem = 4
x = 3
y = -5.7

[state 1650]
type = velset
trigger1 = animelem = 6
x = 1

[state 1650]
type = veladd
trigger1 = statetype = A
y = .3

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 4
value = 2995,ifelse(fvar(10)!=1,60,153)
channel = 0

[state 2200]
type = hitdef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = S,SA
animtype = Heavy
damage = 140,55
priority = 7, Hit
guardflag = MA
pausetime = 19,19
guard.pausetime = 19,19
guard.sparkno = S733
sparkno = S736
sparkxy = 10,-95
hitsound = S240,0
guardsound = S150,1
ground.type = high
ground.slidetime = 39
ground.hittime = 39
ground.velocity = -5,-7
guard.velocity = -19
air.velocity = -3.5,-6
getpower = 30,10
givepower = 10,5
p2stateno = 4990
fall = 1
yaccel = .5
fall.recover = 0

[State Land]
type = ChangeState
trigger1 = pos y >= -10
trigger1 = vel y > 0
value = 1911
ctrl = 0

;落地(近)
[StateDef 1911]
type = A
movetype = A
physics = S
anim = 2957
velset = 0,0
ctrl = 0

[state posset]
type = posset
trigger1 = time = 0
y = 0

[State Land]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1
;**********************************************
;魔炎烈脚(重)第一式
;**********************************************
[StateDef 1950]
type = S
movetype = A
physics = S
anim = 1950
poweradd = ifelse(fvar(10)!=1,100,50)
facep2 = 1
velset = 0,0
sprpriority = -3
juggle = var(7)
ctrl = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 4
trigger2 = Animelem = 7
value = 2995,ifelse(fvar(10)!=1,50,150)
channel = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 3
value = 47,0
volume = 100

[state 1650]
type = velset
trigger1 = animelem = 2
trigger2 = animelem = 7
x=ifelse((animelem = 7),6,10)

[state 1650]
type = posadd
trigger1 = animelem = 5
trigger2 = animelem = 6
x=10

[state 1650]
type = posadd
trigger1 = animelem = 10
x=10

[state 1650]
type = velset
trigger1 = animelem = 3
trigger2 = animelem = 9
x=0
y = 0

[State 3200]
type = HitDef
trigger1 = animelem = 6 
attr = S, SA
air.animtype  = back
animtype = hard
damage = 50,20
priority = 7, Hit
guardflag = MA
pausetime =  11,11
guard.pausetime = 11,11
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-35
hitsound = S210,3
sparkno = S736
guardsound = S150,0
ground.type = low
ground.slidetime = 27
ground.hittime = 27
ground.velocity = -8
air.velocity = -2.5,-4
guard.velocity = -9
guard.cornerpush.veloff = -9
air.juggle = 2
getpower = 0,0
forcestand = 1
givepower = 0
air.fall = 1
yaccel = .5
fall.recover = 0

[State 3200]
type = HitDef
trigger1 = animelem = 11 
attr = S, SA
animtype = hard
damage = 60,20
priority = 7, Hit
guardflag = MA
pausetime =  11,11
guard.pausetime = 11,11
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-40)/2,-85
hitsound = S210,3
guardsound = S150,0
ground.type = high
ground.slidetime = 27
ground.hittime = 27
ground.velocity = -9
air.velocity = -3.5,-6
guard.velocity = -13
guard.cornerpush.veloff = -11
air.juggle = 2
air.fall = 1
getpower = 0,0
givepower = 0
yaccel = .3
fall.recover = 0

[state 1900]
type = varset
trigger1 = time = 0
var(13) = 0

[state 1900]
type = varset
trigger1 = time = 0
var(23) = 0

[state 1900]
type = varset
triggerall = time = [7,37]
trigger1 = command = "B"
trigger2 = command = "D"
var(23) = 1

[state 1900]
type = varset
triggerall = time = [7,37]
trigger1 = var(13) = [641,647]
var(23) = 2

[State 3200, 4]
type = ChangeState
triggerall = animelemtime(13) >= 3
trigger1 = var(59) = 0
trigger1 = var(23) = 1
trigger2 = var(59) != 0
value = 1955

[State 3200, 4]
type = ChangeState
triggerall = var(23) = 2
trigger1 = animelemtime(12) >= 3
trigger2 = animelem = 13
trigger3 = animelem = 14
value = 1970

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1



;**********************************************
;魔炎烈脚(近)第二式
;**********************************************
[StateDef 1955]
type = A
movetype = A
physics = N
anim = 1955
poweradd = ifelse(fvar(10)!=1,50,35)
facep2 = 1
velset = 3,0
juggle = 2+var(7)
ctrl = 0

[state 1436]
type = posadd
trigger1 = animelem = 3
x = 16
y = -16

[state 1436]
type = statetypeset
trigger1 = animelem = 4
physics = S
statetype = S

[state 1436]
type = velset
trigger1 = animelem = 4
y = 0

[state 1436]
type = posset
trigger1 = animelem = 4
trigger1 = pos y != 0
y = 0

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 4
value = 2995,ifelse(fvar(10)!=1,(ifelse(random<500,60,61)),ifelse(random<500,151,152))
channel = 0

[state 1436]
type = posadd
trigger1 = animelem = 2
x = 11

[state 1436]
type = posadd
trigger1 = animelem = 9
x = 10

[state hitdef]
type = hitdef
triggerall = !MoveContact||SysVar(0)
trigger1 = time = 0
attr = S,NA
damage = 60,25
getpower = ifelse(fvar(10)!=1,60,36),ifelse(fvar(10)!=1,30,15)
animtype = high
guardflag = MA
hitflag = MAF
priority = 7,Hit
pausetime = 17,17
guard.pausetime = 18,18
guard.sparkno = S733
sparkno = S736
sparkxy = (p2bodydist x)/6-20,-78
hitsound = S210,3
guardsound = S150,1
ground.type = low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -2,-7
guard.velocity = -12
guard.cornerpush.veloff = -21
airguard.velocity = -6,-3
p2stateno = 4990
air.type = low
air.velocity = -2,-7
air.hittime = 15
air.juggle = 8
fall.recover = 0
fall = 1
yaccel = .35

[STate 3500]
type = Width
trigger1 = Animelem = 5
trigger2 = Animelem = 8
edge = 10,0
player = 10,0

[STate 3500]
type = Width
trigger1 = Animelem = 6
trigger2 = Animelem = 7
edge = 20,0
player = 20,0

[state 1900]
type = varset
trigger1 = time = 0
var(13) = 0

[state 1900]
type = varset
trigger1 = time = 0
var(23) = 0

[state 1900]
type = varset
triggerall = time = [17,34]
trigger1 = command = "B"
trigger2 = command = "D"
var(23) = 1

[State 3200, 4]
type = ChangeState
triggerall = Animelemtime(9) >= 3
trigger1 = var(59) = 0
trigger1 = var(23) = 1
trigger2 = var(59) != 0
value = 1960

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1
;**********************************************
;魔炎烈脚(近)第三式
;**********************************************
[StateDef 1960]
type = s
movetype = A
physics = S
anim = 1960
poweradd = ifelse(fvar(10)!=1,30,15)
facep2 = 1
velset = 0,0
juggle = 6+var(7)
ctrl = 0

[state 1650]
type = statetypeset
trigger1 = animelem = 5
physics = N
statetype = A

[state 1650]
type = velset
trigger1 = animelem = 5
x=4
y=-5

[state 1910]
type = veladd
trigger1 = statetype = A
Y = .3

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 3
value = 2405,0
channel = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 3
value = 600,1
channel = 1
volume = 160

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 3
value = 47,0
volume = 160

[state 2200]
type = hitdef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = S,SA
animtype = Heavy
damage = 120,55
priority = 7, Hit
guardflag = MA
pausetime = 14,14
guard.pausetime = 14,15
guard.sparkno = S733
sparkno = S736
sparkxy = (p2bodydist x)/6-30,-65
hitsound = S240,0
guardsound = S150,1
ground.type = high
ground.slidetime = 39
ground.hittime = 39
ground.velocity = -5,-7
guard.velocity = -29
air.velocity = -3.5,-6
p2stateno = 4990
getpower = 30,10
givepower = 10,5
fall = 1
yaccel = .5
fall.recover = 0

[State 399, EnvShake]
type = EnvShake
trigger1 = movecontact= 1
ignorehitpause = 1
persistent = 0
time = 20
freq = 100
ampl = -3
phase = 1

[State 3200, 4]
type = ChangeState
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 2401;


;**********************************************
;魔炎烈脚---逆袭（蹲防不可）
;**********************************************
[StateDef 1970]
type = S
movetype = A
physics = N
anim = 1970
poweradd = ifelse(fvar(10)!=1,100,50)
facep2 = 1
velset = 0,0
sprpriority = -3
juggle = 0+var(7)
ctrl = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 5
value = 2995,ifelse(fvar(10)!=1,54,153)
channel = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 6
value = 40,0
volume = 100

[State 3200]
type = HitDef
trigger1 = animelem = 5 
attr = S, SA
animtype = hard
damage = 90,30
priority = 7, Hit
guardflag = MA
pausetime =  9,9
guard.pausetime = 12,21
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-60)/2,-75
hitsound = S220,0
guardsound = S150,0
ground.type = low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -3,-8
air.velocity = -2,-8
air.juggle = 2
getpower = 0,0
forcestand = 1
fall = 1
givepower = 5
yaccel = .5
fall.recover = 0

[state 1900]
type = varset
trigger1 = time = 0
var(13) = 0

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1


;**********************************************
;八极里门肘打
;**********************************************
[StateDef 1775]
type = s
movetype = A
physics = s
anim = 1775
poweradd = ifelse(fvar(10)!=1,100,50)
juggle = 9
velset = 0,0
ctrl = 0

[state 1800]
type = hitby
trigger1 = time = [7,15]
value = SAC,SP,HP,SA,HA
time = 1

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 4
value = 2995,ifelse(random<500,154,153)
channel = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 4
value = 40,0
volume = 100

[state 1650]
type = velset
trigger1 = animelem = 3
x=15

[state 1650]
type = posadd
trigger1 = animelem = 1
x=2

[State 1800, Explod]
type = Explod
trigger1 = AnimElemtime(6) = 1
anim = 706
pos = 0,0
postype = p1
sprpriority = 5
bindtime = 1
ownpal = 1

[State 3200]
type = HitDef  
trigger1 = time = 0
attr = S, SA
animtype = hard
damage = 90,15
priority = 7, Hit
guardflag = MA
pausetime =  12,12
guard.pausetime = 11,11
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-60)/2,-75
hitsound = S210,3
guardsound = S150,0
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -2.5,-8.5
air.velocity = -2.5,-8
getpower = ifelse(fvar(10)!=1,60,50),ifelse(fvar(10)!=1,30,15)
guard.velocity = -9
givepower = 5
fall=1
yaccel = .5
fall.recover = 0

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = power >= 2000
triggerall = movehit
triggerall = p2bodydist x = [0,70]
triggerall = p2bodydist y < -50
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 850

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = power >= 2000
triggerall = movehit
triggerall = p2bodydist x = [0,70]
triggerall = p2bodydist y = [-50,-10]
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 4410

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = power >= 1000
triggerall = random<400
triggerall = movehit
triggerall = p2bodydist x = [0,70]
triggerall = p2bodydist y < -50
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 850

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = power >= 1000
triggerall = movehit
triggerall = p2bodydist x = [0,90]
triggerall = p2stateno = [5030,5072]
trigger1 = p2life > 250
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = ifelse(random<100,40,ifelse(frontedgedist<120,4400,4200))

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = movehit
triggerall = p2bodydist x = [0,70]
triggerall = random>700
trigger1 = AnimTime = 0
value = ifelse(random>700,1150,ifelse(random>500,1200,1600))

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = movehit
triggerall = p2bodydist x = [0,70]
trigger1 = AnimTime = 0
value = ifelse(random>700,1080,ifelse(random>500,1100,280))

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;**********************************************
;八极里门肘打
;**********************************************
[StateDef 1785]
type = s
movetype = A
physics = s
anim = 1785
poweradd = ifelse(fvar(10)!=1,100,50)
juggle = 7
velset = 0,0
ctrl = 0

[state 1800]
type = hitby
trigger1 = time = [7,20]
value = SAC,SP,HP,SA,HA
time = 1

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 4
value = 2995,ifelse(random<500,154,153)
channel = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 4
value = 40,0
volume = 100

[state 1650]
type = velset
trigger1 = animelem = 3
x=25

[state 1650]
type = posadd
trigger1 = animelem = 1
x=2

[State 1800, Explod]
type = Explod
trigger1 = AnimElemtime(6) = 1
anim = 706
pos = 0,0
postype = p1
sprpriority = 5
bindtime = 1
ownpal = 1

[State 3200]
type = HitDef  
trigger1 = time = 0
attr = S, SA
animtype = hard
damage = 110,15
priority = 7, Hit
guardflag = MA
pausetime =  12,12
guard.pausetime = 11,11
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-60)/2,-75
hitsound = S210,3
guardsound = S150,0
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -2.5,-8.5
air.velocity = -2.5,-8
getpower = ifelse(fvar(10)!=1,60,50),ifelse(fvar(10)!=1,30,15)
guard.velocity = -9
givepower = 5
fall=1
yaccel = .5
fall.recover = 0

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1
;**********************************************
;八极铁山靠
;**********************************************
[StateDef 1800]
type = s
movetype = A
physics = s
anim = 1800
poweradd = ifelse(fvar(10)!=1,100,50)
juggle = ifelse((p2stateno = [5050,5080]),10,7)
velset = 0,0
ctrl = 0

[State 1805, Width 1]
type = Width
trigger1 = animelemtime(1) >= 0 && animelemtime(8) < 0
player = 15,0

[state 1800]
type = hitby
trigger1 = var(24) = 0
trigger1 = animelemtime(1) >= 0 && animelemtime(4) < 3
value = SAC,NT,ST,HT,NP,SP,HP
time = 1

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 4
value = 2995,ifelse(random<500,91,92)
channel = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 4
value = 40,0
volume = 100

[state 1650]
type = velset
trigger1 = animelem = 5
x=4

[state 1650]
type = posadd
trigger1 = animelem = 2
x=5

[state 1650]
type = posadd
trigger1 = animelem = 5
x=15

[state 1650]
type = posadd
trigger1 = animelem = 1
trigger2 = animelem = 8
x=8

[State 1800, Explod]
type = Explod
trigger1 = AnimElemtime(1) = 3
trigger2 = AnimElemtime(5) = 1
anim = 706
pos = 0,0
postype = p1
sprpriority = 5
bindtime = 1
ownpal = 1

[State 3200]
type = HitDef  
trigger1 = time = 0
attr = S, SA
animtype = hard
damage = ifelse((p2stateno = [5050,5080]),50,90),15
priority = 7, Hit
guardflag = MA
pausetime =  12,12
guard.pausetime = 11,15
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-40)/2,-75
hitsound = S210,3
guardsound = S150,0
ground.type = high
ground.slidetime = 12
ground.hittime = 13
ground.velocity = -2.5,-9
p2stateno = 4990
air.velocity = -2.5,-9
getpower = ifelse(fvar(10)!=1,60,50),ifelse(fvar(10)!=1,30,15)
guard.velocity = -9
givepower = 5
fall=1
yaccel = .45
fall.recover = 0

[state 3200,var]
type = varset
trigger1 = animtime = 0
var(24) = 60

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = power >= 2000
triggerall = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])
triggerall = movehit
triggerall = p2bodydist x = [0,70]
triggerall = p2bodydist y < -50
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 850

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = power >= 2000
triggerall = (var(55) = [80,86])||(var(55) = [104,109])||(var(55) = [114,119])
triggerall = movehit
triggerall = p2bodydist x = [-50,50]
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 3650

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])
triggerall = animtime = 0
triggerall = movehit
trigger1 = random<400
value = ifelse(random>=500,1700,2600)

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = power >= 2000
triggerall = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [104,109])||(var(55) = [114,119])
triggerall = movehit
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 3410

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = power >= 1000
triggerall = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [104,109])||(var(55) = [114,119])
triggerall = random<400
triggerall = movehit
triggerall = p2bodydist y < -50
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 850

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = power >= 1000
triggerall = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [103,109])||(var(55) = [112,119])
triggerall = movehit
triggerall = p2stateno = [5030,5072]
trigger1 = p2life > 250
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = ifelse(random<100,40,ifelse(frontedgedist<120,3400,3000))

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [100,105])||(var(55) = [110,115])
triggerall = movehit
triggerall = random>700
trigger1 = AnimTime = 0
value = ifelse(random>700,1510,ifelse(random>500,1702,1600))

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = movehit
trigger1 = AnimTime = 0
value = ifelse(random>700,1510,ifelse(random>500,1150,2600))

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1
;**********************************************
;八极铁山靠(慢)
;**********************************************
[StateDef 1805]
type = s
movetype = A
physics = s
anim = 1805
poweradd = ifelse(fvar(10)!=1,100,50)
juggle = ifelse((p2stateno = [5050,5080]),10,0)
velset = 0,0
ctrl = 0

[State 1805, Width 1]
type = Width
trigger1 = animelemtime(1) >= 0 && animelemtime(8) < 0
player = 15,0

[state 1805]
type = hitby
trigger1 = var(24) = 0
trigger1 = animelemtime(1) >= 0 && animelemtime(5) < 0
value = SAC,NT,ST,HT,NP,SP,HP
time = 1

[STate 1805]
type = PlaySNd
trigger1 = Animelem = 4
value = 2995,ifelse(random<500,91,92)
channel = 0

[STate 1805]
type = PlaySNd
trigger1 = Animelem = 4
value = 40,0
volume = 100

[state 1805]
type = velset
trigger1 = animelem = 5
x=7

[state 1805]
type = posadd
trigger1 = animelem = 2
x=5

[state 1805]
type = posadd
trigger1 = animelem = 5
x=15

[state 1805]
type = posadd
trigger1 = animelem = 1
trigger2 = animelem = 8
x=8

[State 1805, Explod]
type = Explod
trigger1 = AnimElemtime(1) = 3
trigger2 = AnimElemtime(5) = 1
anim = 706
pos = 0,0
postype = p1
sprpriority = 5
bindtime = 1
ownpal = 1

[State 1805]
type = HitDef  
trigger1 = time = 0
attr = S, SA
animtype = hard
damage = ifelse((p2stateno = [5050,5080]),55,110),25
priority = 7, Hit
guardflag = MA
pausetime =  13,13
guard.pausetime = 12,18
guard.sparkno = S733
sparkno = S736
sparkxy = ((p2bodydist x)-40)/2,-75
hitsound = S210,3
guardsound = S150,0
ground.type = high
ground.slidetime = 13
ground.hittime = 14
ground.velocity = -2.6,-9.5
air.velocity = -2.6,-9.5
p2stateno = 4990
getpower = ifelse(fvar(10)!=1,60,50),ifelse(fvar(10)!=1,30,15)
guard.velocity = -11
givepower = 5
fall=1
yaccel = .45
fall.recover = 0

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = (var(55) = [80,86])||(var(55) = [104,109])||(var(55) = [114,119])
triggerall = movehit
triggerall = p2bodydist x < 52
trigger1 = p2life > 300
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 1800

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = power >= 1000
triggerall = (var(55) = [80,86])||(var(55) = [102,109])||(var(55) = [110,119])
triggerall = movehit
triggerall = p2bodydist x >= 52
trigger1 = p2life > 250
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = ifelse(random<500,3400,3200)

[State 225, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,89])||(var(55)=[100,109])||(var(55)=[110,119])
triggerall = animtime = 0
trigger1 = movehit
value = ifelse(random>=400,1510,ifelse(random<500,420,1150))

[State 1805, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1
;**********************************************
;魔幻之拳(近)第一式
;**********************************************
[StateDef 2150]
type = s
movetype = A
physics = s
anim = 2150
poweradd = ifelse(fvar(10)!=1,60,30)
facep2 = 1
velset = 0,0
juggle = 0+var(7)
ctrl = 0

[state 3200,varset]
type = varset
trigger1 = var(13) != 0
trigger1 = time = 0
var(13) = 0

[state 3200,varset]
type = varset
trigger1 = var(15) != 0
trigger1 = time = 0
var(15) = 0

[STate 3500]
type = varset
trigger1 = time = 0
trigger1 = var(42) != 0
var(42) = 0

[STate 3500]
type = varset
trigger1 = time = 0
trigger1 = random < 500
var(42) = 1

[State 1220, Width 1]
type = Width
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(6) < 0
value = 15,0

[STate 3500]
type = hitby
trigger1 = !movehit
trigger1 = prevstateno = [0,20]
trigger1 = p2stateno >= 1000
time = 1
value = SAC,AA,SA,HA,AP,SP,HP

[STate 3500]
type = hitby
trigger1 = !movehit
trigger1 = prevstateno = [112,117]
time = 1
value = SAC,AA,SA,HA,AP,SP,HP

[STate 3500]
type = hitby
trigger1 = movehit
trigger1 = animelemtime(4)>0 && animelemtime(8)<0
time = 10
value = SAC,AA,SA,HA,AP,SP,HP

[State 370, 2]
type = nothitby
trigger1 = enemy,numhelper > 0
trigger1 = movehit
value = SAC
time = 1

[STate 3500]
type = PlaySNd
triggerall = fvar(10) = 0
trigger1 = Animelem = 2
value = 2995,ifelse(var(42)=0,10,54)
channel = 0

[STate 3500]
type = PlaySNd
triggerall = fvar(10) = 1
trigger1 = Animelem = 2
value = 2995,150
channel = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 1
value = 40,0
volume = 100

[state 1650]
type = velset
trigger1 = animelem = 2
x=5

[state 1650]
type = velset
trigger1 = animelem = 3
x=11

[state 1650]
type = velset
trigger1 = animelem = 4
x=6

[state 1650]
type = veladd
trigger1 = animelem = 5 ,>=5 
x=.10

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = const(movement.yaccel)

[state varset 1650]
type = varset
trigger1 = movecontact
trigger1 = animelem = 6
var(9) = 13

[State 1650, 1]
type = ReversalDef
triggerall = var(9)<=0
triggerall = prevstateno = [111,119]
trigger1 = animelem = 1, <= 4
reversal.attr = SCA,NA,SA, AP,NP,SP,AA,HP,HA
numhits = 0
pausetime = 10,20
sparkno = S733
hitsound = 6,0
p2stateno = 831

[State 1650, 1]
type = ReversalDef
triggerall = var(9)<=0
triggerall = prevstateno != [111,119]
trigger1 = animelem = 1, <= 4
reversal.attr = SCA,NA,SA,HP,HA; SCA,NA,SA
numhits = 0
pausetime = 10,20
sparkno = S733
hitsound = 6,0
p2stateno = 831

[State 3200]
type = HitDef
triggerall = var(50) = 0
triggerall = p2stateno != [4990,4998]
trigger1 = animelem = 4 
attr = S, SA
air.animtype = back
animtype = hard
damage = 30,10
priority = 7, Hit
guardflag = MA
pausetime =  12,12
guard.pausetime = 12,21
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-75
hitsound = S230,0
guardsound = S150,1
ground.type = high
ground.slidetime = 19
ground.hittime = 20
ground.velocity = -7,0
ground.cornerpush.veloff = -12
guard.velocity = -12
guard.cornerpush.veloff = -15
air.velocity = -3.5,-5
air.juggle = 2
getpower = 0,0
givepower = 5
yaccel = .5
air.fall=1
fall.recover = 0

[State 3200]
type = HitDef
triggerall = var(50) = 0
triggerall = p2stateno != [4990,4998]
triggerall = !MoveContact
trigger1 = animelem = 5
trigger2 = animelem = 6
attr = S, SA
air.animtype = back
animtype = hard
damage = 35,8
priority = 7, Hit
guardflag = MA
pausetime =  12,12
guard.pausetime = 12,21
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-75
hitsound = S230,0
guardsound = S150,1
ground.type = high
ground.slidetime = 19
ground.hittime = 19
guard.velocity = -8
ground.velocity = -3.5,-4
air.velocity = -3.5,-6
getpower = 60,30
givepower = 5
fall=1
yaccel = .5
fall.recover = 0

[State 3200]
type = HitDef
triggerall = var(50) = 1
triggerall = p2stateno != [4990,4998]
trigger1 = animelem = 4 
attr = S, SA
air.animtype = back
animtype = hard
damage = 30,10
priority = 7, Hit
guardflag = MA
pausetime =  12,12
guard.pausetime = 12,21
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-75
hitsound = S230,0
guardsound = S150,1
ground.type = high
ground.slidetime = 19
ground.hittime = 20
ground.velocity = -7,0
ground.cornerpush.veloff = -12
guard.velocity = -12
guard.cornerpush.veloff = -15
air.velocity = -3.5,-5
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
air.juggle = 2
getpower = 0,0
givepower = 5
yaccel = .5
air.fall=1
fall.recover = 0

[State 3200]
type = HitDef
triggerall = var(50) = 1
triggerall = p2stateno != [4990,4998]
triggerall = !MoveContact
trigger1 = animelem = 5
trigger2 = animelem = 6
attr = S, SA
air.animtype = back
animtype = hard
damage = 35,8
priority = 7, Hit
guardflag = MA
pausetime =  12,12
guard.pausetime = 12,21
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-75
hitsound = S230,0
guardsound = S150,1
ground.type = high
ground.slidetime = 19
ground.hittime = 19
guard.velocity = -8
ground.velocity = -3.5,-4
air.velocity = -3.5,-6
getpower = 60,30
givepower = 5
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
fall=1
yaccel = .5
fall.recover = 0

[state 3200,varset]
type = varset
triggerall = time > 3
trigger1 = var(13) = [101,105]
trigger2 = var(13) = [341,345]
var(15) = 1

[state 3200,varset]
type = varset
triggerall = time > 3
trigger1 = var(13) = [121,125]
trigger2 = var(13) = [361,365]
var(15) = 2

[State 3200, 4]
type = ChangeState
trigger1 = var(15) = 1
trigger1 = animelemtime(4)>0 && animelemtime(8)<0
value = 2151
ctrl = 0

[State 3200, 4]
type = ChangeState
trigger1 = var(15) = 2
trigger1 = animelemtime(4)>0 && animelemtime(8)<0
value = 2251
ctrl = 0

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
trigger1 = animelemtime(4)>0 && animelemtime(8)<0
trigger1 = movecontact 
value = 2151

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1
;**********************************************
;魔幻之拳(近)第二式
;**********************************************
[StateDef 2151]
type = s
movetype = A
physics = s
anim = 2151
poweradd = ifelse(fvar(10)!=1,60,30)
velset = 0,0
ctrl = 0

[state 3200,varset]
type = varset
trigger1 = var(13) != 0
trigger1 = time = 0
var(13) = 0

[state 3200,varset]
type = varset
trigger1 = var(15) != 0
trigger1 = time = 0
var(15) = 0

[State 1220, Width 1]
type = Width
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(6) < 0
value = 15,0

[STate 3500]
type = PlaySNd
triggerall = fvar(10) = 0
trigger1 = Animelem = 3
value = 2995,ifelse(var(42)=0,11,55)
channel = 0

[STate 3500]
type = PlaySNd
triggerall = fvar(10) = 1
trigger1 = Animelem = 3
value = 2995,151
channel = 0

[state varset 1650]
type = varset
trigger1 = movecontact
trigger1 = animelem = 10
var(9) = 13

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 1
value = 40,0
volume = 100

[state 1650]
type = velset
trigger1 = animelem = 2
x=11

[state 1650]
type = velset
trigger1 = animelem = 3
x=8

[state 1650]
type = VelAdd
trigger1 = animelem = 3
x=.13

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = const(movement.yaccel)

[State 3200]
type = HitDef
triggerall = var(50) = 0
triggerall = p2stateno != [4990,4998]   
trigger1 = time = 0
attr = S, SA
air.animtype = back
animtype = hard
damage = 55,13
priority = 7, Hit
guardflag = MA
pausetime =  17,17
guard.pausetime = 17,17
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,-75
hitsound = S230,0
guardsound = S150,1
ground.type = high
ground.slidetime = 17
ground.hittime = 19
guard.velocity = -10
guard.cornerpush.veloff = -20
ground.velocity = -2.3,-7.5
airguard.velocity = -2.3,-6
air.velocity = -2.3,-6
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
fall=1
yaccel = .5
fall.recover = 0

[State 3200]
type = HitDef
triggerall = var(50) = 1
triggerall = p2stateno != [4990,4998]   
trigger1 = time = 0
attr = S, SA
air.animtype = back
animtype = hard
damage = 55,13
priority = 7, Hit
guardflag = MA
pausetime =  17,17
guard.pausetime = 17,17
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,-75
hitsound = S230,0
guardsound = S150,1
ground.type = high
ground.slidetime = 17
ground.hittime = 19
guard.velocity = -10
guard.cornerpush.veloff = -20
ground.velocity = -2.3,-7.5
airguard.velocity = -2.3,-6
air.velocity = -2.3,-6
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
fall=1
yaccel = .5
fall.recover = 0

[state 3200,varset]
type = varset
triggerall = time > 3
trigger1 = var(13) = [101,105]
trigger2 = var(13) = [341,345]
var(15) = 1

[state 3200,varset]
type = varset
triggerall = time > 3
trigger1 = var(13) = [121,125]
trigger2 = var(13) = [361,365]
var(15) = 2

[State 3200, 4]
type = ChangeState
triggerall = var(15) = 1
trigger1 = animelemtime(4)>0 && animelemtime(7)<0
value = 2152
ctrl = 0

[State 3200, 4]
type = ChangeState
triggerall = var(15) = 2
trigger1 = animelemtime(4)>0 && animelemtime(7)<0
value = 2252
ctrl = 0

[State 900, 4]
type = ChangeState
triggerall = var(59) != 0
trigger1 = movecontact 
value = 2152

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1
;**********************************************
;魔幻之拳(近)第三式
;**********************************************
[StateDef 2152]
type = s
movetype = A
physics = s
anim = 2152
poweradd = ifelse(fvar(10)!=1,60,30)
velset = 0,0
ctrl = 0

[State 1220, Width 1]
type = Width
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(8) < 0
value = 20,-10

[state 3200,varset]
type = varset
trigger1 = var(13) != 0
trigger1 = time = 0
var(13) = 0

[state 3200,varset]
type = varset
trigger1 = var(15) != 0
trigger1 = time = 0
var(15) = 0

[state varset 1650]
type = varset
trigger1 = movecontact
trigger1 = animelem = 7
var(9) = 13

[state varset 1650]
type = varset
trigger1 = movehit
var(27) = 50

[STate 3500]
type = PlaySNd
triggerall = fvar(10) = 0
trigger1 = Animelem = 3
value = 2995,ifelse(var(42)=0,12,51)
channel = 0

[STate 3500]
type = PlaySNd
triggerall = fvar(10) = 1
trigger1 = Animelem = 3
value = 2995,152
channel = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 1
value = 40,0
volume = 100

[state 1650]
type = velset
trigger1 = animelem = 1,<=2
x=8

[state 1650]
type = veladd
trigger1 = animelem = 3 ,<=7 
x=.23

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = const(movement.yaccel)

[State 3200]
type = HitDef  
trigger1 = time = 0
attr = S, SA
air.animtype = back
animtype = hard
damage = 50,8
priority = 7, Hit
guardflag = MA
pausetime =  14,14
guard.pausetime = 14,22
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-90
hitsound = S210,3
guardsound = S150,1
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -13
p2stateno = 4990
air.velocity = -1.4,ifelse(fvar(10)!=1,-8.7,-7.3)
getpower = ifelse(fvar(10)!=1,60,50),ifelse(fvar(10)!=1,30,15)
givepower = 5
fall=1
yaccel = .45
fall.recover = 0

[state 3200,varset]
type = varset
triggerall = fvar(10) = 1
triggerall = time > 3
trigger1 = var(13) = [101,105]
trigger2 = var(13) = [341,345]
var(15) = 1

[state 3200,varset]
type = varset
triggerall = fvar(10) = 1
triggerall = time > 3
trigger1 = var(13) = [121,125]
trigger2 = var(13) = [361,365]
var(15) = 2

[State 3200, 4]
type = ChangeState
triggerall = fvar(10) = 1
triggerall = var(15) = 1
trigger1 = animelemtime(6)>0 && animelemtime(8)<0
value = 2154
ctrl = 0

[State 3200, 4]
type = ChangeState
triggerall = fvar(10) = 1
triggerall = var(15) = 2
trigger1 = animelemtime(6)>0 && animelemtime(8)<0
value = 2254
ctrl = 0

;AI青龙
[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = power >= 3000
triggerall = movehit
triggerall = random<400
triggerall = p2bodydist x < 70
trigger1 = p2life > 450
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 25

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = power >= 2000
triggerall = movehit
triggerall = p2bodydist x < 150
triggerall = p2bodydist y < -50
trigger1 = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [100,105])||(var(55) = [110,115])
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = (var(55) = [80,86])||(var(55) = [105,109])||(var(55) = [115,119])
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 850

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = power >= 2000
triggerall = movehit
triggerall = p2bodydist x < 170
triggerall = p2bodydist y = [-50,-10]
trigger1 = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [105,109])||(var(55) = [115,119])
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = (var(55) = [80,86])||(var(55) = [105,109])||(var(55) = [115,119])
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 3250

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = power >= 1000
triggerall = random<400
triggerall = movehit
triggerall = p2bodydist x < 170
triggerall = p2bodydist y < -50
trigger1 = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [105,109])||(var(55) = [115,119])
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = (var(55) = [80,86])||(var(55) = [100,105])||(var(55) = [110,115])
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 850

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = power >= 1000
triggerall = movehit
triggerall = p2bodydist x < 150
triggerall = p2stateno = [5030,5072]
trigger1 = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [100,109])||(var(55) = [110,119])
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [100,109])||(var(55) = [110,119])
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = ifelse(random<100,40,ifelse(frontedgedist<120,3000,3150))

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = movehit
triggerall = random>700
trigger1 = AnimTime = 0
value = ifelse(random>700,1700,1702)

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = movehit
triggerall = random>700
trigger1 = AnimTime = 0
value = ifelse(random>700,ifelse(random<700,420,295),1510)

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = movehit
triggerall = p2bodydist x < 150
trigger1 = random > 700
trigger1 = AnimTime = 0
value = ifelse(random>700,1003,ifelse(random>500,1100,280))

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 0
triggerall = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = movehit
trigger1 = AnimTime = 0
value = ifelse(random>700,ifelse((p2bodydist x=[-30,35]),225,220),245)

;AI凤凰
[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,86])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = power >= 2000
triggerall = movehit
triggerall = p2bodydist x < 70
triggerall = p2bodydist y < -50
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 850

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = movehit
trigger1 = animelemtime(6)>0 && animelemtime(8)<0
value = 2154
ctrl = 0

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1

;**********************************************
;魔幻之拳(近)第四式(凤式)
;**********************************************
[StateDef 2154]
type = s
movetype = A
physics = s
anim = 2154
poweradd = ifelse(fvar(10)!=1,60,30)
velset = 0,0
ctrl = 0

[state varset 2154]
type = varset
trigger1 = movecontact
trigger1 = animelem = 7
var(9) = 13

[state varset 2154]
type = varset
trigger1 = movehit
var(27) = 50

[STate 2154]
type = PlaySNd
trigger1 = Animelem = 5
value = 2995,153
channel = 0

[STate 2154]
type = PlaySNd
trigger1 = Animelem = 5
value = 40,0
volume = 100

[state 2154]
type = velset
trigger1 = animelem = 6
x=4

[state 2154]
type = posadd
trigger1 = animelem = 3
x=5

[state 2154]
type = posadd
trigger1 = animelem = 6
x=9

[state 2154]
type = posadd
trigger1 = animelem = 2
trigger2 = animelem = 9
x=8

[State 1800, Explod]
type = Explod
trigger1 = AnimElemtime(2) = 3
trigger2 = AnimElemtime(6) = 1
anim = 706
ownpal = 1
pos = 0,0
postype = p1
sprpriority = 5
bindtime = 1

[State 3200]
type = HitDef  
trigger1 = time = 0
attr = S, SA
air.animtype = back
animtype = hard
damage = 80,8
priority = 7, Hit
guardflag = MA
pausetime =  14,14
guard.pausetime = 14,14
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,-90
hitsound = S210,3
guardsound = S150,1
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -3,-8.5
air.velocity = -3,-8.5
guard.velocity = -9
p2stateno = 4990
getpower = ifelse(fvar(10)!=1,60,50),ifelse(fvar(10)!=1,30,15)
givepower = 5
fall=1
yaccel = .40
fall.recover = 0

;AI凤凰
[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [80,86])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = power >= 3000
triggerall = movehit
triggerall = random<400
triggerall = p2bodydist x < 170
trigger1 = p2life > 450
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = ifelse(random<500,3020,4300)

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [80,86])||(var(55) = [105,109])||(var(55) = [115,119])
triggerall = power >= 2000
triggerall = movehit
triggerall = p2bodydist x < 170
triggerall = p2bodydist y < -50
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 850

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [40,43])||(var(55) = [60,64])||(var(55) = [80,86])||(var(55) = [105,109])||(var(55) = [115,119])
triggerall = power >= 2000
triggerall = movehit
triggerall = p2bodydist x < 170
triggerall = p2bodydist y = [-50,-10]
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 3030

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = power >= 1000
triggerall = (var(55) = [80,86])||(var(55) = [105,109])||(var(55) = [115,119])
triggerall = random<400
triggerall = movehit
triggerall = p2bodydist x < 170
triggerall = p2bodydist y < -50
trigger1 = p2life > 350
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = 850

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [40,43])||(var(55) = [60,64])||(var(55) = [80,86])||(var(55) = [100,105])||(var(55) = [110,115])
triggerall = power >= 1000
triggerall = movehit
triggerall = p2bodydist x < 150
triggerall = p2stateno = [5030,5072]
trigger1 = p2life > 250
trigger1 = AnimTime = 0
trigger2 = life < p2life
trigger2 = AnimTime = 0
value = ifelse(random<100,2400,3020)

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [40,43])||(var(55) = [60,64])||(var(55) = [80,86])||(var(55) = [106,109])||(var(55) = [116,119])
triggerall = movehit
triggerall = p2bodydist x < 150
triggerall = random>700
trigger1 = AnimTime = 0
value = ifelse(random>700,2400,ifelse(random>500,1150,1600))

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [40,43])||(var(55) = [60,64])||(var(55) = [80,86])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = movehit
trigger1 = AnimTime = 0
value = ifelse(((random>800)&&(p2bodydist x=[-10,60])),1090,ifelse(random>800,ifelse(p2bodydist x<40,1200,1150),2400))

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1
;**********************************************
;魔幻之拳(远)第一式
;**********************************************
[StateDef 2250]
type = s
movetype = A
physics = s
anim = 2250
poweradd = ifelse(fvar(10)!=1,60,30)
velset = 0,0
juggle = 0+var(7)
ctrl = 0

[state 3200,varset]
type = varset
trigger1 = var(13) != 0
trigger1 = time = 0
var(13) = 0

[state 3200,varset]
type = varset
trigger1 = var(15) != 0
trigger1 = time = 0
var(15) = 0

[STate 3500]
type = varset
trigger1 = time = 0
trigger1 = var(42) != 0
var(42) = 0

[STate 3500]
type = varset
trigger1 = time = 0
trigger1 = random < 500
var(42) = 1

[State 1220, Width 1]
type = Width
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(6) < 0
value = 15,0

[STate 3500]
type = PlaySNd
triggerall = fvar(10) = 0
trigger1 = Animelem = 2
value = 2995,ifelse(var(42)=0,10,54)
channel = 0

[STate 3500]
type = PlaySNd
triggerall = fvar(10) = 1
trigger1 = Animelem = 2
value = 2995,150
channel = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 1
value = 40,0
volume = 100

[state 1650]
type = velset
trigger1 = animelem = 2
trigger2 = animelem = 3
x=13

[state 1650]
type = veladd
trigger1 = animelem = 4,>=4 
x=.20

[State 370, 2]
type = nothitby
trigger1 = enemy,numhelper > 0
trigger1 = movehit
value = SAC
time = 1

[State 1650, 1]
type = ReversalDef
triggerall = var(9)<=0
trigger1 = animelem = 1, <= 4 
reversal.attr = SCA,NA,SA, AP,NP,SP,AA,HP,HA
hitflag = MAFPD
numhits = 0
pausetime = 10,10
sparkno = S733
hitsound = 6,0
p2stateno = 831

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = const(movement.yaccel)

[State 3200]
type = HitDef
triggerall = var(50) = 0
triggerall = p2stateno != [4990,4998]  
trigger1 = animelem = 4 
attr = S, SA
air.animtype = back
animtype = hard
damage = 30,10
priority = 7, Hit
guardflag = MA
pausetime =  17,17
guard.pausetime = 17,17
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-75
hitsound = S230,0
guardsound = S150,1
ground.type = high
ground.slidetime = 21
ground.hittime = 23
guard.velocity = -9
guard.cornerpush.veloff = -17
ground.velocity = -9,0
air.velocity = -3.5,-5
getpower = 0,0
givepower = 5
yaccel = .5
fall.recover = 0

[State 3200]
type = HitDef
triggerall = var(50) = 0
triggerall = p2stateno != [4990,4998]  
triggerall = !movecontact
trigger1 = animelem = 5
attr = S, SA
air.animtype = back
animtype = hard
damage = 80,8
priority = 7, Hit
guardflag = MA
pausetime =  17,17
guard.pausetime = 17,21
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-75
hitsound = S230,0
guardsound = S150,1
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -3,-4
air.velocity = -3.5,-6
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
fall=1
yaccel = .5
fall.recover = 0

[State 3200]
type = HitDef
triggerall = var(50) = 1
triggerall = p2stateno != [4990,4998]  
trigger1 = animelem = 4 
attr = S, SA
air.animtype = back
animtype = hard
damage = 30,10
priority = 7, Hit
guardflag = MA
pausetime =  17,17
guard.pausetime = 17,17
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-75
hitsound = S230,0
guardsound = S150,1
ground.type = high
ground.slidetime = 21
ground.hittime = 23
guard.velocity = -9
guard.cornerpush.veloff = -17
ground.velocity = -9,0
air.velocity = -3.5,-5
getpower = 0,0
givepower = 5
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
yaccel = .5
fall.recover = 0

[State 3200]
type = HitDef
triggerall = var(50) = 1
triggerall = p2stateno != [4990,4998]  
triggerall = !movecontact
trigger1 = animelem = 5
attr = S, SA
air.animtype = back
animtype = hard
damage = 80,8
priority = 7, Hit
guardflag = MA
pausetime =  17,17
guard.pausetime = 17,21
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-75
hitsound = S230,0
guardsound = S150,1
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -3,-4
air.velocity = -3.5,-6
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
fall=1
yaccel = .5
fall.recover = 0

[state 3200,varset]
type = varset
triggerall = time > 6
trigger1 = var(13) = [101,105]
trigger2 = var(13) = [341,345]
var(22) = 1

[state 3200,varset]
type = varset
triggerall = time > 6
trigger1 = var(13) = [121,125]
trigger2 = var(13) = [361,365]
var(22) = 2

[State 3200, 4]
type = ChangeState
trigger1 = var(22) = 1
trigger1 = animelemtime(4)>0 && animelemtime(8)<0
value = 2151
ctrl = 0

[State 3200, 4]
type = ChangeState
trigger1 = var(22) = 2
trigger1 = animelemtime(4)>0 && animelemtime(8)<0
value = 2251
ctrl = 0

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
trigger1 = movecontact 
value = 2151

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1
;**********************************************
;魔幻之拳(远)第二式
;**********************************************
[StateDef 2251]
type = s
movetype = A
physics = s
anim = 2251
poweradd = ifelse(fvar(10)!=1,60,30)
velset = 0,0
ctrl = 0

[state 3200,varset]
type = varset
trigger1 = var(13) != 0
trigger1 = time = 0
var(13) = 0

[state 3200,varset]
type = varset
trigger1 = var(15) != 0
trigger1 = time = 0
var(15) = 0

[State 1220, Width 1]
type = Width
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(6) < 0
value = 15,0

[STate 3500]
type = PlaySNd
triggerall = fvar(10) = 0
trigger1 = Animelem = 3
value = 2995,ifelse(var(42)=0,11,55)
channel = 0

[STate 3500]
type = PlaySNd
triggerall = fvar(10) = 1
trigger1 = Animelem = 3
value = 2995,151
channel = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 1
value = 40,0
volume = 100

[state 1650]
type = velset
trigger1 = animelem = 2
x=8

[state 1650]
type = velset
trigger1 = animelem = 3
x=15

[state 1650]
type = veladd
trigger1 = animelem = 3 
x=.23

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = const(movement.yaccel)

[State 3200]
type = HitDef
triggerall = var(50) = 0
triggerall = p2stateno != [4990,4998]   
trigger1 = time = 0
attr = S, SA
air.animtype = back
animtype = hard
damage = 60,12
priority = 7, Hit
guardflag = MA
pausetime =  12,12
guard.pausetime = 12,12
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,-75
hitsound = S230,0
guardsound = S150,1
ground.type = high
ground.slidetime = 19
ground.hittime = 19
guard.velocity = -12
guard.cornerpush.veloff = -17
ground.velocity = -3,-7.5
airguard.velocity = -2.3,-6
air.velocity = -3.5,-6
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
fall=1
fall.recover = 0
yaccel = .5

[State 3200]
type = HitDef
triggerall = var(50) = 1
triggerall = p2stateno != [4990,4998]   
trigger1 = time = 0
attr = S, SA
air.animtype = back
animtype = hard
damage = 60,12
priority = 7, Hit
guardflag = MA
pausetime =  12,12
guard.pausetime = 12,12
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,-75
hitsound = S230,0
guardsound = S150,1
ground.type = high
ground.slidetime = 19
ground.hittime = 19
guard.velocity = -12
guard.cornerpush.veloff = -17
ground.velocity = -3,-7.5
airguard.velocity = -2.3,-6
air.velocity = -3.5,-6
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
p2stateno=ifelse((p2statetype=A),5020,ifelse((p2statetype=C),5010,5000))
fall=1
fall.recover = 0
yaccel = .5

[state 3200,varset]
type = varset
triggerall = time > 6
trigger1 = var(13) = [101,105]
trigger2 = var(13) = [341,345]
var(15) = 1

[state 3200,varset]
type = varset
triggerall = time > 6
trigger1 = var(13) = [121,125]
trigger2 = var(13) = [361,365]
var(15) = 2

[State 3200, 4]
type = ChangeState
trigger1 = var(15) = 1
trigger1 = animelemtime(4)>0 && animelemtime(7)<0
value = 2152
ctrl = 0

[State 3200, 4]
type = ChangeState
trigger1 = var(15) = 2
trigger1 = animelemtime(4)>0 && animelemtime(7)<0
value = 2252
ctrl = 0

[State 900, 4]
type = ChangeState
triggerall = var(59) = 1
trigger1 = movecontact 
value = 2152

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0;站立
ctrl = 1
;**********************************************
;魔幻之拳(远)第三式
;**********************************************
[StateDef 2252]
type = s
movetype = A
physics = s
anim = 2252
poweradd = ifelse(fvar(10)!=1,60,30)
velset = 0,0
ctrl = 0

[State 1220, Width 1]
type = Width
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(8) < 0
value = 20,-10

[state 3200,varset]
type = varset
trigger1 = var(13) != 0
trigger1 = time = 0
var(13) = 0

[state 3200,varset]
type = varset
trigger1 = var(15) != 0
trigger1 = time = 0
var(15) = 0

[STate 3500]
type = PlaySNd
triggerall = fvar(10) = 0
trigger1 = Animelem = 3
value = 2995,ifelse(var(42)=0,12,51)
channel = 0

[STate 3500]
type = PlaySNd
triggerall = fvar(10) = 1
trigger1 = Animelem = 3
value = 2995,152
channel = 0

[STate 3500]
type = PlaySNd
trigger1 = Animelem = 1
value = 40,0
volume = 100

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 11
value = 2995,60
channel = 0

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 11
value = 999,2
channel = 1

[State 399, EnvShake]
type = EnvShake
trigger1 = animelem = 12
ignorehitpause = 1
persistent = 0
time = 20
freq = 100
ampl = -3
phase = 1

[State 3784]
type = Explod
trigger1 = Animelem = 12
ignorehitpause = 1 
anim = 395
pos = -25,-2
postype = p1
sprpriority = -3
bindtime = 33
ownpal = 1

[state 1650]
type = velset
trigger1 = animelem = 1,<=2
x=8

[state 1650]
type = veladd
trigger1 = animelem = 3 ,<=7 
x=.23

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = const(movement.yaccel)

[State 3200]
type = HitDef
triggerall = !movecontact||SysVar(0)  
trigger1 = time = 0
attr = S, SA
air.animtype = back
animtype = hard
damage = 60,8
priority = 7, Hit
guardflag = MA
pausetime =  12,12
guard.pausetime = 12,12
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-60)/2,-90
hitsound = S210,3
guardsound = S150,1
ground.type = high
ground.slidetime = 19
ground.hittime = 19
ground.velocity = -13
air.velocity = -3.5,-9
p2stateno = 4990
getpower = ifelse(fvar(10)!=1,60,30),ifelse(fvar(10)!=1,30,15)
givepower = 5
fall=1
yaccel = .5
fall.recover = 0

[state 195]
type = ctrlset
triggerall = fvar(14) = 0
trigger1 = animelem = 15
value = 1

[state 195]
type = varset
triggerall = fvar(14) = 1
trigger1 = animelem = 15
fvar(1) = 1

[state 3200,varset]
type = varset
triggerall = fvar(10) = 1
triggerall = time > 6
trigger1 = var(13) = [101,105]
trigger2 = var(13) = [341,345]
var(15) = 1

[state 3200,varset]
type = varset
triggerall = fvar(10) = 1
triggerall = time > 6
trigger1 = var(13) = [121,125]
trigger2 = var(13) = [361,365]
var(15) = 2

[State 3200, 4]
type = ChangeState
triggerall = fvar(10) = 1
triggerall = var(15) = 1
trigger1 = animelemtime(6)>0 && animelemtime(8)<0
value = 2154
ctrl = 0

[State 3200, 4]
type = ChangeState
triggerall = fvar(10) = 1
triggerall = var(15) = 2
trigger1 = animelemtime(6)>0 && animelemtime(8)<0
value = 2254
ctrl = 0

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;**********************************************
;魔幻之拳(远)第四式(凤式)
;**********************************************
[StateDef 2254]
type = s
movetype = A
physics = s
anim = 2254
poweradd = ifelse(fvar(10)!=1,60,30)
velset = 0,0
ctrl = 0

[state varset 2154]
type = varset
trigger1 = movecontact
trigger1 = animelem = 7
var(9) = 13

[state varset 2154]
type = varset
trigger1 = movehit
var(27) = 50

[STate 2154]
type = PlaySNd
trigger1 = Animelem = 5
value = 2995,153
channel = 0

[STate 2154]
type = PlaySNd
trigger1 = Animelem = 5
value = 40,0
volume = 100

[state 2154]
type = velset
trigger1 = animelem = 6
x=4

[state 2154]
type = posadd
trigger1 = animelem = 3
x=5

[state 2154]
type = posadd
trigger1 = animelem = 6
x=9

[state 2154]
type = posadd
trigger1 = animelem = 2
trigger2 = animelem = 9
x=8

[State 1800, Explod]
type = Explod
trigger1 = AnimElemtime(2) = 3
trigger2 = AnimElemtime(6) = 1
anim = 706
ownpal = 1
pos = 0,0
postype = p1
sprpriority = 5
bindtime = 1

[State 3200]
type = HitDef  
trigger1 = time = 0
attr = S, SA
air.animtype = back
animtype = hard
damage = 75,15
priority = 7, Hit
guardflag = MA
pausetime =  14,14
guard.pausetime = 14,14
sparkno = S736
guard.sparkno = S733
sparkxy = ((p2bodydist x)-40)/2,-90
hitsound = S210,3
guardsound = S150,1
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -4,-8
air.velocity = -4,-8
guard.velocity = -9
p2stateno = 4990
getpower = ifelse(fvar(10)!=1,60,50),ifelse(fvar(10)!=1,30,15)
givepower = 5
fall=1
yaccel = .5
fall.recover = 0

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 13
value = 2995,151
channel = 0

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 13
value = 999,2
channel = 1

[State 399, EnvShake]
type = EnvShake
trigger1 = animelem = 14
ignorehitpause = 1
persistent = 0
time = 20
freq = 100
ampl = -3
phase = 1

[State 3784]
type = Explod
trigger1 = Animelem = 14
ignorehitpause = 1 
anim = 395
pos = -25,-2
postype = p1
sprpriority = -3
bindtime = 33
ownpal = 1

[state 195]
type = ctrlset
triggerall = fvar(14) = 0
trigger1 = animelem = 15
value = 1

[state 195]
type = varset
triggerall = fvar(14) = 1
trigger1 = animelem = 15
fvar(1) = 1

[State 3200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[statedef 2201]
type = A
movetype = A
physics = N
juggle = 45
ctrl = 0
poweradd = 150
velset = 0,0
anim = 2201

[state 2201]
type = changestate
trigger1 = time = 0
value = 2200
ctrl = 0

[statedef 2200]
type = A
movetype = A
physics = N
juggle = 45
ctrl = 0
velset = 0,0
anim = 2200

[state 2200]
type = veladd
trigger1 = animelem = 1 ,>=1
x = 1

[State Gravity]
type = VelAdd
trigger1 = Pos Y < 0
y = const(movement.yaccel)

[state 2200]
type = hitdef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 1
trigger2 = animelem = 2
attr = S,SA
animtype = Heavy
damage = 100,5
priority = 7, Hit
guardflag = MA
pausetime = 12,12
guard.pausetime = 12,25
sparkno = S736
guard.sparkno = S733
sparkxy = 10,-75
hitsound = S210,0
guardsound = S150,0
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -2.5
air.velocity = -3.5,-6
getpower = 30,10
givepower = 10,5
fall = 1
yaccel = .5
fall.recover = 0


[State Land]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 1002
ctrl = 0




;**********************************************
;突击---罚 
;**********************************************
[StateDef 2400]
type = s
movetype = A
physics = s
anim = 100
poweradd = ifelse(fvar(10)!=1,60,30)
velset = 0,0
ctrl = 0

[State 1220, Width 1]
type = Width
trigger1 = 1
value = 20,-10

[state 3200,varset]
type = velset
trigger1 = 1
x = 5

[state 3200,varset]
type = velset
trigger1 = animelemtime(13)>=0
trigger1 = animelemtime(15)<0
x = 3

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = movehit
triggerall = p2bodydist x < 50
trigger1 = AnimTime = 0
value = ifelse(random>700,1080,ifelse(random>500,1100,280))

[State 3200, 4]
type = ChangeState
trigger1 = command = "B"
trigger1 = command = "C"
trigger1 = time > 3
value = 2408
ctrl = 0

[State 3200, 4]
type = ChangeState
trigger1 = command = "D"
trigger1 = time > 3
value = 2405
ctrl = 0

[State 3200, 4]
type = ChangeState
trigger1 = command = "C"
trigger1 = time > 3
value = 2402
ctrl = 0

[State 3200, 4]
type = ChangeState
trigger1 = Time = 40
trigger2 = command = "A"
value = 2403
ctrl = 0

[State 3200, 4]
type = ChangeState
trigger1 = Time >= 3
trigger1 = command = "B"
value = 2404
ctrl = 0

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = (var(55) = [40,43])||(var(55) = [60,64])||(var(55) = [80,86])||(var(55) = [100,109])||(var(55) = [110,119])
triggerall = p2bodydist x < 150
triggerall = p2statetype != A
trigger1 = Time > 3
value = ifelse((prevstateno=[225,428]),2405,2403)

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = fvar(10) = 1
triggerall = p2statetype = A
trigger1 = time > 3
trigger1 = p2bodydist x < 150
value = 2405
;**********************************************
;突击---罚----上段技 
;**********************************************
[StateDef 2405]
type = a
movetype = A
physics = n
anim = 2405
poweradd = ifelse(fvar(10)!=1,60,30)
ctrl = 0

[State 1220, Width 1]
type = Width
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(5) < 0
value = 15,-15

[State 1220, Width 1]
type = Width
trigger1 = AnimElemTime(5) >= 0 && AnimElemTime(8) < 0
value = 30,-30

[state 3200,varset]
type = velset
trigger1 = animelem = 2
x = 6
y = -6

[state varset 1650]
type = veladd
trigger1 = vel y != 0
y = .43

[state varset 1650]
type = pause
triggerall = time%2 = 0
trigger1 = time = [8,16]
trigger1 = p2movetype = h
trigger2 = movehit
time = 1

[state varset 1650]
type = playsnd
trigger1 = animelem = 3
value = 2405,0

[state 2200]
type = hitdef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = S,SA
animtype = Heavy
damage = 180,55
priority = 7, Hit
guardflag = HA
pausetime = 14,14
guard.pausetime = 14,15
guard.sparkno = S733
sparkno = S736
sparkxy = (p2bodydist x)/6-30,-65
hitsound = S240,0
guardsound = S150,1
ground.type = high
ground.slidetime = 39
ground.hittime = 39
ground.velocity = -5,-7
guard.velocity = -29
air.velocity = -3.5,-6
getpower = 30,10
givepower = 10,5
fall = 1
yaccel = .5
fall.recover = 0

[State 399, EnvShake]
type = EnvShake
trigger1 = movecontact= 1
ignorehitpause = 1
persistent = 0
time = 20
freq = 100
ampl = -3
phase = 1

[State 3200, 4]
type = ChangeState
trigger1 = pos y >= 45
trigger1 = vel y > 0
value = 2401


;**********************************************
;突击---罚----上段技 ---落地起身
;**********************************************
[StateDef 2401]
type = a
movetype = A
physics = n
anim = 2401
velset = 0,0
ctrl = 0

[STate 2998]
type = PlaySNd
trigger1 = Animelem = 2
value = 999,2
channel = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 395
pos = 0,10
postype = p1
sprpriority = -2
supermove = 1
bindtime = 1
ownpal = 1


[State 399, EnvShake]
type = EnvShake
trigger1 = Animelem = 2
ignorehitpause = 1
persistent = 0
time = 30
freq = 100
ampl = -4
phase = 1

[State 1220, Width 1]
type = Width
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(3) < 0
value = 30,-30

[state varset 1650]
type = posset
trigger1 = time = 0
y = 0

[State 3200, 4]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1

;**********************************************
;突击---罚----急停回避
;**********************************************
[StateDef 2402]
type = s
movetype = A
physics = n
anim = 2402
velset = 3,0
ctrl = 0

[State 1300,AfterImage]
type = AfterImage
trigger1 = Time = 0
time = 25
length = 13
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = 1,1,1
timegap = 2
trans = add1

[State 3200, 4]
type = posadd
trigger1 = animelem = 5
x = 10

[State 3200, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;**********************************************
;突击---罚----急停 
;**********************************************
[StateDef 2403]
type = s
movetype = A
physics = n
anim = 2403
velset = 3,0
ctrl = 0

[State 1300,AfterImage]
type = velset
trigger1 = 1
x = 3

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = power >= 3000
triggerall = p2statetype != A
triggerall = life<=300
triggerall = p2life >=400
triggerall = (var(55) = 60)||(var(55) = [80,81])||(var(55) = [100,103])||(var(55) = [110,119])
trigger1 = random < 400
trigger1 = animtime = 0
trigger1 = p2bodydist x < 40
value = 4600

[State 3200, 4]
type = ChangeState
triggerall = var(59) = 1
triggerall = p2statetype != A
trigger1 = animtime = 0
trigger1 = p2bodydist x < 40
value = ifelse(random<400,425,225)

[State 3200, 4]
type = ChangeState
trigger1 = animtime = 0
value = 1002
ctrl = 1

;**********************************************
;突击---罚----折颈 
;**********************************************
[StateDef 2404]
type = a
movetype = A
physics = n
anim = 2404
velset = 0,0
ctrl = 0

[state 2200]
type = hitdef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = S,SA
animtype = Heavy
damage = 50,0
priority = 7, Hit
pausetime = 0,0
guard.pausetime = 14,15
guard.sparkno = S733
sparkno = S736
sparkxy = 0,-65
hitsound = S920,0
guardsound = S150,0
ground.type = high
p2stateno = 2406
id = 2406
ground.slidetime = 39
ground.hittime = 39
getpower = 30,10
givepower = 10,5
fall = 1
yaccel = .5
fall.recover = 0

[State 399, EnvShake]
type = EnvShake
trigger1 = animelem= 9
ignorehitpause = 1
persistent = 0
time = 20
freq = 100
ampl = -5
phase = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 10
anim = 395
pos = 0,10
postype = p1
sprpriority = -2
supermove = 1
bindtime = 1
ownpal = 1

[State 3200, 4]
type = targetbind
trigger1 = numtarget(2406) != 0
trigger1 = anim = 2404
trigger1 = animelemtime(4) >= 0
trigger1 = animelemtime(5) < 0
pos = -7,-26

[State 3200, 4]
type = targetbind
trigger1 = numtarget(2406) != 0
trigger1 = anim = 2404
trigger1 = animelemtime(5) >= 0
trigger1 = animelemtime(7) < 0
pos = -17,-38

[State 3200, 4]
type = targetbind
trigger1 = numtarget(2406) != 0
trigger1 = anim = 2404
trigger1 = animelemtime(7) >= 0
trigger1 = animelemtime(8) < 0
pos = -7,-46

[State 3200, 4]
type = targetbind
trigger1 = anim = 2404
trigger1 = numtarget(2406) != 0
trigger1 = animelemtime(8) >= 0
trigger1 = animelemtime(9) < 0
pos = 7,-37

[State 3200, 4]
type = targetbind
trigger1 = numtarget(2406) != 0
trigger1 = anim = 2404
trigger1 = animelemtime(9) >= 0
trigger1 = animelemtime(10) < 0
pos = 7,-19

[State 3200, 4]
type = targetbind
trigger1 = anim = 2404
trigger1 = numtarget(2406) != 0
trigger1 = animelemtime(10) >= 0
trigger1 = animelemtime(11) < 0
pos = 7,5

[State 1300,AfterImage]
type = targetlifeadd
trigger1 = numtarget(2406) != 0
trigger1 = animelem = 9
value = -150

[State 1300,AfterImage]
type = veladd
trigger1 = animelemtime(2) >= 0
trigger1 = animelemtime(10) < 0
y = 0.24

[State 1300,AfterImage]
type = velset
trigger1 = animelem = 2
x = 2
y = -5

[State 1300,AfterImage]
type = velset
trigger1 = animelem = 10
x = 0
y = 0

[State 1300,AfterImage]
type = posset
trigger1 = animelem = 10
y = 0

[State 1300,AfterImage]
type = playsnd
trigger1 = animelem = 4
value = 2404,0

[State 1300,AfterImage]
type = playsnd
trigger1 = animelem = 10
value = 999,2

[State 3200, 4]
type = ChangeState
trigger1 = !movehit
trigger1 = animelem = 4
value = 2407

[State 3200, 4]
type = ChangeState
trigger1 = animtime = 0
value = 1002
ctrl = 1

;**********************************************
;突击---罚----折颈 
;**********************************************
[StateDef 2406]
type = s
movetype = H
physics = s
ctrl = 0

[State 1300,AfterImage]
type = changeanim2
trigger1 = time = 0
value = 2406

[State 1300,AfterImage]
type = posadd
trigger1 = animtime = 0
x = 45

[State 3200, 4]
type = selfState
trigger1 = animtime = 0
value = 5100
ctrl = 0

;**********************************************
;突击---罚----折颈洛
;**********************************************
[StateDef 2407]
type = a
movetype = a
anim = 2407
physics = n
value = 2，-5
ctrl = 0

[state 2200]
type = hitdef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = S,SA
animtype = Heavy
damage = 180,55
priority = 7, Hit
guardflag = HA
pausetime = 14,14
guard.pausetime = 14,15
guard.sparkno = S733
sparkno = S736
sparkxy = 0,-15
hitsound = S210,0
guardsound = S150,0
ground.type = high
ground.slidetime = 39
ground.hittime = 39
ground.velocity = -3,-7
guard.velocity = -15
air.velocity = -1.5,-6
getpower = 30,10
givepower = 10,5
fall = 1
yaccel = .5
fall.recover = 0

[State 1300,AfterImage]
type = veladd
trigger1 = animelemtime(1) >= 0
trigger1 = animelemtime(10) < 0
y = 0.3

[State 1300,AfterImage]
type = velset
trigger1 = animelem = 10
y = 0
x = 1

[State 1300,AfterImage]
type = velset
trigger1 = animelem = 11
y = 0
x = 0

[State 1300,AfterImage]
type = posset
trigger1 = animelem = 10
y = 0

[State 399, EnvShake]
type = EnvShake
trigger1 = animelem= 10
ignorehitpause = 1
persistent = 0
time = 20
freq = 100
ampl = -5
phase = 1

[State 1200, Explod]
type = Explod
trigger1 = AnimElem = 10
anim = 395
pos = 0,10
postype = p1
sprpriority = -2
supermove = 1
bindtime = 1
ownpal = 1

[State 1300,AfterImage]
type = playsnd
trigger1 = animelem = 10
value = 999,2

[State 1300,AfterImage]
type = playsnd
trigger1 = animelem = 10
value = 5000,10

[State 3200, 4]
type = selfState
trigger1 = animtime = 0
value = 10
ctrl = 1

;**********************************************
;突击---疾风连击 
;**********************************************
[StateDef 2408]
type = S
movetype = A
physics = s
velset = 9,0
anim = 330
poweradd = ifelse(fvar(10)!=1,60,30)
ctrl = 0

[state posadd]
type = posadd
trigger1 = animelem = 8
trigger2 = animelem = 9
x = 5

[state posadd]
type = posadd
trigger1 = animelem = 12
x = -20

[state posadd]
type = posadd
trigger1 = animelem = 13
x = -33

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 3
trigger1 = random <= 400
value = 2995,150

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 7
value = 2995,151

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 3
trigger2 = animelem = 7
value = 600,ifelse((animelem = 3),0,1)
volume = 160

[state 2200]
type = hitdef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 5
attr = S,SA
animtype = Heavy
damage = 30,15
priority = 7, Hit
guardflag = HA
pausetime = 14,14
guard.pausetime = 14,15
guard.sparkno = S733
sparkno = S736
sparkxy = -15,-70
hitsound = S210,3
guardsound = S150,0
ground.type = low
ground.slidetime = 23
ground.hittime = 25
ground.velocity = -6
guard.velocity = -6
air.velocity = -1.5,-6
getpower = 30,10
givepower = 10,5
air.fall = 1
yaccel = .5
fall.recover = 0

[state 2200]
type = hitdef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 9
attr = S,SA
animtype = Heavy
damage = 50,15
priority = 7, Hit
guardflag = HA
pausetime = 14,14
guard.pausetime = 14,15
guard.sparkno = S733
sparkno = S736
sparkxy = -20,-75
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 25
ground.hittime = 28
ground.velocity = -7
guard.velocity = -7
air.velocity = -1.5,-6
getpower = 30,10
givepower = 10,5
air.fall = 1
yaccel = .5
fall.recover = 0

[State 3200, 4]
type = varset
trigger1 = time = 0
var(15) = 0

[State 3200, 4]
type = varset
triggerall = animelemTime(6) >= 0
triggerall = animelemTime(10) < 4
trigger1 = command = "A"
trigger2 = command = "B"
trigger3 = command = "C"
trigger4 = command = "D"
var(15) = 1

[State 3200, 4]
type = ChangeState
trigger1 = animelemTime(10) = 6
trigger1 = var(15) = 1
value = 2409
ctrl = 0

[State 3200, 4]
type = selfState
trigger1 = animtime = 0
value = 0
ctrl = 1

;**********************************************
;突击---疾风追击 
;**********************************************
[StateDef 2409]
type = S
movetype = A
physics = s
velset = 0,0
anim = 335
poweradd = ifelse(fvar(10)!=1,60,30)
ctrl = 0

[state posadd]
type = posadd
trigger1 = animelem = 5
x = 10

[state posadd]
type = velset
trigger1 = animelem = 5
x = 5

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 5
value = 2995,152

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 11
value = 2995,153

[State 210, 2]
type = PlaySnd
trigger1 = animelem = 5
trigger2 = animelem = 11
value = 600,ifelse((animelem = 3),0,1)
volume = 160

[state 2200]
type = hitdef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 7
attr = S,SA
animtype = Heavy
damage = 30,15
priority = 7, Hit
guardflag = HA
pausetime = 14,14
guard.pausetime = 14,15
guard.sparkno = S733
sparkno = S736
sparkxy = -20,-65
hitsound = S210,3
guardsound = S150,0
ground.type = low
ground.slidetime = 21
ground.hittime = 23
ground.velocity = -7
guard.velocity = -7
air.velocity = -1.5,-6
getpower = 30,10
givepower = 10,5
air.fall = 1
yaccel = .5
fall.recover = 0

[state 2200]
type = hitdef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = animelem = 12
attr = S,SA
animtype = Heavy
damage = 60,15
priority = 7, Hit
guardflag = HA
pausetime = 14,14
guard.pausetime = 14,15
guard.sparkno = S733
sparkno = S736
sparkxy = -20,-65
hitsound = S210,3
guardsound = S150,0
ground.type = high
ground.slidetime = 39
ground.hittime = 39
ground.velocity = -3,-7
guard.velocity = -15
air.velocity = -1.5,-6
getpower = 30,10
givepower = 10,5
fall = 1
yaccel = .5
fall.recover = 0

[State 3200, 4]
type = selfState
trigger1 = animtime = 0
value = 0
ctrl = 1
;***************************************************
;龙牙箭
;***************************************************
[statedef 2500]
type = A
movetype = A
physics = N
juggle = 45
ctrl = 0
poweradd = 150
velset = 0,0
anim = 2201

[state 2201]
type = changestate
trigger1 = time = 0
value = 2505
ctrl = 0

[statedef 2505]
type = A
movetype = A
physics = N
juggle = 45
ctrl = 0
velset = 0,0
anim = 2505

[state 2206]
type = velset
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
x = 6

[State Gravity]
type = VelAdd
trigger1 = 1
y = const(movement.yaccel)
x = .85

[State Land]
type = ChangeState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 2510
ctrl = 0

[statedef 2510]
type = S
movetype = A
physics = S
juggle = 45
ctrl = 0
velset = 0,0
anim = 2510

[state 955]
type = MakeDust
trigger1 = time = 1
pos = -10,0

[state 2206]
type = playsnd
trigger1 = time = 0
value = 40,0

[state 2206]
type = ctrlset
triggerall = fvar(14) = 0
trigger1 = time = 2
value = 1

[state 2206]
type = varset
triggerall = fvar(14) = 1
trigger1 = time = 2
fvar(1) = 1

[state 2206]
type = posset
trigger1 = 1
y = 0

[State Land]
type = ChangeState
trigger1 = animtime = 0
value = 0;站立
ctrl = 1

;***************************************************
;龙牙刃闪
;***************************************************
[statedef 2600]
type = S
movetype = A
physics = S
juggle = 5
ctrl = 0
velset = 0,0
sprpriority = -5
anim = 2600

[state 2206]
type = playsnd
trigger1 = time = 0
value = 40,0

[state 2206]
type = posset
trigger1 = pos y > 0
trigger1 = time = 0
y = 0

[state hitdef]
type = hitdef
triggerall = time <= 35
trigger1 = animelem = 3
trigger2 = animelem = 4
attr = A,SA
damage = 15,10
getpower = ifelse(fvar(10)!=1,70,35),ifelse(fvar(10)!=1,30,15)
animtype = high
guardflag = HA
hitflag = MAF
priority = 7,Hit
pausetime = 10,10
sparkno = S736
guard.pausetime = 10,10
guard.sparkno = S731
sparkxy = 0,-65
hitsound = S220,0
guardsound = S150,0
ground.type = high
ground.slidetime = 16
ground.hittime = 17
ground.velocity = 6
guard.velocity = 8
ground.cornerpush.veloff = 12
airguard.velocity = 6,-3
air.type = low
air.velocity = 4,-3
air.hittime = 15
fall.recover = 0
id = 2600
palfx.time = 55
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15

[state 2200]
type = hitdef
triggerall = time <= 35
trigger1 = animelem = 6
trigger2 = animelem = 7
attr = S,SA
animtype = Heavy
damage = 15,5
priority = 7, Hit
guardflag = HA
hitflag = MAFP
pausetime = 5,5
guard.pausetime = 7,7
guard.sparkno = S733
sparkno = S736
sparkxy = 0,-65
hitsound = S220,0
guardsound = S150,0
ground.type = low
ground.slidetime = 24
ground.hittime = 24
ground.velocity = -10
guard.velocity = -15
ground.cornerpush.veloff = -5
air.velocity = -1.5,-6
getpower = 30,10
givepower = 10,5
air.fall = 1
yaccel = .5
fall.recover = 0
id = 2601
palfx.time = 55
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15

[state 2200]
type = hitdef
triggerall = time > 35
trigger1 = animelem = 6
trigger2 = animelem = 7
attr = S,SA
animtype = Heavy
damage = 20,5
priority = 7, Hit
guardflag = HA
hitflag = MAFP
pausetime = 5,5
guard.pausetime = 7,7
guard.sparkno = S733
sparkno = S736
sparkxy = 0,-65
hitsound = S220,0
guardsound = S150,0
ground.type = low
ground.slidetime = 24
ground.hittime = 24
ground.velocity = -2,-7
guard.velocity = -15
ground.cornerpush.veloff = -5
air.velocity = -1.5,-7
getpower = 30,10
givepower = 10,5
air.fall = 1
fall = 1
yaccel = .5
fall.recover = 0
id = 2602
palfx.time = 55
palfx.add = 100,100,180
palfx.mul = 256,256,256
palfx.sinadd = -80,-80,-80,9
palfx.invertall = 1
palfx.color = 15

[State Snd]
type = PlaySnd
triggerall =time%15 = 0
trigger1 = numTarget(2600)>0
trigger2 = numTarget(2601)>0
trigger3 = numTarget(2602)>0
value = 4040,2

[State 1200, Explod]
type = Explod
trigger1 =time%15 = 0
trigger1 = random < 300
anim = 6211
ID = 6211
velocity = 0,0
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = Explod
trigger1 =time%30 = 0
trigger1 = random < 300
anim = 6212
ID = 6212
velocity = 0,0
pos = 0,0
sprpriority = 3
ignorehitpause = 1
ownpal = 1

[State 1200, Explod]
type = Explod
triggerall = numexplod(6215) = 0
trigger1 = numTarget(2600)>0
trigger2 = numTarget(2602)>0
anim = 6215
ID = 6215
pos = 0,0
postype = p2
bindtime = 100
sprpriority = 3
ownpal = 1

[State Land]
type = ChangeState
trigger1 =animelemtime(7) >= 5
trigger1 = time >= 40
value = 0;站立
ctrl = 1

;***************************************************
;反击A
;***************************************************
[statedef 2950]
type = S
movetype = A
physics = S
ctrl = 0
poweradd = -500
velset = 0,0
anim = 195

[State 3784]
type = Explod
trigger1 = animelemtime(2) = 2
ignorehitpause = 1 
persistent = 0
anim = 1500
pos = 0,0
supermove = 1
pausemovetime = 100
postype = p1
sprpriority = 2
bindtime = 33
ownpal = 1

[State 399, -2]
type = EnvShake
trigger1 = animelemtime(6) = 2
ignorehitpause = 1
persistent = 0
time = 20
freq = 100
ampl = -3
phase = 1

[State 3784]
type = Explod
trigger1 = animelemtime(6) = 2
ignorehitpause = 1 
anim = 395
pos = -25,-2
supermove = 1
pausemovetime = 100
postype = p1
sprpriority = -3
bindtime = 33
ownpal = 1

[STate 1395]
type = PlaySNd
trigger1 = animelemtime(2) = 2
value = 2995,151
volume = 70

[STate 1395]
type = PlaySNd
trigger1 = animelemtime(2) = 2
value = 999,2
volume = 170

[State 3875, 慢镜头]
type = Pause 
trigger1 = animelem = 2
time = 55
movetime = 55
ignorehitpause = 1

[State 3875, 慢镜头]
type = nothitby
trigger1 = 1
time = 23
value = SAC
ignorehitpause = 1

[state 2201]
type = changestate
trigger1 = time >= 40
value = 2951
ctrl = 0

[statedef 2951]
type = S
movetype = A
physics = S
ctrl = 0
velset = 0,0
anim = 2951

[State 399, -2]
type = statetypeset
trigger1 = animelem = 4
statetype = A
physics = N

[State 399, -2]
type = velset
trigger1 = animelem = 4
x = 3
y = -3

[State 399, -2]
type = veladd
trigger1 = vel y != 0
y = .2

[State 399, -2]
type = EnvShake
trigger1 = movecontact
ignorehitpause = 1
persistent = 0
time = 30
freq = 100
ampl = -5
phase = 1

[state 2200]
type = hitdef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = S,SA
animtype = Heavy
damage = 180,55
priority = 7, Hit
guardflag = HA
pausetime = 14,14
guard.pausetime = 14,15
guard.sparkno = S733
sparkno = S736
sparkxy = (p2bodydist x)/6-30,-65
hitsound = S240,0
guardsound = S150,1
ground.type = high
ground.slidetime = 39
ground.hittime = 39
ground.velocity = -5,-7
guard.velocity = -29
air.velocity = -3.5,-6
getpower = 30,10
givepower = 10,5
fall = 1
yaccel = .5
fall.recover = 0

[STate 1395]
type = PlaySNd
trigger1 = animelemtime(3) = 2
value = 2405,0

[STate 1395]
type = PlaySNd
trigger1 = animelemtime(4) = 0
value = 600,1
volume = 70

[State 3875, 慢镜头]
type = nothitby
trigger1 = 1
time = 23
value = SAC
ignorehitpause = 1

[state 2201]
type = changestate
trigger1 = pos y >= 60
trigger1 = vel y > 0
value = 2952
ctrl = 0

[statedef 2952]
type = S
movetype = A
physics = S
ctrl = 0
velset = 0,0
anim = 2952

[STate 1395]
type = PlaySNd
trigger1 = time = 0
value = 999,2
volume = 70

[State 399, -2]
type = EnvShake
trigger1 = time = 0
ignorehitpause = 1
persistent = 0
time = 30
freq = 100
ampl = -3
phase = 1

[STate 1395]
type = posset
trigger1 = pos y != 0
y = 0

[State 3784]
type = Explod
trigger1 = time = 0
ignorehitpause = 1 
anim = 395
pos = 0,0
postype = p1
sprpriority = -3
ownpal = 1

[state 2201]
type = changestate
trigger1 = animtime = 0
value = 11
ctrl = 1
;***************************************************
;反击B
;***************************************************
[statedef 2955]
type = S
movetype = A
physics = S
ctrl = 0
poweradd = -500
velset = 0,0
anim = 195

[State 3784]
type = Explod
trigger1 = animelemtime(2) = 2
ignorehitpause = 1 
persistent = 0
anim = 1500
pos = 0,0
supermove = 1
pausemovetime = 100
postype = p1
sprpriority = 2
bindtime = 33
ownpal = 1

[State 399, -2]
type = EnvShake
trigger1 = animelemtime(6) = 2
ignorehitpause = 1
persistent = 0
time = 20
freq = 100
ampl = -3
phase = 1

[State 3784]
type = Explod
trigger1 = animelemtime(6) = 2
ignorehitpause = 1 
anim = 395
pos = -25,-2
supermove = 1
pausemovetime = 100
postype = p1
sprpriority = -3
bindtime = 33
ownpal = 1

[STate 1395]
type = PlaySNd
trigger1 = animelemtime(2) = 2
value = 2995,151
volume = 70

[STate 1395]
type = PlaySNd
trigger1 = animelemtime(2) = 2
value = 999,2
volume = 170

[State 3875, 慢镜头]
type = Pause 
trigger1 = animelem = 2
time = 55
movetime = 55
ignorehitpause = 1

[State 3875, 慢镜头]
type = nothitby
trigger1 = 1
time = 23
value = SAC
ignorehitpause = 1

[state 2201]
type = changestate
trigger1 = time >= 40
value = 2956
ctrl = 0

[statedef 2956]
type = S
movetype = A
physics = S
ctrl = 0
velset = 0,0
anim = 2956

[State 399, -2]
type = statetypeset
trigger1 = animelem = 5
statetype = A
physics = N

[State 399, -2]
type = velset
trigger1 = animelem = 5
x = 0
y = -9

[State 399, -2]
type = veladd
trigger1 = vel y != 0
y = .4

[State 399, -2]
type = EnvShake
trigger1 = movecontact
ignorehitpause = 1
persistent = 0
time = 30
freq = 100
ampl = -3
phase = 1

[state 2200]
type = hitdef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = time = 0
attr = S,SA
animtype = Heavy
damage = 120,45
priority = 7, Hit
guardflag = HA
pausetime = 14,14
guard.pausetime = 14,15
guard.sparkno = S733
sparkno = S736
sparkxy = (p2bodydist x)/6-30,-65
hitsound = S240,0
guardsound = S150,1
ground.type = high
ground.slidetime = 39
ground.hittime = 39
ground.velocity = -1,-8
guard.velocity = -29
air.velocity = -1.5,-8
getpower = 30,10
givepower = 30,10
fall = 1
yaccel = .5
fall.recover = 0

[STate 1395]
type = PlaySNd
trigger1 = animelemtime(3) = 2
value = 2995,152

[STate 1395]
type = PlaySNd
trigger1 = animelemtime(5) = 2
value = 600,1
volume = 70

[State 3875, 慢镜头]
type = nothitby
trigger1 = 1
time = 23
value = SAC
ignorehitpause = 1

[state 2201]
type = changestate
trigger1 = pos y >= 0
trigger1 = vel y > 0
value = 2957
ctrl = 0

[statedef 2957]
type = S
movetype = A
physics = S
ctrl = 0
velset = 0,0
anim = 2957

[STate 1395]
type = PlaySNd
trigger1 = time = 0
value = 47,0
volume = 70

[STate 1395]
type = posset
trigger1 = pos y != 0
y = 0

[State 3784]
type = Explod
trigger1 = time = 0
ignorehitpause = 1 
anim = 706
facing = -1
pos = -10,0
postype = p1
sprpriority = -3
ownpal = 1

[state 2201]
type = changestate
trigger1 = animtime = 0
value = 11
ctrl = 1
;=====================================================================
晕眩
;=====================================================================
;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 15020]
type    = A
movetype= I
physics = N
velset = 0,0

[state width]
type = width
trigger1 = 1
player = 30,20
edge = 30,20

[state nothitby]
type = nothitby
trigger1 = 1
value = sac
time = 1

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
value = 5031

[State 810, 2]
type = DestroySelf
trigger1 = Time >= 0

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
value = 5051

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = playsnd
trigger1 = Time = 0
value = 16000,ifelse(random<500,15,17)

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020, 5]
type = SelfState
trigger1 = HitShakeOver
value = 15030

[State 5020, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5020, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5020, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 15030]
type    = A
movetype= I
physics = N
ctrl = 0

[state width]
type = width
trigger1 = 1
player = 30,20
edge = 30,20

[state nothitby]
type = nothitby
trigger1 = 1
value = sac
time = 1

[State 810, 2]
type = DestroySelf
trigger1 = Time >= 0

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = VelSet
trigger1 = Time = 0
x = -1
y = ifelse(vel y<0,(vel y),-5)

[State 5030, 4]
type = ChangeState
trigger1 = Vel Y > 0    ;Hit ground
trigger1 = Pos Y >= 10  ;.
value = 15050 ;HITA_FALL

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 15050]
type    = A
movetype= I
physics = N

[state width]
type = width
trigger1 = 1
player = 30,20
edge = 30,20

[state nothitby]
type = nothitby
trigger1 = 1
value = sac
time = 1

[State 810, 2]
type = DestroySelf
trigger1 = Time >= 0

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != [5035,5037]
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = [5036,5037]
value = anim+20

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = 5060
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 6]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 15100 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 15100]
type    = L
movetype= I
physics = N

[state width]
type = width
trigger1 = 1
player = 30,20
edge = 30,20

[state nothitby]
type = nothitby
trigger1 = 1
value = sac
time = 1

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = anim = 5100
value = ifelse(random>800,5100,5105)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 15101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 15101]
type    = L
movetype= I
physics = N

[state width]
type = width
trigger1 = 1
player = 30,20
edge = 30,20

[state nothitby]
type = nothitby
trigger1 = 1
value = sac
time = 1

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 15110

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 15110]
type    = L
movetype= I
physics = N

[state width]
type = width
trigger1 = 1
player = 30,20
edge = 30,20

[state nothitby]
type = nothitby
trigger1 = 1
value = sac
time = 1

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

[State 5101, 6] ;Hit ground
type = ChangeState
trigger1 = time > 60
value = 15115

[Statedef 15115]
type    = L
movetype= I
physics = N
sprpriority = 2

[State 3784]
type = Explod
trigger1 = time = 7
ignorehitpause = 1 
anim = 5306
id = 5306
facing = 1
pos = -23,-71
bindtime = 155
removetime = 155
postype = p1
sprpriority = 3
ownpal = 1

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = playsnd
trigger1 = Time = 7
value = 16000,130

[state width]
type = width
trigger1 = 1
player = 30,20
edge = 30,20

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = playsnd
trigger1 = Time = 3
value = 16000,12

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = playsnd
trigger1 = time = 46
trigger2 = time = 106
value = 16000,31

[state nothitby]
type = nothitby
trigger1 = 1
value = sac
time = 5

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = time = 0
value = 5305

[State 5101, 6] ;Hit ground
type = ChangeState
trigger1 = random <500
trigger1 = time = 95
value = 15125

[State 5101, 6] ;Hit ground
type = ChangeState
trigger1 = time > 160
value = 11
ctrl = 1

[Statedef 15200]
type    = S
movetype= I
physics = S
velset = -10,0
sprpriority = 2

[state posset]
type = velset
trigger1 = time = 1
x = -10

[state posset]
type = velset
trigger1 = animelemtime(3) >= 0
trigger1 = animelemtime(5) < 2
x = -1

[state posset]
type = pause
trigger1 = animelemtime(2) >= 0
trigger1 = animelemtime(5) < 2
time = 1

[state posset]
type = posset
trigger1 = pos y != 0
y = 0

[State 3784]
type = Explod
trigger1 = animelemtime(5) = 5
ignorehitpause = 1 
anim = 5306
id = 5306
facing = 1
pos = -23,-71
bindtime = 155
removetime = 155
postype = p1
sprpriority = 3
ownpal = 1

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = playsnd
trigger1 = animelemtime(5) = 5
value = 16000,130

[state width]
type = width
trigger1 = 1
player = 30,20
edge = 30,20

[State 5020, 3] ;
type = playsnd
trigger1 = animelemtime(1) = 5
value = 16000,12

[State 5020, 3] ;
type = playsnd
trigger1 = animelemtime(5) = 2
value = 16000,8

[State 5020, 3] ;
type = playsnd
trigger1 = time = 81
trigger2 = time = 141
value = 16000,31

[state nothitby]
type = nothitby
trigger1 = 1
value = sac
time = 5

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = time = 0
value = 5307

[State 5101, 6] ;Hit ground
type = ChangeState
trigger1 = random <500
trigger1 = time = 130
value = 15125

[State 5101, 6] ;Hit ground
type = ChangeState
trigger1 = time > 195
value = 11
ctrl = 1

[Statedef 15125]
type    = L
movetype= I
physics = N
sprpriority = 2

[state removeexplod]
type = removeexplod
trigger1 = time = 0
id = 5306

[State 3784]
type = Explod
trigger1 = time = 0
ignorehitpause = 1 
anim = 5306
facing = 1
pos = 5,-100
bindtime = 155
removetime = 155
postype = p1
sprpriority = 3
ownpal = 1

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = playsnd
trigger1 = Time = 0
value = 16000,130

[state width]
type = width
trigger1 = 1
player = 30,20
edge = 30,20

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = playsnd
trigger1 = Time = 0
value = 16000,9

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = playsnd
trigger1 = time = 40
trigger2 = time = 100
value = 16000,31

[state nothitby]
type = nothitby
trigger1 = 1
value = sac
time = 5

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = time = 0
value = 5308

[State 5101, 6] ;Hit ground
type = ChangeState
trigger1 = time > 190
value = 0
ctrl = 1

;===================================================
;屁股被打
;=====================================================
[Statedef 5600]
type    = S
movetype= H
physics = S
velset = 0,0
sprpriority = -2

[State -2]
type = AssertSpecial
trigger1 = 1
flag = noko
ignorehitpause = 1

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = turn
trigger1 = p2bodydist x > -5

[state width]
type = width
trigger1 = 1
player = 10,10
edge = 10,10

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = statetypeset
trigger1 = Time = 1
movetype= I

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = playsnd
trigger1 = fvar(10) != 1
trigger1 = Time = 0
value = 5000,ifelse(random<500,2,3)

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = playsnd
trigger1 = fvar(10) = 1
trigger1 = Time = 0
value = 5000,12

[State 5001, 1]
type = posSet
trigger1 = pos y != 0
y = 0

[state nothitby]
type = nothitby
trigger1 = 1
value = sac
time = 5

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
ignorehitpause=1
trigger1 = 1
value = 5600

[State 5101, 6] ;Hit ground
type = selfState
trigger1 = time > 12
value = 5601

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

[Statedef 5601]
type    = S
movetype= I
physics = S
anim = 5600
sprpriority = 2

[state width]
type = width
trigger1 = 1
player = 10,10
edge = 10,10

[state nothitby]
type = nothitby
trigger1 = animelemtime(1) >= 0
trigger1 = animelemtime(6) < 0
value = sac
time = 2

[State 5001, 1]
type = VelSet
trigger1 = Time = 0
x = 11
y = -4

[State 5001, 1]
type = Veladd
trigger1 = animelemtime(1) >= 0
trigger1 = animelemtime(3) < 0
y = .45

[State 5001, 1]
type = VelSet
trigger1 = animelem = 3
x = 0
y = 0

[State 5001, 1]
type = posset
trigger1 = animelem = 3
y = 0

[State 5001, 1]
type = posadd
trigger1 = animelem = 4
x = 16

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = playsnd
trigger1 = animelem = 3
trigger2 = animelem = 4
value = 47,0

[State 280, ARMOR]
type = HitOverride
triggerall = var(59) = 0
triggerall = animelemtime(6) >= 0
triggerall = animelemtime(6) <= 99
trigger1 = command = "justfwd"
time = 20
attr = SCA, AA, AP
stateno = 162

[State 280, ARMOR]
type = HitOverride
triggerall = var(59) = 0
triggerall = animelemtime(6) >= 0
triggerall = animelemtime(6) <= 99
trigger1 = command = "justdown"
time = 20
attr = SCA, AA, AP
stateno = 167

[State 280, ARMOR]
type = HitOverride
triggerall = var(59) != 0
trigger1 = animelemtime(6) >= 0
trigger1 = animelemtime(6) <= 99
trigger1 = (var(55) = [20,21])||(var(55) = [40,43])||(var(55) = [60,65])||(var(55) = [80,87])||(var(55) = [100,109])||(var(55) = [110,119])
time = 20
attr = SCA, AA, AP
stateno = ifelse(random<500,162,167)

[State 5101, 6] ;Hit ground
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
